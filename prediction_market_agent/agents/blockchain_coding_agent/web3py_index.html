

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" />
  <meta name="readthedocs-addons-api-version" content="1"><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="Python Web3 SDK for Ethereum and EVM blockchains" name="description" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>web3.py 7.6.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/toggle.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/banner.css" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js"></script>
      <script src="_static/doctools.js"></script>
      <script src="_static/sphinx_highlight.js"></script>
      <script src="_static/js/matomo.js"></script>
      <script src="_static/js/toggle.js"></script>
    <script src="_static/js/theme.js"></script>
    <script src="_static/js/versions.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="#" class="icon icon-home">
            web3.py
          </a>
              <div class="switch-menus">
                <div class="version-switch"></div>
                <div class="language-switch"></div>
              </div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Intro</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-quickstart">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-overview">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-release_notes">Release Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-providers">Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-web3.eth.account">Accounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-transactions">Transactions</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-web3.contract">Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-filters">Events and Logs</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-middleware">Middleware</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-internals">Web3 Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-ens_overview">Ethereum Name Service (ENS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-migration">Migration Guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-web3.main">Web3 API</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-web3.eth">web3.eth API</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-web3.beacon">Beacon API</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-web3.net">Net API</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-web3.geth">Geth API</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-web3.tracing">Tracing API</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-web3.utils">Utils</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-gas_price">Gas Price API</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-ens">ENS API</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-constants">Constants</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Community</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="#document-resources">Resources and Learning Material</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-contributing">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="#document-code_of_conduct">Code of Conduct</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">web3.py</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="#" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">web3.py 7.6.0 documentation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gm">
<h1>gm<a class="headerlink" href="#gm" title="Link to this heading">ÔÉÅ</a></h1>
<img alt="Banner Image" src="_images/banner-snek.jpg" />
<p><strong>web3.py</strong> is a Python library for interacting with Ethereum.</p>
<p>It‚Äôs commonly found in <a class="reference external" href="https://ethereum.org/dapps/">decentralized apps (dapps)</a> to help with
sending transactions, interacting with smart contracts, reading
block data, and a variety of other use cases.</p>
<p>For project updates, follow <a class="reference external" href="https://twitter.com/EthereumPython">&#64;EthereumPython</a> and sign up
for new post notifications on the <a class="reference external" href="https://snakecharmers.ethereum.org/">blog</a>.</p>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading">ÔÉÅ</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>üëã Brand new to Ethereum?</p>
<ol class="arabic simple" start="0">
<li><p>Don‚Äôt travel alone! Join the Ethereum Python Community <a class="reference external" href="https://discord.gg/GHryRvPB84">Discord</a>.</p></li>
<li><p>Read this <a class="reference external" href="https://snakecharmers.ethereum.org/a-developers-guide-to-ethereum-pt-1">blog post series</a> for a gentle introduction to Ethereum blockchain concepts.</p></li>
<li><p>The <a class="reference internal" href="index.html#overview"><span class="std std-ref">Overview</span></a> page will give you a quick idea of what else web3.py can do.</p></li>
<li><p>Try building a little something!</p></li>
</ol>
</div>
<ul class="simple">
<li><p>Ready to code? ‚Üí <a class="reference internal" href="index.html#quickstart"><span class="std std-ref">Quickstart</span></a></p></li>
<li><p>Quick tour? ‚Üí <a class="reference internal" href="index.html#overview"><span class="std std-ref">Overview</span></a></p></li>
<li><p>Synchronous help? ‚Üí <a class="reference external" href="https://discord.gg/GHryRvPB84">Discord</a></p></li>
<li><p>Asynchronous help? ‚Üí <a class="reference external" href="https://ethereum.stackexchange.com/questions/tagged/web3.py">StackExchange</a></p></li>
<li><p>Report a bug? ‚Üí <a class="reference external" href="https://github.com/ethereum/web3.py/issues">Github</a></p></li>
<li><p>Want to help us? ‚Üí <a class="reference internal" href="index.html#contributing"><span class="std std-ref">Contribute</span></a></p></li>
<li><p>Looking for inspiration? ‚Üí <a class="reference internal" href="index.html#resources"><span class="std std-ref">Resources and Learning Material</span></a></p></li>
</ul>
</section>
<section id="table-of-contents">
<h2>Table of Contents<a class="headerlink" href="#table-of-contents" title="Link to this heading">ÔÉÅ</a></h2>
<div class="toctree-wrapper compound">
<span id="document-quickstart"></span><section id="quickstart">
<span id="id1"></span><h3>Quickstart<a class="headerlink" href="#quickstart" title="Link to this heading">ÔÉÅ</a></h3>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#installation" id="id2">Installation</a></p></li>
<li><p><a class="reference internal" href="#using-web3" id="id3">Using Web3</a></p>
<ul>
<li><p><a class="reference internal" href="#test-provider" id="id4">Test Provider</a></p></li>
<li><p><a class="reference internal" href="#local-providers" id="id5">Local Providers</a></p></li>
<li><p><a class="reference internal" href="#remote-providers" id="id6">Remote Providers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#getting-blockchain-info" id="id7">Getting Blockchain Info</a></p></li>
</ul>
</nav>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All code starting with a <code class="docutils literal notranslate"><span class="pre">$</span></code> is meant to run on your terminal.
All code starting with a <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code> is meant to run in a python interpreter,
like <a class="reference external" href="https://pypi.org/project/ipython/">ipython</a>.</p>
</div>
<section id="installation">
<h4><a class="toc-backref" href="#id2" role="doc-backlink">Installation</a><a class="headerlink" href="#installation" title="Link to this heading">ÔÉÅ</a></h4>
<p>web3.py can be installed (preferably in a <a class="reference internal" href="index.html#setup-environment"><span class="std std-ref">virtualenv</span></a>)
using <code class="docutils literal notranslate"><span class="pre">pip</span></code> as follows:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>web3
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you run into problems during installation, you might have a
broken environment. See the troubleshooting guide to <a class="reference internal" href="index.html#setup-environment"><span class="std std-ref">setting up a
clean environment</span></a>.</p>
</div>
</section>
<section id="using-web3">
<h4><a class="toc-backref" href="#id3" role="doc-backlink">Using Web3</a><a class="headerlink" href="#using-web3" title="Link to this heading">ÔÉÅ</a></h4>
<p>This library depends on a connection to an Ethereum node. We call these connections
<em>Providers</em> and there are several ways to configure them. The full details can be found
in the <a class="reference internal" href="index.html#providers"><span class="std std-ref">Providers</span></a> documentation. This Quickstart guide will highlight
a couple of the most common use cases.</p>
<section id="test-provider">
<h5><a class="toc-backref" href="#id4" role="doc-backlink">Test Provider</a><a class="headerlink" href="#test-provider" title="Link to this heading">ÔÉÅ</a></h5>
<p>If you‚Äôre just learning the ropes or doing some quick prototyping, you can use a test
provider, <a class="reference external" href="https://github.com/ethereum/eth-tester">eth-tester</a>. This provider includes
some accounts prepopulated with test ether and instantly includes each transaction into a block.
web3.py makes this test provider available via <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code> requires additional dependencies. Install them via
<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&quot;web3[tester]&quot;</span></code>, then import and instantiate the provider as seen below.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">EthereumTesterProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">EthereumTesterProvider</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="local-providers">
<h5><a class="toc-backref" href="#id5" role="doc-backlink">Local Providers</a><a class="headerlink" href="#local-providers" title="Link to this heading">ÔÉÅ</a></h5>
<p>The hardware requirements are <a class="reference external" href="https://ethereum.org/en/developers/docs/nodes-and-clients/run-a-node/#top">steep</a>,
but the safest way to interact with Ethereum is to run an Ethereum client on your own hardware.
For locally run nodes, an IPC connection is the most secure option, but HTTP and
websocket configurations are also available. By default, the popular <a class="reference external" href="https://geth.ethereum.org/">Geth client</a>
exposes port <code class="docutils literal notranslate"><span class="pre">8545</span></code> to serve HTTP requests and <code class="docutils literal notranslate"><span class="pre">8546</span></code> for websocket requests. Connecting
to this local node can be done as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">AsyncWeb3</span>

<span class="go"># IPCProvider:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">IPCProvider</span><span class="p">(</span><span class="s1">&#39;./path/to/filename.ipc&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>

<span class="go"># HTTPProvider:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s1">&#39;http://127.0.0.1:8545&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>

<span class="go"># AsyncHTTPProvider:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncWeb3</span><span class="o">.</span><span class="n">AsyncHTTPProvider</span><span class="p">(</span><span class="s1">&#39;http://127.0.0.1:8545&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>

<span class="go"># -- Persistent Connection Providers -- #</span>

<span class="go"># WebSocketProvider:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncWeb3</span><span class="o">.</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="s1">&#39;ws://127.0.0.1:8546&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>

<span class="go"># AsyncIPCProvider:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncWeb3</span><span class="o">.</span><span class="n">AsyncIPCProvider</span><span class="p">(</span><span class="s1">&#39;./path/to/filename.ipc&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="remote-providers">
<h5><a class="toc-backref" href="#id6" role="doc-backlink">Remote Providers</a><a class="headerlink" href="#remote-providers" title="Link to this heading">ÔÉÅ</a></h5>
<p>The quickest way to interact with the Ethereum blockchain is to use a <a class="reference external" href="https://ethereum.org/en/developers/docs/nodes-and-clients/nodes-as-a-service/#popular-node-services">remote node provider</a>.
You can connect to a remote node by specifying the endpoint, just like the previous local node example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">AsyncWeb3</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s1">&#39;https://&lt;your-provider-url&gt;&#39;</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncWeb3</span><span class="o">.</span><span class="n">AsyncHTTPProvider</span><span class="p">(</span><span class="s1">&#39;https://&lt;your-provider-url&gt;&#39;</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncWeb3</span><span class="o">.</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="s1">&#39;wss://&lt;your-provider-url&gt;&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>This endpoint is provided by the remote node service, typically after you create an account.</p>
</section>
</section>
<section id="getting-blockchain-info">
<span id="first-w3-use"></span><h4><a class="toc-backref" href="#id7" role="doc-backlink">Getting Blockchain Info</a><a class="headerlink" href="#getting-blockchain-info" title="Link to this heading">ÔÉÅ</a></h4>
<p>It‚Äôs time to start using web3.py! Once properly configured, the <code class="docutils literal notranslate"><span class="pre">w3</span></code> instance will allow you
to interact with the Ethereum blockchain. Try getting all the information about the latest block:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
<span class="go">{&#39;difficulty&#39;: 1,</span>
<span class="go"> &#39;gasLimit&#39;: 6283185,</span>
<span class="go"> &#39;gasUsed&#39;: 0,</span>
<span class="go"> &#39;hash&#39;: HexBytes(&#39;0x53b983fe73e16f6ed8178f6c0e0b91f23dc9dad4cb30d0831f178291ffeb8750&#39;),</span>
<span class="go"> &#39;logsBloom&#39;: HexBytes(&#39;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&#39;),</span>
<span class="go"> &#39;miner&#39;: &#39;0x0000000000000000000000000000000000000000&#39;,</span>
<span class="go"> &#39;mixHash&#39;: HexBytes(&#39;0x0000000000000000000000000000000000000000000000000000000000000000&#39;),</span>
<span class="go"> &#39;nonce&#39;: HexBytes(&#39;0x0000000000000000&#39;),</span>
<span class="go"> &#39;number&#39;: 0,</span>
<span class="go"> &#39;parentHash&#39;: HexBytes(&#39;0x0000000000000000000000000000000000000000000000000000000000000000&#39;),</span>
<span class="go"> &#39;proofOfAuthorityData&#39;: HexBytes(&#39;0x0000000000000000000000000000000000000000000000000000000000000000dddc391ab2bf6701c74d0c8698c2e13355b2e4150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&#39;),</span>
<span class="go"> &#39;receiptsRoot&#39;: HexBytes(&#39;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&#39;),</span>
<span class="go"> &#39;sha3Uncles&#39;: HexBytes(&#39;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&#39;),</span>
<span class="go"> &#39;size&#39;: 622,</span>
<span class="go"> &#39;stateRoot&#39;: HexBytes(&#39;0x1f5e460eb84dc0606ab74189dbcfe617300549f8f4778c3c9081c119b5b5d1c1&#39;),</span>
<span class="go"> &#39;timestamp&#39;: 0,</span>
<span class="go"> &#39;totalDifficulty&#39;: 1,</span>
<span class="go"> &#39;transactions&#39;: [],</span>
<span class="go"> &#39;transactionsRoot&#39;: HexBytes(&#39;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&#39;),</span>
<span class="go"> &#39;uncles&#39;: []}</span>
</pre></div>
</div>
<p>web3.py can help you read block data, sign and send transactions, deploy and interact with contracts,
and a number of other features.</p>
<p>A few suggestions from here:</p>
<ul class="simple">
<li><p>The <a class="reference internal" href="#document-overview"><span class="doc">Overview</span></a> page provides a summary of web3.py‚Äôs features.</p></li>
<li><p>The <a class="reference internal" href="index.html#web3.eth.Eth" title="web3.eth.Eth"><code class="xref py py-class docutils literal notranslate"><span class="pre">w3.eth</span></code></a> API contains the most frequently used methods.</p></li>
<li><p>A guide to <a class="reference internal" href="index.html#contracts"><span class="std std-ref">Contracts</span></a> includes deployment and usage examples.</p></li>
<li><p>The nuances of <a class="reference internal" href="#document-transactions"><span class="doc">Transactions</span></a> are explained in another guide.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended that your development environment have the <code class="docutils literal notranslate"><span class="pre">PYTHONWARNINGS=default</span></code>
environment variable set. Some deprecation warnings will not show up
without this variable being set.</p>
</div>
</section>
</section>
<span id="document-overview"></span><section id="overview">
<span id="id1"></span><h3>Overview<a class="headerlink" href="#overview" title="Link to this heading">ÔÉÅ</a></h3>
<p>The purpose of this page is to give you a sense of everything web3.py can do
and to serve as a quick reference guide. You‚Äôll find a summary of each feature
with links to learn more.</p>
<section id="configuration">
<h4>Configuration<a class="headerlink" href="#configuration" title="Link to this heading">ÔÉÅ</a></h4>
<p>After installing web3.py (via <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">web3</span></code>), you‚Äôll need to configure
a provider endpoint and any middleware you want to use beyond the defaults.</p>
<section id="providers">
<h5>Providers<a class="headerlink" href="#providers" title="Link to this heading">ÔÉÅ</a></h5>
<p><a class="reference internal" href="#document-providers"><span class="doc">Providers</span></a> are how web3.py connects to a blockchain. The library comes with the
following built-in providers:</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.providers.rpc.HTTPProvider" title="web3.providers.rpc.HTTPProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPProvider</span></code></a> for connecting to http and https based JSON-RPC servers.</p></li>
<li><p><a class="reference internal" href="index.html#web3.providers.ipc.IPCProvider" title="web3.providers.ipc.IPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">IPCProvider</span></code></a> for connecting to ipc socket based JSON-RPC servers.</p></li>
<li><p><a class="reference internal" href="index.html#web3.providers.legacy_websocket.LegacyWebSocketProvider" title="web3.providers.legacy_websocket.LegacyWebSocketProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">LegacyWebSocketProvider</span></code></a> (deprecated) for connecting to websocket based JSON-RPC servers.</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code> for connecting to http and https based JSON-RPC servers asynchronously.</p></li>
<li><p><a class="reference internal" href="index.html#web3.providers.persistent.AsyncIPCProvider" title="web3.providers.persistent.AsyncIPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncIPCProvider</span></code></a> for connecting to ipc socket based JSON-RPC servers asynchronously via a persistent connection.</p></li>
<li><p><a class="reference internal" href="index.html#web3.providers.persistent.WebSocketProvider" title="web3.providers.persistent.WebSocketProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketProvider</span></code></a> for connecting to websocket based JSON-RPC servers asynchronously via a persistent connection.</p></li>
</ul>
<section id="examples">
<h6>Examples<a class="headerlink" href="#examples" title="Link to this heading">ÔÉÅ</a></h6>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">AsyncWeb3</span>

<span class="go"># IPCProvider:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">IPCProvider</span><span class="p">(</span><span class="s1">&#39;./path/to/filename.ipc&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>

<span class="go"># HTTPProvider:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s1">&#39;http://127.0.0.1:8545&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>

<span class="go"># AsyncHTTPProvider:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncWeb3</span><span class="o">.</span><span class="n">AsyncHTTPProvider</span><span class="p">(</span><span class="s1">&#39;http://127.0.0.1:8545&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>

<span class="go"># -- Persistent Connection Providers -- #</span>

<span class="go"># WebSocketProvider:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncWeb3</span><span class="o">.</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="s1">&#39;ws://127.0.0.1:8546&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>

<span class="go"># AsyncIPCProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncWeb3</span><span class="o">.</span><span class="n">AsyncIPCProvider</span><span class="p">(</span><span class="s1">&#39;./path/to/filename.ipc&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>For more context, see the <a class="reference internal" href="#document-providers"><span class="doc">Providers</span></a> documentation.</p>
</section>
</section>
<section id="middleware">
<h5>Middleware<a class="headerlink" href="#middleware" title="Link to this heading">ÔÉÅ</a></h5>
<p>Your web3.py instance may be further configured via <a class="reference internal" href="#document-middleware"><span class="doc">Middleware</span></a>.</p>
<p>web3.py middleware is described using an onion metaphor, where each layer of
middleware may affect both the incoming request and outgoing response from your
provider. The documentation includes a <a class="reference internal" href="index.html#modifying-middleware"><span class="std std-ref">visualization</span></a>
of this idea.</p>
<p>Several middleware are <a class="reference internal" href="index.html#default-middleware"><span class="std std-ref">included by default</span></a>. You may add to
(<a class="reference internal" href="index.html#Web3.middleware_onion.add" title="Web3.middleware_onion.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add</span></code></a>, <a class="reference internal" href="index.html#Web3.middleware_onion.inject" title="Web3.middleware_onion.inject"><code class="xref py py-meth docutils literal notranslate"><span class="pre">inject</span></code></a>,
<a class="reference internal" href="index.html#Web3.middleware_onion.replace" title="Web3.middleware_onion.replace"><code class="xref py py-meth docutils literal notranslate"><span class="pre">replace</span></code></a>) or disable
(<a class="reference internal" href="index.html#Web3.middleware_onion.remove" title="Web3.middleware_onion.remove"><code class="xref py py-meth docutils literal notranslate"><span class="pre">remove</span></code></a>,
<a class="reference internal" href="index.html#Web3.middleware_onion.clear" title="Web3.middleware_onion.clear"><code class="xref py py-meth docutils literal notranslate"><span class="pre">clear</span></code></a>) any of these middleware.</p>
</section>
</section>
<section id="accounts-and-private-keys">
<h4>Accounts and Private Keys<a class="headerlink" href="#accounts-and-private-keys" title="Link to this heading">ÔÉÅ</a></h4>
<p>Private keys are required to approve any transaction made on your behalf. The manner in
which your key is secured will determine how you create and send transactions in web3.py.</p>
<p>A local node, like <a class="reference external" href="https://geth.ethereum.org/">Geth</a>, may manage your keys for you.
You can reference those keys using the <a class="reference internal" href="index.html#web3.eth.Eth.accounts" title="web3.eth.Eth.accounts"><code class="xref py py-attr docutils literal notranslate"><span class="pre">web3.eth.accounts</span></code></a>
property.</p>
<p>A hosted node, like <a class="reference external" href="https://infura.io/">Infura</a>, will have no knowledge of your keys.
In this case, you‚Äôll need to have your private key available locally for signing
transactions.</p>
<p>Full documentation on the distinction between keys can be found <a class="reference internal" href="index.html#eth-account"><span class="std std-ref">here</span></a>.
The separate guide to <a class="reference internal" href="#document-transactions"><span class="doc">Transactions</span></a> may also help clarify how to manage keys.</p>
</section>
<section id="base-api">
<h4>Base API<a class="headerlink" href="#base-api" title="Link to this heading">ÔÉÅ</a></h4>
<p>The <a class="reference internal" href="index.html#web3-base"><span class="std std-ref">Web3</span></a> class includes a number of convenient utility functions:</p>
<section id="encoding-and-decoding-helpers">
<h5>Encoding and Decoding Helpers<a class="headerlink" href="#encoding-and-decoding-helpers" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.w3.is_encodable" title="web3.w3.is_encodable"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.is_encodable()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.Web3.to_bytes" title="web3.Web3.to_bytes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.to_bytes()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.Web3.to_hex" title="web3.Web3.to_hex"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.to_hex()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.Web3.to_int" title="web3.Web3.to_int"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.to_int()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.Web3.to_json" title="web3.Web3.to_json"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.to_json()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.Web3.to_text" title="web3.Web3.to_text"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.to_text()</span></code></a></p></li>
</ul>
</section>
<section id="address-helpers">
<h5>Address Helpers<a class="headerlink" href="#address-helpers" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.Web3.is_address" title="web3.Web3.is_address"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.is_address()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.Web3.is_checksum_address" title="web3.Web3.is_checksum_address"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.is_checksum_address()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.Web3.to_checksum_address" title="web3.Web3.to_checksum_address"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.to_checksum_address()</span></code></a></p></li>
</ul>
</section>
<section id="currency-conversions">
<h5>Currency Conversions<a class="headerlink" href="#currency-conversions" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.Web3.from_wei" title="web3.Web3.from_wei"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.from_wei()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.Web3.to_wei" title="web3.Web3.to_wei"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.to_wei()</span></code></a></p></li>
</ul>
</section>
<section id="cryptographic-hashing">
<h5>Cryptographic Hashing<a class="headerlink" href="#cryptographic-hashing" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.Web3.keccak" title="web3.Web3.keccak"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.keccak()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.Web3.solidity_keccak" title="web3.Web3.solidity_keccak"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.solidity_keccak()</span></code></a></p></li>
</ul>
</section>
</section>
<section id="web3-eth-api">
<h4>web3.eth API<a class="headerlink" href="#web3-eth-api" title="Link to this heading">ÔÉÅ</a></h4>
<p>The most commonly used APIs for interacting with Ethereum can be found under the
<a class="reference internal" href="index.html#web3-eth"><span class="std std-ref">web3.eth API</span></a> namespace.</p>
<section id="fetching-data">
<h5>Fetching Data<a class="headerlink" href="#fetching-data" title="Link to this heading">ÔÉÅ</a></h5>
<p>Viewing account balances (<a class="reference internal" href="index.html#web3.eth.Eth.get_balance" title="web3.eth.Eth.get_balance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_balance</span></code></a>), transactions
(<a class="reference internal" href="index.html#web3.eth.Eth.get_transaction" title="web3.eth.Eth.get_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_transaction</span></code></a>), and block data
(<a class="reference internal" href="index.html#web3.eth.Eth.get_block" title="web3.eth.Eth.get_block"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_block</span></code></a>) are some of the most common starting
points in web3.py.</p>
<section id="api">
<h6>API<a class="headerlink" href="#api" title="Link to this heading">ÔÉÅ</a></h6>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_balance" title="web3.eth.Eth.get_balance"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_balance()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_block" title="web3.eth.Eth.get_block"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_block()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_block_transaction_count" title="web3.eth.Eth.get_block_transaction_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_block_transaction_count()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_code" title="web3.eth.Eth.get_code"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_code()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_proof" title="web3.eth.Eth.get_proof"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_proof()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_storage_at" title="web3.eth.Eth.get_storage_at"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_storage_at()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_transaction" title="web3.eth.Eth.get_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_transaction()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_transaction_by_block" title="web3.eth.Eth.get_transaction_by_block"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_transaction_by_block()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_transaction_count" title="web3.eth.Eth.get_transaction_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_transaction_count()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_uncle_by_block" title="web3.eth.Eth.get_uncle_by_block"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_uncle_by_block()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_uncle_count" title="web3.eth.Eth.get_uncle_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_uncle_count()</span></code></a></p></li>
</ul>
</section>
</section>
<section id="sending-transactions">
<h5>Sending Transactions<a class="headerlink" href="#sending-transactions" title="Link to this heading">ÔÉÅ</a></h5>
<p>The most common use cases will be satisfied with
<a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction</span></code></a> or the combination of
<a class="reference internal" href="index.html#web3.eth.Eth.sign_transaction" title="web3.eth.Eth.sign_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sign_transaction</span></code></a> and
<a class="reference internal" href="index.html#web3.eth.Eth.send_raw_transaction" title="web3.eth.Eth.send_raw_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_raw_transaction</span></code></a>. For more context,
see the full guide to <a class="reference internal" href="#document-transactions"><span class="doc">Transactions</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If interacting with a smart contract, a dedicated API exists. See the next
section, <a class="reference internal" href="#overview-contracts"><span class="std std-ref">Contracts</span></a>.</p>
</div>
<section id="id2">
<h6>API<a class="headerlink" href="#id2" title="Link to this heading">ÔÉÅ</a></h6>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.send_transaction()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.sign_transaction" title="web3.eth.Eth.sign_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.sign_transaction()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.send_raw_transaction" title="web3.eth.Eth.send_raw_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.send_raw_transaction()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.replace_transaction" title="web3.eth.Eth.replace_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.replace_transaction()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.modify_transaction" title="web3.eth.Eth.modify_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.modify_transaction()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.wait_for_transaction_receipt" title="web3.eth.Eth.wait_for_transaction_receipt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.wait_for_transaction_receipt()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_transaction_receipt" title="web3.eth.Eth.get_transaction_receipt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_transaction_receipt()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.sign" title="web3.eth.Eth.sign"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.sign()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.sign_typed_data" title="web3.eth.Eth.sign_typed_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.sign_typed_data()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.estimate_gas" title="web3.eth.Eth.estimate_gas"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.estimate_gas()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.generate_gas_price" title="web3.eth.Eth.generate_gas_price"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.generate_gas_price()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.set_gas_price_strategy" title="web3.eth.Eth.set_gas_price_strategy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.set_gas_price_strategy()</span></code></a></p></li>
</ul>
</section>
</section>
</section>
<section id="contracts">
<span id="overview-contracts"></span><h4>Contracts<a class="headerlink" href="#contracts" title="Link to this heading">ÔÉÅ</a></h4>
<p>web3.py can help you deploy, read from, or execute functions on a deployed contract.</p>
<p>Deployment requires that the contract already be compiled, with its bytecode and ABI
available. This compilation step can be done within
<a class="reference external" href="http://remix.ethereum.org/">Remix</a> or one of the many contract development
frameworks, such as <a class="reference external" href="https://docs.apeworx.io/ape/stable/index.html">Ape</a>.</p>
<p>Once the contract object is instantiated, calling <code class="docutils literal notranslate"><span class="pre">transact</span></code> on the
<a class="reference internal" href="index.html#web3.contract.Contract.constructor" title="web3.contract.Contract.constructor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">constructor</span></code></a> method will deploy an
instance of the contract:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ExampleContract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">,</span> <span class="n">bytecode</span><span class="o">=</span><span class="n">bytecode</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">ExampleContract</span><span class="o">.</span><span class="n">constructor</span><span class="p">()</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span><span class="o">.</span><span class="n">contractAddress</span>
<span class="go">&#39;0x8a22225eD7eD460D7ee3842bce2402B9deaD23D3&#39;</span>
</pre></div>
</div>
<p>Once a deployed contract is loaded into a Contract object, the functions of that
contract are available on the <code class="docutils literal notranslate"><span class="pre">functions</span></code> namespace:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deployed_contract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="n">tx_receipt</span><span class="o">.</span><span class="n">contractAddress</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deployed_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myFunction</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
</pre></div>
</div>
<p>If you want to read data from a contract (or see the result of transaction locally,
without executing it on the network), you can use the
<a class="reference internal" href="index.html#web3.contract.ContractFunction.call" title="web3.contract.ContractFunction.call"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ContractFunction.call</span></code></a> method, or the
more concise <a class="reference internal" href="index.html#web3.contract.ContractCaller" title="web3.contract.ContractCaller"><code class="xref py py-attr docutils literal notranslate"><span class="pre">ContractCaller</span></code></a> syntax:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Using ContractFunction.call</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">deployed_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">getMyValue</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="mi">42</span>

<span class="c1"># Using ContractCaller</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">deployed_contract</span><span class="o">.</span><span class="n">caller</span><span class="p">()</span><span class="o">.</span><span class="n">getMyValue</span><span class="p">()</span>
<span class="mi">42</span>
</pre></div>
</div>
<p>For more, see the full <a class="reference internal" href="index.html#contracts"><span class="std std-ref">Contracts</span></a> documentation.</p>
<section id="id3">
<h5>API<a class="headerlink" href="#id3" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.contract" title="web3.eth.Eth.contract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.contract()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.address" title="web3.contract.Contract.address"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.address</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.abi" title="web3.contract.Contract.abi"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.abi</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.bytecode" title="web3.contract.Contract.bytecode"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.bytecode</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.bytecode_runtime" title="web3.contract.Contract.bytecode_runtime"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.bytecode_runtime</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.functions" title="web3.contract.Contract.functions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.functions</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.events" title="web3.contract.Contract.events"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.events</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.fallback.call" title="web3.contract.Contract.fallback.call"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.fallback</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.constructor" title="web3.contract.Contract.constructor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Contract.constructor()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.encode_abi" title="web3.contract.Contract.encode_abi"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Contract.encode_abi()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-attr docutils literal notranslate"><span class="pre">web3.contract.ContractFunction</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.ContractEvents" title="web3.contract.ContractEvents"><code class="xref py py-attr docutils literal notranslate"><span class="pre">web3.contract.ContractEvents</span></code></a></p></li>
</ul>
</section>
</section>
<section id="events-logs-and-filters">
<h4>Events, Logs, and Filters<a class="headerlink" href="#events-logs-and-filters" title="Link to this heading">ÔÉÅ</a></h4>
<p>If you want to react to new blocks being mined or specific events being emitted by
a contract, you can leverage <code class="docutils literal notranslate"><span class="pre">get_logs</span></code>, subscriptions, or filters.</p>
<p>See the <a class="reference internal" href="#document-filters"><span class="doc">Events and Logs</span></a> guide for more information.</p>
<section id="id4">
<h5>API<a class="headerlink" href="#id4" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.subscribe" title="web3.eth.Eth.subscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.subscribe()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.filter" title="web3.eth.Eth.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.filter()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_filter_changes" title="web3.eth.Eth.get_filter_changes"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_filter_changes()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_filter_logs" title="web3.eth.Eth.get_filter_logs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_filter_logs()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.uninstall_filter" title="web3.eth.Eth.uninstall_filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.uninstall_filter()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.get_logs" title="web3.eth.Eth.get_logs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.get_logs()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.events.your_event_name.create_filter" title="web3.contract.Contract.events.your_event_name.create_filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Contract.events.your_event_name.create_filter()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.Contract.events.your_event_name.build_filter" title="web3.contract.Contract.events.your_event_name.build_filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Contract.events.your_event_name.build_filter()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.utils.filters.Filter.get_new_entries" title="web3.utils.filters.Filter.get_new_entries"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Filter.get_new_entries()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.utils.filters.Filter.get_all_entries" title="web3.utils.filters.Filter.get_all_entries"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Filter.get_all_entries()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.utils.filters.Filter.format_entry" title="web3.utils.filters.Filter.format_entry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Filter.format_entry()</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.utils.filters.Filter.is_valid_entry" title="web3.utils.filters.Filter.is_valid_entry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Filter.is_valid_entry()</span></code></a></p></li>
</ul>
</section>
</section>
<section id="net-api">
<h4>Net API<a class="headerlink" href="#net-api" title="Link to this heading">ÔÉÅ</a></h4>
<p>Some basic network properties are available on the <code class="docutils literal notranslate"><span class="pre">web3.net</span></code> object:</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.net.listening" title="web3.net.listening"><code class="xref py py-attr docutils literal notranslate"><span class="pre">web3.net.listening</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.net.peer_count" title="web3.net.peer_count"><code class="xref py py-attr docutils literal notranslate"><span class="pre">web3.net.peer_count</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.net.version" title="web3.net.version"><code class="xref py py-attr docutils literal notranslate"><span class="pre">web3.net.version</span></code></a></p></li>
</ul>
</section>
<section id="ens">
<h4>ENS<a class="headerlink" href="#ens" title="Link to this heading">ÔÉÅ</a></h4>
<p><a class="reference external" href="https://ens.domains/">Ethereum Name Service (ENS)</a> provides the infrastructure
for human-readable addresses. If an address is registered with the ENS registry,
the domain name can be used in place of the address itself. For example, the registered domain
name <code class="docutils literal notranslate"><span class="pre">ethereum.eth</span></code> will resolve to the address
<code class="docutils literal notranslate"><span class="pre">0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe</span></code>. web3.py has support for ENS, documented
<a class="reference internal" href="index.html#ens-overview"><span class="std std-ref">here</span></a>.</p>
</section>
</section>
<span id="document-release_notes"></span><section id="release-notes">
<h3>Release Notes<a class="headerlink" href="#release-notes" title="Link to this heading">ÔÉÅ</a></h3>
<dl class="simple">
<dt>v7 Breaking Changes Summary</dt><dd><p>See the <a class="reference internal" href="index.html#migrating-v6-to-v7"><span class="std std-ref">v7 Migration Guide</span></a></p>
</dd>
</dl>
<section id="web3-py-v7-6-0-2024-11-22">
<h4>web3.py v7.6.0 (2024-11-22)<a class="headerlink" href="#web3-py-v7-6-0-2024-11-22" title="Link to this heading">ÔÉÅ</a></h4>
<section id="bugfixes">
<h5>Bugfixes<a class="headerlink" href="#bugfixes" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update the <cite>ContractEvents</cite> class to raise a <cite>NoABIFound</cite> exception if the <cite>Contract</cite> is initialized without an <cite>ABI</cite> and an attempt to access an event is made. This exception makes <cite>ContractEvents</cite> consistent with <cite>ContractFunctions</cite>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3491">#3491</a>)</p></li>
</ul>
</section>
<section id="features">
<h5>Features<a class="headerlink" href="#features" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Contracts with overloaded functions or events are now supported. The Contract initializes functions and events using an identifier to distinguish between them. The identifier is the function or event signature, which consists of the name and the parameter types. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3491">#3491</a>)</p></li>
<li><ul>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">w3.eth.blob_base_fee</span></code></p></li>
<li><p>Async support for <code class="docutils literal notranslate"><span class="pre">w3.eth.blob_base_fee</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3527">#3527</a>)</p></li>
</ul>
</li>
</ul>
</section>
<section id="internal-changes-for-web3-py-contributors">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#internal-changes-for-web3-py-contributors" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Pin <code class="docutils literal notranslate"><span class="pre">websockets&lt;14</span></code> due to breaking changes (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3529">#3529</a>)</p></li>
</ul>
</section>
<section id="miscellaneous-changes">
<h5>Miscellaneous Changes<a class="headerlink" href="#miscellaneous-changes" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/3491">#3491</a></p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-5-0-2024-11-06">
<h4>web3.py v7.5.0 (2024-11-06)<a class="headerlink" href="#web3-py-v7-5-0-2024-11-06" title="Link to this heading">ÔÉÅ</a></h4>
<section id="improved-documentation">
<h5>Improved Documentation<a class="headerlink" href="#improved-documentation" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Polish docs index page (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3522">#3522</a>)</p></li>
</ul>
</section>
<section id="id1">
<h5>Features<a class="headerlink" href="#id1" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add support for Geth Debug traceTransaction. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3334">#3334</a>)</p></li>
<li><p>New contract methods to obtain event elements from a contract ABI using a name, signature, selector, or topic. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3472">#3472</a>)</p></li>
</ul>
</section>
<section id="id2">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id2" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add python 3.13 support (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3493">#3493</a>)</p></li>
<li><p>Compile test contracts with newly released Solidity <code class="docutils literal notranslate"><span class="pre">v0.8.28</span></code> to ensure compatibility. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3515">#3515</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-4-0-2024-10-16">
<h4>web3.py v7.4.0 (2024-10-16)<a class="headerlink" href="#web3-py-v7-4-0-2024-10-16" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id3">
<h5>Bugfixes<a class="headerlink" href="#id3" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix a bug where CCIP-Read expected a <code class="docutils literal notranslate"><span class="pre">{sender}</span></code> in the url for a POST request. If <code class="docutils literal notranslate"><span class="pre">{data}</span></code> is missing from the url, assume a POST request is being made regardless of whether <code class="docutils literal notranslate"><span class="pre">{sender}</span></code> is present. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3291">#3291</a>)</p></li>
<li><p>Fix a bug where non-mainnet chains could not cache requests based on missing <code class="docutils literal notranslate"><span class="pre">finalized</span></code> block number. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3508">#3508</a>)</p></li>
<li><p>Send <code class="docutils literal notranslate"><span class="pre">json</span></code>, not <code class="docutils literal notranslate"><span class="pre">data</span></code> with CCIP-Read POST requests. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3512">#3512</a>)</p></li>
</ul>
</section>
<section id="id4">
<h5>Improved Documentation<a class="headerlink" href="#id4" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update the request caching documentation to clarify on when to reach for request caching and how to configure the request validation threshold for certain endpoints. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3508">#3508</a>)</p></li>
</ul>
</section>
<section id="id5">
<h5>Features<a class="headerlink" href="#id5" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Allow a time interval, in seconds, to be used as the <code class="docutils literal notranslate"><span class="pre">request_cache_validation_threshold</span></code> for request caching. Keep a list of internal default values based on the chain id for some of the bigger chains. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3508">#3508</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-3-1-2024-10-14">
<h4>web3.py v7.3.1 (2024-10-14)<a class="headerlink" href="#web3-py-v7-3-1-2024-10-14" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id6">
<h5>Bugfixes<a class="headerlink" href="#id6" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Properly wrap <code class="docutils literal notranslate"><span class="pre">AsyncBeacon.request_timeout</span></code> float in a <code class="docutils literal notranslate"><span class="pre">aiohttp.ClientTimeout</span></code> when making requests. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3503">#3503</a>)</p></li>
<li><p>Changes related to an <cite>eth-typing</cite> bugfix, input types for <code class="docutils literal notranslate"><span class="pre">ABIEvent</span></code>: <code class="docutils literal notranslate"><span class="pre">ABIComponent</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">ABIComponentIndexed</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3510">#3510</a>)</p></li>
</ul>
</section>
<section id="id7">
<h5>Improved Documentation<a class="headerlink" href="#id7" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code> signature in docs, added an <code class="docutils literal notranslate"><span class="pre">eth_tester</span></code> example. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3500">#3500</a>)</p></li>
<li><p>Fix <cite>pip install -e ‚Äú.[dev]‚Äù</cite> command in linux README. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3505">#3505</a>)</p></li>
</ul>
</section>
<section id="id8">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id8" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update the ENSIP-15 to the latest spec and update the test suite. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3501">#3501</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-3-0-2024-09-25">
<h4>web3.py v7.3.0 (2024-09-25)<a class="headerlink" href="#web3-py-v7-3-0-2024-09-25" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id9">
<h5>Bugfixes<a class="headerlink" href="#id9" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Base default <code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code> calculation off of existing <code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code> key instead of separate RPC call (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3052">#3052</a>)</p></li>
<li><p>Add back dependency extra for ‚Äòtester‚Äô. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3480">#3480</a>)</p></li>
<li><p>Fix a bug where sensitive requests that make use of block data should not be cached until some validation threshold deems it is safe to do so, when request caching is turned on. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3483">#3483</a>)</p></li>
</ul>
</section>
<section id="id10">
<h5>Improved Documentation<a class="headerlink" href="#id10" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update <code class="docutils literal notranslate"><span class="pre">contract.encode_abi</span></code> signature in docs and migration guide (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3473">#3473</a>)</p></li>
<li><p>Update documentation around <code class="docutils literal notranslate"><span class="pre">SignAndSendRawMiddlewareBuilder</span></code> injection into the middleware onion. It should be injected lower in the stack than any middleware that modifies the transaction, in order to ensure those modified fields are signed. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3488">#3488</a>)</p></li>
<li><p>Docs cleanups related to <code class="docutils literal notranslate"><span class="pre">test</span></code> vs <code class="docutils literal notranslate"><span class="pre">tester</span></code> install extras. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3496">#3496</a>)</p></li>
</ul>
</section>
<section id="id11">
<h5>Features<a class="headerlink" href="#id11" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add a configuration for request caching that sets a threshold for validating cached requests that make use of block data. This can be turned off altogether by setting the threshold to <code class="docutils literal notranslate"><span class="pre">None</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3483">#3483</a>)</p></li>
<li><p>Add a configuration option for the <code class="docutils literal notranslate"><span class="pre">read_buffer_limit</span></code> for <code class="docutils literal notranslate"><span class="pre">AsyncIPCProvider</span></code> in order to control the expected message size limit (defaults to 20MB). Add <code class="docutils literal notranslate"><span class="pre">ReadBufferLimitReached</span></code> for when the read limit is reached, extend from <code class="docutils literal notranslate"><span class="pre">PersistentConnectionError</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3492">#3492</a>)</p></li>
</ul>
</section>
<section id="id12">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id12" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Test warning cleanup (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3468">#3468</a>)</p></li>
<li><p>Re-compile test contracts with recently released Solidity <code class="docutils literal notranslate"><span class="pre">v0.8.27</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3475">#3475</a>)</p></li>
<li><p>Re-organize the install extras. Re-define the <code class="docutils literal notranslate"><span class="pre">test</span></code> extra to always include the <code class="docutils literal notranslate"><span class="pre">tester</span></code> extra since it‚Äôs needed for testing. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3495">#3495</a>)</p></li>
</ul>
</section>
<section id="id13">
<h5>Miscellaneous Changes<a class="headerlink" href="#id13" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/3490">#3490</a></p></li>
</ul>
</section>
<section id="performance-improvements">
<h5>Performance Improvements<a class="headerlink" href="#performance-improvements" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Improve logic for reading from the async IPC socket in order to properly handle and adjust the handling of large messages. This improves reading speeds in general. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3492">#3492</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-2-0-2024-08-29">
<h4>web3.py v7.2.0 (2024-08-29)<a class="headerlink" href="#web3-py-v7-2-0-2024-08-29" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id14">
<h5>Bugfixes<a class="headerlink" href="#id14" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix a bug with newer <code class="docutils literal notranslate"><span class="pre">hexbytes</span></code> versions that yield non-0x-prefixed hex for <code class="docutils literal notranslate"><span class="pre">HexBytes</span></code>: <code class="docutils literal notranslate"><span class="pre">raw_transaction.hex()</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">raw_transaction.to_0x_hex()</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3471">#3471</a>)</p></li>
</ul>
</section>
<section id="id15">
<h5>Features<a class="headerlink" href="#id15" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>HTTPProvider and AsyncHTTPProvider‚Äôs get_request_headers is now available on both the class and the instance (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3467">#3467</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-1-0-2024-08-28">
<h4>web3.py v7.1.0 (2024-08-28)<a class="headerlink" href="#web3-py-v7-1-0-2024-08-28" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id16">
<h5>Bugfixes<a class="headerlink" href="#id16" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Specify a unique <code class="docutils literal notranslate"><span class="pre">__hash__()</span></code> for unhashable <code class="docutils literal notranslate"><span class="pre">Web3Middleware</span></code> types and use this hash as the middleware onion key when a name is not provided for the middleware. This fixes a bug where different middleware were given the same name and therefore raised errors. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3463">#3463</a>)</p></li>
</ul>
</section>
<section id="id17">
<h5>Improved Documentation<a class="headerlink" href="#id17" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix bug in filters example code (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3455">#3455</a>)</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">v6</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">v7</span></code> migration guide with examples for importing and adding middleware, as well as examples on how to use the <code class="docutils literal notranslate"><span class="pre">MiddlewareBuilder</span></code> classes. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3462">#3462</a>)</p></li>
</ul>
</section>
<section id="id18">
<h5>Features<a class="headerlink" href="#id18" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add sync and async support for beacon <code class="docutils literal notranslate"><span class="pre">/eth/v1/beacon/blob_sidecars</span></code> endpoint. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3407">#3407</a>)</p></li>
<li><p>Allow user to call ContractFunctions without parentheses (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3444">#3444</a>)</p></li>
</ul>
</section>
<section id="id19">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id19" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Refactor and DRY up CI run setup and reduce surface area for errors. Include pre-releases in CI runs for internally maintained libraries to try and catch any conflicts. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3452">#3452</a>)</p></li>
<li><p>Bump <cite>py-geth</cite> to <code class="docutils literal notranslate"><span class="pre">&gt;=5.0.0</span></code> from <code class="docutils literal notranslate"><span class="pre">&gt;=5.0.0b1</span></code> now that stable has been released. This only matters for the <code class="docutils literal notranslate"><span class="pre">test</span></code> install extra (CI and dev purposes). (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3458">#3458</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-0-0-2024-08-21">
<h4>web3.py v7.0.0 (2024-08-21)<a class="headerlink" href="#web3-py-v7-0-0-2024-08-21" title="Link to this heading">ÔÉÅ</a></h4>
<section id="breaking-changes">
<h5>Breaking Changes<a class="headerlink" href="#breaking-changes" title="Link to this heading">ÔÉÅ</a></h5>
<ul>
<li><p>Update <cite>eth-utils</cite> and <cite>eth-typing</cite> to latest major versions</p>
<p><cite>eth-utils</cite> v5 and <cite>eth-typing</cite> v5 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3450">#3450</a>)</p>
</li>
</ul>
</section>
<section id="id20">
<h5>Improved Documentation<a class="headerlink" href="#id20" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Improve batch request documentation. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3448">#3448</a>)</p></li>
</ul>
</section>
<section id="id21">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id21" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix Release Notes formatting (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3454">#3454</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-0-0-beta-9-2024-08-01">
<h4>web3.py v7.0.0-beta.9 (2024-08-01)<a class="headerlink" href="#web3-py-v7-0-0-beta-9-2024-08-01" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id22">
<h5>Breaking Changes<a class="headerlink" href="#id22" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Upgrades to use latest <code class="docutils literal notranslate"><span class="pre">ABI</span></code> utilities and typings from <code class="docutils literal notranslate"><span class="pre">eth-utils</span></code> and <code class="docutils literal notranslate"><span class="pre">eth-typing</span></code>.</p>
<ul>
<li><p>Typings for <code class="docutils literal notranslate"><span class="pre">ABI</span></code> components are now available in the <code class="docutils literal notranslate"><span class="pre">eth-typing</span></code> package. <code class="docutils literal notranslate"><span class="pre">ABI</span></code> types previously in <code class="docutils literal notranslate"><span class="pre">web3.types</span></code> have been removed.</p></li>
<li><p>New versions of existing ABI functions were added to <code class="docutils literal notranslate"><span class="pre">eth-utils</span></code> and are now exposed in <cite>web3.py</cite> via <code class="docutils literal notranslate"><span class="pre">web3.utils.abi</span></code>.</p></li>
<li><p>ABI exceptions have been renamed in <code class="docutils literal notranslate"><span class="pre">web3.exceptions</span></code>. The <code class="docutils literal notranslate"><span class="pre">ABIEventFunctionNotFound</span></code> and <code class="docutils literal notranslate"><span class="pre">FallbackNotFound</span></code> exceptions have been removed. Use <code class="docutils literal notranslate"><span class="pre">ABIEventNotFound</span></code> and <code class="docutils literal notranslate"><span class="pre">ABIFallbackNotFound</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MismatchedABI</span></code> exceptions are raised instead of a <code class="docutils literal notranslate"><span class="pre">Web3ValidationError</span></code> for ABI related errors.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">encode_abi</span></code> arguments have been updated to use <code class="docutils literal notranslate"><span class="pre">abi_element_name</span></code> instead of <code class="docutils literal notranslate"><span class="pre">fn_name</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3408">#3408</a>)</p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">Web3ValidationError</span></code> dependence / inheritance from <cite>eth-utils</cite> <code class="docutils literal notranslate"><span class="pre">ValidationError</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3443">#3443</a>)</p></li>
</ul>
</section>
<section id="id23">
<h5>Improved Documentation<a class="headerlink" href="#id23" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Use autodoc and update ABI functions with docstrings and doctests. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3408">#3408</a>)</p></li>
</ul>
</section>
<section id="id24">
<h5>Features<a class="headerlink" href="#id24" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Utilities to extract function and event <code class="docutils literal notranslate"><span class="pre">ABI</span></code> attributes from a contract. Utilities in the <code class="docutils literal notranslate"><span class="pre">web3.utils.abi</span></code> module parse ABI elements and check encodability of provided arguments. ABI functions in <code class="docutils literal notranslate"><span class="pre">eth-utils</span></code> are exposed by the <code class="docutils literal notranslate"><span class="pre">web3.utils.abi</span></code> module.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">get_abi_element_info</span></code> returns an <code class="docutils literal notranslate"><span class="pre">ABIElementInfo</span></code> TypedDict with the <code class="docutils literal notranslate"><span class="pre">abi</span></code>, <code class="docutils literal notranslate"><span class="pre">selector</span></code>, and <code class="docutils literal notranslate"><span class="pre">arguments</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_abi_element</span></code> returns the <code class="docutils literal notranslate"><span class="pre">ABI</span></code> of a function, event, or error given the name and arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">check_if_arguments_can_be_encoded</span></code> returns true if the arguments can be encoded with the given ABI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_event_abi</span></code> returns the <code class="docutils literal notranslate"><span class="pre">ABI</span></code> of an event given the name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_event_log_topics</span></code> returns the log topics of an event given the name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_topics_to_bytes</span></code> returns the log topics as bytes. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3408">#3408</a>)</p></li>
</ul>
</li>
</ul>
<ul class="simple">
<li><p>Add explicit stream kwarg to HTTPProvider so that timeout can be more finely tuned. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3428">#3428</a>)</p></li>
<li><p>Implement a <code class="docutils literal notranslate"><span class="pre">RequestTimedOut</span></code> exception, extending from <code class="docutils literal notranslate"><span class="pre">Web3RPCError</span></code>, for when requests to the node time out. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3440">#3440</a>)</p></li>
</ul>
</section>
<section id="id25">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id25" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">mypy</span></code> locally using <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> hook, instead of within <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> container (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3414">#3414</a>)</p></li>
<li><p>Mitigate inconsistently failing tests for CI runs with appropriate <code class="docutils literal notranslate"><span class="pre">flaky</span></code> or <code class="docutils literal notranslate"><span class="pre">pytest.mark.xfail()</span></code> decorators. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3440">#3440</a>)</p></li>
</ul>
</section>
<section id="id26">
<h5>Miscellaneous Changes<a class="headerlink" href="#id26" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/3408">#3408</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/3445">#3445</a></p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-0-0-beta-8-2024-07-24">
<h4>web3.py v7.0.0-beta.8 (2024-07-24)<a class="headerlink" href="#web3-py-v7-0-0-beta-8-2024-07-24" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id27">
<h5>Breaking Changes<a class="headerlink" href="#id27" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Refactor the public <code class="docutils literal notranslate"><span class="pre">socket</span></code> api for persistent connection providers to properly define <code class="docutils literal notranslate"><span class="pre">send()</span></code>, <code class="docutils literal notranslate"><span class="pre">recv()</span></code>, and <code class="docutils literal notranslate"><span class="pre">make_request()</span></code> (send and wait for response) methods for interacting with the open socket. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3433">#3433</a>)</p></li>
<li><p>Format entries in <code class="docutils literal notranslate"><span class="pre">accessList</span></code> <code class="docutils literal notranslate"><span class="pre">storageKeys</span></code> to be <code class="docutils literal notranslate"><span class="pre">HexStr</span></code> instead of <code class="docutils literal notranslate"><span class="pre">HexBytes</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3434">#3434</a>)</p></li>
</ul>
</section>
<section id="id28">
<h5>Bugfixes<a class="headerlink" href="#id28" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Handle <code class="docutils literal notranslate"><span class="pre">ConnectionClosedOK</span></code> case for <code class="docutils literal notranslate"><span class="pre">WebSocketProvider</span></code>. If a persistent connection is closed gracefully, log and raise a silent <code class="docutils literal notranslate"><span class="pre">PersistentConnectionClosedOK</span></code> exception, triggering an end to the message listener task and breaking out of the <code class="docutils literal notranslate"><span class="pre">process_subscriptions()</span></code> iterator. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3432">#3432</a>)</p></li>
</ul>
</section>
<section id="id29">
<h5>Features<a class="headerlink" href="#id29" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">popitem()</span></code> functionality to the <code class="docutils literal notranslate"><span class="pre">SimpleCache</span></code> class as well as an async utility method to wait for the next item, <code class="docutils literal notranslate"><span class="pre">async_await_and_popitem()</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3433">#3433</a>)</p></li>
</ul>
</section>
<section id="id30">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id30" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Refactor some common logic for persistent connection providers back into the base <code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code> class to reduce code duplication and improve maintainability. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3433">#3433</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-0-0-beta-7-2024-06-26">
<h4>web3.py v7.0.0-beta.7 (2024-06-26)<a class="headerlink" href="#web3-py-v7-0-0-beta-7-2024-06-26" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id31">
<h5>Bugfixes<a class="headerlink" href="#id31" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Change the <code class="docutils literal notranslate"><span class="pre">exception_retry_configuration</span></code> typing on http providers to be an <code class="docutils literal notranslate"><span class="pre">Optional</span></code>, as setting this property to <code class="docutils literal notranslate"><span class="pre">None</span></code> effectively turns off retries on exceptions for requests. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3412">#3412</a>)</p></li>
<li><p>A bugfix, pre-release, to update the <code class="docutils literal notranslate"><span class="pre">Beacon</span></code> APIs (sync and async) to properly use the new <code class="docutils literal notranslate"><span class="pre">HTTPSessionManager</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3421">#3421</a>)</p></li>
</ul>
</section>
<section id="id32">
<h5>Improved Documentation<a class="headerlink" href="#id32" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add an <code class="docutils literal notranslate"><span class="pre">eth_subscribe</span></code> example to the events guide (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3403">#3403</a>)</p></li>
</ul>
</section>
<section id="id33">
<h5>Features<a class="headerlink" href="#id33" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Properly handle <code class="docutils literal notranslate"><span class="pre">InsufficientDataBytes</span></code> errors when processing receipts (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3388">#3388</a>)</p></li>
<li><p>Provide explicit <code class="docutils literal notranslate"><span class="pre">__all__</span></code> exports for providers in <cite>web3/providers/__init__.py</cite>; update <cite>web3/__init__.py</cite> to include all provider classes including base classes. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3409">#3409</a>)</p></li>
</ul>
</section>
<section id="id34">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id34" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Re-compile test contracts with Solidity v0.8.25 to ensure compatibility. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3307">#3307</a>)</p></li>
<li><p>Increase allowable range of eth-tester: 0.11.x and 0.12.x (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3400">#3400</a>)</p></li>
<li><p>Remove uses of signHash in tests, require eth-account &gt;=0.13.0 in doctests (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3404">#3404</a>)</p></li>
<li><p>Use a <code class="docutils literal notranslate"><span class="pre">HTTPSessionManager</span></code> to manage sessions for http providers, rather than have them share a single session manager / cache. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3412">#3412</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-0-0-beta-6-2024-05-15">
<h4>web3.py v7.0.0-beta.6 (2024-05-15)<a class="headerlink" href="#web3-py-v7-0-0-beta-6-2024-05-15" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id35">
<h5>Bugfixes<a class="headerlink" href="#id35" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Properly propagate exceptions from the message listener task to the main loop for persistent connection providers. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3378">#3378</a>)</p></li>
</ul>
</section>
<section id="id36">
<h5>Improved Documentation<a class="headerlink" href="#id36" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Prunes the node onboarding text (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3371">#3371</a>)</p></li>
<li><p>Stale example cleanup (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3374">#3374</a>)</p></li>
<li><p>Merge migration guides into one page (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3379">#3379</a>)</p></li>
<li><p>Simplify titles of docs guides (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3381">#3381</a>)</p></li>
<li><p>Move ABI Types guide into the Troubleshooting page (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3382">#3382</a>)</p></li>
<li><p>Distribute examples into relevant guides and delete Example page (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3383">#3383</a>)</p></li>
<li><p>Add subscribe/unsubscribe API (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3386">#3386</a>)</p></li>
<li><p>Introduces batch request API (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3393">#3393</a>)</p></li>
</ul>
</section>
<section id="id37">
<h5>Features<a class="headerlink" href="#id37" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add support for request batching via <code class="docutils literal notranslate"><span class="pre">w3.batch_requests()</span></code> context manager (sync and async). (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3370">#3370</a>)</p></li>
<li><p>Allow request cache configuration on provider <code class="docutils literal notranslate"><span class="pre">__init__()</span></code> for all provider classes. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3395">#3395</a>)</p></li>
</ul>
</section>
<section id="id38">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id38" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Merge the python project template, notably adding python 3.12 support (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3363">#3363</a>)</p></li>
<li><p>Increase python-asyncio dependency to be &gt;=0.21.2,&lt;0.23 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3369">#3369</a>)</p></li>
<li><p>Bump to <code class="docutils literal notranslate"><span class="pre">mypy==1.10.0</span></code> for <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3377">#3377</a>)</p></li>
<li><p>Move signed.rawTransaction -&gt; signed.raw_transaction in eth module tests (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3380">#3380</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-0-0-beta-5-2024-04-26">
<h4>web3.py v7.0.0-beta.5 (2024-04-26)<a class="headerlink" href="#web3-py-v7-0-0-beta-5-2024-04-26" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id39">
<h5>Breaking Changes<a class="headerlink" href="#id39" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Snake-case remaining arguments <code class="docutils literal notranslate"><span class="pre">fromBlock</span></code>, <code class="docutils literal notranslate"><span class="pre">toBlock</span></code>, and <code class="docutils literal notranslate"><span class="pre">blockHash</span></code> in contract and filter methods where they are passed in as kwargs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3353">#3353</a>)</p></li>
<li><p>Employ an exponential backoff strategy using the <code class="docutils literal notranslate"><span class="pre">backoff_factor</span></code> in <code class="docutils literal notranslate"><span class="pre">ExceptionRetryConfiguration</span></code> for <code class="docutils literal notranslate"><span class="pre">HTTPProvider</span></code> and <code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code>. Reduce the default initial delay to <code class="docutils literal notranslate"><span class="pre">0.125</span></code> seconds. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3358">#3358</a>)</p></li>
<li><p>Validate JSON-RPC responses more strictly against the JSON-RPC 2.0 specifications. <code class="docutils literal notranslate"><span class="pre">BlockNumberOutofRange</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">BlockNumberOutOfRange</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3359">#3359</a>)</p></li>
</ul>
</section>
<section id="deprecations">
<h5>Deprecations<a class="headerlink" href="#deprecations" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">messageHash</span></code> and <code class="docutils literal notranslate"><span class="pre">rawTransaction</span></code> from <code class="docutils literal notranslate"><span class="pre">eth-account</span></code> have been deprecated for snake_case versions (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3348">#3348</a>)</p></li>
</ul>
</section>
<section id="id40">
<h5>Features<a class="headerlink" href="#id40" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Raise <code class="docutils literal notranslate"><span class="pre">Web3RPCError</span></code> on JSON-RPC errors rather than <code class="docutils literal notranslate"><span class="pre">Web3ValueError</span></code>. Raise <code class="docutils literal notranslate"><span class="pre">MethodNotSupported</span></code> exception when a method is not supported within <em>web3.py</em>; keep <code class="docutils literal notranslate"><span class="pre">MethodUnavailable</span></code> for when a method is not available on the current provider (JSON-RPC error). (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3359">#3359</a>)</p></li>
</ul>
</section>
<section id="id41">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id41" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Bump <code class="docutils literal notranslate"><span class="pre">eth-account</span></code> dependency to <code class="docutils literal notranslate"><span class="pre">&gt;=0.12.2</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3348">#3348</a>)</p></li>
</ul>
</section>
<section id="removals">
<h5>Removals<a class="headerlink" href="#removals" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove the deprecated <code class="docutils literal notranslate"><span class="pre">personal</span></code> namespace and all references to it. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3350">#3350</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-0-0-beta-4-2024-04-11">
<h4>web3.py v7.0.0-beta.4 (2024-04-11)<a class="headerlink" href="#web3-py-v7-0-0-beta-4-2024-04-11" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id42">
<h5>Bugfixes<a class="headerlink" href="#id42" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix misused call to <cite>endpoint_uri</cite> for all cases of <code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code> by being able to retrieve either the <code class="docutils literal notranslate"><span class="pre">ipc_path</span></code> or the <code class="docutils literal notranslate"><span class="pre">endpoint_uri</span></code> from the base class with <code class="docutils literal notranslate"><span class="pre">endpoint_uri_or_ipc_path</span></code> property. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3319">#3319</a>)</p></li>
</ul>
</section>
<section id="id43">
<h5>Improved Documentation<a class="headerlink" href="#id43" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">eth_createAccessList</span></code> docs to reflect the correct behavior. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3327">#3327</a>)</p></li>
</ul>
</section>
<section id="id44">
<h5>Features<a class="headerlink" href="#id44" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Use in-house exception wrappers for common Python exceptions, such as <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>, <code class="docutils literal notranslate"><span class="pre">TypeError</span></code>, <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>, and <code class="docutils literal notranslate"><span class="pre">AssertionError</span></code>, for better control over exception handling. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3300">#3300</a>)</p></li>
<li><p>Add request formatter for <code class="docutils literal notranslate"><span class="pre">maxFeePerBlobGas</span></code> when sending blob transactions. Add formatters for <code class="docutils literal notranslate"><span class="pre">blobGasPrice</span></code> and <code class="docutils literal notranslate"><span class="pre">blobGasUsed</span></code> for <em>eth_getTransactionReceipt</em>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3322">#3322</a>)</p></li>
<li><p>Add formatters to ensure that the result of a <code class="docutils literal notranslate"><span class="pre">eth_createAccessList</span></code> response can be plugged directly into an <code class="docutils literal notranslate"><span class="pre">accessList</span></code> in a transaction. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3327">#3327</a>)</p></li>
<li><p>Add Cancun support to <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code>; update Cancun-related fields in some internal types. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3332">#3332</a>)</p></li>
</ul>
</section>
<section id="id45">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id45" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">pre-commit</span></code> for linting, run updated lint tools and fix errors (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3297">#3297</a>)</p></li>
<li><p>Dependency updates: <code class="docutils literal notranslate"><span class="pre">eth-abi&gt;=5.0.1</span></code>, <code class="docutils literal notranslate"><span class="pre">eth-account&gt;=0.12.0</span></code> <code class="docutils literal notranslate"><span class="pre">eth-typing&gt;=4.0.0</span></code> and <code class="docutils literal notranslate"><span class="pre">hexbytes&gt;=1.2.0</span></code> with relevant changes to support these. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3298">#3298</a>)</p></li>
<li><p>Remove code conditionally necessary for <code class="docutils literal notranslate"><span class="pre">python&lt;=3.7</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3317">#3317</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-0-0-beta-3-2024-03-28">
<h4>web3.py v7.0.0-beta.3 (2024-03-28)<a class="headerlink" href="#web3-py-v7-0-0-beta-3-2024-03-28" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id46">
<h5>Bugfixes<a class="headerlink" href="#id46" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">process_log()</span></code> when parsing logs for events with indexed and non-indexed inputs. <code class="docutils literal notranslate"><span class="pre">get_event_data()</span></code> now compares log topics and event ABIs as hex values. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3289">#3289</a>)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">process_log</span></code> for <code class="docutils literal notranslate"><span class="pre">HexStr</span></code> inputs. Explicit type coercion of entry <code class="docutils literal notranslate"><span class="pre">topics</span></code> and <code class="docutils literal notranslate"><span class="pre">data</span></code> values. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3293">#3293</a>)</p></li>
<li><p>Fix typing for json data argument to <code class="docutils literal notranslate"><span class="pre">eth_signTypedData</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3308">#3308</a>)</p></li>
</ul>
</section>
<section id="id47">
<h5>Improved Documentation<a class="headerlink" href="#id47" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add note about middlewares change to v7 migration guide. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3277">#3277</a>)</p></li>
<li><p>Rearrange v7 migration guide and include upgrade path from WebsocketProviderV2 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3310">#3310</a>)</p></li>
</ul>
</section>
<section id="id48">
<h5>Features<a class="headerlink" href="#id48" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add support for <code class="docutils literal notranslate"><span class="pre">eth_getRawTransactionByHash</span></code> RPC method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3247">#3247</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">user_message</span></code> kwarg for human readable <code class="docutils literal notranslate"><span class="pre">Web3Exception</span></code> messages. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3263">#3263</a>)</p></li>
<li><p>Add formatters for type 3 transaction fields <code class="docutils literal notranslate"><span class="pre">maxFeePerBlobGas</span></code> and <code class="docutils literal notranslate"><span class="pre">blobVersionedHashes</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3314">#3314</a>)</p></li>
</ul>
</section>
<section id="id49">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id49" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add a daily CI run (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3272">#3272</a>)</p></li>
<li><p>Add linting for non-inclusive language with <code class="docutils literal notranslate"><span class="pre">blocklint</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3275">#3275</a>)</p></li>
</ul>
</section>
<section id="id50">
<h5>Miscellaneous Changes<a class="headerlink" href="#id50" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/3304">#3304</a></p></li>
</ul>
</section>
<section id="id51">
<h5>Performance Improvements<a class="headerlink" href="#id51" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Importing <code class="docutils literal notranslate"><span class="pre">ens._normalization</span></code> is deferred until the first call of <code class="docutils literal notranslate"><span class="pre">ens.utils.normalize_name</span></code> in order to speed up <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">web3</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3285">#3285</a>)</p></li>
<li><p>Utilize <code class="docutils literal notranslate"><span class="pre">async</span></code> functionality when popping responses from request manager cache for persistent connection providers. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3306">#3306</a>)</p></li>
</ul>
</section>
<section id="id52">
<h5>Removals<a class="headerlink" href="#id52" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">Contract.encodeABI()</span></code> in favor of <code class="docutils literal notranslate"><span class="pre">Contract.encode_abi()</span></code> to follow standard conventions. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3281">#3281</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-0-0-beta-2-2024-03-11">
<h4>web3.py v7.0.0-beta.2 (2024-03-11)<a class="headerlink" href="#web3-py-v7-0-0-beta-2-2024-03-11" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id53">
<h5>Breaking Changes<a class="headerlink" href="#id53" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Move <code class="docutils literal notranslate"><span class="pre">middlewares</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">middleware</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3276">#3276</a>)</p></li>
</ul>
</section>
<section id="id54">
<h5>Bugfixes<a class="headerlink" href="#id54" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix/update methods and decorators in <code class="docutils literal notranslate"><span class="pre">web3/_utils/abi.py</span></code> to address issues raised by <code class="docutils literal notranslate"><span class="pre">mypy</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3269">#3269</a>)</p></li>
<li><p>Catch all types of <code class="docutils literal notranslate"><span class="pre">eth-abi</span></code> <code class="docutils literal notranslate"><span class="pre">DecodingError</span></code> in <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider-&gt;_make_request()</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3271">#3271</a>)</p></li>
</ul>
</section>
<section id="id55">
<h5>Improved Documentation<a class="headerlink" href="#id55" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove annual user survey prompt from docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3218">#3218</a>)</p></li>
<li><p>Introduce feedback form banner prompt on docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3253">#3253</a>)</p></li>
<li><p>Refresh of the middleware docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3266">#3266</a>)</p></li>
</ul>
</section>
<section id="id56">
<h5>Miscellaneous Changes<a class="headerlink" href="#id56" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/3259">#3259</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/3262">#3262</a></p></li>
</ul>
</section>
<section id="id57">
<h5>Removals<a class="headerlink" href="#id57" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove the <code class="docutils literal notranslate"><span class="pre">ethpm</span></code> module and related docs, tests, and dependencies (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3261">#3261</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v7-0-0-beta-1-2024-02-28">
<h4>web3.py v7.0.0-beta.1 (2024-02-28)<a class="headerlink" href="#web3-py-v7-0-0-beta-1-2024-02-28" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id58">
<h5>Breaking Changes<a class="headerlink" href="#id58" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Refactor the middleware setup so that request processors and response processors are separated. This will allow for more flexibility in the future and aid in the implementation of features such as batched requests. This PR also closes out a few outstanding issues and will be the start of the breaking changes for <cite>web3.py</cite> <code class="docutils literal notranslate"><span class="pre">v7</span></code>. Review PR for a full list of changes. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3169">#3169</a>)</p></li>
<li><p>Use a message listener background task for <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> rather than relying on <code class="docutils literal notranslate"><span class="pre">ws.recv()</span></code> blocking. Some breaking changes to API, notably <code class="docutils literal notranslate"><span class="pre">listen_to_websocket</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">process_subscriptions</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3179">#3179</a>)</p></li>
<li><p>Drop dependency on <code class="docutils literal notranslate"><span class="pre">lru-dict</span></code> library. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3196">#3196</a>)</p></li>
<li><p>Drop support for python 3.7 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3198">#3198</a>)</p></li>
<li><p>Return iterable of <code class="docutils literal notranslate"><span class="pre">ABIFunction``s</span> <span class="pre">from</span> <span class="pre">the</span> <span class="pre">``BaseContractFunctions</span></code> iterator. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3200">#3200</a>)</p></li>
<li><p>Name changes internal to the library related to <code class="docutils literal notranslate"><span class="pre">v7</span></code>: <code class="docutils literal notranslate"><span class="pre">WebsocketProvider</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">LegacyWebSocketProvider</span></code>, <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">WebSocketProvider</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3225">#3225</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CallOverride</span></code> type change to <code class="docutils literal notranslate"><span class="pre">StateOverride</span></code> to reflect better the type name for the state override. <code class="docutils literal notranslate"><span class="pre">eth_call</span></code> is also not the only method with this param, making the name more generic. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3227">#3227</a>)</p></li>
<li><p>Rename <cite>beacon/main.py</cite> -&gt; <cite>beacon/beacon.py</cite> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3233">#3233</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code> now returns <code class="docutils literal notranslate"><span class="pre">input</span></code> for <cite>eth_getTransaction*</cite> for better consistency with JSON-RPC spec. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3235">#3235</a>)</p></li>
<li><p>Change the signature for the async version of <code class="docutils literal notranslate"><span class="pre">wait_for_transaction_receipt()</span></code> to use <code class="docutils literal notranslate"><span class="pre">Optional[float]</span></code> instead of <code class="docutils literal notranslate"><span class="pre">float</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3237">#3237</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_default_ipc_path()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_dev_ipc_path()</span></code> now return the path value without checking if the <code class="docutils literal notranslate"><span class="pre">geth.ipc</span></code> file exists. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3245">#3245</a>)</p></li>
</ul>
</section>
<section id="id59">
<h5>Bugfixes<a class="headerlink" href="#id59" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix return type of <code class="docutils literal notranslate"><span class="pre">AsyncContract.constructor</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3192">#3192</a>)</p></li>
<li><p>Handle new geth errors related to waiting for a transaction receipt while transactions are still being indexed. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3216">#3216</a>)</p></li>
</ul>
</section>
<section id="id60">
<h5>Improved Documentation<a class="headerlink" href="#id60" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Documentation was updated to reflect early changes to <code class="docutils literal notranslate"><span class="pre">v7</span></code> from <code class="docutils literal notranslate"><span class="pre">v6</span></code>. A <code class="docutils literal notranslate"><span class="pre">v6</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">v7</span></code> migration guide was also started and will be added to as <code class="docutils literal notranslate"><span class="pre">v7</span></code> breaking changes are introduced. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3211">#3211</a>)</p></li>
<li><p>Remove ENS v6 breaking change warning from v7 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3254">#3254</a>)</p></li>
</ul>
</section>
<section id="id61">
<h5>Features<a class="headerlink" href="#id61" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add AsyncIPCProvider (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2984">#2984</a>)</p></li>
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">state_override</span></code> parameter for <code class="docutils literal notranslate"><span class="pre">eth_estimateGas</span></code> method. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3164">#3164</a>)</p></li>
<li><p>Upgrade <cite>eth-tester</cite> to <code class="docutils literal notranslate"><span class="pre">v0.10.0-b.1</span></code> and turn on <code class="docutils literal notranslate"><span class="pre">eth_feeHistory</span></code> support for <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3172">#3172</a>)</p></li>
<li><p>Add formatters for new <code class="docutils literal notranslate"><span class="pre">Cancun</span></code> network upgrade block header fields: <code class="docutils literal notranslate"><span class="pre">blobGasUsed</span></code>, <code class="docutils literal notranslate"><span class="pre">excessBlobGas</span></code>, and <code class="docutils literal notranslate"><span class="pre">parentBeaconBlockRoot</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3223">#3223</a>)</p></li>
<li><p>Contract event <code class="docutils literal notranslate"><span class="pre">get_logs</span></code> results sorted by each <code class="docutils literal notranslate"><span class="pre">ContractEvent</span></code> <code class="docutils literal notranslate"><span class="pre">logIndex</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3228">#3228</a>)</p></li>
</ul>
</section>
<section id="id62">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id62" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Create test fixture for latest <code class="docutils literal notranslate"><span class="pre">geth</span></code> version. Run tests with <code class="docutils literal notranslate"><span class="pre">geth</span></code> in <code class="docutils literal notranslate"><span class="pre">--dev</span></code> mode. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3191">#3191</a>)</p></li>
<li><p>Validate geth version used to generate the integration test fixture against the version in the binary that is used to run the tests. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3193">#3193</a>)</p></li>
<li><p>Internal change to <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> before release: raise exceptions in message listener task by default; opting to silence them via a flag. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3202">#3202</a>)</p></li>
<li><p>Compile contracts with and test against new Solidity version <code class="docutils literal notranslate"><span class="pre">v0.8.24</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3204">#3204</a>)</p></li>
<li><p>Formatting updates for <code class="docutils literal notranslate"><span class="pre">black==24.1.0</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3207">#3207</a>)</p></li>
<li><p>Allow HTTP provider request retry configuration to be turned off appropriately. Internal change since <code class="docutils literal notranslate"><span class="pre">v7</span></code> has not yet been released. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3211">#3211</a>)</p></li>
<li><p>Upgraded geth fixture version (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3231">#3231</a>)</p></li>
</ul>
</section>
<section id="id63">
<h5>Miscellaneous Changes<a class="headerlink" href="#id63" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2964">#2964</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/3248">#3248</a></p></li>
</ul>
</section>
<section id="id64">
<h5>Performance Improvements<a class="headerlink" href="#id64" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove call to <code class="docutils literal notranslate"><span class="pre">parse_block_identifier</span></code> when initializing <code class="docutils literal notranslate"><span class="pre">ContractCaller</span></code> functions. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3257">#3257</a>)</p></li>
</ul>
</section>
<section id="id65">
<h5>Removals<a class="headerlink" href="#id65" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">normalize_request_parameters</span></code> middleware was in a stale state and not being used or tested. This middleware has been removed. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3211">#3211</a>)</p></li>
<li><p>Remove deprecated <code class="docutils literal notranslate"><span class="pre">geth.miner</span></code> namespace and methods. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3236">#3236</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-14-0-2024-01-10">
<h4>web3.py v6.14.0 (2024-01-10)<a class="headerlink" href="#web3-py-v6-14-0-2024-01-10" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id66">
<h5>Bugfixes<a class="headerlink" href="#id66" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Change <code class="docutils literal notranslate"><span class="pre">fee_history</span></code> default behavior. If <code class="docutils literal notranslate"><span class="pre">reward_percentiles</span></code> arg not included, pass it to the provider as an empty list instead of <code class="docutils literal notranslate"><span class="pre">None</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3185">#3185</a>)</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">importlib.metadata</span></code> for version info if python&gt;=3.8 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3187">#3187</a>)</p></li>
</ul>
</section>
<section id="id67">
<h5>Improved Documentation<a class="headerlink" href="#id67" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove docs reference for removed <code class="docutils literal notranslate"><span class="pre">protocol_version</span></code> RPC method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3183">#3183</a>)</p></li>
</ul>
</section>
<section id="id68">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id68" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Re-define how async vs sync core test suites are ran. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3180">#3180</a>)</p></li>
<li><p>Add basic import and version tests for the <code class="docutils literal notranslate"><span class="pre">web3</span></code> module (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3187">#3187</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-13-0-2023-12-20">
<h4>web3.py v6.13.0 (2023-12-20)<a class="headerlink" href="#web3-py-v6-13-0-2023-12-20" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id69">
<h5>Features<a class="headerlink" href="#id69" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Implement async <code class="docutils literal notranslate"><span class="pre">eth_createAccessList</span></code> RPC method to create an EIP-2930 access list. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3167">#3167</a>)</p></li>
</ul>
</section>
<section id="id70">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id70" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add flaky async Geth integration tests to CI (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3170">#3170</a>)</p></li>
<li><p>Fix wrong test reference for <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code> integration test suite. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3171">#3171</a>)</p></li>
<li><p>Small fix for integration tests for <code class="docutils literal notranslate"><span class="pre">tox</span></code> to recognize independent patterns for each test run. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3173">#3173</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-12-0-2023-12-11">
<h4>web3.py v6.12.0 (2023-12-11)<a class="headerlink" href="#web3-py-v6-12-0-2023-12-11" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id71">
<h5>Improved Documentation<a class="headerlink" href="#id71" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Make downloadable versions of docs available in <code class="docutils literal notranslate"><span class="pre">pdf</span></code>, <code class="docutils literal notranslate"><span class="pre">htmlzip</span></code>, and <code class="docutils literal notranslate"><span class="pre">epub</span></code> formats (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3153">#3153</a>)</p></li>
<li><p>Add 2023 user survey fine art banner in the docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3159">#3159</a>)</p></li>
<li><p>Polish the community resources docs page (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3162">#3162</a>)</p></li>
</ul>
</section>
<section id="id72">
<h5>Features<a class="headerlink" href="#id72" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">createAccessList</span></code> RPC endpoint to create an EIP-2930 access list. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2381">#2381</a>)</p></li>
</ul>
</section>
<section id="id73">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id73" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Run flaky eth-tester tests on CI (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3157">#3157</a>)</p></li>
<li><p>Pin <code class="docutils literal notranslate"><span class="pre">pytest-asyncio</span></code> dependency to &lt;0.23 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3160">#3160</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-11-4-2023-11-27">
<h4>web3.py v6.11.4 (2023-11-27)<a class="headerlink" href="#web3-py-v6-11-4-2023-11-27" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id74">
<h5>Bugfixes<a class="headerlink" href="#id74" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix collision of <code class="docutils literal notranslate"><span class="pre">w3</span></code> variable when initializing contract with function of the same name (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3147">#3147</a>)</p></li>
</ul>
</section>
<section id="id75">
<h5>Miscellaneous Changes<a class="headerlink" href="#id75" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/3148">#3148</a></p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-11-3-2023-11-08">
<h4>web3.py v6.11.3 (2023-11-08)<a class="headerlink" href="#web3-py-v6-11-3-2023-11-08" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id76">
<h5>Bugfixes<a class="headerlink" href="#id76" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>When coming back through the middleware onion after a request is made, we have the response <code class="docutils literal notranslate"><span class="pre">id</span></code>. Use it to match to the cached request information and process the response accordingly. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3140">#3140</a>)</p></li>
</ul>
</section>
<section id="id77">
<h5>Improved Documentation<a class="headerlink" href="#id77" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Adds Discord bot template repo to Resources page (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3143">#3143</a>)</p></li>
</ul>
</section>
<section id="id78">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id78" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Additional contract <code class="docutils literal notranslate"><span class="pre">abi</span></code> documentation to make it a clear requirement for contract instances. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2539">#2539</a>)</p></li>
<li><p>Fix type annotations for <code class="docutils literal notranslate"><span class="pre">web3</span></code> constants. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3138">#3138</a>)</p></li>
<li><p>Add upper pin to deprecated dependency <code class="docutils literal notranslate"><span class="pre">lru-dict</span></code> whose new minor version release introduced a typing issue with CI lint builds. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3144">#3144</a>)</p></li>
<li><p>Recompile test contracts with new Solidity version <code class="docutils literal notranslate"><span class="pre">v0.8.23</span></code> to ensure compatibility. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3146">#3146</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-11-2-2023-10-30">
<h4>web3.py v6.11.2 (2023-10-30)<a class="headerlink" href="#web3-py-v6-11-2-2023-10-30" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id79">
<h5>Improved Documentation<a class="headerlink" href="#id79" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix formatting in documentation for creating an account. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3128">#3128</a>)</p></li>
<li><p>Fix broken links for Apeworx and Sepolia faucet (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3130">#3130</a>)</p></li>
</ul>
</section>
<section id="id80">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id80" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Speed up the core test suite by splitting up sync and async tests. This reduces the CI build times to ~8min from ~12min. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3111">#3111</a>)</p></li>
<li><p>Re-compile test contracts with Solidity <code class="docutils literal notranslate"><span class="pre">v0.8.22</span></code> to ensure compatibility with this latest Solidity version. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3134">#3134</a>)</p></li>
<li><p>Improvements on yielding to the event loop while searching in response caches and calling <code class="docutils literal notranslate"><span class="pre">recv()</span></code> on the websocket connection for <code class="docutils literal notranslate"><span class="pre">WebSocketProviderV2</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3135">#3135</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-11-1-2023-10-18">
<h4>web3.py v6.11.1 (2023-10-18)<a class="headerlink" href="#web3-py-v6-11-1-2023-10-18" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id81">
<h5>Improved Documentation<a class="headerlink" href="#id81" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> documentation. Document a general overview of the <code class="docutils literal notranslate"><span class="pre">RequestProcessor</span></code> class and its internal caches. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3125">#3125</a>)</p></li>
</ul>
</section>
<section id="id82">
<h5>Features<a class="headerlink" href="#id82" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Properly define an <code class="docutils literal notranslate"><span class="pre">__await__()</span></code> method on the <code class="docutils literal notranslate"><span class="pre">_PersistentConnectionWeb3</span></code> class so a persistent connection may be initialized using the <code class="docutils literal notranslate"><span class="pre">await</span></code> pattern. Integration tests added for initializing the persistent connection using the <code class="docutils literal notranslate"><span class="pre">await</span></code> pattern. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3125">#3125</a>)</p></li>
</ul>
</section>
<section id="id83">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id83" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Updates and refactoring for the <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> class and its internal supporting classes and logic. Separation of one-to-one and one-to-many request responses. Storing of one-to-many responses in a <code class="docutils literal notranslate"><span class="pre">deque</span></code> and one-to-one responses in a <code class="docutils literal notranslate"><span class="pre">SimpleCache</span></code> class. Provide an async lock around the websocket <code class="docutils literal notranslate"><span class="pre">recv()</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3125">#3125</a>)</p></li>
<li><p>Add upper pin to <code class="docutils literal notranslate"><span class="pre">hexbytes</span></code> dependency to due incoming breaking change (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3127">#3127</a>)</p></li>
</ul>
</section>
<section id="id84">
<h5>Miscellaneous Changes<a class="headerlink" href="#id84" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/3114">#3114</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/3129">#3129</a></p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-11-0-2023-10-11">
<h4>web3.py v6.11.0 (2023-10-11)<a class="headerlink" href="#web3-py-v6-11-0-2023-10-11" title="Link to this heading">ÔÉÅ</a></h4>
<section id="breaking-changes-to-beta-apis">
<h5>Breaking Changes (to Beta APIs)<a class="headerlink" href="#breaking-changes-to-beta-apis" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Refactor the async iterator pattern for message streams from the websocket connection for <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> to a proper async iterator. This allows for a more natural usage of the iterator pattern and mimics the behavior of the underlying <code class="docutils literal notranslate"><span class="pre">websockets</span></code> library. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3116">#3116</a>)</p></li>
</ul>
</section>
<section id="id85">
<h5>Bugfixes<a class="headerlink" href="#id85" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Use hashes to compare equality of two <code class="docutils literal notranslate"><span class="pre">AttributeDict</span></code> classes (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3104">#3104</a>)</p></li>
<li><p>Fix issues with formatting middleware, such as <code class="docutils literal notranslate"><span class="pre">async_geth_poa_middleware</span></code> and subscription responses for <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3116">#3116</a>)</p></li>
</ul>
</section>
<section id="id86">
<h5>Improved Documentation<a class="headerlink" href="#id86" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Change <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code> to <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">compose</span></code> in the Contributing docs examples. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3107">#3107</a>)</p></li>
<li><p>Updates to the <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> documentation async iterator example for iterating over a persistent stream of messages from the websocket connection via <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3116">#3116</a>)</p></li>
<li><p>Update outdated node and private key management verbiage. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3117">#3117</a>)</p></li>
</ul>
</section>
<section id="id87">
<h5>Features<a class="headerlink" href="#id87" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Allow passing in a <code class="docutils literal notranslate"><span class="pre">float</span></code> for a <code class="docutils literal notranslate"><span class="pre">request_timeout</span></code> for requests for the <code class="docutils literal notranslate"><span class="pre">Beacon</span></code> class. Update some Beacon API endpoints (sync and async). (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3106">#3106</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">allow_list</span></code> kwarg for <code class="docutils literal notranslate"><span class="pre">exception_retry_middleware</span></code> to allow for a custom list of RPC endpoints. Add a sleep between retries and a customizable <code class="docutils literal notranslate"><span class="pre">backoff_factor</span></code> to control the sleep time between retry attempts. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3120">#3120</a>)</p></li>
</ul>
</section>
<section id="id88">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id88" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Refactor logic for the <code class="docutils literal notranslate"><span class="pre">input_munger()</span></code> method on the <code class="docutils literal notranslate"><span class="pre">Method</span></code> class. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2987">#2987</a>)</p></li>
<li><p>Pin mypy to v1.4.1, the last to support py37 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3122">#3122</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-10-0-2023-09-21">
<h4>web3.py v6.10.0 (2023-09-21)<a class="headerlink" href="#web3-py-v6-10-0-2023-09-21" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id89">
<h5>Breaking Changes (to Beta APIs)<a class="headerlink" href="#id89" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Breaking change to the API for interacting with a persistent websocket connection via <code class="docutils literal notranslate"><span class="pre">AsyncWeb3</span></code> and <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code>. This change internalizes the <code class="docutils literal notranslate"><span class="pre">provider.ws</span></code> property and opts for a <code class="docutils literal notranslate"><span class="pre">w3.ws</span></code> API achieved via a new <code class="docutils literal notranslate"><span class="pre">WebsocketConnection</span></code> class. With these changes, <code class="docutils literal notranslate"><span class="pre">eth_subscription</span></code> messages now return the subscription id as the <code class="docutils literal notranslate"><span class="pre">subscription</span></code> param and the formatted message as the <code class="docutils literal notranslate"><span class="pre">result</span></code> param. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3096">#3096</a>)</p></li>
</ul>
</section>
<section id="id90">
<h5>Bugfixes<a class="headerlink" href="#id90" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Return <cite>w3.eth.gas_price</cite> when calculating time based gas price strategy for an empty chain. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1149">#1149</a>)</p></li>
<li><p>Update <cite>LogReceipt</cite> and <cite>TxReceipt</cite> declarations. Remove <cite>LogReceipt</cite>‚Äôs <cite>payload</cite> and <cite>topic</cite> attributes. Refactor <cite>LogEntry</cite> to <cite>LogReceipt</cite>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3043">#3043</a>)</p></li>
<li><p>Fixes <code class="docutils literal notranslate"><span class="pre">AsyncEth.max_priority_fee_per_gas</span></code>. It wasn‚Äôt falling back to <code class="docutils literal notranslate"><span class="pre">eth_feeHistory</span></code> since the <code class="docutils literal notranslate"><span class="pre">MethodUnavailable</span></code> error was introduced. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3084">#3084</a>)</p></li>
</ul>
</section>
<section id="id91">
<h5>Improved Documentation<a class="headerlink" href="#id91" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> documentation to reflect the new public websocket API via the <code class="docutils literal notranslate"><span class="pre">WebsocketConnection</span></code> class. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3096">#3096</a>)</p></li>
</ul>
</section>
<section id="id92">
<h5>Features<a class="headerlink" href="#id92" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Improved error messaging for exceptions from malformed JSON-RPC responses. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3053">#3053</a>)</p></li>
<li><p>Enable filtering by non-indexed arguments for contract event <code class="docutils literal notranslate"><span class="pre">get_logs()</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3078">#3078</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth_maxPriorityFeePerGas</span></code> to <code class="docutils literal notranslate"><span class="pre">exception_retry_middleware</span></code> whitelist (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3090">#3090</a>)</p></li>
<li><p>Sync responses for <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> open connections with requests via matching RPC <code class="docutils literal notranslate"><span class="pre">id</span></code> values. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3096">#3096</a>)</p></li>
<li><p>Properly JSON encode <code class="docutils literal notranslate"><span class="pre">AttributeDict</span></code>, <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, and <code class="docutils literal notranslate"><span class="pre">HexBytes</span></code> when sending a JSON-RPC request by utilizing the in-house <code class="docutils literal notranslate"><span class="pre">Web3JsonEncoder</span></code> class. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3101">#3101</a>)</p></li>
</ul>
</section>
<section id="id93">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id93" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix an issue with an IPC test present only on MacOSX. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/929">#929</a>)</p></li>
<li><p>Ignore flake8 rule F401 (unused import) in all <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> files (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3097">#3097</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-9-0-2023-08-23">
<h4>web3.py v6.9.0 (2023-08-23)<a class="headerlink" href="#web3-py-v6-9-0-2023-08-23" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id94">
<h5>Bugfixes<a class="headerlink" href="#id94" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix the type for <code class="docutils literal notranslate"><span class="pre">input</span></code> in <code class="docutils literal notranslate"><span class="pre">TxData</span></code> from <code class="docutils literal notranslate"><span class="pre">HexStr</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">HexBytes</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3074">#3074</a>)</p></li>
<li><p>Fix an issue with <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> when responses to a request aren‚Äôt found in the cache (<code class="docutils literal notranslate"><span class="pre">None</span></code> values). (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3075">#3075</a>)</p></li>
<li><p>Re-expose some websockets constants found in <code class="docutils literal notranslate"><span class="pre">web3.providers.websocket.websocket</span></code> via <code class="docutils literal notranslate"><span class="pre">web3.providers.websocket</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3076">#3076</a>)</p></li>
<li><p>Return <code class="docutils literal notranslate"><span class="pre">NotImplemented</span></code> constant, rather than raising <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> for <code class="docutils literal notranslate"><span class="pre">NamedElementOnion.__add__()</span></code>, based on Python standards. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3080">#3080</a>)</p></li>
<li><p>Only release <code class="docutils literal notranslate"><span class="pre">async_lock</span></code> if it‚Äôs locked to begin with. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3083">#3083</a>)</p></li>
</ul>
</section>
<section id="id95">
<h5>Improved Documentation<a class="headerlink" href="#id95" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add MEV blocking tutorial to Resources docs page (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3072">#3072</a>)</p></li>
<li><p>Fix documentation around current state of <code class="docutils literal notranslate"><span class="pre">get_logs()</span></code> usage and arguments. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3073">#3073</a>)</p></li>
<li><p>Add an Ape hackathon kit to Resources documenation page (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3082">#3082</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-8-0-2023-08-02">
<h4>web3.py v6.8.0 (2023-08-02)<a class="headerlink" href="#web3-py-v6-8-0-2023-08-02" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id96">
<h5>Bugfixes<a class="headerlink" href="#id96" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix the type for the optional param asking for ‚Äúfull transactions‚Äù when subscribing to <code class="docutils literal notranslate"><span class="pre">newPendingTransactions</span></code> via <code class="docutils literal notranslate"><span class="pre">eth_subscribe</span></code> to <code class="docutils literal notranslate"><span class="pre">bool</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3067">#3067</a>)</p></li>
</ul>
</section>
<section id="id97">
<h5>Improved Documentation<a class="headerlink" href="#id97" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Change docs to reflect AsyncHTTPProvider does accept ENS names now (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3070">#3070</a>)</p></li>
</ul>
</section>
<section id="id98">
<h5>Features<a class="headerlink" href="#id98" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Return structured JSON-RPC errors for missing or unimplemented eth-tester methods. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3061">#3061</a>)</p></li>
<li><p>ENS name-to-address support for <code class="docutils literal notranslate"><span class="pre">eth_subscribe</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3066">#3066</a>)</p></li>
<li><p>Asynchronous iterator support for <code class="docutils literal notranslate"><span class="pre">AsyncWeb3</span></code> with <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> using <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> syntax. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3067">#3067</a>)</p></li>
</ul>
</section>
<section id="id99">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id99" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Minor fixes to type hinting in the core tests setup fixtures. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3069">#3069</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-7-0-2023-07-26">
<h4>web3.py v6.7.0 (2023-07-26)<a class="headerlink" href="#web3-py-v6-7-0-2023-07-26" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id100">
<h5>Bugfixes<a class="headerlink" href="#id100" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Test wheel build in separate directory and virtualenv (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3046">#3046</a>)</p></li>
<li><p>Handle case where data gets returned as <code class="docutils literal notranslate"><span class="pre">None</span></code> in a JSON-RPC error response (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3054">#3054</a>)</p></li>
<li><p>Fixed default windows IPC provider path to work with python 3.11 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3058">#3058</a>)</p></li>
<li><p>Fix return type for <code class="docutils literal notranslate"><span class="pre">rpc_gas_price_strategy</span></code> to <code class="docutils literal notranslate"><span class="pre">int</span></code> but also only convert the <code class="docutils literal notranslate"><span class="pre">strategy_based_gas_price</span></code> to <code class="docutils literal notranslate"><span class="pre">hex</span></code> if it is an <code class="docutils literal notranslate"><span class="pre">int</span></code> in the <code class="docutils literal notranslate"><span class="pre">gas_price_strategy_middleware</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3065">#3065</a>)</p></li>
</ul>
</section>
<section id="id101">
<h5>Improved Documentation<a class="headerlink" href="#id101" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add note to Release Notes about v5 end-of-life and v6.6.0 yank (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3045">#3045</a>)</p></li>
<li><p>Add documentation for <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> (beta). (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3048">#3048</a>)</p></li>
</ul>
</section>
<section id="id102">
<h5>Features<a class="headerlink" href="#id102" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add ENSIP-9 (Multichain Address Resolution) support for <code class="docutils literal notranslate"><span class="pre">address()</span></code> and <code class="docutils literal notranslate"><span class="pre">setup_address()</span></code> for <code class="docutils literal notranslate"><span class="pre">ENS</span></code> and <code class="docutils literal notranslate"><span class="pre">AsyncENS</span></code> classes. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3030">#3030</a>)</p></li>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">eth_subscribe</span></code> and <code class="docutils literal notranslate"><span class="pre">eth_unsubscribe</span></code> methods has been added with the introduction of a new websocket provider, <code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3048">#3048</a>)</p></li>
</ul>
</section>
<section id="id103">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id103" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added recursive typing to <code class="docutils literal notranslate"><span class="pre">ABIFunctionComponents</span></code> type (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3063">#3063</a>)</p></li>
<li><p>Upgrade eth-tester requirement to v0.9.0-b.1 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3064">#3064</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-6-1-2023-07-12">
<h4>web3.py v6.6.1 (2023-07-12)<a class="headerlink" href="#web3-py-v6-6-1-2023-07-12" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id104">
<h5>Bugfixes<a class="headerlink" href="#id104" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">ens/specs</span></code> to MANIFEST.in (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3039">#3039</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-6-0-2023-07-12">
<h4>web3.py v6.6.0 (2023-07-12)<a class="headerlink" href="#web3-py-v6-6-0-2023-07-12" title="Link to this heading">ÔÉÅ</a></h4>
<p><strong>Note: This release was missing the required ``ens/specs`` directory, so it was yanked
from Pypi in favor of v6.6.1</strong></p>
<section id="id105">
<h5>Breaking Changes<a class="headerlink" href="#id105" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>ENS name normalization now uses ENSIP-15 by default. This is technically a breaking change introduced by ENS but, according to ENSIP-15, 99% of existing names should be unaffected. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3024">#3024</a>)</p></li>
</ul>
</section>
<section id="id106">
<h5>Bugfixes<a class="headerlink" href="#id106" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Handle <code class="docutils literal notranslate"><span class="pre">None</span></code> in the formatting middleware (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2546">#2546</a>)</p></li>
<li><p>Fix for a possible bug in <code class="docutils literal notranslate"><span class="pre">construct_sign_and_send_raw_middleware</span></code> where the signed transaction was sent as bytes and expected to be converted to hex by formatting later on. It is now explicitly sent as the hex string hash within the middleware. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2936">#2936</a>)</p></li>
<li><p>Fixes <code class="docutils literal notranslate"><span class="pre">max_priority_fee_per_gas</span></code>. It wasn‚Äôt falling back to <code class="docutils literal notranslate"><span class="pre">eth_feeHistory</span></code> since the <code class="docutils literal notranslate"><span class="pre">MethodUnavailable</span></code> error was introduced. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3002">#3002</a>)</p></li>
<li><p>Properly initialize logger in <code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3026">#3026</a>)</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">AsyncWeb3.solidity_keccak</span></code> to match <code class="docutils literal notranslate"><span class="pre">Web3.solidity_keccak</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3034">#3034</a>)</p></li>
</ul>
</section>
<section id="id107">
<h5>Improved Documentation<a class="headerlink" href="#id107" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Replaced transaction examples with unused account addresses. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2011">#2011</a>)</p></li>
<li><p>Removed obsolete docs for camelCase miner methods and <code class="docutils literal notranslate"><span class="pre">deploy</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2039">#2039</a>)</p></li>
<li><p>Update documentation relating to ENS only being available on mainnet. ENS is available on all networks where the ENS contracts are deployed. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3012">#3012</a>)</p></li>
<li><p>Add first steps section and tidy up learning resources (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3013">#3013</a>)</p></li>
<li><p>Replace references to <code class="docutils literal notranslate"><span class="pre">jasoncarver.eth</span></code> with <code class="docutils literal notranslate"><span class="pre">ens.eth</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3020">#3020</a>)</p></li>
<li><p>Adds ‚ÄúHackathon Helpers‚Äù section to Resources page (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3035">#3035</a>)</p></li>
</ul>
</section>
<section id="id108">
<h5>Features<a class="headerlink" href="#id108" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update ENS Resolver ABI (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1839">#1839</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">async_http_retry_request_middleware</span></code>, an async http request retry middleware for <code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3009">#3009</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth_getStorageAt()</span></code> support for <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3011">#3011</a>)</p></li>
<li><p>Add async support for ENS name-to-address resolution via <code class="docutils literal notranslate"><span class="pre">async_name_to_address_middleware</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3012">#3012</a>)</p></li>
<li><p>Add async support for the sign-and-send raw transaction middleware via <code class="docutils literal notranslate"><span class="pre">construct_async_sign_and_send_raw_middleware()</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3025">#3025</a>)</p></li>
</ul>
</section>
<section id="id109">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id109" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove some warnings from test output (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2991">#2991</a>)</p></li>
<li><p>Introduced the logic for ENSIP-15 ENS name normalization. Originally this was done via a flag in this PR but changed to the default behavior in #3024 before release. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/3000">#3000</a>)</p></li>
</ul>
</section>
<section id="id110">
<h5>Miscellaneous Changes<a class="headerlink" href="#id110" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2997">#2997</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/3011">#3011</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/3023">#3023</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/3037">#3037</a></p></li>
</ul>
</section>
<section id="id111">
<h5>Removals<a class="headerlink" href="#id111" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Removed references to deprecated middlewares with new tests to check default middlewares (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2972">#2972</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-5-0-2023-06-15">
<h4>web3.py v6.5.0 (2023-06-15)<a class="headerlink" href="#web3-py-v6-5-0-2023-06-15" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id112">
<h5>Bugfixes<a class="headerlink" href="#id112" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Properly create a fresh cache for each instance of <code class="docutils literal notranslate"><span class="pre">simple_cache_middleware</span></code> if no cache is provided. Fixes a bug when using this middleware with multiple instances of <code class="docutils literal notranslate"><span class="pre">Web3</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2979">#2979</a>)</p></li>
<li><p>Fix potential race condition when writing cache entries in <code class="docutils literal notranslate"><span class="pre">simple_cache_middleware</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2981">#2981</a>)</p></li>
<li><p>Catch <code class="docutils literal notranslate"><span class="pre">UnicodeDecodeError</span></code> for contract revert messages that cannot be decoded and issue a warning instead, raising a <code class="docutils literal notranslate"><span class="pre">ContractLogicError</span></code> with the raw <code class="docutils literal notranslate"><span class="pre">data</span></code> from the response. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2989">#2989</a>)</p></li>
</ul>
</section>
<section id="id113">
<h5>Improved Documentation<a class="headerlink" href="#id113" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Introduces resources page to documentation (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2957">#2957</a>)</p></li>
<li><p>Completed docstrings for <code class="docutils literal notranslate"><span class="pre">ContractFunction</span></code> and <code class="docutils literal notranslate"><span class="pre">AsyncContractFunction</span></code> classes (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2960">#2960</a>)</p></li>
<li><p>Added ‚Äòunsupported by any current clients‚Äô note to the <code class="docutils literal notranslate"><span class="pre">Eth.sign_typed_data</span></code> docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2961">#2961</a>)</p></li>
<li><p>Removed list of <code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code>-supported methods, it supports them all now (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2962">#2962</a>)</p></li>
<li><p>Modernize the filtering guide, emphasizing <code class="docutils literal notranslate"><span class="pre">get_logs</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2968">#2968</a>)</p></li>
<li><p>Removed references to defunct providers in <code class="docutils literal notranslate"><span class="pre">IPCProvider</span></code> docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2971">#2971</a>)</p></li>
<li><p>Update Matomo analytics script to move to cloud services (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2978">#2978</a>)</p></li>
</ul>
</section>
<section id="id114">
<h5>Features<a class="headerlink" href="#id114" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">sign_typed_data</span></code> method to the <code class="docutils literal notranslate"><span class="pre">AsyncEth</span></code> class (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2920">#2920</a>)</p></li>
<li><p>Add support for Solidity <code class="docutils literal notranslate"><span class="pre">Panic</span></code> errors, available since Solidity 0.8.0. Raises <code class="docutils literal notranslate"><span class="pre">ContractPanicError</span></code> with appropriate messaging based on the known panic error codes. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2986">#2986</a>)</p></li>
</ul>
</section>
<section id="id115">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id115" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">lint-roll</span></code> - dropped <code class="docutils literal notranslate"><span class="pre">isort</span></code> <code class="docutils literal notranslate"><span class="pre">--recursive</span></code> flag, not needed as of their <code class="docutils literal notranslate"><span class="pre">v5</span></code>, added black (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2930">#2930</a>)</p></li>
<li><p>Moved <code class="docutils literal notranslate"><span class="pre">ethpm</span></code> deprecation warning to only show when the module is explicitly enabled (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2983">#2983</a>)</p></li>
<li><p>Update make release to check remote upstream is pointing to ethereum/web3.py. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2988">#2988</a>)</p></li>
<li><p>Removed <cite>pluggy</cite> from dev requirements (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2992">#2992</a>)</p></li>
</ul>
</section>
<section id="id116">
<h5>Miscellaneous Changes<a class="headerlink" href="#id116" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2960">#2960</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2965">#2965</a></p></li>
</ul>
</section>
</section>
<section id="web3-py-v6-4-0-2023-05-15">
<h4>web3.py v6.4.0 (2023-05-15)<a class="headerlink" href="#web3-py-v6-4-0-2023-05-15" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id117">
<h5>Bugfixes<a class="headerlink" href="#id117" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>fix AttributeDicts unhashable if they contain lists recursively tupleizing them (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2908">#2908</a>)</p></li>
</ul>
</section>
<section id="id118">
<h5>Deprecations<a class="headerlink" href="#id118" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>add deprecation notice for the <cite>ethPM</cite> module (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2953">#2953</a>)</p></li>
</ul>
</section>
<section id="id119">
<h5>Improved Documentation<a class="headerlink" href="#id119" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>remove reference to the ability to specify a list of providers - you can‚Äôt anymore (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2949">#2949</a>)</p></li>
<li><p>add deprecation notice for the <cite>ethPM</cite> module (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2953">#2953</a>)</p></li>
</ul>
</section>
<section id="id120">
<h5>Features<a class="headerlink" href="#id120" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> to pull in Shanghai changes and make additional changes to fully support Shanghai with <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2958">#2958</a>)</p></li>
</ul>
</section>
<section id="id121">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id121" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>bump sphinx and readthedocs py versions (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2945">#2945</a>)</p></li>
<li><p>re-compile test contracts with Solidity <code class="docutils literal notranslate"><span class="pre">v0.8.20</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2951">#2951</a>)</p></li>
<li><p>Set towncrier settings in <cite>pyproject.toml</cite> to match the python project template and change newfragment type ‚Äúdoc‚Äù to ‚Äúdocs‚Äù (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2959">#2959</a>)</p></li>
</ul>
</section>
</section>
<section id="v6-3-0-2023-05-03">
<h4>v6.3.0 (2023-05-03)<a class="headerlink" href="#v6-3-0-2023-05-03" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id122">
<h5>Features<a class="headerlink" href="#id122" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add support for custom revert errors (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2795">#2795</a>)</p></li>
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">modify_transaction</span></code> method to the <code class="docutils literal notranslate"><span class="pre">AsyncEth</span></code> class (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2825">#2825</a>)</p></li>
<li><p>add show_traceback flag to is_connected to allow user to see connection error reason (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2912">#2912</a>)</p></li>
<li><p>Add a <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute on the <code class="docutils literal notranslate"><span class="pre">ContractLogicError</span></code> class that returns raw data returned by the node. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2922">#2922</a>)</p></li>
<li><p>Add support via result formatters for <code class="docutils literal notranslate"><span class="pre">reward</span></code> type trace actions on tracing calls. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2929">#2929</a>)</p></li>
</ul>
</section>
<section id="id123">
<h5>Bugfixes<a class="headerlink" href="#id123" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Typing was being ignored for the <code class="docutils literal notranslate"><span class="pre">get_ipc_path</span></code> and <code class="docutils literal notranslate"><span class="pre">get_dev_ipc_path</span></code> functions because of a missing <code class="docutils literal notranslate"><span class="pre">None</span></code> return. Those two methods now explicitly return <code class="docutils literal notranslate"><span class="pre">None</span></code> and have an <code class="docutils literal notranslate"><span class="pre">Optional</span></code> in their type definition. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2917">#2917</a>)</p></li>
<li><p>fix AsyncEventFilterBuilder looking for Web3 instead of AsyncWeb3 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2931">#2931</a>)</p></li>
<li><p>Add check for null withdrawal field on get_block response (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2941">#2941</a>)</p></li>
</ul>
</section>
<section id="id124">
<h5>Improved Documentation<a class="headerlink" href="#id124" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add a decision tree guide for sending transactions (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2919">#2919</a>)</p></li>
<li><p>Update references to master branch (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2933">#2933</a>)</p></li>
<li><p>Cleanup Quickstart guide and next steps (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2935">#2935</a>)</p></li>
<li><p>Cleanup Overview page links and context (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2938">#2938</a>)</p></li>
</ul>
</section>
<section id="id125">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id125" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">build</span></code> to towncrier commands in Makefile (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2915">#2915</a>)</p></li>
<li><p>Update win wheel CI builds to use <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">tox</span> <span class="pre">-r</span></code> instead of specifying the <code class="docutils literal notranslate"><span class="pre">tox</span></code> executable directly. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2923">#2923</a>)</p></li>
<li><p>update pip and tox install on CI containers (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2927">#2927</a>)</p></li>
</ul>
</section>
</section>
<section id="v6-2-0-2023-04-12">
<h4>v6.2.0 (2023-04-12)<a class="headerlink" href="#v6-2-0-2023-04-12" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id126">
<h5>Features<a class="headerlink" href="#id126" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Adds async version of <cite>eth_getUncleCount</cite> methods (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2822">#2822</a>)</p></li>
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">sign_transaction</span></code> method to the <code class="docutils literal notranslate"><span class="pre">AsyncEth</span></code> class (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2827">#2827</a>)</p></li>
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">replace_transaction</span></code> method to the <code class="docutils literal notranslate"><span class="pre">AsyncEth</span></code> class (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2847">#2847</a>)</p></li>
</ul>
</section>
<section id="id127">
<h5>Bugfixes<a class="headerlink" href="#id127" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">TraceFilterParams</span></code> instead of <code class="docutils literal notranslate"><span class="pre">FilterParams</span></code> for <code class="docutils literal notranslate"><span class="pre">trace_filter</span></code> typing (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2913">#2913</a>)</p></li>
</ul>
</section>
<section id="id128">
<h5>Improved Documentation<a class="headerlink" href="#id128" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add welcome banner for Ethereum newcomers (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2905">#2905</a>)</p></li>
<li><p>Added breaking changes from pr2448 to v6 migration guide (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2907">#2907</a>)</p></li>
</ul>
</section>
</section>
<section id="v6-1-0-2023-04-05">
<h4>v6.1.0 (2023-04-05)<a class="headerlink" href="#v6-1-0-2023-04-05" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id129">
<h5>Features<a class="headerlink" href="#id129" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add tracing functionality back in via the <code class="docutils literal notranslate"><span class="pre">tracing</span></code> module, add formatters for human-readable input and output, and attach this module to <code class="docutils literal notranslate"><span class="pre">Web3</span></code> on init / make it a default module. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2851">#2851</a>)</p></li>
<li><p>Add result formatters for <code class="docutils literal notranslate"><span class="pre">withdrawals_root</span></code> and <code class="docutils literal notranslate"><span class="pre">withdrawals</span></code> as part of <code class="docutils literal notranslate"><span class="pre">Shanghai</span></code> hard fork support. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2868">#2868</a>)</p></li>
<li><p>add eth_chainId to exception_retry_middleware whitelist (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2892">#2892</a>)</p></li>
</ul>
</section>
<section id="id130">
<h5>Bugfixes<a class="headerlink" href="#id130" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Mark <cite>test_async_eth_sign</cite> with <cite>&#64;pytest.mark.asyncio</cite> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2858">#2858</a>)</p></li>
<li><p>fix readthedocs broken version selector (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2883">#2883</a>)</p></li>
</ul>
</section>
<section id="id131">
<h5>Improved Documentation<a class="headerlink" href="#id131" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>remove camelCased method deprecation notices from web3.eth docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2882">#2882</a>)</p></li>
<li><p>Add doc blurb about multiple HTTPProviders with the same URL (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2889">#2889</a>)</p></li>
<li><p>fix styling and external link formatting (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2897">#2897</a>)</p></li>
</ul>
</section>
<section id="id132">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id132" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Bump pytest from 6.2.5 to 7+ because of CI <code class="docutils literal notranslate"><span class="pre">DeprecationWarning</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2863">#2863</a>)</p></li>
<li><p>Require eth-abi v4 stable (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2886">#2886</a>)</p></li>
<li><p>remove unused docs dependencies and bump version of remaining (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2890">#2890</a>)</p></li>
<li><p>Update go-ethereum integration test fixture to use the latest version of geth - <code class="docutils literal notranslate"><span class="pre">v1.11.5</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2896">#2896</a>)</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">geth_steps</span></code> in CircleCI builds to pip install the proper version of <code class="docutils literal notranslate"><span class="pre">py-geth</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2898">#2898</a>)</p></li>
<li><p>Update CircleCI windows orb path since it now uses python 3.11. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2899">#2899</a>)</p></li>
<li><p>Bump go version used in CI jobs that install and run go-ethereum and parameterize the version in circleci config file for ease of configuration. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2900">#2900</a>)</p></li>
</ul>
</section>
<section id="id133">
<h5>Miscellaneous changes<a class="headerlink" href="#id133" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2887">#2887</a></p></li>
</ul>
</section>
</section>
<section id="v6-0-0-2023-03-14">
<h4>v6.0.0 (2023-03-14)<a class="headerlink" href="#v6-0-0-2023-03-14" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id134">
<h5>Bugfixes<a class="headerlink" href="#id134" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>fix dict_to_namedtuple unable to handle empty dict as input (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2867">#2867</a>)</p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-11-2023-02-24">
<h4>v6.0.0-beta.11 (2023-02-24)<a class="headerlink" href="#v6-0-0-beta-11-2023-02-24" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id135">
<h5>Features<a class="headerlink" href="#id135" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add the <code class="docutils literal notranslate"><span class="pre">sign</span></code> method to the <code class="docutils literal notranslate"><span class="pre">AsyncEth</span></code> class (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2833">#2833</a>)</p></li>
</ul>
</section>
<section id="id136">
<h5>Bugfixes<a class="headerlink" href="#id136" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>More accurately define the <code class="docutils literal notranslate"><span class="pre">eth_call</span></code> return type as <code class="docutils literal notranslate"><span class="pre">HexBytes</span></code> since the
response is converted to <code class="docutils literal notranslate"><span class="pre">HexBytes</span></code> in the pythonic formatters and there
are differences between <code class="docutils literal notranslate"><span class="pre">HexBytes</span></code> and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> types. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2842">#2842</a>)</p></li>
<li><p>Set default block_identifier in ContractFunction.call() to None (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2846">#2846</a>)</p></li>
</ul>
</section>
<section id="id137">
<h5>Improved Documentation<a class="headerlink" href="#id137" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove unused module lines to instantiate the AsyncHTTPProvider (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2789">#2789</a>)</p></li>
<li><p>Typos fix in docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2817">#2817</a>)</p></li>
<li><p>Add/cleanup docs for the <code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code> in light of the new
<code class="docutils literal notranslate"><span class="pre">AsyncWeb3</span></code> class (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2821">#2821</a>)</p></li>
<li><p>Remove user survey banner following close of survey (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2831">#2831</a>)</p></li>
</ul>
</section>
<section id="id138">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id138" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Do not invoke <code class="docutils literal notranslate"><span class="pre">setup.py</span></code> directly; use <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">build</span></code> where
appropriate. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2714">#2714</a>)</p></li>
<li><p>clean up ignored unused imports (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2838">#2838</a>)</p></li>
<li><p>Recompile test contracts with the new Solidity version <code class="docutils literal notranslate"><span class="pre">0.8.19</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2840">#2840</a>)</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">py-geth</span></code> version and re-generate integration test fixture with geth
<code class="docutils literal notranslate"><span class="pre">v1.11.2</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2841">#2841</a>)</p></li>
</ul>
</section>
<section id="id139">
<h5>Breaking changes<a class="headerlink" href="#id139" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">AsyncWeb3</span></code> class and preserve typing for the async api calls. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2819">#2819</a>)</p></li>
<li><p>Fix typing for <code class="docutils literal notranslate"><span class="pre">CallOverrideParams</span></code> and add proper request formatters for
call state overrides. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2843">#2843</a>)</p></li>
<li><p>Remove python warning and doc notes related to unstable async providers.
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2845">#2845</a>)</p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-10-2023-02-15">
<h4>v6.0.0-beta.10 (2023-02-15)<a class="headerlink" href="#v6-0-0-beta-10-2023-02-15" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id140">
<h5>Features<a class="headerlink" href="#id140" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>add decode_tuples option to contract instantiation (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2799">#2799</a>)</p></li>
</ul>
</section>
<section id="id141">
<h5>Bugfixes<a class="headerlink" href="#id141" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">ethpm</span></code> import issues after making <code class="docutils literal notranslate"><span class="pre">ipfshttpclient</span></code> optional. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2775">#2775</a>)</p></li>
<li><p>Fix for recently-broken <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> exception message parsing for some
exception cases. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2783">#2783</a>)</p></li>
</ul>
</section>
<section id="id142">
<h5>Improved Documentation<a class="headerlink" href="#id142" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added a v6 Migraion Guide (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2778">#2778</a>)</p></li>
<li><p>Rebrand the library to lowercase ‚Äúweb3.py‚Äù (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2804">#2804</a>)</p></li>
<li><p>remove references to Rinkeby or replace with Goerli (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2815">#2815</a>)</p></li>
</ul>
</section>
<section id="id143">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id143" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Organize the <code class="docutils literal notranslate"><span class="pre">eth</span></code> module into separate files for better readability.
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2753">#2753</a>)</p></li>
<li><p>Rename the newly-split <code class="docutils literal notranslate"><span class="pre">eth</span></code> module files to match convention. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2772">#2772</a>)</p></li>
<li><p>Re-compile all test contracts with latest Solidity version. Refactor test
fixtures. Adds a script that compiles all test contracts to the same
directory with selected Solidity version. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2797">#2797</a>)</p></li>
<li><p>Updates to <code class="docutils literal notranslate"><span class="pre">isort</span></code> and <code class="docutils literal notranslate"><span class="pre">black</span></code> required some formatting changes and isort
config refactoring. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2802">#2802</a>)</p></li>
<li><p>Compile test contracts using newly-released Solidity version <code class="docutils literal notranslate"><span class="pre">0.8.18</span></code>.
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2803">#2803</a>)</p></li>
</ul>
</section>
<section id="id144">
<h5>Breaking changes<a class="headerlink" href="#id144" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>All exceptions inherit from a custom class. EthPM exceptions inherit from
EthPMException, ENS exceptions inherit from ENSException, and all other
web3.py exceptions inherit from Web3Exception (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1478">#1478</a>)</p></li>
<li><p>Reorganized contract to contract.py, async_contract.py, base_contract.py and
utils.py. In this change there was a small breaking change where the
constructor of BaseContractCaller contract_function_class was defaulting to a
ContractFunction now there is no default. This was done to separate the base
class from the implementation. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2567">#2567</a>)</p></li>
<li><p>When calling a contract, use <code class="docutils literal notranslate"><span class="pre">w3.eth.default_block</span></code> if no block_identifier
is specified instead of <code class="docutils literal notranslate"><span class="pre">latest</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2777">#2777</a>)</p></li>
<li><p>Strict bytes type checking is now default for <code class="docutils literal notranslate"><span class="pre">web3.py</span></code>. This change also
adds a boolean flag on the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> class for turning this feature on and
off, as well as a flag on the <code class="docutils literal notranslate"><span class="pre">ENS</span></code> class for control over a standalone
<code class="docutils literal notranslate"><span class="pre">ENS</span></code> instance. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2788">#2788</a>)</p></li>
<li><p>When a method is not supported by a node provider, raise a MethodUnavailable
error instead of the generic ValueError. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2796">#2796</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dict</span></code> to <code class="docutils literal notranslate"><span class="pre">AttributeDict</span></code> conversion is no longer a default result
formatter. This conversion is now done via a default middleware that may be
removed. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2805">#2805</a>)</p></li>
<li><p>Removed deprecated <code class="docutils literal notranslate"><span class="pre">manager.request_async</span></code> and associated methods. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2810">#2810</a>)</p></li>
<li><p>removed Rinkeby from list of allowed chains in EthPM (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2815">#2815</a>)</p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-9-2023-01-03">
<h4>v6.0.0-beta.9 (2023-01-03)<a class="headerlink" href="#v6-0-0-beta-9-2023-01-03" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id145">
<h5>Features<a class="headerlink" href="#id145" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add async <code class="docutils literal notranslate"><span class="pre">w3.eth.get_block_transaction_count</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2687">#2687</a>)</p></li>
<li><p>Support Python 3.11 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2699">#2699</a>)</p></li>
<li><p>Load the <code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code> with default async middleware and default
async modules, just as the <code class="docutils literal notranslate"><span class="pre">HTTPProvider</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2736">#2736</a>)</p></li>
<li><p>Add support for Nethermind/Gnosis revert reason formatting (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2739">#2739</a>)</p></li>
<li><p>Added async functionality to filter (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2744">#2744</a>)</p></li>
<li><p>Get contract address from <code class="docutils literal notranslate"><span class="pre">CREATE</span></code> and <code class="docutils literal notranslate"><span class="pre">CREATE2</span></code> opcodes (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2762">#2762</a>)</p></li>
</ul>
</section>
<section id="id146">
<h5>Bugfixes<a class="headerlink" href="#id146" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fixing abi encoding for multidimensional arrays. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2764">#2764</a>)</p></li>
</ul>
</section>
<section id="id147">
<h5>Performance improvements<a class="headerlink" href="#id147" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Some minor performance improvements to the <code class="docutils literal notranslate"><span class="pre">SimpleCache</span></code> class and simple
cache middlewares (sync and async). (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2719">#2719</a>)</p></li>
<li><p>Remove unnecessary <code class="docutils literal notranslate"><span class="pre">await</span></code> for <code class="docutils literal notranslate"><span class="pre">generate_gas_price()</span></code> method as it does
not need to be awaited. Move this method to <code class="docutils literal notranslate"><span class="pre">BaseEth</span></code> to be used directly
by both <code class="docutils literal notranslate"><span class="pre">Eth</span></code> and <code class="docutils literal notranslate"><span class="pre">AsyncEth</span></code> modules. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2735">#2735</a>)</p></li>
</ul>
</section>
<section id="id148">
<h5>Improved Documentation<a class="headerlink" href="#id148" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add user survey to docs banner (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2720">#2720</a>)</p></li>
<li><p>Document improvements for private key info and account funding. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2722">#2722</a>)</p></li>
<li><p>Include eth-tester install note in quickstart (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2755">#2755</a>)</p></li>
</ul>
</section>
<section id="deprecations-and-removals">
<h5>Deprecations and Removals<a class="headerlink" href="#deprecations-and-removals" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Removal of Infura auto provider support. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2706">#2706</a>)</p></li>
<li><p>Removal of <code class="docutils literal notranslate"><span class="pre">version</span></code> module. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2729">#2729</a>)</p></li>
<li><p>Remove already-deprecated <code class="docutils literal notranslate"><span class="pre">start_rpc</span></code> and <code class="docutils literal notranslate"><span class="pre">stop_rpc</span></code> from the
<code class="docutils literal notranslate"><span class="pre">w3.geth.admin</span></code> module. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2731">#2731</a>)</p></li>
</ul>
</section>
<section id="id149">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id149" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Use regex pattern for <code class="docutils literal notranslate"><span class="pre">black</span></code> command for <code class="docutils literal notranslate"><span class="pre">tox</span></code> / <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">lint</span></code> linting
commands. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2727">#2727</a>)</p></li>
<li><p>Use regex pattern for <code class="docutils literal notranslate"><span class="pre">mypy</span></code> command for <code class="docutils literal notranslate"><span class="pre">tox</span></code> / <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">lint</span></code> linting
commands. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2734">#2734</a>)</p></li>
<li><p>Remove internal method <code class="docutils literal notranslate"><span class="pre">apply_formatter_to_array</span></code> and use the method with
the same name from the <code class="docutils literal notranslate"><span class="pre">eth-utils</span></code> library. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2737">#2737</a>)</p></li>
</ul>
</section>
<section id="id150">
<h5>Miscellaneous changes<a class="headerlink" href="#id150" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2751">#2751</a></p></li>
</ul>
</section>
<section id="id151">
<h5>Breaking changes<a class="headerlink" href="#id151" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Snakecase the processReceipt, processLog, createFilter, and getLogs methods
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2709">#2709</a>)</p></li>
<li><p>Remove Parity module and references. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2718">#2718</a>)</p></li>
<li><p>Make the <code class="docutils literal notranslate"><span class="pre">ipfshttpclient</span></code> library opt-in via a web3 install extra. This
only affects the <code class="docutils literal notranslate"><span class="pre">ethpm</span></code> <code class="docutils literal notranslate"><span class="pre">ipfs</span></code> backends, which rely on the library.
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2730">#2730</a>)</p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-8-2022-11-14">
<h4>v6.0.0-beta.8 (2022-11-14)<a class="headerlink" href="#v6-0-0-beta-8-2022-11-14" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id152">
<h5>Features<a class="headerlink" href="#id152" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Async support for caching certain methods via
<code class="docutils literal notranslate"><span class="pre">async_simple_cache_middleware</span></code> as well as constructing custom async
caching middleware via <code class="docutils literal notranslate"><span class="pre">async_construct_simple_cache_middleware</span></code>.
<code class="docutils literal notranslate"><span class="pre">SimpleCache</span></code> class was also added to the public <code class="docutils literal notranslate"><span class="pre">utils</span></code> module. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2579">#2579</a>)</p></li>
<li><p>Remove upper pins on dependencies (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2648">#2648</a>)</p></li>
<li><p>Async support for beacon api. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2689">#2689</a>)</p></li>
<li><p>If the loop for a cached async session is closed, or the session itself was
closed, create a new session at that cache key and properly close and evict
the stale session. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2713">#2713</a>)</p></li>
</ul>
</section>
<section id="id153">
<h5>Bugfixes<a class="headerlink" href="#id153" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>bump <cite>sphinx_rtd_theme</cite> version to fix missing unordered list bullets (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2688">#2688</a>)</p></li>
<li><p>Fix bug to generate unique cache keys when multi-threading &amp; with unique
event loops for async. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2690">#2690</a>)</p></li>
<li><p>Properly release <code class="docutils literal notranslate"><span class="pre">async_lock</span></code> for session requests if an exception is
raised during a task. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2695">#2695</a>)</p></li>
</ul>
</section>
<section id="id154">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id154" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>move definition of RTD install requirements file from their dashboard into
<cite>.readthedocs.yml</cite>, and remove unused <cite>sphinx-better-theme</cite> from requirements
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2688">#2688</a>)</p></li>
</ul>
</section>
<section id="id155">
<h5>Miscellaneous changes<a class="headerlink" href="#id155" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2690">#2690</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2694">#2694</a></p></li>
</ul>
</section>
<section id="id156">
<h5>Breaking changes<a class="headerlink" href="#id156" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove support for dictionary-based caches, for simple-cache-middleware, in
favor of the internal <code class="docutils literal notranslate"><span class="pre">SimpleCache</span></code> class. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2579">#2579</a>)</p></li>
<li><p>Snakecase the clientVersion method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2686">#2686</a>)</p></li>
<li><p>change instances of <cite>createFilter</cite> to <cite>create_filter</cite> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2692">#2692</a>)</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">SolidityError</span></code> in favor of <code class="docutils literal notranslate"><span class="pre">ContractLogicError</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2697">#2697</a>)</p></li>
<li><p>Snakecase the solidityKeccak method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2702">#2702</a>)</p></li>
<li><p>Snakecase the fromWeb3 method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2703">#2703</a>)</p></li>
<li><p>Snakecase the toBytes, toHex, toInt, toJSON, and toText methods (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2707">#2707</a>)</p></li>
<li><p>Snakecase the toAddress, isChecksumAddress, and toChecksumAddress methods
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2708">#2708</a>)</p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-7-2022-10-19">
<h4>v6.0.0-beta.7 (2022-10-19)<a class="headerlink" href="#v6-0-0-beta-7-2022-10-19" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id157">
<h5>Bugfixes<a class="headerlink" href="#id157" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Protobuf dependency had a DoS-able bug. It was fixed in v4.21.6. See:
<a class="reference external" href="https://nvd.nist.gov/vuln/detail/CVE-2022-1941">https://nvd.nist.gov/vuln/detail/CVE-2022-1941</a> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2666">#2666</a>)</p></li>
</ul>
</section>
<section id="id158">
<h5>Improved Documentation<a class="headerlink" href="#id158" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added Chainstack link to quickstart docs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2677">#2677</a>)</p></li>
</ul>
</section>
<section id="id159">
<h5>Deprecations and Removals<a class="headerlink" href="#id159" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove Ropsten auto provider and the relevant references to Ropsten across
the repo (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2672">#2672</a>)</p></li>
</ul>
</section>
<section id="id160">
<h5>Internal Changes - for web3.py Contributors<a class="headerlink" href="#id160" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Clean up remaining uses of deprecated <code class="docutils literal notranslate"><span class="pre">eth_abi</span></code> methods. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2668">#2668</a>)</p></li>
</ul>
</section>
<section id="id161">
<h5>Miscellaneous changes<a class="headerlink" href="#id161" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2671">#2671</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2682">#2682</a></p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-6-2022-09-26">
<h4>v6.0.0-beta.6 (2022-09-26)<a class="headerlink" href="#v6-0-0-beta-6-2022-09-26" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id162">
<h5>Bugfixes<a class="headerlink" href="#id162" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Protobuf dependency breaks at version <code class="docutils literal notranslate"><span class="pre">3.20.2</span></code> and above; pin to <code class="docutils literal notranslate"><span class="pre">3.20.1</span></code>
for now. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2657">#2657</a>)</p></li>
</ul>
</section>
<section id="id163">
<h5>Features<a class="headerlink" href="#id163" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add new predefined block identifiers <code class="docutils literal notranslate"><span class="pre">safe</span></code> and <code class="docutils literal notranslate"><span class="pre">finalized</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2652">#2652</a>)</p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-5-2022-09-19">
<h4>v6.0.0-beta.5 (2022-09-19)<a class="headerlink" href="#v6-0-0-beta-5-2022-09-19" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id164">
<h5>Breaking Changes<a class="headerlink" href="#id164" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Removed IBAN since it was an unused feature (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2537">#2537</a>)</p></li>
<li><p>Update eth-tester dependency to v0.7.0-beta.1; Update eth-account version to
&gt;=0.7.0,&lt;0.8.0 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2623">#2623</a>)</p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">WEB3_INFURA_API_KEY</span></code> environment variable in favor of
<code class="docutils literal notranslate"><span class="pre">WEB3_INFURA_PROJECT_ID</span></code>. Change <code class="docutils literal notranslate"><span class="pre">InfuraKeyNotFound</span></code> exception to
<code class="docutils literal notranslate"><span class="pre">InfuraProjectIdNotFound</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2634">#2634</a>)</p></li>
<li><p>Remove Kovan auto provider (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2635">#2635</a>)</p></li>
<li><p>Snakecase the <cite>isConnected</cite> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2643">#2643</a>)</p></li>
<li><p>Snakecase the <code class="docutils literal notranslate"><span class="pre">toWei</span></code> and <code class="docutils literal notranslate"><span class="pre">fromWei</span></code> methods (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2647">#2647</a>)</p></li>
</ul>
</section>
<section id="id165">
<h5>Bugfixes<a class="headerlink" href="#id165" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> key remapping for <code class="docutils literal notranslate"><span class="pre">logsBloom</span></code> and <code class="docutils literal notranslate"><span class="pre">receiptsRoot</span></code>
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1630">#1630</a>)</p></li>
<li><p>Improve upon issues with session caching - better support for multithreading
and make sure session eviction from cache does not happen prematurely.
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2409">#2409</a>)</p></li>
<li><p>Allow classes to inherit from the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> class by attaching modules
appropriately. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2592">#2592</a>)</p></li>
<li><p>fixed bug in how async_eth_tester_middleware fills default fields (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2600">#2600</a>)</p></li>
<li><p>Allow hex for <code class="docutils literal notranslate"><span class="pre">value</span></code> field when validating via <code class="docutils literal notranslate"><span class="pre">validate_payable()</span></code>
contracts method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2602">#2602</a>)</p></li>
<li><p>Update Beacon API to v2.3.0 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2616">#2616</a>)</p></li>
<li><p>Move <code class="docutils literal notranslate"><span class="pre">flaky</span></code> option to top-level conftest.py (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2642">#2642</a>)</p></li>
</ul>
</section>
<section id="documentation-updates">
<h5>Documentation Updates<a class="headerlink" href="#documentation-updates" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update Proof of Authority middleware (<cite>geth_poa_middleware</cite>) documentation
for better clarity. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2538">#2538</a>)</p></li>
<li><p>Add some missing supported async middlewares to docs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2574">#2574</a>)</p></li>
<li><p>Introduce AsyncENS and availability on w3 instance in ENS guide. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2585">#2585</a>)</p></li>
<li><p>Fix typo in eth.call docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2613">#2613</a>)</p></li>
<li><p>remove section for deleted <cite>account.recoverHash</cite> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2615">#2615</a>)</p></li>
<li><p>examples docs gave incorrect return type for <cite>eth.get_transaction</cite>, fixed
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2617">#2617</a>)</p></li>
<li><p>minor typo fix in contracts overview (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2628">#2628</a>)</p></li>
<li><p>fix bug in <cite>Deploying new contracts</cite> example (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2646">#2646</a>)</p></li>
</ul>
</section>
<section id="id166">
<h5>Features<a class="headerlink" href="#id166" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">Account</span></code> class access in <code class="docutils literal notranslate"><span class="pre">AsyncEth</span></code> via
<code class="docutils literal notranslate"><span class="pre">async_w3.eth.account</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2580">#2580</a>)</p></li>
<li><p>Expose public abi utility methods: <code class="docutils literal notranslate"><span class="pre">get_abi_output_names()</span></code> and
<code class="docutils literal notranslate"><span class="pre">get_abi_input_names()</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2596">#2596</a>)</p></li>
<li><p>update all references to deprecated <cite>eth_abi.encode_abi</cite> to <cite>eth_abi.encode</cite>
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2621">#2621</a>)</p></li>
<li><p>update all references to deprecated <cite>eth_abi.decode_abi</cite> to <cite>eth_abi.decode</cite>
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2636">#2636</a>)</p></li>
<li><p>Add Sepolia auto provider (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2639">#2639</a>)</p></li>
</ul>
</section>
<section id="misc">
<h5>Misc<a class="headerlink" href="#misc" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2603">#2603</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2622">#2622</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2630">#2630</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2638">#2638</a></p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-4-2022-07-13">
<h4>v6.0.0-beta.4 (2022-07-13)<a class="headerlink" href="#v6-0-0-beta-4-2022-07-13" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id167">
<h5>Breaking Changes<a class="headerlink" href="#id167" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>sha3 and soliditySha3 were previously deprecated and now removed (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2479">#2479</a>)</p></li>
<li><p>Remove deprecated methods from Geth, Parity and Net modules (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2480">#2480</a>)</p></li>
<li><p>Provide better messaging to wrong arguments for contract functions,
especially for <code class="docutils literal notranslate"><span class="pre">tuple</span></code> argument types. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2556">#2556</a>)</p></li>
</ul>
</section>
<section id="id168">
<h5>Bugfixes<a class="headerlink" href="#id168" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Properly format <code class="docutils literal notranslate"><span class="pre">block_number</span></code> for <code class="docutils literal notranslate"><span class="pre">eth_getTransactionCount</span></code> when using
<code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1801">#1801</a>)</p></li>
<li><p>removed <cite>Optional</cite> type hints for <cite>passphrase</cite> arguments that aren‚Äôt actually
optional (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2511">#2511</a>)</p></li>
<li><p>Fix <cite>is_dynamic_fee_transaction</cite> and <cite>TRANSACTION_DEFAULTS</cite> when
<cite>gas_price_strategy</cite> returns zero (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2562">#2562</a>)</p></li>
</ul>
</section>
<section id="id169">
<h5>Documentation Updates<a class="headerlink" href="#id169" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove deprecated methods from Geth, Parity, and Net modules (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2480">#2480</a>)</p></li>
<li><p>replace double- with single-quotes to make f-string valid (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2504">#2504</a>)</p></li>
<li><p>added geth personal_sign and personal_ec_recover documentation (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2511">#2511</a>)</p></li>
</ul>
</section>
<section id="id170">
<h5>Features<a class="headerlink" href="#id170" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add transaction result formatters for <cite>type</cite> and <cite>chainId</cite> to convert values
to <code class="docutils literal notranslate"><span class="pre">int</span></code> if <code class="docutils literal notranslate"><span class="pre">hexadecimal</span></code> if the field is not null (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2491">#2491</a>)</p></li>
<li><p>Add a global flag on the provider for enabling / disabling CCIP Read for
calls: <code class="docutils literal notranslate"><span class="pre">global_ccip_read_enabled</span></code> (defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>). (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2499">#2499</a>)</p></li>
<li><p>Deprecate Geth Admin StartRPC and StopRPC for StartHTTP and StopHTTP (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2507">#2507</a>)</p></li>
<li><p>Added Async support for ENS (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2547">#2547</a>)</p></li>
<li><p>support multi-dimensional arrays for ABI tuples types (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2555">#2555</a>)</p></li>
</ul>
</section>
<section id="id171">
<h5>Misc<a class="headerlink" href="#id171" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2345">#2345</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2483">#2483</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2505">#2505</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2513">#2513</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2514">#2514</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2515">#2515</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2516">#2516</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2518">#2518</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2520">#2520</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2521">#2521</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2522">#2522</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2523">#2523</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2524">#2524</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2525">#2525</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2527">#2527</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2530">#2530</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2531">#2531</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2534">#2534</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2542">#2542</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2544">#2544</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2550">#2550</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2551">#2551</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2559">#2559</a></p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-3-2022-06-01">
<h4>v6.0.0-beta.3 (2022-06-01)<a class="headerlink" href="#v6-0-0-beta-3-2022-06-01" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id172">
<h5>Breaking Changes<a class="headerlink" href="#id172" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Removed deprecated methods from eth and geth (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1416">#1416</a>)</p></li>
</ul>
</section>
<section id="id173">
<h5>Bugfixes<a class="headerlink" href="#id173" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix bug in _is_latest_block_number_request in cache middleware (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2185">#2185</a>)</p></li>
<li><p>Increase cache size to allow for 20 entries. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2477">#2477</a>)</p></li>
<li><p>format receipt.type to int and log.data to HexBytes (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2482">#2482</a>)</p></li>
<li><p>Only thread lock for methods attempting to access the cache for caching
middleware. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2496">#2496</a>)</p></li>
</ul>
</section>
<section id="id174">
<h5>Documentation Updates<a class="headerlink" href="#id174" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix typo in simple_cache_middleware example (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2449">#2449</a>)</p></li>
<li><p>Fix dict type hints in EventScanner example (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2469">#2469</a>)</p></li>
<li><p>Add clarification around ValueError and Local Signing middleware (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2474">#2474</a>)</p></li>
</ul>
</section>
<section id="id175">
<h5>Features<a class="headerlink" href="#id175" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add async version of contract functionality (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2270">#2270</a>)</p></li>
<li><p>ENSIP-10 / wildcard resolution support for ENS module (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2411">#2411</a>)</p></li>
<li><p>CCIP Read support and finalize implementation of and add tests for ENS
offchain resolution support (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2457">#2457</a>)</p></li>
</ul>
</section>
<section id="id176">
<h5>Misc<a class="headerlink" href="#id176" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2454">#2454</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2450">#2450</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2462">#2462</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2471">#2471</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2478">#2478</a></p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-2-2022-04-27">
<h4>v6.0.0-beta.2 (2022-04-27)<a class="headerlink" href="#v6-0-0-beta-2-2022-04-27" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id177">
<h5>Breaking Changes<a class="headerlink" href="#id177" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Audit <code class="docutils literal notranslate"><span class="pre">.rst</span></code> and <code class="docutils literal notranslate"><span class="pre">.py</span></code> files and convert all Web3 instance variable names
to <code class="docutils literal notranslate"><span class="pre">w3</span></code> to avoid confusion with the <code class="docutils literal notranslate"><span class="pre">web3</span></code> module. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1183">#1183</a>)</p></li>
<li><p>Update dependency requirements: - eth-utils - eth-abi - eth-tester -
eth-account - eth-typing (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2342">#2342</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">attach_methods()</span></code> to <code class="docutils literal notranslate"><span class="pre">Module</span></code> class to facilitate attaching methods
to modules. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2383">#2383</a>)</p></li>
<li><p>Move IOError -&gt; OSError (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2434">#2434</a>)</p></li>
</ul>
</section>
<section id="id178">
<h5>Documentation Updates<a class="headerlink" href="#id178" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Clarify info about Infura filters over HTTP (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2322">#2322</a>)</p></li>
<li><p>Document reading private keys from environment variables (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2380">#2380</a>)</p></li>
<li><p>Add example for the <code class="docutils literal notranslate"><span class="pre">construct_sign_and_send_raw_middleware</span></code> when connected
to a hosted node (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2410">#2410</a>)</p></li>
<li><p>Doc fix: Pending transaction filter returns a <code class="docutils literal notranslate"><span class="pre">TransactionFilter</span></code> not a
<code class="docutils literal notranslate"><span class="pre">BlockFilter</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2444">#2444</a>)</p></li>
</ul>
</section>
<section id="id179">
<h5>Features<a class="headerlink" href="#id179" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add ‚Äòget_text‚Äô method to look up ENS text record values (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2286">#2286</a>)</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">ENS.name()</span></code>, validate that the forward resolution returns the same
address as provided by the user as per the ENS documentation recommendation
for Reverse Resolution. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2420">#2420</a>)</p></li>
<li><p>Add sync chain_id to <code class="docutils literal notranslate"><span class="pre">simple_middleware_cache</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2425">#2425</a>)</p></li>
</ul>
</section>
<section id="id180">
<h5>Misc<a class="headerlink" href="#id180" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2369">#2369</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2372">#2372</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2418">#2418</a></p></li>
</ul>
</section>
</section>
<section id="v6-0-0-beta-1-2022-02-28">
<h4>v6.0.0-beta.1 (2022-02-28)<a class="headerlink" href="#v6-0-0-beta-1-2022-02-28" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id181">
<h5>Breaking Changes<a class="headerlink" href="#id181" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update <code class="docutils literal notranslate"><span class="pre">websockets</span></code> dependency to v10+ (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2324">#2324</a>)</p></li>
<li><p>Remove support for the unsupported Python 3.6 Also removes outdated Parity
tests (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2343">#2343</a>)</p></li>
<li><p>Update Sphinx requirement to <code class="docutils literal notranslate"><span class="pre">&gt;=4.2.0,&lt;5</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2362">#2362</a>)</p></li>
</ul>
</section>
<section id="id182">
<h5>Bugfixes<a class="headerlink" href="#id182" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix types for <code class="docutils literal notranslate"><span class="pre">gas</span></code>, and <code class="docutils literal notranslate"><span class="pre">gasLimit</span></code>: <code class="docutils literal notranslate"><span class="pre">Wei</span> <span class="pre">-&gt;</span> <span class="pre">int</span></code>. Also fix types for
<code class="docutils literal notranslate"><span class="pre">effectiveGasPrice</span></code>: (<code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">-&gt;</span> <span class="pre">Wei</span></code>) (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2330">#2330</a>)</p></li>
</ul>
</section>
<section id="id183">
<h5>Features<a class="headerlink" href="#id183" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added session caching to the AsyncHTTPProvider (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2016">#2016</a>)</p></li>
<li><p>Add support for Python 3.10 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2175">#2175</a>)</p></li>
<li><p>Added ‚ÄòBreaking Changes‚Äô and ‚ÄòDeprecations‚Äô categories to our release notes
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2340">#2340</a>)</p></li>
<li><p>Add async <cite>eth.get_storage_at</cite> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2350">#2350</a>)</p></li>
<li><p>Upgrade <code class="docutils literal notranslate"><span class="pre">jsonschema</span></code> version to <code class="docutils literal notranslate"><span class="pre">&gt;=4.0.0&lt;5</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2361">#2361</a>)</p></li>
</ul>
</section>
<section id="id184">
<h5>Misc<a class="headerlink" href="#id184" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2353">#2353</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2365">#2365</a></p></li>
</ul>
</section>
</section>
<section id="v5-28-0-2022-02-09">
<h4>v5.28.0 (2022-02-09)<a class="headerlink" href="#v5-28-0-2022-02-09" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id185">
<h5>Features<a class="headerlink" href="#id185" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added Async functions for Geth Personal and Admin modules (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1413">#1413</a>)</p></li>
<li><p>async support for formatting, validation, and geth poa middlewares (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2098">#2098</a>)</p></li>
<li><p>Calculate a default <code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code> using <code class="docutils literal notranslate"><span class="pre">eth_feeHistory</span></code> when
<code class="docutils literal notranslate"><span class="pre">eth_maxPriorityFeePerGas</span></code> is not available, since the latter is not a part
of the Ethereum JSON-RPC specs and only supported by certain clients. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2259">#2259</a>)</p></li>
<li><p>Allow NamedTuples in ABI inputs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2312">#2312</a>)</p></li>
<li><p>Add async <cite>eth.syncing</cite> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2331">#2331</a>)</p></li>
</ul>
</section>
<section id="id186">
<h5>Bugfixes<a class="headerlink" href="#id186" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>remove <cite>ens.utils.dict_copy</cite> decorator (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1423">#1423</a>)</p></li>
<li><p>The exception retry middleware whitelist was missing a comma between
<code class="docutils literal notranslate"><span class="pre">txpool</span></code> and <code class="docutils literal notranslate"><span class="pre">testing</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2327">#2327</a>)</p></li>
<li><p>Properly initialize external modules that do not inherit from the
<code class="docutils literal notranslate"><span class="pre">web3.module.Module</span></code> class (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2328">#2328</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-27-0-2022-01-31">
<h4>v5.27.0 (2022-01-31)<a class="headerlink" href="#v5-27-0-2022-01-31" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id187">
<h5>Features<a class="headerlink" href="#id187" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added Async functions for Geth TxPool (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1413">#1413</a>)</p></li>
<li><p>external modules are no longer required to inherit from the
<code class="docutils literal notranslate"><span class="pre">web3.module.Module</span></code> class (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2304">#2304</a>)</p></li>
<li><p>Add async <cite>eth.get_logs</cite> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2310">#2310</a>)</p></li>
<li><p>add Async access to <cite>default_account</cite> and <cite>default_block</cite> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2315">#2315</a>)</p></li>
<li><p>Update eth-tester and eth-account dependencies to pull in bugfix from
eth-keys (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2320">#2320</a>)</p></li>
</ul>
</section>
<section id="id188">
<h5>Bugfixes<a class="headerlink" href="#id188" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fixed issues with parsing tuples and nested tuples in event logs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2211">#2211</a>)</p></li>
<li><p>In ENS the contract function to resolve an ENS address was being called twice
in error. One of those calls was removed. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2318">#2318</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_hexbytes</span></code> block formatters no longer throw when value is <code class="docutils literal notranslate"><span class="pre">None</span></code>
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2321">#2321</a>)</p></li>
</ul>
</section>
<section id="id189">
<h5>Improved Documentation<a class="headerlink" href="#id189" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>fix typo in <cite>eth.account</cite> docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2111">#2111</a>)</p></li>
<li><p>explicitly add <cite>output_values</cite> to contracts example (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2293">#2293</a>)</p></li>
<li><p>update imports for <cite>AsyncHTTPProvider</cite> sample code (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2302">#2302</a>)</p></li>
<li><p>fixed broken link to filter schema (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2303">#2303</a>)</p></li>
<li><p>add github link to the main docs landing page (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2313">#2313</a>)</p></li>
<li><p>fix typos and update referenced <cite>geth</cite> version (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2326">#2326</a>)</p></li>
</ul>
</section>
<section id="id190">
<h5>Misc<a class="headerlink" href="#id190" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2217">#2217</a></p></li>
</ul>
</section>
</section>
<section id="v5-26-0-2022-01-06">
<h4>v5.26.0 (2022-01-06)<a class="headerlink" href="#v5-26-0-2022-01-06" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id191">
<h5>Features<a class="headerlink" href="#id191" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">middlewares</span></code> property to <code class="docutils literal notranslate"><span class="pre">NamedElementOnion</span></code> /
<code class="docutils literal notranslate"><span class="pre">web3.middleware_onion</span></code>. Returns current middlewares in proper order for
importing into a new <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2239">#2239</a>)</p></li>
<li><p>Add async <code class="docutils literal notranslate"><span class="pre">eth.hashrate</span></code> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2243">#2243</a>)</p></li>
<li><p>Add async <code class="docutils literal notranslate"><span class="pre">eth.chain_id</span></code> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2251">#2251</a>)</p></li>
<li><p>Add async <code class="docutils literal notranslate"><span class="pre">eth.mining</span></code> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2252">#2252</a>)</p></li>
<li><p>Add async <code class="docutils literal notranslate"><span class="pre">eth.get_transaction_receipt</span></code> and
<code class="docutils literal notranslate"><span class="pre">eth.wait_for_transaction_receipt</span></code> methods (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2265">#2265</a>)</p></li>
<li><p>Add async <cite>eth.accounts</cite> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2284">#2284</a>)</p></li>
<li><p>Support for attaching external modules to the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance when
instantiating the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance, via the <code class="docutils literal notranslate"><span class="pre">external_modules</span></code> argument,
or via the new <code class="docutils literal notranslate"><span class="pre">attach_modules()</span></code> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2288">#2288</a>)</p></li>
</ul>
</section>
<section id="id192">
<h5>Bugfixes<a class="headerlink" href="#id192" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fixed doctest that wasn‚Äôt running in <code class="docutils literal notranslate"><span class="pre">docs/contracts.rst</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2213">#2213</a>)</p></li>
<li><p>Key mapping fix to eth-tester middleware for access list storage keys (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2224">#2224</a>)</p></li>
<li><p>Inherit <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance middlewares when instantiating <code class="docutils literal notranslate"><span class="pre">ENS</span></code> with
<code class="docutils literal notranslate"><span class="pre">ENS.fromWeb3()</span></code> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2239">#2239</a>)</p></li>
</ul>
</section>
<section id="id193">
<h5>Improved Documentation<a class="headerlink" href="#id193" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix example docs to show a TransactionNotFound error, instead of None (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2199">#2199</a>)</p></li>
<li><p>fix typo in ethpm.rst (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2277">#2277</a>)</p></li>
<li><p>Clarify provider usage in Quickstart docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2287">#2287</a>)</p></li>
<li><p>Address common BSC usage question (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2289">#2289</a>)</p></li>
</ul>
</section>
<section id="id194">
<h5>Misc<a class="headerlink" href="#id194" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1729">#1729</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2233">#2233</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2242">#2242</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2260">#2260</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2261">#2261</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2283">#2283</a></p></li>
</ul>
</section>
</section>
<section id="v5-25-0-2021-11-19">
<h4>v5.25.0 (2021-11-19)<a class="headerlink" href="#v5-25-0-2021-11-19" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id195">
<h5>Features<a class="headerlink" href="#id195" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">w3.eth.get_raw_transaction_by_block</span></code>, and async support for
<code class="docutils literal notranslate"><span class="pre">w3.eth.get_raw_transaction_by_block</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2209">#2209</a>)</p></li>
</ul>
</section>
<section id="id196">
<h5>Bugfixes<a class="headerlink" href="#id196" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>BadResponseFormat error thrown instead of KeyError when a response gets sent
back without a <code class="docutils literal notranslate"><span class="pre">result</span></code> key. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2188">#2188</a>)</p></li>
</ul>
</section>
<section id="id197">
<h5>Improved Documentation<a class="headerlink" href="#id197" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Correct link to Websocket library documentation (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2173">#2173</a>)</p></li>
<li><p>Doc update to make it clearer that enable_unstable_package_management()
method is on the web3 instance (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2208">#2208</a>)</p></li>
</ul>
</section>
<section id="id198">
<h5>Misc<a class="headerlink" href="#id198" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2102">#2102</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2179">#2179</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2191">#2191</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2201">#2201</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2205">#2205</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2212">#2212</a></p></li>
</ul>
</section>
</section>
<section id="v5-24-0-2021-09-27">
<h4>v5.24.0 (2021-09-27)<a class="headerlink" href="#v5-24-0-2021-09-27" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id199">
<h5>Features<a class="headerlink" href="#id199" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add async <code class="docutils literal notranslate"><span class="pre">eth.send_raw_transaction</span></code> method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2135">#2135</a>)</p></li>
<li><p>Updated eth-account version to v0.5.6 - adds support for signing typed
transactions without needing to explicitly set the transaction type and now
accepts correct JSON-RPC structure for accessList for typed transactions
(<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2157">#2157</a>)</p></li>
</ul>
</section>
<section id="id200">
<h5>Bugfixes<a class="headerlink" href="#id200" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Encode block_count as hex before making eth_feeHistory RPC call (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2117">#2117</a>)</p></li>
</ul>
</section>
<section id="id201">
<h5>Improved Documentation<a class="headerlink" href="#id201" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix typo in AsyncHTTPProvider docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2131">#2131</a>)</p></li>
<li><p>Update AsyncHTTPProvider doc Supported Methods to include
<code class="docutils literal notranslate"><span class="pre">web3.eth.send_raw_transaction()</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2135">#2135</a>)</p></li>
<li><p>Improve messaging around usage and implementation questions, directing users
to the appropriate channel (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2138">#2138</a>)</p></li>
<li><p>Clarify some contract <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> error messages. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2146">#2146</a>)</p></li>
<li><p>Updated docs for w3.eth.account.sign_transaction to reflect that transaction
type is no longer needed to successfully sign typed transactions and to
illustrate how to structure an optional accessList parameter in a typed
transaction (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2157">#2157</a>)</p></li>
</ul>
</section>
<section id="id202">
<h5>Misc<a class="headerlink" href="#id202" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2105">#2105</a></p></li>
</ul>
</section>
</section>
<section id="v5-23-1-2021-08-27">
<h4>v5.23.1 (2021-08-27)<a class="headerlink" href="#v5-23-1-2021-08-27" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id203">
<h5>Features<a class="headerlink" href="#id203" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add constants for the zero address, zero hash, max int, and wei per ether. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2109">#2109</a>)</p></li>
</ul>
</section>
<section id="id204">
<h5>Improved Documentation<a class="headerlink" href="#id204" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Renamed ‚Äú1559 transaction‚Äù to ‚Äúdynamic fee transaction‚Äù where appropriate to keep consistency among the general code base for 1559 transaction (type=2) naming (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2118">#2118</a>)</p></li>
<li><p>Update AsyncHTTPProvider doc example to include modules and middlewares keyword arguments (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2123">#2123</a>)</p></li>
</ul>
</section>
<section id="id205">
<h5>Misc<a class="headerlink" href="#id205" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2110">#2110</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2118">#2118</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2122">#2122</a></p></li>
</ul>
</section>
</section>
<section id="v5-23-0-2021-08-12">
<h4>v5.23.0 (2021-08-12)<a class="headerlink" href="#v5-23-0-2021-08-12" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id206">
<h5>Features<a class="headerlink" href="#id206" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add support for eth_feeHistory RPC method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2038">#2038</a>)</p></li>
<li><p>Add support for eth_maxPriorityFeePerGas RPC method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2100">#2100</a>)</p></li>
</ul>
</section>
<section id="id207">
<h5>Bugfixes<a class="headerlink" href="#id207" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Hot fix for string interpolation issue with contract function call decoding exception to facilitate extracting a meaningful message from the eth_call response (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2096">#2096</a>)</p></li>
<li><p>Bypass adding a <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> via the gas price strategy, if one is set, when EIP-1559 transaction params are used for <code class="docutils literal notranslate"><span class="pre">send_transaction</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2099">#2099</a>)</p></li>
</ul>
</section>
<section id="id208">
<h5>Improved Documentation<a class="headerlink" href="#id208" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update feeHistory docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2104">#2104</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-22-0-2021-08-02">
<h4>v5.22.0 (2021-08-02)<a class="headerlink" href="#v5-22-0-2021-08-02" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id209">
<h5>Features<a class="headerlink" href="#id209" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add support for eth_getRawTransactionByHash RPC method (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2039">#2039</a>)</p></li>
<li><p>Add AsyncNet module (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2044">#2044</a>)</p></li>
<li><p>Add async <code class="docutils literal notranslate"><span class="pre">eth.get_balance</span></code>, <code class="docutils literal notranslate"><span class="pre">eth.get_code</span></code>, <code class="docutils literal notranslate"><span class="pre">eth.get_transaction_count</span></code> methods. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2056">#2056</a>)</p></li>
<li><p>eth_signTransaction support for eip-1559 params ‚ÄòmaxFeePerGas‚Äô and ‚ÄòmaxPriorityFeePerGas‚Äô (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2082">#2082</a>)</p></li>
<li><p>Add support for async <code class="docutils literal notranslate"><span class="pre">w3.eth.call</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2083">#2083</a>)</p></li>
</ul>
</section>
<section id="id210">
<h5>Bugfixes<a class="headerlink" href="#id210" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>If a transaction hash was passed as a string rather than a HexByte to <code class="docutils literal notranslate"><span class="pre">w3.eth.wait_for_transaction_receipt</span></code>, and the time was exhausted before the transaction is in the chain, the error being raised was a TypeError instead of the correct TimeExhausted error. This is because the <code class="docutils literal notranslate"><span class="pre">to_hex</span></code> method in the TimeExhausted error message expects a primitive as the first argument, and a string doesn‚Äôt qualify as a primitive. Fixed by converting the transaction_hash to HexBytes instead. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2068">#2068</a>)</p></li>
<li><p>Hot fix for a string interpolation issue in message when BadFunctionCallOutput is raised for call_contract_function() (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2069">#2069</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fill_transaction_defaults()</span></code> no longer sets a default <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> if 1559 fees are present in the transaction parameters. This fixes sign-and-send middleware issues with 1559 fees. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2092">#2092</a>)</p></li>
</ul>
</section>
<section id="id211">
<h5>Improved Documentation<a class="headerlink" href="#id211" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Clarify that <code class="docutils literal notranslate"><span class="pre">send_transaction</span></code>, <code class="docutils literal notranslate"><span class="pre">modify_transaction</span></code>, and <code class="docutils literal notranslate"><span class="pre">replace_transaction</span></code> return HexByte objects instead of strings. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2058">#2058</a>)</p></li>
<li><p>Added troubleshooting section for Microsoft Visual C++ error on Windows machines (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2077">#2077</a>)</p></li>
<li><p>Updated the sign-and-send middleware docs to include EIP-1559 as well as legacy transaction examples (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2092">#2092</a>)</p></li>
</ul>
</section>
<section id="id212">
<h5>Misc<a class="headerlink" href="#id212" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/2073">#2073</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2080">#2080</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2085">#2085</a></p></li>
</ul>
</section>
</section>
<section id="v5-21-0-2021-07-12">
<h4>v5.21.0 (2021-07-12)<a class="headerlink" href="#v5-21-0-2021-07-12" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id213">
<h5>Features<a class="headerlink" href="#id213" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Adds support for EIP 1559 transaction keys: <cite>maxFeePerGas</cite> and <cite>maxPriorityFeePerGas</cite> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2060">#2060</a>)</p></li>
</ul>
</section>
<section id="id214">
<h5>Bugfixes<a class="headerlink" href="#id214" title="Link to this heading">ÔÉÅ</a></h5>
<ul>
<li><p>Bugfix where an error response got passed to a function expecting a block identifier.</p>
<p>Split out null result formatters from the error formatters and added some tests. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2022">#2022</a>)</p>
</li>
<li><p>Fix broken tests and use the new 1559 params for most of our test transactions. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2053">#2053</a>)</p></li>
<li><p>Set a default maxFeePerGas value consistent with Geth (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2055">#2055</a>)</p></li>
<li><p>Fix bug in geth PoA middleware where a <code class="docutils literal notranslate"><span class="pre">None</span></code> response should throw a <code class="docutils literal notranslate"><span class="pre">BlockNotFound</span></code> error, but was instead throwing an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2064">#2064</a>)</p></li>
</ul>
</section>
<section id="id215">
<h5>Improved Documentation<a class="headerlink" href="#id215" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added general documentation on unit and integration testing and how to contribute to our test suite. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2053">#2053</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-20-1-2021-07-01">
<h4>v5.20.1 (2021-07-01)<a class="headerlink" href="#v5-20-1-2021-07-01" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id216">
<h5>Bugfixes<a class="headerlink" href="#id216" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Have the geth dev IPC auto connection check for the <code class="docutils literal notranslate"><span class="pre">WEB3_PROVIDER_URI</span></code> environment variable. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2023">#2023</a>)</p></li>
</ul>
</section>
<section id="id217">
<h5>Improved Documentation<a class="headerlink" href="#id217" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove reference to allowing multiple providers in docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2018">#2018</a>)</p></li>
<li><p>Update ‚ÄúContract Deployment Example‚Äù docs to use <code class="docutils literal notranslate"><span class="pre">py-solc-x</span></code> as <code class="docutils literal notranslate"><span class="pre">solc</span></code> is no longer maintained. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2020">#2020</a>)</p></li>
<li><p>Detail using unreleased Geth builds in CI (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2037">#2037</a>)</p></li>
<li><p>Clarify that a missing trie node error could occur when using <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> with <code class="docutils literal notranslate"><span class="pre">.call()</span></code>
on a node that isn‚Äôt running in archive mode (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2048">#2048</a>)</p></li>
</ul>
</section>
<section id="id218">
<h5>Misc<a class="headerlink" href="#id218" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1938">#1938</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2015">#2015</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2021">#2021</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2025">#2025</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2028">#2028</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2029">#2029</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2035">#2035</a></p></li>
</ul>
</section>
</section>
<section id="v5-20-0-2021-06-09">
<h4>v5.20.0 (2021-06-09)<a class="headerlink" href="#v5-20-0-2021-06-09" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id219">
<h5>Features<a class="headerlink" href="#id219" title="Link to this heading">ÔÉÅ</a></h5>
<ul>
<li><p>Add new AsyncHTTPProvider. No middleware or session caching support yet.</p>
<p>Also adds async <code class="docutils literal notranslate"><span class="pre">w3.eth.gas_price</span></code>, and async <code class="docutils literal notranslate"><span class="pre">w3.isConnected()</span></code> methods. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1978">#1978</a>)</p>
</li>
<li><p>Add ability for AsyncHTTPProvider to accept middleware</p>
<p>Also adds async gas_price_strategy middleware, and moves gas estimate to middleware.</p>
<p>AsyncEthereumTesterProvider now inherits from AsyncBase (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1999">#1999</a>)</p>
</li>
<li><p>Support state_override in contract function call. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2005">#2005</a>)</p></li>
</ul>
</section>
<section id="id220">
<h5>Bugfixes<a class="headerlink" href="#id220" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Test ethpm caching + bump Sphinx version. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1977">#1977</a>)</p></li>
</ul>
</section>
<section id="id221">
<h5>Improved Documentation<a class="headerlink" href="#id221" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Clarify solidityKeccak documentation. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1971">#1971</a>)</p></li>
<li><p>Improve contributor documentation context and ordering. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2008">#2008</a>)</p></li>
<li><p>Add docs for unstable AsyncHTTPProvider (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/2017">#2017</a>)</p></li>
</ul>
</section>
<section id="id222">
<h5>Misc<a class="headerlink" href="#id222" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1979">#1979</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1980">#1980</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1993">#1993</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/2002">#2002</a></p></li>
</ul>
</section>
</section>
<section id="v5-19-0-2021-04-28">
<h4>v5.19.0 (2021-04-28)<a class="headerlink" href="#v5-19-0-2021-04-28" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id223">
<h5>Features<a class="headerlink" href="#id223" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Handle optional <code class="docutils literal notranslate"><span class="pre">eth_call</span></code> state override param. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1921">#1921</a>)</p></li>
<li><p>Add list_storage_keys deprecate listStorageKeys (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1944">#1944</a>)</p></li>
<li><p>Add net_peers deprecate netPeers (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1946">#1946</a>)</p></li>
<li><p>Add trace_replay_transaction deprecate traceReplayTransaction (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1949">#1949</a>)</p></li>
<li><p>Add add_reserved_peer deprecate addReservedPeer (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1951">#1951</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">parity.set_mode</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">parity.setMode</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1954">#1954</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">parity.trace_raw_transaction</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">parity.traceRawTransaction</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1955">#1955</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">parity.trace_call</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">parity.traceCall</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1957">#1957</a>)</p></li>
<li><p>Add trace_filter deprecate traceFilter (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1960">#1960</a>)</p></li>
<li><p>Add trace_block, deprecate traceBlock (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1961">#1961</a>)</p></li>
<li><p>Add trace_replay_block_transactions, deprecate traceReplayBlockTransactions (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1962">#1962</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">parity.trace_transaction</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">parity.traceTransaction</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1963">#1963</a>)</p></li>
</ul>
</section>
<section id="id224">
<h5>Improved Documentation<a class="headerlink" href="#id224" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Document <code class="docutils literal notranslate"><span class="pre">eth_call</span></code> state overrides. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1965">#1965</a>)</p></li>
</ul>
</section>
<section id="id225">
<h5>Misc<a class="headerlink" href="#id225" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1774">#1774</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1805">#1805</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1945">#1945</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1964">#1964</a></p></li>
</ul>
</section>
</section>
<section id="v5-18-0-2021-04-08">
<h4>v5.18.0 (2021-04-08)<a class="headerlink" href="#v5-18-0-2021-04-08" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id226">
<h5>Features<a class="headerlink" href="#id226" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.modify_transaction</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.modifyTransaction</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1886">#1886</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.get_transaction_receipt</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.getTransactionReceipt</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1893">#1893</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.wait_for_transaction_receipt</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.waitForTransactionReceipt</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1896">#1896</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.set_contract_factory</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.setContractFactory</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1900">#1900</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.generate_gas_price</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.generateGasPrice</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1905">#1905</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.set_gas_price_strategy</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.setGasPriceStrategy</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1906">#1906</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.estimate_gas</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.estimateGas</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1913">#1913</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.sign_typed_data</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.signTypedData</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1915">#1915</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.get_filter_changes</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.getFilterChanges</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1916">#1916</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.get_filter_logs</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">eth.getFilterLogs</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1919">#1919</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.uninstall_filter</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">eth.uninstallFilter</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1920">#1920</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.get_logs</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.getLogs</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1925">#1925</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.submit_hashrate</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.submitHashrate</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1926">#1926</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.submit_work</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.submitWork</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1927">#1927</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.get_work</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.getWork</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1934">#1934</a>)</p></li>
<li><p>Adds public get_block_number method. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1937">#1937</a>)</p></li>
</ul>
</section>
<section id="id227">
<h5>Improved Documentation<a class="headerlink" href="#id227" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add ABI type examples to docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1890">#1890</a>)</p></li>
<li><p>Promote the new Ethereum Python Discord server on the README. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1898">#1898</a>)</p></li>
<li><p>Escape reserved characters in install script of Contributing docs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1909">#1909</a>)</p></li>
<li><p>Add detailed event filtering examples. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1910">#1910</a>)</p></li>
<li><p>Add docs example for tuning log levels. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1928">#1928</a>)</p></li>
<li><p>Add some performance tips in troubleshooting docs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1929">#1929</a>)</p></li>
<li><p>Add existing contract interaction to docs examples. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1933">#1933</a>)</p></li>
<li><p>Replace Gitter links with the Python Discord server. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1936">#1936</a>)</p></li>
</ul>
</section>
<section id="id228">
<h5>Misc<a class="headerlink" href="#id228" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1887">#1887</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1907">#1907</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1917">#1917</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1930">#1930</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1935">#1935</a></p></li>
</ul>
</section>
</section>
<section id="v5-17-0-2021-02-24">
<h4>v5.17.0 (2021-02-24)<a class="headerlink" href="#v5-17-0-2021-02-24" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id229">
<h5>Features<a class="headerlink" href="#id229" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">get_transaction_count</span></code>, and deprecated <code class="docutils literal notranslate"><span class="pre">getTransactionCount</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1844">#1844</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.send_transaction</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.sendTransaction</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1878">#1878</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">web3.eth.sign_transaction</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">web3.eth.signTransaction</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1879">#1879</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.send_raw_transaction</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.sendRawTransaction</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1880">#1880</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">w3.eth.replace_transaction</span></code> deprecate <code class="docutils literal notranslate"><span class="pre">w3.eth.replaceTransaction</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1882">#1882</a>)</p></li>
</ul>
</section>
<section id="id230">
<h5>Improved Documentation<a class="headerlink" href="#id230" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix return type of <code class="docutils literal notranslate"><span class="pre">send_transaction</span></code> in docs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/686">#686</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-16-0-2021-02-04">
<h4>v5.16.0 (2021-02-04)<a class="headerlink" href="#v5-16-0-2021-02-04" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id231">
<h5>Features<a class="headerlink" href="#id231" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">get_block_transaction_count</span></code>, and deprecated <code class="docutils literal notranslate"><span class="pre">getBlockTransactionCount</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1841">#1841</a>)</p></li>
<li><p>Move <code class="docutils literal notranslate"><span class="pre">defaultAccount</span></code> to <code class="docutils literal notranslate"><span class="pre">default_account</span></code>. Deprecate <code class="docutils literal notranslate"><span class="pre">defaultAccount</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1848">#1848</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.default_block</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">eth.defaultBlock</span></code>.
Also adds <code class="docutils literal notranslate"><span class="pre">parity.default_block</span></code>, and deprecates <code class="docutils literal notranslate"><span class="pre">parity.defaultBlock</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1849">#1849</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.gas_price</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">eth.gasPrice</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1850">#1850</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">eth.block_number</span></code> property. Deprecated <code class="docutils literal notranslate"><span class="pre">eth.blockNumber</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1851">#1851</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.chain_id</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">eth.chainId</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1852">#1852</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.protocol_version</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">eth.protocolVersion</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1853">#1853</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.get_code</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">eth.getCode</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1856">#1856</a>)</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">eth.getProof</span></code>, add <code class="docutils literal notranslate"><span class="pre">eth.get_proof</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1857">#1857</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.get_transaction</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">eth.getTransaction</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1858">#1858</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.get_transaction_by_block</span></code>, deprecate <code class="docutils literal notranslate"><span class="pre">eth.getTransactionByBlock</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1859">#1859</a>)</p></li>
<li><p>Add get_uncle_by_block, deprecate getUncleByBlock (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1862">#1862</a>)</p></li>
<li><p>Add get_uncle_count, deprecate getUncleCount (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1863">#1863</a>)</p></li>
</ul>
</section>
<section id="id232">
<h5>Bugfixes<a class="headerlink" href="#id232" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix event filter creation if the event ABI contains a <code class="docutils literal notranslate"><span class="pre">values</span></code> key. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1807">#1807</a>)</p></li>
</ul>
</section>
<section id="id233">
<h5>Improved Documentation<a class="headerlink" href="#id233" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove v5 breaking changes link from the top of the release notes. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1837">#1837</a>)</p></li>
<li><p>Add account creation troubleshooting docs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1855">#1855</a>)</p></li>
<li><p>Document passing a struct into a contract function. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1860">#1860</a>)</p></li>
<li><p>Add instance configuration troubleshooting docs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1865">#1865</a>)</p></li>
<li><p>Clarify nonce lookup in sendRawTransaction docs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1866">#1866</a>)</p></li>
<li><p>Updated docs for web3.eth methods: eth.getTransactionReceipt and eth.waitForTransactionReceipt (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1868">#1868</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-15-0-2021-01-15">
<h4>v5.15.0 (2021-01-15)<a class="headerlink" href="#v5-15-0-2021-01-15" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id234">
<h5>Features<a class="headerlink" href="#id234" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">get_storage_at</span></code> method and deprecate <code class="docutils literal notranslate"><span class="pre">getStorageAt</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1828">#1828</a>)</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.get_block</span></code> method and deprecate <code class="docutils literal notranslate"><span class="pre">eth.getBlock</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1829">#1829</a>)</p></li>
</ul>
</section>
<section id="id235">
<h5>Bugfixes<a class="headerlink" href="#id235" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>PR #1585 changed the error that was coming back from eth-tester when the Revert opcode was called,
which broke some tests in downstream libraries. This PR reverts back to raising the original error. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1813">#1813</a>)</p></li>
<li><p>Added a new <code class="docutils literal notranslate"><span class="pre">ContractLogicError</span></code> for when a contract reverts a transaction.
<code class="docutils literal notranslate"><span class="pre">ContractLogicError</span></code> will replace <code class="docutils literal notranslate"><span class="pre">SolidityError</span></code>, in v6. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1814">#1814</a>)</p></li>
</ul>
</section>
<section id="id236">
<h5>Improved Documentation<a class="headerlink" href="#id236" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Introduce Beacon API documentation (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1836">#1836</a>)</p></li>
</ul>
</section>
<section id="id237">
<h5>Misc<a class="headerlink" href="#id237" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1602">#1602</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1827">#1827</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1831">#1831</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1833">#1833</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1834">#1834</a></p></li>
</ul>
</section>
</section>
<section id="v5-14-0-2021-01-05">
<h4>v5.14.0 (2021-01-05)<a class="headerlink" href="#v5-14-0-2021-01-05" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id238">
<h5>Bugfixes<a class="headerlink" href="#id238" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Remove docs/web3.* from the gitignore to allow for the beacon docs to be added to git,
and add <code class="docutils literal notranslate"><span class="pre">beacon</span></code> to the default web3 modules that get loaded. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1824">#1824</a>)</p></li>
<li><p>Remove auto-documenting from the Beacon API (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1825">#1825</a>)</p></li>
</ul>
</section>
<section id="id239">
<h5>Features<a class="headerlink" href="#id239" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Introduce experimental Ethereum 2.0 beacon node API (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1758">#1758</a>)</p></li>
<li><p>Add new get_balance method on Eth class. Deprecated getBalance. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1806">#1806</a>)</p></li>
</ul>
</section>
<section id="id240">
<h5>Misc<a class="headerlink" href="#id240" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1815">#1815</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1816">#1816</a></p></li>
</ul>
</section>
</section>
<section id="v5-13-1-2020-12-03">
<h4>v5.13.1 (2020-12-03)<a class="headerlink" href="#v5-13-1-2020-12-03" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id241">
<h5>Bugfixes<a class="headerlink" href="#id241" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Handle revert reason parsing for Ganache (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1794">#1794</a>)</p></li>
</ul>
</section>
<section id="id242">
<h5>Improved Documentation<a class="headerlink" href="#id242" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Document Geth and Parity/OpenEthereum fixture generation (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1787">#1787</a>)</p></li>
</ul>
</section>
<section id="id243">
<h5>Misc<a class="headerlink" href="#id243" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1778">#1778</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1780">#1780</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1790">#1790</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1791">#1791</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1796">#1796</a></p></li>
</ul>
</section>
</section>
<section id="v5-13-0-2020-10-29">
<h4>v5.13.0 (2020-10-29)<a class="headerlink" href="#v5-13-0-2020-10-29" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id244">
<h5>Features<a class="headerlink" href="#id244" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Raise <cite>SolidityError</cite> exceptions that contain the revert reason when a <cite>call</cite> fails. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/941">#941</a>)</p></li>
</ul>
</section>
<section id="id245">
<h5>Bugfixes<a class="headerlink" href="#id245" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update eth-tester dependency to fix tester environment install version conflict. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1782">#1782</a>)</p></li>
</ul>
</section>
<section id="id246">
<h5>Misc<a class="headerlink" href="#id246" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1757">#1757</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1767">#1767</a></p></li>
</ul>
</section>
</section>
<section id="v5-12-3-2020-10-21">
<h4>v5.12.3 (2020-10-21)<a class="headerlink" href="#v5-12-3-2020-10-21" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id247">
<h5>Misc<a class="headerlink" href="#id247" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1752">#1752</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1759">#1759</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1773">#1773</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1775">#1775</a></p></li>
</ul>
</section>
</section>
<section id="v5-12-2-2020-10-12">
<h4>v5.12.2 (2020-10-12)<a class="headerlink" href="#v5-12-2-2020-10-12" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id248">
<h5>Bugfixes<a class="headerlink" href="#id248" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Address the use of multiple providers in the docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1701">#1701</a>)</p></li>
<li><p>Remove stale connection errors from docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1737">#1737</a>)</p></li>
<li><p>Allow ENS name resolution for methods that use the <code class="docutils literal notranslate"><span class="pre">Method</span></code> class (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1749">#1749</a>)</p></li>
</ul>
</section>
<section id="id249">
<h5>Misc<a class="headerlink" href="#id249" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1727">#1727</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1728">#1728</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1733">#1733</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1735">#1735</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1741">#1741</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1746">#1746</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1748">#1748</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1753">#1753</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1768">#1768</a></p></li>
</ul>
</section>
</section>
<section id="v5-12-1-2020-09-02">
<h4>v5.12.1 (2020-09-02)<a class="headerlink" href="#v5-12-1-2020-09-02" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id250">
<h5>Misc<a class="headerlink" href="#id250" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1708">#1708</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1709">#1709</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1715">#1715</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1722">#1722</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1724">#1724</a></p></li>
</ul>
</section>
</section>
<section id="v5-12-0-2020-07-16">
<h4>v5.12.0 (2020-07-16)<a class="headerlink" href="#v5-12-0-2020-07-16" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id251">
<h5>Features<a class="headerlink" href="#id251" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update <cite>web3.pm</cite> and <cite>ethpm</cite> module to EthPM v3 specification. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1652">#1652</a>)</p></li>
<li><p>Allow consumer to initialize <cite>HttpProvider</cite> with their own <cite>requests.Session</cite>.  This allows the <cite>HttpAdapter</cite> connection pool to be tuned as desired. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1469">#1469</a>)</p></li>
</ul>
</section>
<section id="id252">
<h5>Improved Documentation<a class="headerlink" href="#id252" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Use ethpm v3 packages in examples documentation. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1683">#1683</a>)</p></li>
<li><p>Modernize the deploy contract example. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1679">#1679</a>)</p></li>
<li><p>Add contribution guidelines and a code of conduct. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1691">#1691</a>)</p></li>
</ul>
</section>
<section id="id253">
<h5>Misc<a class="headerlink" href="#id253" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1687">#1687</a></p></li>
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1690">#1690</a></p></li>
</ul>
</section>
</section>
<section id="v5-12-0-beta-3-2020-07-15">
<h4>v5.12.0-beta.3 (2020-07-15)<a class="headerlink" href="#v5-12-0-beta-3-2020-07-15" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id254">
<h5>Bugfixes<a class="headerlink" href="#id254" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Include ethpm-spec solidity examples in distribution. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1686">#1686</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-12-0-beta-2-2020-07-14">
<h4>v5.12.0-beta.2 (2020-07-14)<a class="headerlink" href="#v5-12-0-beta-2-2020-07-14" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id255">
<h5>Bugfixes<a class="headerlink" href="#id255" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Support ethpm-spec submodule in distributions. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1682">#1682</a>)</p></li>
</ul>
</section>
<section id="id256">
<h5>Improved Documentation<a class="headerlink" href="#id256" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Modernize the deploy contract example. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1679">#1679</a>)</p></li>
<li><p>Use ethpm v3 packages in examples documentation. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1683">#1683</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-12-0-beta-1-2020-07-09">
<h4>v5.12.0-beta.1 (2020-07-09)<a class="headerlink" href="#v5-12-0-beta-1-2020-07-09" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id257">
<h5>Features<a class="headerlink" href="#id257" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Allow consumer to initialize <cite>HttpProvider</cite> with their own <cite>requests.Session</cite>.  This allows the <cite>HttpAdapter</cite> connection pool to be tuned as desired. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1469">#1469</a>)</p></li>
<li><p>Update <cite>web3.pm</cite> and <cite>ethpm</cite> module to EthPM v3 specification. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1652">#1652</a>)</p></li>
</ul>
</section>
<section id="id258">
<h5>Bugfixes<a class="headerlink" href="#id258" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update outdated reference url in ethpm docs and tests. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1680">#1680</a>)</p></li>
</ul>
</section>
<section id="id259">
<h5>Improved Documentation<a class="headerlink" href="#id259" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add a <code class="xref py py-meth docutils literal notranslate"><span class="pre">getBalance()</span></code> example and provide more context for using the <cite>fromWei</cite> and <cite>toWei</cite> utility methods. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1676">#1676</a>)</p></li>
<li><p>Overhaul the Overview documentation to provide a tour of major features. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1681">#1681</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-11-1-2020-06-17">
<h4>v5.11.1 (2020-06-17)<a class="headerlink" href="#v5-11-1-2020-06-17" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id260">
<h5>Bugfixes<a class="headerlink" href="#id260" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Added formatter rules for eth_tester middleware to allow <code class="xref py py-meth docutils literal notranslate"><span class="pre">getBalance()</span></code> by using integer block numbers (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1660">#1660</a>)</p></li>
<li><p>Fix type annotations within the <code class="docutils literal notranslate"><span class="pre">eth.py</span></code> module. Several arguments that defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code> were not declared <code class="docutils literal notranslate"><span class="pre">Optional</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1668">#1668</a>)</p></li>
<li><p>Fix type annotation warning when using string URI to instantiate an HTTP or WebsocketProvider. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1669">#1669</a>)</p></li>
<li><p>Fix type annotations within the <code class="docutils literal notranslate"><span class="pre">web3</span></code> modules. Several arguments that defaulted to <code class="docutils literal notranslate"><span class="pre">None</span></code> were not declared <code class="docutils literal notranslate"><span class="pre">Optional</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1670">#1670</a>)</p></li>
</ul>
</section>
<section id="id261">
<h5>Improved Documentation<a class="headerlink" href="#id261" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Breaks up links into three categories (Intro, Guides, and API) and adds content to the index page: a lib introduction and some ‚ÄúGetting Started‚Äù links. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1671">#1671</a>)</p></li>
<li><p>Fills in some gaps in the Quickstart guide and adds provider connection details for local nodes. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1673">#1673</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-11-0-2020-06-03">
<h4>v5.11.0 (2020-06-03)<a class="headerlink" href="#v5-11-0-2020-06-03" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id262">
<h5>Features<a class="headerlink" href="#id262" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Accept a block identifier in the <code class="docutils literal notranslate"><span class="pre">Contract.estimateGas</span></code> method. Includes a related upgrade of eth-tester to v0.5.0-beta.1. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1639">#1639</a>)</p></li>
<li><p>Introduce a more specific validation error, <code class="docutils literal notranslate"><span class="pre">ExtraDataLengthError</span></code>. This enables tools to detect when someone may be connected to a POA network, for example, and provide a smoother developer experience. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1666">#1666</a>)</p></li>
</ul>
</section>
<section id="id263">
<h5>Bugfixes<a class="headerlink" href="#id263" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Correct the type annotations of <cite>FilterParams.address</cite> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1664">#1664</a>)</p></li>
</ul>
</section>
<section id="id264">
<h5>Improved Documentation<a class="headerlink" href="#id264" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Corrects the return value of <code class="docutils literal notranslate"><span class="pre">getTransactionReceipt</span></code>, description of caching middleware, and deprecated method names. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1663">#1663</a>)</p></li>
<li><p>Corrects documentation of websocket timeout configuration. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1665">#1665</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-10-0-2020-05-18">
<h4>v5.10.0 (2020-05-18)<a class="headerlink" href="#v5-10-0-2020-05-18" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id265">
<h5>Features<a class="headerlink" href="#id265" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>An update of <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> includes a change of the default fork from Constantinople to Muir Glacier.  <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1636">#1636</a></p></li>
</ul>
</section>
<section id="id266">
<h5>Bugfixes<a class="headerlink" href="#id266" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">my_contract.events.MyEvent</span></code> was incorrectly annotated so that <code class="docutils literal notranslate"><span class="pre">MyEvent</span></code> was marked as a <code class="docutils literal notranslate"><span class="pre">ContractEvent</span></code> instance. Fixed to be a class type, i.e., <code class="docutils literal notranslate"><span class="pre">Type[ContractEvent]</span></code>. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1646">#1646</a>)</p></li>
<li><p>IPCProvider correctly handled <code class="docutils literal notranslate"><span class="pre">pathlib.Path</span></code> input, but warned against its type. Fixed to permit Path objects in addition to strings. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1647">#1647</a>)</p></li>
</ul>
</section>
<section id="id267">
<h5>Misc<a class="headerlink" href="#id267" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1636">#1636</a></p></li>
</ul>
</section>
</section>
<section id="v5-9-0-2020-04-30">
<h4>v5.9.0 (2020-04-30)<a class="headerlink" href="#v5-9-0-2020-04-30" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id268">
<h5>Features<a class="headerlink" href="#id268" title="Link to this heading">ÔÉÅ</a></h5>
<ul>
<li><p>Upgrade eth-account to use v0.5.2+. eth-account 0.5.2 adds support for hd accounts</p>
<p>Also had to pin eth-keys to get dependencies to resolve. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1622">#1622</a>)</p>
</li>
</ul>
</section>
<section id="id269">
<h5>Bugfixes<a class="headerlink" href="#id269" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix local_filter_middleware new entries bug (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1514">#1514</a>)</p></li>
<li><p>ENS <code class="docutils literal notranslate"><span class="pre">name</span></code> and ENS <code class="docutils literal notranslate"><span class="pre">address</span></code> can return <code class="docutils literal notranslate"><span class="pre">None</span></code>. Fixes return types. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1633">#1633</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-8-0-2020-04-23">
<h4>v5.8.0 (2020-04-23)<a class="headerlink" href="#v5-8-0-2020-04-23" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id270">
<h5>Features<a class="headerlink" href="#id270" title="Link to this heading">ÔÉÅ</a></h5>
<ul>
<li><p>Introduced <code class="docutils literal notranslate"><span class="pre">list_wallets</span></code> method to the <code class="docutils literal notranslate"><span class="pre">GethPersonal</span></code> class. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1516">#1516</a>)</p></li>
<li><p>Added block_identifier parameter to <cite>ContractConstructor.estimateGas</cite> method. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1588">#1588</a>)</p></li>
<li><p>Add snake_case methods to Geth and Parity Personal Modules.</p>
<p>Deprecate camelCase methods. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1589">#1589</a>)</p>
</li>
<li><p>Added new weighted keyword argument to the time based gas price strategy.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, it will more give more weight to more recent block times. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1614">#1614</a>)</p>
</li>
<li><p>Adds support for Solidity‚Äôs new(ish) receive function.</p>
<p>Adds a new contract API that mirrors the existing fallback API: <code class="docutils literal notranslate"><span class="pre">contract.receive</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1623">#1623</a>)</p>
</li>
</ul>
</section>
<section id="id271">
<h5>Bugfixes<a class="headerlink" href="#id271" title="Link to this heading">ÔÉÅ</a></h5>
<ul>
<li><p>Fixed hasattr overloader method in the web3.ContractEvent, web3.ContractFunction,
and web3.ContractCaller classes by implementing a try/except handler
that returns False if an exception is raised in the __getattr__ overloader method
(since __getattr__ HAS to be called in every __hasattr__ call).</p>
<p>Created two new Exception classes, ‚ÄòABIEventFunctionNotFound‚Äô and ‚ÄòABIFunctionNotFound‚Äô,
which inherit from both AttributeError and MismatchedABI, and replaced the MismatchedABI
raises in ContractEvent, ContractFunction, and ContractCaller with a raise to the created class
in the __getattr__ overloader method of the object. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1594">#1594</a>)</p>
</li>
<li><p>Change return type of rpc_gas_price_strategy from int to Wei (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1612">#1612</a>)</p></li>
</ul>
</section>
<section id="id272">
<h5>Improved Documentation<a class="headerlink" href="#id272" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix typo in ‚ÄúInternals‚Äù docs. Changed asyncronous ‚Äì&gt; asynchronous (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1607">#1607</a>)</p></li>
<li><p>Improve documentation that introduces and troubleshoots Providers. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1609">#1609</a>)</p></li>
<li><p>Add documentation for when to use each transaction method. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1610">#1610</a>)</p></li>
<li><p>Remove incorrect web3 for w3 in doc example (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1615">#1615</a>)</p></li>
<li><p>Add examples for using web3.contract via the ethpm module. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1617">#1617</a>)</p></li>
<li><p>Add dark mode to documentation. Also fixes a bunch of formatting issues in docs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1626">#1626</a>)</p></li>
</ul>
</section>
<section id="id273">
<h5>Misc<a class="headerlink" href="#id273" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1545">#1545</a></p></li>
</ul>
</section>
</section>
<section id="v5-7-0-2020-03-16">
<h4>v5.7.0 (2020-03-16)<a class="headerlink" href="#v5-7-0-2020-03-16" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id274">
<h5>Features<a class="headerlink" href="#id274" title="Link to this heading">ÔÉÅ</a></h5>
<ul>
<li><p>Add snake_case methods for the net module</p>
<p>Also moved net module to use ModuleV2 instead of Module (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1592">#1592</a>)</p>
</li>
</ul>
</section>
<section id="id275">
<h5>Bugfixes<a class="headerlink" href="#id275" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix return type of eth_getCode. Changed from Hexstr to HexBytes. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1601">#1601</a>)</p></li>
</ul>
</section>
<section id="id276">
<h5>Misc<a class="headerlink" href="#id276" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1590">#1590</a></p></li>
</ul>
</section>
</section>
<section id="v5-6-0-2020-02-26">
<h4>v5.6.0 (2020-02-26)<a class="headerlink" href="#v5-6-0-2020-02-26" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id277">
<h5>Features<a class="headerlink" href="#id277" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add snake_case methods to Geth Miner class, deprecate camelCase methods (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1579">#1579</a>)</p></li>
<li><p>Add snake_case methods for the net module, deprecate camelCase methods (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1581">#1581</a>)</p></li>
<li><p>Add PEP561 type marker (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1583">#1583</a>)</p></li>
</ul>
</section>
<section id="id278">
<h5>Bugfixes<a class="headerlink" href="#id278" title="Link to this heading">ÔÉÅ</a></h5>
<ul>
<li><p>Increase replacement tx minimum gas price bump</p>
<p>Parity/OpenEthereum requires a replacement transaction‚Äôs
gas to be a minimum of 12.5% higher than the original
(vs. Geth‚Äôs 10%). (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1570">#1570</a>)</p>
</li>
</ul>
</section>
</section>
<section id="v5-5-1-2020-02-10">
<h4>v5.5.1 (2020-02-10)<a class="headerlink" href="#v5-5-1-2020-02-10" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id279">
<h5>Improved Documentation<a class="headerlink" href="#id279" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Documents the <cite>getUncleCount</cite> method. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1534">#1534</a>)</p></li>
</ul>
</section>
<section id="id280">
<h5>Misc<a class="headerlink" href="#id280" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1576">#1576</a></p></li>
</ul>
</section>
</section>
<section id="v5-5-0-2020-02-03">
<h4>v5.5.0 (2020-02-03)<a class="headerlink" href="#v5-5-0-2020-02-03" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id281">
<h5>Features<a class="headerlink" href="#id281" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>ENS had to release a new registry to push a bugfix. See
<a class="reference external" href="https://medium.com/the-ethereum-name-service/ens-registry-migration-bug-fix-new-features-64379193a5a">this article</a>
for background information. web3.py uses the new registry for all default ENS interactions, now. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1573">#1573</a>)</p></li>
</ul>
</section>
<section id="id282">
<h5>Bugfixes<a class="headerlink" href="#id282" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Minor bugfix in how ContractCaller looks up abi functions. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1552">#1552</a>)</p></li>
<li><p>Update modules to use compatible typing-extensions import. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1554">#1554</a>)</p></li>
<li><p>Make ‚Äòfrom‚Äô and ‚Äòto‚Äô fields checksum addresses in returned transaction receipts (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1562">#1562</a>)</p></li>
<li><p>Use local Trinity‚Äôs IPC socket if it is available, for newer versions of Trinity. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1563">#1563</a>)</p></li>
</ul>
</section>
<section id="id283">
<h5>Improved Documentation<a class="headerlink" href="#id283" title="Link to this heading">ÔÉÅ</a></h5>
<ul>
<li><p>Add Matomo Tracking to Docs site.</p>
<p>Matomo is an Open Source web analytics platform that allows us
to get better insights and optimize for our audience without
the negative consequences of other compareable platforms.</p>
<p>Read more: <a class="reference external" href="https://matomo.org/why-matomo/">https://matomo.org/why-matomo/</a> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1541">#1541</a>)</p>
</li>
<li><p>Fix web3 typo in docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1559">#1559</a>)</p></li>
</ul>
</section>
<section id="id284">
<h5>Misc<a class="headerlink" href="#id284" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1521">#1521</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1546">#1546</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1571">#1571</a></p></li>
</ul>
</section>
</section>
<section id="v5-4-0-2019-12-06">
<h4>v5.4.0 (2019-12-06)<a class="headerlink" href="#v5-4-0-2019-12-06" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id285">
<h5>Features<a class="headerlink" href="#id285" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add __str__ to IPCProvider (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1536">#1536</a>)</p></li>
</ul>
</section>
<section id="id286">
<h5>Bugfixes<a class="headerlink" href="#id286" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add required typing-extensions library to setup.py (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1544">#1544</a>)</p></li>
</ul>
</section>
</section>
<section id="v5-3-1-2019-12-05">
<h4>v5.3.1 (2019-12-05)<a class="headerlink" href="#v5-3-1-2019-12-05" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id287">
<h5>Bugfixes<a class="headerlink" href="#id287" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Only apply hexbytes formatting to r and s values in transaction if present (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1531">#1531</a>)</p></li>
<li><p>Update eth-utils dependency which contains mypy bugfix. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1537">#1537</a>)</p></li>
</ul>
</section>
<section id="id288">
<h5>Improved Documentation<a class="headerlink" href="#id288" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update Contract Event documentation to show correct example (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1515">#1515</a>)</p></li>
<li><p>Add documentation to methods that raise an error in v5 instead of returning <code class="docutils literal notranslate"><span class="pre">None</span></code> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1527">#1527</a>)</p></li>
</ul>
</section>
<section id="id289">
<h5>Misc<a class="headerlink" href="#id289" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1518">#1518</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1532">#1532</a></p></li>
</ul>
</section>
</section>
<section id="v5-3-0-2019-11-14">
<h4>v5.3.0 (2019-11-14)<a class="headerlink" href="#v5-3-0-2019-11-14" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id290">
<h5>Features<a class="headerlink" href="#id290" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Support handling ENS domains in ERC1319 URIs. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1489">#1489</a>)</p></li>
</ul>
</section>
<section id="id291">
<h5>Bugfixes<a class="headerlink" href="#id291" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Make local block filter return empty list when when no blocks mined (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1255">#1255</a>)</p></li>
<li><p>Google protobuf dependency was updated to <cite>3.10.0</cite> (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1493">#1493</a>)</p></li>
<li><p>Infura websocket provider works when no secret key is present (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1501">#1501</a>)</p></li>
</ul>
</section>
<section id="id292">
<h5>Improved Documentation<a class="headerlink" href="#id292" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update Quickstart instructions to use the auto Infura module instead of the more complicated web3 auto module (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1482">#1482</a>)</p></li>
<li><p>Remove outdated py.test command from readme (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1483">#1483</a>)</p></li>
</ul>
</section>
<section id="id293">
<h5>Misc<a class="headerlink" href="#id293" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1461">#1461</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1471">#1471</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1475">#1475</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1476">#1476</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1479">#1479</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1488">#1488</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1492">#1492</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1498">#1498</a></p></li>
</ul>
</section>
</section>
<section id="v5-2-2-2019-10-21">
<h4>v5.2.2 (2019-10-21)<a class="headerlink" href="#v5-2-2-2019-10-21" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id294">
<h5>Features<a class="headerlink" href="#id294" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add poll_latency to waitForTransactionReceipt (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1453">#1453</a>)</p></li>
</ul>
</section>
<section id="id295">
<h5>Bugfixes<a class="headerlink" href="#id295" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix flaky Parity whisper module test (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1473">#1473</a>)</p></li>
</ul>
</section>
<section id="id296">
<h5>Misc<a class="headerlink" href="#id296" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1472">#1472</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1474">#1474</a></p></li>
</ul>
</section>
</section>
<section id="v5-2-1-2019-10-17">
<h4>v5.2.1 (2019-10-17)<a class="headerlink" href="#v5-2-1-2019-10-17" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id297">
<h5>Improved Documentation<a class="headerlink" href="#id297" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Update documentation for unlock account duration (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1464">#1464</a>)</p></li>
<li><p>Clarify module installation command for OSX&gt;=10.15 (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1467">#1467</a>)</p></li>
</ul>
</section>
<section id="id298">
<h5>Misc<a class="headerlink" href="#id298" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1468">#1468</a></p></li>
</ul>
</section>
</section>
<section id="v5-2-0-2019-09-26">
<h4>v5.2.0 (2019-09-26)<a class="headerlink" href="#v5-2-0-2019-09-26" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id299">
<h5>Features<a class="headerlink" href="#id299" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">enable_strict_bytes_type_checking</span></code> flag to web3 instance (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1419">#1419</a>)</p></li>
<li><p>Move Geth Whisper methods to snake case and deprecate camel case methods (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1433">#1433</a>)</p></li>
</ul>
</section>
<section id="id300">
<h5>Bugfixes<a class="headerlink" href="#id300" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add null check to logsbloom formatter (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1445">#1445</a>)</p></li>
</ul>
</section>
<section id="id301">
<h5>Improved Documentation<a class="headerlink" href="#id301" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Reformat autogenerated towncrier release notes (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1460">#1460</a>)</p></li>
</ul>
</section>
</section>
<section id="web3-5-1-0-2019-09-18">
<h4>Web3 5.1.0 (2019-09-18)<a class="headerlink" href="#web3-5-1-0-2019-09-18" title="Link to this heading">ÔÉÅ</a></h4>
<section id="id302">
<h5>Features<a class="headerlink" href="#id302" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">contract_types</span></code> property to <code class="docutils literal notranslate"><span class="pre">Package</span></code> class. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1440">#1440</a>)</p></li>
</ul>
</section>
<section id="id303">
<h5>Bugfixes<a class="headerlink" href="#id303" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Fix flaky parity integration test in the whisper module (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1147">#1147</a>)</p></li>
</ul>
</section>
<section id="id304">
<h5>Improved Documentation<a class="headerlink" href="#id304" title="Link to this heading">ÔÉÅ</a></h5>
<ul>
<li><p>Remove whitespace, move <code class="docutils literal notranslate"><span class="pre">topics</span></code> key -&gt; <code class="docutils literal notranslate"><span class="pre">topic</span></code> in Geth docs (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1425">#1425</a>)</p></li>
<li><p>Enforce stricter doc checking, turning warnings into errors to fail CI builds
to catch issues quickly.</p>
<p>Add missing <code class="docutils literal notranslate"><span class="pre">web3.tools.rst</span></code> to the table of contents and fix incorrectly formatted
JSON example. (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1437">#1437</a>)</p>
</li>
<li><p>Add example using Geth POA Middleware with Infura Rinkeby Node (<a class="reference external" href="https://github.com/ethereum/web3.py/issues/1444">#1444</a>)</p></li>
</ul>
</section>
<section id="id305">
<h5>Misc<a class="headerlink" href="#id305" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/1446">#1446</a>, <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1451">#1451</a></p></li>
</ul>
</section>
</section>
<section id="v5-0-2">
<h4>v5.0.2<a class="headerlink" href="#v5-0-2" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released August 22, 2019</p>
<ul class="simple">
<li><p>Bugfixes</p>
<ul>
<li><p>[ethPM] Fix bug in package id and release id fetching strategy
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1427">#1427</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-1">
<h4>v5.0.1<a class="headerlink" href="#v5-0-1" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released August 15, 2019</p>
<ul class="simple">
<li><p>Bugfixes</p>
<ul>
<li><p>[ethPM] Add begin/close chars to package name regex
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1418">#1418</a></p></li>
<li><p>[ethPM] Update deployments to work when only abi available
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1417">#1417</a></p></li>
<li><p>Fix tuples handled incorrectly in <code class="docutils literal notranslate"><span class="pre">decode_function_input</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1410">#1410</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Eliminate <code class="docutils literal notranslate"><span class="pre">signTransaction</span></code> warning
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1404">#1404</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0">
<h4>v5.0.0<a class="headerlink" href="#v5-0-0" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released August 1, 2019</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.eth.chainId</span></code> now returns an integer instead of hex
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1394">#1394</a></p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>Deprecation Warnings now show for methods that have a
<code class="docutils literal notranslate"><span class="pre">&#64;combomethod</span></code> decorator
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1401">#1401</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>[ethPM] Add ethPM to the docker file
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1405">#1405</a></p></li>
</ul>
</li>
<li><p>Docs</p>
<ul>
<li><p>Docs are updated to use checksummed addresses
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1390">#1390</a></p></li>
<li><p>Minor doc formatting fixes
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1338">#1338</a> &amp;
<a class="reference external" href="https://github.com/ethereum/web3.py/pull/1345">#1345</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-beta-5">
<h4>v5.0.0-beta.5<a class="headerlink" href="#v5-0-0-beta-5" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released July 31, 2019</p>
<p><em>This is intended to be the final release before the stable v5 release.</em></p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Parity operating mode can be read and set
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1355">#1355</a></p></li>
<li><p>Process a single event log, instead of a whole transaction
receipt
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1354">#1354</a></p></li>
</ul>
</li>
<li><p>Docs</p>
<ul>
<li><p>Remove doctest dependency on ethtoken
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1395">#1395</a></p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>[ethPM] Bypass IPFS validation for large files
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1393">#1393</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>[ethPM] Update default Registry solidity contract
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1400">#1400</a></p></li>
<li><p>[ethPM] Update web3.pm to use new simple Registry implementation
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1398">#1398</a></p></li>
<li><p>Update dependency requirement formatting for releasing
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1403">#1403</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-beta-4">
<h4>v5.0.0-beta.4<a class="headerlink" href="#v5-0-0-beta-4" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released July 18,2019</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>[ethPM] Update registry uri to support basic uris w/o package id
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1389">#1389</a></p></li>
</ul>
</li>
<li><p>Docs</p>
<ul>
<li><p>Clarify in docs the return of <code class="docutils literal notranslate"><span class="pre">Eth.sendRawTransaction()</span></code> as
a HexBytes object, not a string.
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1384">#1384</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>[ethPM] Migrate tests over from pytest-ethereum
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1385">#1385</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-beta-3">
<h4>v5.0.0-beta.3<a class="headerlink" href="#v5-0-0-beta-3" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released July 15, 2019</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Add eth_getProof support
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1185">#1185</a></p></li>
<li><p>Implement web3.pm.get_local_package()
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1372">#1372</a></p></li>
<li><p>Update registry URIs to support chain IDs
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1382">#1382</a></p></li>
<li><p>Add error flags to <code class="docutils literal notranslate"><span class="pre">event.processReceipt</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1366">#1366</a></p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>Remove full IDNA processing in favor of UTS46
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1364">#1364</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Migrate py-ethpm library to web3/ethpm
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1379">#1379</a></p></li>
<li><p>Relax canonical address requirement in ethPM
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1380">#1380</a></p></li>
<li><p>Replace ethPM‚Äôs infura strategy with web3‚Äôs native infura support
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1383">#1383</a></p></li>
<li><p>Change <code class="docutils literal notranslate"><span class="pre">combine_argument_formatters</span></code> to <code class="docutils literal notranslate"><span class="pre">apply_formatters_to_sequence</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1360">#1360</a></p></li>
<li><p>Move <code class="docutils literal notranslate"><span class="pre">pytest.xfail</span></code> instances to <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.xfail</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1376">#1376</a></p></li>
<li><p>Change <code class="docutils literal notranslate"><span class="pre">net.version</span></code> to <code class="docutils literal notranslate"><span class="pre">eth.chainId</span></code> in default
transaction params
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1378">#1378</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-beta-2">
<h4>v5.0.0-beta.2<a class="headerlink" href="#v5-0-0-beta-2" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released May 13, 2019</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Mark deprecated sha3 method as static
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1350">#1350</a></p></li>
<li><p>Upgrade to eth-account v0.4.0
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1348">#1348</a></p></li>
</ul>
</li>
<li><p>Docs</p>
<ul>
<li><p>Add note about web3[tester] in documentation
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1325">#1325</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Replace <code class="docutils literal notranslate"><span class="pre">web3._utils.toolz</span></code> imports with <code class="docutils literal notranslate"><span class="pre">eth_utils.toolz</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1317">#1317</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-beta-1">
<h4>v5.0.0-beta.1<a class="headerlink" href="#v5-0-0-beta-1" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released May 6, 2019</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Add support for tilda in provider IPC Path
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1049">#1049</a></p></li>
<li><p>EIP 712 Signing Supported
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1319">#1319</a></p></li>
</ul>
</li>
<li><p>Docs</p>
<ul>
<li><p>Update contract example to use <code class="docutils literal notranslate"><span class="pre">compile_standard</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1263">#1263</a></p></li>
<li><p>Fix typo in middleware docs
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1339">#1339</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-11">
<h4>v5.0.0-alpha.11<a class="headerlink" href="#v5-0-0-alpha-11" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released April 24, 2019</p>
<ul class="simple">
<li><p>Docs</p>
<ul>
<li><p>Add documentation for web3.py unit tests
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1324">#1324</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Update deprecated collections.abc imports
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1334">#1334</a></p></li>
<li><p>Fix documentation typo
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1335">#1335</a></p></li>
<li><p>Upgrade eth-tester version
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1332">#1332</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-10">
<h4>v5.0.0-alpha.10<a class="headerlink" href="#v5-0-0-alpha-10" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released April 15, 2019</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Add getLogs by blockHash
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1269">#1269</a></p></li>
<li><p>Implement chainId endpoint
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1295">#1295</a></p></li>
<li><p>Moved non-standard JSON-RPC endpoints to applicable
Parity/Geth docs. Deprecated <code class="docutils literal notranslate"><span class="pre">web3.version</span></code> for <code class="docutils literal notranslate"><span class="pre">web3.api</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1290">#1290</a></p></li>
<li><p>Moved Whisper endpoints to applicable Geth or Parity namespace
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1308">#1308</a></p></li>
<li><p>Added support for Goerli provider
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1286">#1286</a></p></li>
<li><p>Added addReservedPeer to Parity module
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1311">#1311</a></p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>Cast gas price values to integers in gas strategies
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1297">#1297</a></p></li>
<li><p>Missing constructor function no longer ignores constructor args
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1316">#1316</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Require eth-utils &gt;= 1.4, downgrade Go version for integration tests
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1310">#1310</a></p></li>
<li><p>Fix doc build warnings
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1331">#1331</a></p></li>
<li><p>Zip Fixture data
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1307">#1307</a></p></li>
<li><p>Update Geth version for integration tests
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1301">#1301</a></p></li>
<li><p>Remove unneeded testrpc
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1322">#1322</a></p></li>
<li><p>Add ContractCaller docs to v5 migration guide
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1323">#1323</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-9">
<h4>v5.0.0-alpha.9<a class="headerlink" href="#v5-0-0-alpha-9" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released March 26, 2019</p>
<ul class="simple">
<li><p>Breaking Changes</p>
<ul>
<li><p>Raise error if there is no Infura API Key
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1294">#1294</a> &amp;
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1299">#1299</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Upgraded Parity version for integration testing
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1292">#1292</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-8">
<h4>v5.0.0-alpha.8<a class="headerlink" href="#v5-0-0-alpha-8" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released March 20, 2019</p>
<ul class="simple">
<li><p>Breaking Changes</p>
<ul>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">web3/utils</span></code> directory in favor of <code class="docutils literal notranslate"><span class="pre">web3/_utils</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1282">#1282</a></p></li>
<li><p>Relocated personal RPC endpoints to Parity and Geth class
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1211">#1211</a></p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">web3.net.chainId()</span></code>, <code class="docutils literal notranslate"><span class="pre">web3.eth.getCompilers()</span></code>,
and <code class="docutils literal notranslate"><span class="pre">web3.eth.getTransactionFromBlock()</span></code>. Removed <code class="docutils literal notranslate"><span class="pre">web3.eth.enableUnauditedFeatures()</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1270">#1270</a></p></li>
<li><p>Relocated eth_protocolVersion and web3_clientVersion
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1274">#1274</a></p></li>
<li><p>Relocated <code class="docutils literal notranslate"><span class="pre">web3.txpool</span></code> to <code class="docutils literal notranslate"><span class="pre">web3.geth.txpool</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1275">#1275</a></p></li>
<li><p>Relocated admin module to Geth namespace
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1288">#1288</a></p></li>
<li><p>Relocated miner module to Geth namespace
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1287">#1287</a></p></li>
</ul>
</li>
<li><p>Features</p>
<ul>
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">eth_submitHashrate</span></code> and <code class="docutils literal notranslate"><span class="pre">eth_submitWork</span></code> JSONRPC endpoints.
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1280">#1280</a></p></li>
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">web3.eth.signTransaction</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1277">#1277</a></p></li>
</ul>
</li>
<li><p>Docs</p>
<ul>
<li><p>Added v5 migration docs
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1284">#1284</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-7">
<h4>v5.0.0-alpha.7<a class="headerlink" href="#v5-0-0-alpha-7" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released March 11, 2019</p>
<ul class="simple">
<li><p>Breaking Changes</p>
<ul>
<li><p>Updated JSON-RPC calls that lookup txs or blocks to raise
an error if lookup fails
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1218">#1218</a> and
<a class="reference external" href="https://github.com/ethereum/web3.py/pull/1268">#1268</a></p></li>
</ul>
</li>
<li><p>Features</p>
<ul>
<li><p>Tuple ABI support
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1235">#1235</a></p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>One last <code class="docutils literal notranslate"><span class="pre">middleware_stack</span></code> was still hanging on.
Changed to <code class="docutils literal notranslate"><span class="pre">middleware_onion</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1262">#1262</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-6">
<h4>v5.0.0-alpha.6<a class="headerlink" href="#v5-0-0-alpha-6" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released February 25th, 2019</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>New <code class="docutils literal notranslate"><span class="pre">NoABIFound</span></code> error for cases where there is no ABI
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1247">#1247</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Interact with Infura using an API Key. Key will be required after March 27th.
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1232">#1232</a></p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">process_type</span></code> utility function in favor of
eth-abi functionality
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1249">#1249</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-5">
<h4>v5.0.0-alpha.5<a class="headerlink" href="#v5-0-0-alpha-5" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released February 13th, 2019</p>
<ul class="simple">
<li><p>Breaking Changes</p>
<ul>
<li><p>Remove deprecated <code class="docutils literal notranslate"><span class="pre">buildTransaction</span></code>, <code class="docutils literal notranslate"><span class="pre">call</span></code>, <code class="docutils literal notranslate"><span class="pre">deploy</span></code>,
<code class="docutils literal notranslate"><span class="pre">estimateGas</span></code>, and <code class="docutils literal notranslate"><span class="pre">transact</span></code> methods
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1232">#1232</a></p></li>
</ul>
</li>
<li><p>Features</p>
<ul>
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">Web3.toJSON</span></code> method
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1173">#1173</a></p></li>
<li><p>Contract Caller API Implemented
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1227">#1227</a></p></li>
<li><p>Add Geth POA middleware to use Rinkeby with Infura Auto
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1234">#1234</a></p></li>
<li><p>Add manifest and input argument validation to <code class="docutils literal notranslate"><span class="pre">pm.release_package()</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1237">#1237</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Clean up intro and block/tx sections in Filter docs
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1223">#1223</a></p></li>
<li><p>Remove unnecessary <code class="docutils literal notranslate"><span class="pre">EncodingError</span></code> exception catching
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1224">#1224</a></p></li>
<li><p>Improvements to <code class="docutils literal notranslate"><span class="pre">merge_args_and_kwargs</span></code> utility function
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1228">#1228</a></p></li>
<li><p>Update vyper registry assets
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1242">#1242</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-4">
<h4>v5.0.0-alpha.4<a class="headerlink" href="#v5-0-0-alpha-4" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released January 23rd, 2019</p>
<ul class="simple">
<li><p>Breaking Changes</p>
<ul>
<li><p>Rename <code class="docutils literal notranslate"><span class="pre">middleware_stack</span></code> to <code class="docutils literal notranslate"><span class="pre">middleware_onion</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1210">#1210</a></p></li>
<li><p>Drop already deprecated <code class="docutils literal notranslate"><span class="pre">web3.soliditySha3</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1217">#1217</a></p></li>
<li><p>ENS: Stop inferring <code class="docutils literal notranslate"><span class="pre">.eth</span></code> TLD on domain names
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1205">#1205</a></p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>Validate <code class="docutils literal notranslate"><span class="pre">ethereum_tester</span></code> class in <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1217">#1217</a></p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">getLogs()</span></code> method without creating filters
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1192">#1192</a></p></li>
</ul>
</li>
<li><p>Features</p>
<ul>
<li><p>Stablize the <code class="docutils literal notranslate"><span class="pre">PM</span></code> module
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1125">#1125</a></p></li>
<li><p>Implement async <code class="docutils literal notranslate"><span class="pre">Version</span></code> module
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1166">#1166</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Update .gitignore to ignore <code class="docutils literal notranslate"><span class="pre">.DS_Store</span></code> and <code class="docutils literal notranslate"><span class="pre">.mypy_cache/</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1215">#1215</a></p></li>
<li><p>Change CircleCI badge link to CircleCI project
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1214">#1214</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-3">
<h4>v5.0.0-alpha.3<a class="headerlink" href="#v5-0-0-alpha-3" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released January 15th, 2019</p>
<ul class="simple">
<li><p>Breaking Changes</p>
<ul>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">web3.miner.hashrate</span></code> and <code class="docutils literal notranslate"><span class="pre">web3.version.network</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1198">#1198</a></p></li>
<li><p>Remove <code class="docutils literal notranslate"><span class="pre">web3.providers.tester.EthereumTesterProvider</span></code>
and <code class="docutils literal notranslate"><span class="pre">web3.providers.tester.TestRPCProvider</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1199">#1199</a></p></li>
<li><p>Change <code class="docutils literal notranslate"><span class="pre">manager.providers</span></code> from list to single <code class="docutils literal notranslate"><span class="pre">manager.provider</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1200">#1200</a></p></li>
<li><p>Replace deprecated <code class="docutils literal notranslate"><span class="pre">web3.sha3</span></code> method with <code class="docutils literal notranslate"><span class="pre">web3.keccak</span></code> method
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1207">#1207</a></p></li>
<li><p>Drop auto detect testnets for IPCProvider
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1206">#1206</a></p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>Add check to make sure blockHash exists
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1158">#1158</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Remove some unreachable code in <cite>providers/base.py</cite>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1160">#1160</a></p></li>
<li><p>Migrate tester provider results from middleware to defaults
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1188">#1188</a></p></li>
<li><p>Fix doc formatting for build_filter method
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1187">#1187</a></p></li>
<li><p>Add ERC20 example in docs
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1178">#1178</a></p></li>
<li><p>Code style improvements
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1194">#1194</a>
&amp; <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1191">#1191</a></p></li>
<li><p>Convert Web3 instance variables to w3
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1186">#1186</a></p></li>
<li><p>Update eth-utils dependencies and clean up other dependencies
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1195">#1195</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-2">
<h4>v5.0.0-alpha.2<a class="headerlink" href="#v5-0-0-alpha-2" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released December 20th, 2018</p>
<ul class="simple">
<li><p>Breaking Changes</p>
<ul>
<li><p>Remove support for python3.5, drop support for eth-abi v1
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1163">#1163</a></p></li>
</ul>
</li>
<li><p>Features</p>
<ul>
<li><p>Support for custom ReleaseManager was fixed
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1165">#1165</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Fix doctest nonsense with unicorn token
- <a class="reference external" href="https://github.com/ethereum/web3.py/commit/3b20479ea52">3b2047</a></p></li>
<li><p>Docs for installing web3 in FreeBSD
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1156">#1156</a></p></li>
<li><p>Use latest python in readthedocs
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1162">#1162</a></p></li>
<li><p>Use twine in release script
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1164">#1164</a></p></li>
<li><p>Upgrade eth-tester, for eth-abi v2 support
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1168">#1168</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v5-0-0-alpha-1">
<h4>v5.0.0-alpha.1<a class="headerlink" href="#v5-0-0-alpha-1" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released December 13th, 2018</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Add Rinkeby and Kovan Infura networks; made mainnet the default
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1150">#1150</a></p></li>
<li><p>Add parity-specific <code class="docutils literal notranslate"><span class="pre">listStorageKeys</span></code> RPC
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1145">#1145</a></p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">Web3.soliditySha3</span></code>; use <code class="docutils literal notranslate"><span class="pre">Web3.solidityKeccak</span></code> instead.
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1139">#1139</a></p></li>
<li><p>Add default trinity locations to IPC path guesser
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1121">#1121</a></p></li>
<li><p>Add wss to <code class="docutils literal notranslate"><span class="pre">AutoProvider</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1110">#1110</a></p></li>
<li><p>Add timeout for <code class="docutils literal notranslate"><span class="pre">WebsocketProvider</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1109">#1109</a></p></li>
<li><p>Receipt timeout raises <code class="docutils literal notranslate"><span class="pre">TimeExhausted</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1070">#1070</a></p></li>
<li><p>Allow specification of block number for <code class="docutils literal notranslate"><span class="pre">eth_estimateGas</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1046">#1046</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">web3._utils.six</span></code> support
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1116">#1116</a></p></li>
<li><p>Upgrade eth-utils to 1.2.0
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1104">#1104</a></p></li>
<li><p>Require Python version 3.5.3 or greater
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1095">#1095</a></p></li>
<li><p>Bump websockets version to 7.0.0
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1146">#1146</a></p></li>
<li><p>Bump parity test binary to 1.11.11
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1064">#1064</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v4-8-2">
<h4>v4.8.2<a class="headerlink" href="#v4-8-2" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released November 15, 2018</p>
<ul class="simple">
<li><p>Misc</p>
<ul>
<li><p>Reduce unneeded memory usage
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1138">#1138</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v4-8-1">
<h4>v4.8.1<a class="headerlink" href="#v4-8-1" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released October 28, 2018</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Add timeout for WebsocketProvider
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1119">#1119</a></p></li>
<li><p>Reject transactions that send ether to non-payable contract functions
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1115">#1115</a></p></li>
<li><p>Add Auto Infura Ropsten support: <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">web3.auto.infura.ropsten</span> <span class="pre">import</span> <span class="pre">w3</span></code>
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1124">#1124</a></p></li>
<li><p>Auto-detect trinity IPC file location
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1129">#1129</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Require Python &gt;=3.5.3
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1107">#1107</a></p></li>
<li><p>Upgrade eth-tester and eth-utils
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1085">#1085</a></p></li>
<li><p>Configure readthedocs dependencies
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1082">#1082</a></p></li>
<li><p>soliditySha3 docs fixup
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1100">#1100</a></p></li>
<li><p>Update ropsten faucet links in troubleshooting docs</p></li>
</ul>
</li>
</ul>
</section>
<section id="v4-7-2">
<h4>v4.7.2<a class="headerlink" href="#v4-7-2" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released September 25th, 2018</p>
<ul class="simple">
<li><p>Bugfixes</p>
<ul>
<li><p>IPC paths starting with <code class="docutils literal notranslate"><span class="pre">~</span></code> are appropriately resolved to the home directory
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1072">#1072</a></p></li>
<li><p>You can use the local signing middleware with <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>-type addresses
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1069">#1069</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="v4-7-1">
<h4>v4.7.1<a class="headerlink" href="#v4-7-1" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released September 11th, 2018</p>
<ul class="simple">
<li><p>Bugfixes</p>
<ul>
<li><p><a class="reference external" href="https://github.com/pypa/pip/issues/4614">old pip bug</a> used during
release made it impossible for non-windows users to install 4.7.0.</p></li>
</ul>
</li>
</ul>
</section>
<section id="v4-7-0">
<h4>v4.7.0<a class="headerlink" href="#v4-7-0" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released September 10th, 2018</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Add traceFilter method to the parity module.
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1051">#1051</a></p></li>
<li><p>Move <code class="xref py py-mod docutils literal notranslate"><span class="pre">datastructures</span></code> to public namespace <code class="xref py py-mod docutils literal notranslate"><span class="pre">datastructures</span></code>
to improve support for type checking.
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1038">#1038</a></p></li>
<li><p>Optimization to contract calls
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/944">#944</a></p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>ENS name resolution only attempted on mainnet by default.
-  <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1037">#1037</a></p></li>
<li><p>Fix attribute access error when attributedict middleware is not used.
- <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1040">#1040</a></p></li>
</ul>
</li>
<li><p>Misc
- Upgrade eth-tester to 0.1.0-beta.32, and remove integration tests for py-ethereum.
- Upgrade eth-hash to 0.2.0 with pycryptodome 3.6.6 which resolves a vulnerability.</p></li>
</ul>
</section>
<section id="v4-6-0">
<h4>v4.6.0<a class="headerlink" href="#v4-6-0" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Aug 24, 2018</p>
<ul>
<li><p>Features</p>
<ul class="simple">
<li><p>Support for Python 3.7, most notably in <code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketProvider</span></code>
-  <a class="reference external" href="https://github.com/ethereum/web3.py/pull/996">#996</a></p></li>
<li><p>You can now decode a transaction‚Äôs data to its original function call and arguments with:
<a class="reference internal" href="index.html#web3.contract.Contract.decode_function_input" title="web3.contract.Contract.decode_function_input"><code class="xref py py-meth docutils literal notranslate"><span class="pre">contract.decode_function_input()</span></code></a> - <a class="reference external" href="https://github.com/ethereum/web3.py/pull/991">#991</a></p></li>
<li><p>Support for <a class="reference internal" href="index.html#web3.providers.ipc.IPCProvider" title="web3.providers.ipc.IPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">IPCProvider</span></code></a> in FreeBSD (and more readme docs) - <a class="reference external" href="https://github.com/ethereum/web3.py/pull/1008">#1008</a></p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul class="simple">
<li><p>Fix crash in time-based gas strategies with small number of transactions - <a class="reference external" href="https://github.com/ethereum/web3.py/pull/983">#983</a></p></li>
<li><p>Fx crash when passing multiple addresses to <code class="xref py py-meth docutils literal notranslate"><span class="pre">w3.eth.getLogs()</span></code> -
<a class="reference external" href="https://github.com/ethereum/web3.py/pull/1005">#1005</a></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Disallow configuring filters with both manual and generated topic lists - <a class="reference external" href="https://github.com/ethereum/web3.py/pull/976">#976</a></p></li>
<li><p>Add support for the upcoming eth-abi v2, which does ABI string decoding differently - <a class="reference external" href="https://github.com/ethereum/web3.py/pull/974">#974</a></p></li>
<li><p>Add a lot more filter tests - <a class="reference external" href="https://github.com/ethereum/web3.py/pull/997">#997</a></p></li>
<li><p>Add more tests for filtering with <code class="docutils literal notranslate"><span class="pre">None</span></code>. Note that geth &amp; parity differ here. - <a class="reference external" href="https://github.com/ethereum/web3.py/pull/985">#985</a></p></li>
<li><p>Follow-up on Parity bug that we reported upstream (<a class="reference external" href="https://github.com/paritytech/parity-ethereum/issues/7816">parity#7816</a>): they resolved in 1.10. We
removed xfail on that test. - <a class="reference external" href="https://github.com/ethereum/web3.py/pull/992">#992</a></p></li>
<li><p>Docs: add an example of interacting with an ERC20 contract - <a class="reference external" href="https://github.com/ethereum/web3.py/pull/995">#995</a></p></li>
<li><p>A couple doc typo fixes</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/pull/1006">#1006</a></p></li>
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/pull/1010">#1010</a></p></li>
</ul>
</div></blockquote>
</li>
</ul>
</li>
</ul>
</section>
<section id="v4-5-0">
<h4>v4.5.0<a class="headerlink" href="#v4-5-0" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released July 30, 2018</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Accept addresses supplied in <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> format (which does not provide checksum validation)</p></li>
<li><p>Improve estimation of gas prices</p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>Can now use a block number with <code class="xref py py-meth docutils literal notranslate"><span class="pre">getCode()</span></code> when connected to
<a class="reference internal" href="index.html#web3.providers.eth_tester.EthereumTesterProvider" title="web3.providers.eth_tester.EthereumTesterProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code></a> (without crashing)</p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Test Parity 1.11.7</p></li>
<li><p>Parity integration tests upgrade to use sha256 instead of md5</p></li>
<li><p>Fix some filter docs</p></li>
<li><p>eth-account upgrade to v0.3.0</p></li>
<li><p>eth-tester upgrade to v0.1.0-beta.29</p></li>
</ul>
</li>
</ul>
</section>
<section id="v4-4-1">
<h4>v4.4.1<a class="headerlink" href="#v4-4-1" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released June 29, 2018</p>
<ul class="simple">
<li><p>Bugfixes</p>
<ul>
<li><p>eth-pm package was renamed (old one deleted) which broke the web3 release.
eth-pm was removed from the web3.py install until it‚Äôs stable.</p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p><a class="reference internal" href="index.html#web3.providers.ipc.IPCProvider" title="web3.providers.ipc.IPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">IPCProvider</span></code></a> now accepts a <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#pathlib.Path" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">pathlib.Path</span></code></a>
argument for the IPC path</p></li>
<li><p>Docs explaining the new custom autoproviders in web3</p></li>
</ul>
</li>
</ul>
</section>
<section id="v4-4-0">
<h4>v4.4.0<a class="headerlink" href="#v4-4-0" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released June 21, 2018</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Add support for https in WEB3_PROVIDER_URI environment variable</p></li>
<li><p>Can send websocket connection parameters in <code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketProvider</span></code></p></li>
<li><p>Two new auto-initialization options:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">web3.auto.gethdev</span> <span class="pre">import</span> <span class="pre">w3</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">web3.auto.infura</span> <span class="pre">import</span> <span class="pre">w3</span></code>
(After setting the <code class="docutils literal notranslate"><span class="pre">INFURA_API_KEY</span></code> environment variable)</p></li>
</ul>
</li>
<li><p>Alpha support for a new package management tool based on ethpm-spec</p></li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>Can now receive large responses in <code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketProvider</span></code> by
specifying a large <code class="docutils literal notranslate"><span class="pre">max_size</span></code> in the websocket connection parameters.</p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Websockets dependency upgraded to v5</p></li>
<li><p>Raise deprecation warning on <code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionFromBlock()</span></code></p></li>
<li><p>Fix docs for <code class="xref py py-meth docutils literal notranslate"><span class="pre">waitForTransactionReceipt()</span></code></p></li>
<li><p>Developer Dockerfile now installs testing dependencies</p></li>
</ul>
</li>
</ul>
</section>
<section id="v4-3-0">
<h4>v4.3.0<a class="headerlink" href="#v4-3-0" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released June 6, 2018</p>
<ul class="simple">
<li><p>Features</p>
<ul>
<li><p>Support for the ABI types like: <a class="reference external" href="http://solidity.readthedocs.io/en/v0.4.24/abi-spec.html#types">fixedMxN</a>
which is used by Vyper.</p></li>
<li><p>In-flight transaction-signing middleware: Use local keys as if they were hosted keys
using the new <code class="docutils literal notranslate"><span class="pre">sign_and_send_raw_middleware</span></code></p></li>
<li><p>New <code class="xref py py-meth docutils literal notranslate"><span class="pre">getUncleByBlock()</span></code> API</p></li>
<li><p>New name <code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionByBlock()</span></code>, which replaces the deprecated
<code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionFromBlock()</span></code></p></li>
<li><p>Add several new Parity trace functions</p></li>
<li><p>New API to resolve ambiguous function calls, for example:</p>
<ul>
<li><p>Two functions with the same name that accept similar argument types, like
<code class="docutils literal notranslate"><span class="pre">myfunc(uint8)</span></code> and <code class="docutils literal notranslate"><span class="pre">myfunc(int8)</span></code>, and you want to call
<code class="docutils literal notranslate"><span class="pre">contract.functions.myfunc(1).call()</span></code></p></li>
<li><p>See how to use it at: <a class="reference internal" href="index.html#ambiguous-contract-functions"><span class="std std-ref">Invoke Ambiguous Contract Functions</span></a></p></li>
</ul>
</li>
</ul>
</li>
<li><p>Bugfixes</p>
<ul>
<li><p>Gas estimation doesn‚Äôt crash, when 0 blocks are available. (ie~ on the genesis block)</p></li>
<li><p>Close out all HTTPProvider sessions, to squash warnings on exit</p></li>
<li><p>Stop adding Contract address twice to the filter. It was making some nodes unhappy</p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Friendlier json encoding/decoding failure error messages</p></li>
<li><p>Performance improvements, when the responses from the node are large
(by reducing the number of times we evaluate if the response is valid json)</p></li>
<li><p>Parity CI test fixes (ugh, environment setup hell, thanks to the
community for cleaning this up!)</p></li>
<li><p>Don‚Äôt crash when requesting a transaction that was created with the parity bug
(which allowed an unsigned transaction to be included, so <code class="docutils literal notranslate"><span class="pre">publicKey</span></code> is <code class="docutils literal notranslate"><span class="pre">None</span></code>)</p></li>
<li><p>Doc fixes: addresses must be checksummed (or ENS names on mainnet)</p></li>
<li><p>Enable local integration testing of parity on non-Debian OS</p></li>
<li><p>README:</p>
<ul>
<li><p>Testing setup for devs</p></li>
<li><p>Change the build badge from Travis to Circle CI</p></li>
</ul>
</li>
<li><p>Cache the parity binary in Circle CI, to reduce the impact of their binary API going down</p></li>
<li><p>Dropped the dot: <code class="docutils literal notranslate"><span class="pre">py.test</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">pytest</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="v4-2-1">
<h4>v4.2.1<a class="headerlink" href="#v4-2-1" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released May 9, 2018</p>
<ul class="simple">
<li><p>Bugfixes</p>
<ul>
<li><p>When <code class="xref py py-meth docutils literal notranslate"><span class="pre">getting</span> <span class="pre">a</span> <span class="pre">transaction</span></code>
with data attached and trying to <code class="xref py py-meth docutils literal notranslate"><span class="pre">modify</span> <span class="pre">it</span></code>
(say, to increase the gas price), the data was not being reattached in
the new transaction.</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.personal.sendTransaction()</span></code> was crashing when using a transaction
generated with <code class="docutils literal notranslate"><span class="pre">buildTransaction()</span></code></p></li>
</ul>
</li>
<li><p>Misc</p>
<ul>
<li><p>Improved error message when connecting to a geth-style PoA network</p></li>
<li><p>Improved error message when address is not checksummed</p></li>
<li><p>Started in on support for <code class="docutils literal notranslate"><span class="pre">fixedMxN</span></code> ABI arguments</p></li>
<li><p>Lots of documentation upgrades, including:</p>
<ul>
<li><p>Guide for understanding nodes/networks/connections</p></li>
<li><p>Simplified Quickstart with notes for common issues</p></li>
<li><p>A new Troubleshooting section</p></li>
</ul>
</li>
<li><p>Potential pypy performance improvements (use toolz instead of cytoolz)</p></li>
<li><p>eth-tester upgraded to beta 24</p></li>
</ul>
</li>
</ul>
</section>
<section id="v4-2-0">
<h4>v4.2.0<a class="headerlink" href="#v4-2-0" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Apr 25, 2018</p>
<ul class="simple">
<li><p>Removed audit warning and opt-in requirement for <code class="docutils literal notranslate"><span class="pre">w3.eth.account</span></code>. See more in:
<a class="reference internal" href="index.html#eth-account"><span class="std std-ref">Accounts</span></a></p></li>
<li><p>Added an API to look up contract functions: <code class="docutils literal notranslate"><span class="pre">fn</span> <span class="pre">=</span> <span class="pre">contract.functions['function_name_here']</span></code></p></li>
<li><p>Upgrade Whisper (shh) module to use v6 API</p></li>
<li><p>Bugfix: set ‚Äòto‚Äô field of transaction to empty when using
<code class="docutils literal notranslate"><span class="pre">transaction</span> <span class="pre">=</span> <span class="pre">contract.constructor().buildTransaction()</span></code></p></li>
<li><p>You can now specify <cite>nonce</cite> in <code class="docutils literal notranslate"><span class="pre">buildTransaction()</span></code></p></li>
<li><p>Distinguish between chain id and network id ‚Äì currently always return <cite>None</cite> for
<code class="xref py py-attr docutils literal notranslate"><span class="pre">chainId</span></code></p></li>
<li><p>Better error message when trying to use a contract function that has 0 or &gt;1 matches</p></li>
<li><p>Better error message when trying to install on a python version &lt;3.5</p></li>
<li><p>Installs pypiwin32 during pip install, for a better Windows experience</p></li>
<li><p>Cleaned up a lot of test warnings by upgrading from deprecated APIs, especially
from the deprecated <code class="docutils literal notranslate"><span class="pre">contract.deploy(txn_dict,</span> <span class="pre">args=contract_args)</span></code>
to the new <code class="docutils literal notranslate"><span class="pre">contract.constructor(*contract_args).transact(txn_dict)</span></code></p></li>
<li><p>Documentation typo fixes</p></li>
<li><p>Better template for Pull Requests</p></li>
</ul>
</section>
<section id="v4-1-0">
<h4>v4.1.0<a class="headerlink" href="#v4-1-0" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Apr 9, 2018</p>
<ul class="simple">
<li><p>New <code class="xref py py-class docutils literal notranslate"><span class="pre">WebsocketProvider</span></code>.
If you‚Äôre looking for better performance than HTTP, check out websockets.</p></li>
<li><p>New <code class="xref py py-meth docutils literal notranslate"><span class="pre">w3.eth.waitForTransactionReceipt()</span></code></p></li>
<li><p>Added name collision detection to ConciseContract and ImplicitContract</p></li>
<li><p>Bugfix to allow fromBlock set to 0 in createFilter, like
<code class="docutils literal notranslate"><span class="pre">contract.events.MyEvent.createFilter(fromBlock=0,</span> <span class="pre">...)</span></code></p></li>
<li><p>Bugfix of ENS automatic connection</p></li>
<li><p>eth-tester support for Byzantium</p></li>
<li><p>New migration guide for v3 -&gt; v4 upgrade</p></li>
<li><p>Various documentation updates</p></li>
<li><p>Pinned eth-account to older version</p></li>
</ul>
</section>
<section id="v4-0-0">
<h4>v4.0.0<a class="headerlink" href="#v4-0-0" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Apr 2, 2018</p>
<ul class="simple">
<li><p>Marked beta.13 as stable</p></li>
<li><p>Documentation tweaks</p></li>
</ul>
</section>
<section id="v4-0-0-beta-13">
<h4>v4.0.0-beta.13<a class="headerlink" href="#v4-0-0-beta-13" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Mar 27, 2018</p>
<p><em>This is intended to be the final release before the stable v4 release.</em></p>
<ul class="simple">
<li><p>Add support for geth 1.8 (fixed error on <code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionReceipt()</span></code>)</p></li>
<li><p>You can now call a contract method at a specific block
with the <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> keyword argument, see:
<a class="reference internal" href="index.html#web3.contract.ContractFunction.call" title="web3.contract.ContractFunction.call"><code class="xref py py-meth docutils literal notranslate"><span class="pre">call()</span></code></a></p></li>
<li><p>In preparation for stable release, disable <code class="docutils literal notranslate"><span class="pre">w3.eth.account</span></code> by default,
until a third-party audit is complete &amp; resolved.</p></li>
<li><p>New API for contract deployment, which enables gas estimation, local signing, etc.
See <a class="reference internal" href="index.html#web3.contract.Contract.constructor" title="web3.contract.Contract.constructor"><code class="xref py py-meth docutils literal notranslate"><span class="pre">constructor()</span></code></a>.</p></li>
<li><p>Find contract events with <a class="reference internal" href="index.html#contract-create-filter"><span class="std std-ref">contract.events.$my_event.createFilter()</span></a></p></li>
<li><p>Support auto-complete for contract methods.</p></li>
<li><p>Upgrade most dependencies to stable</p>
<ul>
<li><p>eth-abi</p></li>
<li><p>eth-utils</p></li>
<li><p>hexbytes</p></li>
<li><p><em>not included: eth-tester and eth-account</em></p></li>
</ul>
</li>
<li><p>Switch the default EthereumTesterProvider backend from eth-testrpc to eth-tester:
<a class="reference internal" href="index.html#web3.providers.eth_tester.EthereumTesterProvider" title="web3.providers.eth_tester.EthereumTesterProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">web3.providers.eth_tester.EthereumTesterProvider</span></code></a></p></li>
<li><p>A lot of documentation improvements</p></li>
<li><p>Test node integrations over a variety of providers</p></li>
<li><p>geth 1.8 test suite</p></li>
</ul>
</section>
<section id="v4-0-0-beta-12">
<h4>v4.0.0-beta.12<a class="headerlink" href="#v4-0-0-beta-12" title="Link to this heading">ÔÉÅ</a></h4>
<p>A little hiccup on release. Skipped.</p>
</section>
<section id="v4-0-0-beta-11">
<h4>v4.0.0-beta.11<a class="headerlink" href="#v4-0-0-beta-11" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Feb 28, 2018</p>
<ul class="simple">
<li><p>New methods to modify or replace pending transactions</p></li>
<li><p>A compatibility option for connecting to <code class="docutils literal notranslate"><span class="pre">geth</span> <span class="pre">--dev</span></code> ‚Äì see <a class="reference internal" href="index.html#geth-poa"><span class="std std-ref">Proof of Authority</span></a></p></li>
<li><p>A new <code class="xref py py-attr docutils literal notranslate"><span class="pre">web3.net.chainId</span></code></p></li>
<li><p>Create a filter object from an existing filter ID.</p></li>
<li><p>eth-utils v1.0.1 (stable) compatibility</p></li>
</ul>
</section>
<section id="v4-0-0-beta-10">
<h4>v4.0.0-beta.10<a class="headerlink" href="#v4-0-0-beta-10" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Feb 21, 2018</p>
<ul class="simple">
<li><p>bugfix: Compatibility with eth-utils v1-beta2
(the incompatibility was causing fresh web3.py installs to fail)</p></li>
<li><p>bugfix: crash when sending the output of <code class="docutils literal notranslate"><span class="pre">contract.functions.myFunction().buildTransaction()</span></code>
to <code class="xref py py-meth docutils literal notranslate"><span class="pre">sendTransaction()</span></code>. Now, having a chainID key does not crash
sendTransaction.</p></li>
<li><p>bugfix: a TypeError when estimating gas like:
<code class="docutils literal notranslate"><span class="pre">contract.functions.myFunction().estimateGas()</span></code> is fixed</p></li>
<li><p>Added parity integration tests to the continuous integration suite!</p></li>
<li><p>Some py3 and docs cleanup</p></li>
</ul>
</section>
<section id="v4-0-0-beta-9">
<h4>v4.0.0-beta.9<a class="headerlink" href="#v4-0-0-beta-9" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Feb 8, 2018</p>
<ul class="simple">
<li><p>Access event log parameters as attributes</p></li>
<li><p>Support for specifying nonce in eth-tester</p></li>
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/pull/616">Bugfix</a>
dependency conflicts between eth-utils, eth-abi, and eth-tester</p></li>
<li><p>Clearer error message when invalid keywords provided to contract constructor function</p></li>
<li><p>New docs for working with private keys + set up doctests</p></li>
<li><p>First parity integration tests</p></li>
<li><p>replace internal implementation of w3.eth.account with
<a class="reference external" href="https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account" title="(in eth-account v0.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">eth_account.account.Account</span></code></a></p></li>
</ul>
</section>
<section id="v4-0-0-beta-8">
<h4>v4.0.0-beta.8<a class="headerlink" href="#v4-0-0-beta-8" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Feb 7, 2018, then recalled. It added 32MB of test data to git history,
so the tag was deleted, as well as the corresponding release.
(Although the release would not have contained that test data)</p>
</section>
<section id="v4-0-0-beta-7">
<h4>v4.0.0-beta.7<a class="headerlink" href="#v4-0-0-beta-7" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Jan 29, 2018</p>
<ul class="simple">
<li><p>Support for <code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.Eth.getLogs()</span></code> in eth-tester with py-evm</p></li>
<li><p>Process transaction receipts with Event ABI, using
<cite>Contract.events.myEvent(*args, **kwargs).processReceipt(transaction_receipt)</cite>
see <a class="reference internal" href="index.html#event-log-object"><span class="std std-ref">Event Log Object</span></a> for the new type.</p></li>
<li><p>Add timeout parameter to <a class="reference internal" href="index.html#web3.providers.ipc.IPCProvider" title="web3.providers.ipc.IPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">web3.providers.ipc.IPCProvider</span></code></a></p></li>
<li><p>bugfix: make sure <cite>idna</cite> package is always installed</p></li>
<li><p>Replace ethtestrpc with py-evm, in all tests</p></li>
<li><p>Dockerfile fixup</p></li>
<li><p>Test refactoring &amp; cleanup</p></li>
<li><p>Reduced warnings during tests</p></li>
</ul>
</section>
<section id="v4-0-0-beta-6">
<h4>v4.0.0-beta.6<a class="headerlink" href="#v4-0-0-beta-6" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Jan 18, 2018</p>
<ul class="simple">
<li><p>New contract function call API: <cite>my_contract.functions.my_func().call()</cite> is preferred over the now
deprecated <cite>my_contract.call().my_func()</cite> API.</p></li>
<li><p>A new, sophisticated gas estimation algorithm, based on the <a class="reference external" href="https://ethgasstation.info">https://ethgasstation.info</a> approach.
You must opt-in to the new approach, because it‚Äôs quite slow. We recommend using the new caching middleware.
See <a class="reference internal" href="index.html#web3.gas_strategies.time_based.construct_time_based_gas_price_strategy" title="web3.gas_strategies.time_based.construct_time_based_gas_price_strategy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.gas_strategies.time_based.construct_time_based_gas_price_strategy()</span></code></a></p></li>
<li><p>New caching middleware that can cache based on time, block, or indefinitely.</p></li>
<li><p>Automatically retry JSON-RPC requests over HTTP, a few times.</p></li>
<li><p>ConciseContract now has the address directly</p></li>
<li><p>Many eth-tester fixes. <code class="xref py py-class docutils literal notranslate"><span class="pre">web3.providers.eth_tester.main.EthereumTesterProvider</span></code> is now a
legitimate alternative to <code class="xref py py-class docutils literal notranslate"><span class="pre">web3.providers.tester.EthereumTesterProvider</span></code>.</p></li>
<li><p>ethtest-rpc removed from testing. Tests use eth-tester only, on pyethereum. Soon it will be
eth-tester with py-evm.</p></li>
<li><p>Bumped several dependencies, like eth-tester</p></li>
<li><p>Documentation updates</p></li>
</ul>
</section>
<section id="v4-0-0-beta-5">
<h4>v4.0.0-beta.5<a class="headerlink" href="#v4-0-0-beta-5" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Dec 28, 2017</p>
<ul class="simple">
<li><p>Improvements to working with eth-tester, using <a class="reference internal" href="index.html#web3.providers.eth_tester.EthereumTesterProvider" title="web3.providers.eth_tester.EthereumTesterProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code></a>:</p>
<ul>
<li><p>Bugfix the key names in event logging</p></li>
<li><p>Add support for <code class="xref py py-meth docutils literal notranslate"><span class="pre">sendRawTransaction()</span></code></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="index.html#web3.providers.ipc.IPCProvider" title="web3.providers.ipc.IPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">IPCProvider</span></code></a> now automatically retries on a broken connection, like when you restart your node</p></li>
<li><p>New gas price engine API, laying groundwork for more advanced gas pricing strategies</p></li>
</ul>
</section>
<section id="v4-0-0-beta-4">
<h4>v4.0.0-beta.4<a class="headerlink" href="#v4-0-0-beta-4" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Dec 7, 2017</p>
<ul class="simple">
<li><p>New <code class="xref py py-meth docutils literal notranslate"><span class="pre">buildTransaction()</span></code> method to prepare contract transactions, offline</p></li>
<li><p>New automatic provider detection, for <code class="docutils literal notranslate"><span class="pre">w3</span> <span class="pre">=</span> <span class="pre">Web3()</span></code> initialization</p></li>
<li><p>Set environment variable <cite>WEB3_PROVIDER_URI</cite> to suggest a provider for automatic detection</p></li>
<li><p>New API to set providers like: <code class="docutils literal notranslate"><span class="pre">w3.providers</span> <span class="pre">=</span> <span class="pre">[IPCProvider()]</span></code></p></li>
<li><p>Crashfix: <a class="reference internal" href="index.html#web3.eth.Eth.filter" title="web3.eth.Eth.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.Eth.filter()</span></code></a> when retrieving logs with the argument ‚Äòlatest‚Äô</p></li>
<li><p>Bump eth-tester to v0.1.0-beta.5, with bugfix for filtering by topic</p></li>
<li><p>Removed GPL lib <code class="docutils literal notranslate"><span class="pre">pylru</span></code>, now believed to be in full MIT license compliance.</p></li>
</ul>
</section>
<section id="v4-0-0-beta-3">
<h4>v4.0.0-beta.3<a class="headerlink" href="#v4-0-0-beta-3" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Dec 1, 2017</p>
<ul class="simple">
<li><p>Fix encoding of ABI types: <code class="docutils literal notranslate"><span class="pre">bytes[]</span></code> and <code class="docutils literal notranslate"><span class="pre">string[]</span></code></p></li>
<li><p>Windows connection error bugfix</p></li>
<li><p>Bugfix message signatures that were broken ~1% of the time (zero-pad <code class="docutils literal notranslate"><span class="pre">r</span></code> and <code class="docutils literal notranslate"><span class="pre">s</span></code>)</p></li>
<li><p>Autoinit web3 now produces None instead of raising an exception on <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">web3.auto</span> <span class="pre">import</span> <span class="pre">w3</span></code></p></li>
<li><p>Clearer errors on formatting failure (includes field name that failed)</p></li>
<li><p>Python modernization, removing Py2 compatibility cruft</p></li>
<li><p>Update dependencies with changed names, now:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">eth-abi</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eth-keyfile</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eth-keys</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eth-tester</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eth-utils</span></code></p></li>
</ul>
</li>
<li><p>Faster Travis CI builds, with cached geth binary</p></li>
</ul>
</section>
<section id="v4-0-0-beta-2">
<h4>v4.0.0-beta.2<a class="headerlink" href="#v4-0-0-beta-2" title="Link to this heading">ÔÉÅ</a></h4>
<p>Released Nov 22, 2017</p>
<p>Bug Fixes:</p>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">sendRawTransaction()</span></code> accepts raw bytes</p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.contract" title="web3.eth.Eth.contract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">contract()</span></code></a> accepts an ENS name as contract address</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">signTransaction()</span></code> returns the expected hash (<em>after</em> signing the transaction)</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Account</span></code> methods can all be called statically, like: <code class="docutils literal notranslate"><span class="pre">Account.sign(...)</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionReceipt()</span></code> returns the <code class="docutils literal notranslate"><span class="pre">status</span></code> field as an <code class="docutils literal notranslate"><span class="pre">int</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.soliditySha3()</span></code> looks up ENS names if they are supplied with an ‚Äúaddress‚Äù ABI</p></li>
<li><p>If running multiple threads with the same w3 instance, <code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">Recursively</span> <span class="pre">called</span> <span class="pre">...</span></code> is no longer raised</p></li>
</ul>
<p>Plus, various python modernization code cleanups, and testing against geth 1.7.2.</p>
</section>
<section id="v4-0-0-beta-1">
<h4>v4.0.0-beta.1<a class="headerlink" href="#v4-0-0-beta-1" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Python 3 is now required</p></li>
<li><p>ENS names can be used anywhere that a hex address can</p></li>
<li><p>Sign transactions and messages with local private keys</p></li>
<li><p>New filter mechanism: <a class="reference internal" href="index.html#web3.utils.filters.Filter.get_all_entries" title="web3.utils.filters.Filter.get_all_entries"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_all_entries()</span></code></a> and <a class="reference internal" href="index.html#web3.utils.filters.Filter.get_new_entries" title="web3.utils.filters.Filter.get_new_entries"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_new_entries()</span></code></a></p></li>
<li><p>Quick automatic initialization with <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">web3.auto</span> <span class="pre">import</span> <span class="pre">w3</span></code></p></li>
<li><p>All addresses must be supplied with an EIP-55 checksum</p></li>
<li><p>All addresses are returned with a checksum</p></li>
<li><p>Renamed <code class="docutils literal notranslate"><span class="pre">Web3.toDecimal()</span></code> to <code class="docutils literal notranslate"><span class="pre">toInt()</span></code>, see: <a class="reference internal" href="index.html#overview-type-conversions"><span class="std std-ref">Encoding and Decoding Helpers</span></a></p></li>
<li><p>All filter calls are synchronous, gevent integration dropped</p></li>
<li><p>Contract <code class="xref py py-meth docutils literal notranslate"><span class="pre">eventFilter()</span></code> has replaced both <code class="docutils literal notranslate"><span class="pre">Contract.on()</span></code> and <code class="docutils literal notranslate"><span class="pre">Contract.pastEvents()</span></code></p></li>
<li><p>Contract arguments of <code class="docutils literal notranslate"><span class="pre">bytes</span></code> ABI type now accept hex strings.</p></li>
<li><p>Contract arguments of <code class="docutils literal notranslate"><span class="pre">string</span></code> ABI type now accept python <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p></li>
<li><p>Contract return values of <code class="docutils literal notranslate"><span class="pre">string</span></code> ABI type now return python <code class="docutils literal notranslate"><span class="pre">str</span></code>.</p></li>
<li><p>Many methods now return a <code class="docutils literal notranslate"><span class="pre">bytes</span></code>-like object where they used to return a hex string, like in <code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.sha3()</span></code></p></li>
<li><p>IPC connection left open and reused, rather than opened and closed on each call</p></li>
<li><p>A number of deprecated methods from v3 were removed</p></li>
</ul>
</section>
<section id="id464">
<h4>3.16.1<a class="headerlink" href="#id464" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Addition of <code class="docutils literal notranslate"><span class="pre">ethereum-tester</span></code> as a dependency</p></li>
</ul>
</section>
<section id="id465">
<h4>3.16.0<a class="headerlink" href="#id465" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Addition of <em>named</em> middlewares for easier manipulation of middleware stack.</p></li>
<li><p>Provider middlewares can no longer be modified during runtime.</p></li>
<li><p>Experimental custom ABI normalization API for Contract objects.</p></li>
</ul>
</section>
<section id="id466">
<h4>3.15.0<a class="headerlink" href="#id466" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Change docs to use RTD theme</p></li>
<li><p>Experimental new <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code> for the <code class="docutils literal notranslate"><span class="pre">ethereum-tester</span></code> library.</p></li>
<li><p>Bugfix for <code class="docutils literal notranslate"><span class="pre">function</span></code> type abi encoding via <code class="docutils literal notranslate"><span class="pre">ethereum-abi-utils</span></code> upgrade to <code class="docutils literal notranslate"><span class="pre">v0.4.1</span></code></p></li>
<li><p>Bugfix for <code class="docutils literal notranslate"><span class="pre">Web3.toHex</span></code> to conform to RPC spec.</p></li>
</ul>
</section>
<section id="id467">
<h4>3.14.2<a class="headerlink" href="#id467" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Fix PyPi readme text.</p></li>
</ul>
</section>
<section id="id468">
<h4>3.14.1<a class="headerlink" href="#id468" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Fix PyPi readme text.</p></li>
</ul>
</section>
<section id="id469">
<h4>3.14.0<a class="headerlink" href="#id469" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">stalecheck_middleware</span></code></p></li>
<li><p>Improvements to <code class="docutils literal notranslate"><span class="pre">Web3.toHex</span></code> and <code class="docutils literal notranslate"><span class="pre">Web3.toText</span></code>.</p></li>
<li><p>Improvements to <code class="docutils literal notranslate"><span class="pre">Web3.sha3</span></code> signature.</p></li>
<li><p>Bugfixes for <code class="docutils literal notranslate"><span class="pre">Web3.eth.sign</span></code> api</p></li>
</ul>
</section>
<section id="id470">
<h4>3.13.5<a class="headerlink" href="#id470" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Add experimental <code class="docutils literal notranslate"><span class="pre">fixture_middleware</span></code></p></li>
<li><p>Various bugfixes introduced in middleware API introduction and migration to
formatter middleware.</p></li>
</ul>
</section>
<section id="id471">
<h4>3.13.4<a class="headerlink" href="#id471" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for formatter handling of contract creation transaction.</p></li>
</ul>
</section>
<section id="id472">
<h4>3.13.3<a class="headerlink" href="#id472" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Improved testing infrastructure.</p></li>
</ul>
</section>
<section id="id473">
<h4>3.13.2<a class="headerlink" href="#id473" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for retrieving filter changes for both new block filters and pending
transaction filters.</p></li>
</ul>
</section>
<section id="id474">
<h4>3.13.1<a class="headerlink" href="#id474" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Fix mispelled <code class="docutils literal notranslate"><span class="pre">attrdict_middleware</span></code> (was spelled <code class="docutils literal notranslate"><span class="pre">attrdict_middlware</span></code>).</p></li>
</ul>
</section>
<section id="id475">
<h4>3.13.0<a class="headerlink" href="#id475" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>New Middleware API</p></li>
<li><p>Support for multiple providers</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">web3.soliditySha3</span></code></p></li>
<li><p>Remove multiple functions that were never implemented from the original web3.</p></li>
<li><p>Deprecated <code class="docutils literal notranslate"><span class="pre">web3.currentProvider</span></code> accessor.  Use <code class="docutils literal notranslate"><span class="pre">web3.provider</span></code> now instead.</p></li>
<li><p>Deprecated password prompt within <code class="docutils literal notranslate"><span class="pre">web3.personal.newAccount</span></code>.</p></li>
</ul>
</section>
<section id="id476">
<h4>3.12.0<a class="headerlink" href="#id476" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for abi filtering to correctly handle <code class="docutils literal notranslate"><span class="pre">constructor</span></code> and <code class="docutils literal notranslate"><span class="pre">fallback</span></code> type abi entries.</p></li>
</ul>
</section>
<section id="id477">
<h4>3.11.0<a class="headerlink" href="#id477" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>All web3 apis which accept <code class="docutils literal notranslate"><span class="pre">address</span></code> parameters now enforce checksums if the address <em>looks</em> like it is checksummed.</p></li>
<li><p>Improvements to error messaging with when calling a contract on a node that may not be fully synced</p></li>
<li><p>Bugfix for <code class="docutils literal notranslate"><span class="pre">web3.eth.syncing</span></code> to correctly handle <code class="docutils literal notranslate"><span class="pre">False</span></code></p></li>
</ul>
</section>
<section id="id478">
<h4>3.10.0<a class="headerlink" href="#id478" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Web3 now returns <code class="docutils literal notranslate"><span class="pre">web3.utils.datastructures.AttributeDict</span></code> in places where it previously returned a normal <code class="docutils literal notranslate"><span class="pre">dict</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.eth.contract</span></code> now performs validation on the <code class="docutils literal notranslate"><span class="pre">address</span></code> parameter.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">web3.eth.getWork</span></code> API</p></li>
</ul>
</section>
<section id="id479">
<h4>3.9.0<a class="headerlink" href="#id479" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Add validation for the <code class="docutils literal notranslate"><span class="pre">abi</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">eth</span></code></p></li>
<li><p>Contract return values of <code class="docutils literal notranslate"><span class="pre">bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">bytesXX</span></code> and <code class="docutils literal notranslate"><span class="pre">string</span></code> are no longer converted to text types and will be returned in their raw byte-string format.</p></li>
</ul>
</section>
<section id="id480">
<h4>3.8.1<a class="headerlink" href="#id480" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for <code class="docutils literal notranslate"><span class="pre">eth_sign</span></code> double hashing input.</p></li>
<li><p>Removed deprecated <code class="docutils literal notranslate"><span class="pre">DelegatedSigningManager</span></code></p></li>
<li><p>Removed deprecate <code class="docutils literal notranslate"><span class="pre">PrivateKeySigningManager</span></code></p></li>
</ul>
</section>
<section id="id481">
<h4>3.8.0<a class="headerlink" href="#id481" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Update pyrlp dependency to <code class="docutils literal notranslate"><span class="pre">&gt;=0.4.7</span></code></p></li>
<li><p>Update eth-testrpc dependency to <code class="docutils literal notranslate"><span class="pre">&gt;=1.2.0</span></code></p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">DelegatedSigningManager</span></code></p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">PrivateKeySigningManager</span></code></p></li>
</ul>
</section>
<section id="id482">
<h4>3.7.1<a class="headerlink" href="#id482" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>upstream version bump for bugfix in eth-abi-utils</p></li>
</ul>
</section>
<section id="id483">
<h4>3.7.0<a class="headerlink" href="#id483" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>deprecate <code class="docutils literal notranslate"><span class="pre">eth.defaultAccount</span></code> defaulting to the coinbase account.</p></li>
</ul>
</section>
<section id="id484">
<h4>3.6.2<a class="headerlink" href="#id484" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Fix error message from contract factory creation.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">ethereum-utils</span></code> for utility functions.</p></li>
</ul>
</section>
<section id="id485">
<h4>3.6.1<a class="headerlink" href="#id485" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Upgrade <code class="docutils literal notranslate"><span class="pre">ethereum-abi-utils</span></code> dependency for upstream bugfix.</p></li>
</ul>
</section>
<section id="id486">
<h4>3.6.0<a class="headerlink" href="#id486" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">Contract.code</span></code>: replaced by <code class="docutils literal notranslate"><span class="pre">Contract.bytecode</span></code></p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">Contract.code_runtime</span></code>: replaced by <code class="docutils literal notranslate"><span class="pre">Contract.bytecode_runtime</span></code></p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">abi</span></code>, <code class="docutils literal notranslate"><span class="pre">code</span></code>, <code class="docutils literal notranslate"><span class="pre">code_runtime</span></code> and <code class="docutils literal notranslate"><span class="pre">source</span></code> as arguments for the <code class="docutils literal notranslate"><span class="pre">Contract</span></code> object.</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">source</span></code> as a property of the <code class="docutils literal notranslate"><span class="pre">Contract</span></code> object</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">Contract.factory()</span></code> API.</p></li>
<li><p>Deprecate the <code class="docutils literal notranslate"><span class="pre">construct_contract_factory</span></code> helper function.</p></li>
</ul>
</section>
<section id="id487">
<h4>3.5.3<a class="headerlink" href="#id487" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for how <code class="docutils literal notranslate"><span class="pre">requests</span></code> library is used.  Now reuses session.</p></li>
</ul>
</section>
<section id="id488">
<h4>3.5.2<a class="headerlink" href="#id488" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for construction of <code class="docutils literal notranslate"><span class="pre">request_kwargs</span></code> within HTTPProvider</p></li>
</ul>
</section>
<section id="id489">
<h4>3.5.1<a class="headerlink" href="#id489" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Allow <code class="docutils literal notranslate"><span class="pre">HTTPProvider</span></code> to be imported from <code class="docutils literal notranslate"><span class="pre">web3</span></code> module.</p></li>
<li><p>make <code class="docutils literal notranslate"><span class="pre">HTTPProvider</span></code> accessible as a property of <code class="docutils literal notranslate"><span class="pre">web3</span></code> instances.</p></li>
</ul>
</section>
<section id="id490">
<h4>3.5.0<a class="headerlink" href="#id490" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">web3.providers.rpc.RPCProvider</span></code></p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">web3.providers.rpc.KeepAliveRPCProvider</span></code></p></li>
<li><p>Add new <code class="docutils literal notranslate"><span class="pre">web3.providers.rpc.HTTPProvider</span></code></p></li>
<li><p>Remove hard dependency on gevent.</p></li>
</ul>
</section>
<section id="id491">
<h4>3.4.4<a class="headerlink" href="#id491" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for <code class="docutils literal notranslate"><span class="pre">web3.eth.getTransaction</span></code> when the hash is unknown.</p></li>
</ul>
</section>
<section id="id492">
<h4>3.4.3<a class="headerlink" href="#id492" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for event log data decoding to properly handle dynamic sized values.</p></li>
<li><p>New <code class="docutils literal notranslate"><span class="pre">web3.tester</span></code> module to access extra RPC functionality from <code class="docutils literal notranslate"><span class="pre">eth-testrpc</span></code></p></li>
</ul>
</section>
<section id="id493">
<h4>3.4.2<a class="headerlink" href="#id493" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Fix package so that <code class="docutils literal notranslate"><span class="pre">eth-testrpc</span></code> is not required.</p></li>
</ul>
</section>
<section id="id494">
<h4>3.4.1<a class="headerlink" href="#id494" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Force gevent&lt;1.2.0 until this issue is fixed: <a class="reference external" href="https://github.com/gevent/gevent/issues/916">https://github.com/gevent/gevent/issues/916</a></p></li>
</ul>
</section>
<section id="id495">
<h4>3.4.0<a class="headerlink" href="#id495" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for contract instances to respect <code class="docutils literal notranslate"><span class="pre">web3.eth.defaultAccount</span></code></p></li>
<li><p>Better error reporting when ABI decoding fails for contract method response.</p></li>
</ul>
</section>
<section id="id496">
<h4>3.3.0<a class="headerlink" href="#id496" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>New <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code> now available.  Faster test runs than <code class="docutils literal notranslate"><span class="pre">TestRPCProvider</span></code></p></li>
<li><p>Updated underlying eth-testrpc requirement.</p></li>
</ul>
</section>
<section id="id497">
<h4>3.2.0<a class="headerlink" href="#id497" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">web3.shh</span></code> is now implemented.</p></li>
<li><p>Introduced <code class="docutils literal notranslate"><span class="pre">KeepAliveRPCProvider</span></code> to correctly recycle HTTP connections and use HTTP keep alive</p></li>
</ul>
</section>
<section id="id498">
<h4>3.1.1<a class="headerlink" href="#id498" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for contract transaction sending not respecting the
<code class="docutils literal notranslate"><span class="pre">web3.eth.defaultAccount</span></code> configuration.</p></li>
</ul>
</section>
<section id="id499">
<h4>3.1.0<a class="headerlink" href="#id499" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>New DelegatedSigningManager and PrivateKeySigningManager classes.</p></li>
</ul>
</section>
<section id="id500">
<h4>3.0.2<a class="headerlink" href="#id500" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix or IPCProvider not handling large JSON responses well.</p></li>
</ul>
</section>
<section id="id501">
<h4>3.0.1<a class="headerlink" href="#id501" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Better RPC compliance to be compatable with the Parity JSON-RPC server.</p></li>
</ul>
</section>
<section id="id502">
<h4>3.0.0<a class="headerlink" href="#id502" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Filter</span></code> objects now support controlling the interval through which they poll
using the <code class="docutils literal notranslate"><span class="pre">poll_interval</span></code> property</p></li>
</ul>
</section>
<section id="id503">
<h4>2.9.0<a class="headerlink" href="#id503" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix generation of event topics.</p></li>
<li><p>Web3.Iban now allows access to Iban address tools.</p></li>
</ul>
</section>
<section id="id504">
<h4>2.8.1<a class="headerlink" href="#id504" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for <code class="docutils literal notranslate"><span class="pre">geth.ipc</span></code> path on linux systems.</p></li>
</ul>
</section>
<section id="id505">
<h4>2.8.0<a class="headerlink" href="#id505" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><dl class="simple">
<dt>Changes to the <code class="docutils literal notranslate"><span class="pre">Contract</span></code> API:</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">Contract.deploy()</span></code> parameter arguments renamed to args</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Contract.deploy()</span></code> now takes args and kwargs parameters to allow
constructing with keyword arguments or positional arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Contract.pastEvents</span></code> now allows you to specify a <code class="docutils literal notranslate"><span class="pre">fromBlock</span> <span class="pre">or</span>
<span class="pre">``toBlock.</span></code> Previously these were forced to be <code class="docutils literal notranslate"><span class="pre">'earliest'</span></code> and
<code class="docutils literal notranslate"><span class="pre">web3.eth.blockNumber</span></code> respectively.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Contract.call</span></code>, <code class="docutils literal notranslate"><span class="pre">Contract.transact</span></code> and <code class="docutils literal notranslate"><span class="pre">Contract.estimateGas</span></code> are now
callable as class methods as well as instance methods. When called this
way, an address must be provided with the transaction parameter.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Contract.call</span></code>, <code class="docutils literal notranslate"><span class="pre">Contract.transact</span></code> and <code class="docutils literal notranslate"><span class="pre">Contract.estimateGas</span></code> now allow
specifying an alternate address for the transaction.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">RPCProvider</span></code> now supports the following constructor arguments.</dt><dd><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ssl</span></code> for enabling SSL</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">connection_timeout</span></code> and <code class="docutils literal notranslate"><span class="pre">network_timeout</span></code> for controlling the timeouts
for requests.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="id506">
<h4>2.7.1<a class="headerlink" href="#id506" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix: Fix KeyError in merge_args_and_kwargs helper fn.</p></li>
</ul>
</section>
<section id="id507">
<h4>2.7.0<a class="headerlink" href="#id507" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix for usage of block identifiers ‚Äòlatest‚Äô, ‚Äòearliest‚Äô, ‚Äòpending‚Äô</p></li>
<li><p>Sphinx documentation</p></li>
<li><p>Non-data transactions now default to 90000 gas.</p></li>
<li><p>Web3 object now has helpers set as static methods rather than being set at
initialization.</p></li>
<li><p>RPCProvider now takes a <code class="docutils literal notranslate"><span class="pre">path</span></code> parameter to allow configuration for requests
to go to paths other than <code class="docutils literal notranslate"><span class="pre">/</span></code>.</p></li>
</ul>
</section>
<section id="id508">
<h4>2.6.0<a class="headerlink" href="#id508" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>TestRPCProvider no longer dumps logging output to stdout and stderr.</p></li>
<li><p>Bugfix for return types of <code class="docutils literal notranslate"><span class="pre">address[]</span></code></p></li>
<li><p>Bugfix for event data types of <code class="docutils literal notranslate"><span class="pre">address</span></code></p></li>
</ul>
</section>
<section id="id509">
<h4>2.5.0<a class="headerlink" href="#id509" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>All transactions which contain a <code class="docutils literal notranslate"><span class="pre">data</span></code> element will now have their gas
automatically estimated with 100k additional buffer.  This was previously
only true with transactions initiated from a <code class="docutils literal notranslate"><span class="pre">Contract</span></code> object.</p></li>
</ul>
</section>
<section id="id510">
<h4>2.4.0<a class="headerlink" href="#id510" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Contract functions can now be called using keyword arguments.</p></li>
</ul>
</section>
<section id="id511">
<h4>2.3.0<a class="headerlink" href="#id511" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Upstream fixes for filters</p></li>
<li><p>Filter APIs <code class="docutils literal notranslate"><span class="pre">on</span></code> and <code class="docutils literal notranslate"><span class="pre">pastEvents</span></code> now callable as both instance and class methods.</p></li>
</ul>
</section>
<section id="id512">
<h4>2.2.0<a class="headerlink" href="#id512" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>The filters that come back from the contract <code class="docutils literal notranslate"><span class="pre">on</span></code> and <code class="docutils literal notranslate"><span class="pre">pastEvents</span></code> methods
now call their callbacks with the same data format as <code class="docutils literal notranslate"><span class="pre">web3.js</span></code>.</p></li>
</ul>
</section>
<section id="id513">
<h4>2.1.1<a class="headerlink" href="#id513" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Cast RPCProvider port to an integer.</p></li>
</ul>
</section>
<section id="id514">
<h4>2.1.0<a class="headerlink" href="#id514" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Remove all monkeypatching</p></li>
</ul>
</section>
<section id="id515">
<h4>2.0.0<a class="headerlink" href="#id515" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Pull in downstream updates to proper gevent usage.</p></li>
<li><p>Fix <code class="docutils literal notranslate"><span class="pre">eth_sign</span></code></p></li>
<li><p>Bugfix with contract operations mutating the transaction object that is passed in.</p></li>
<li><p>More explicit linting ignore statements.</p></li>
</ul>
</section>
<section id="id516">
<h4>1.9.0<a class="headerlink" href="#id516" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>BugFix: fix for python3 only <code class="docutils literal notranslate"><span class="pre">json.JSONDecodeError</span></code> handling.</p></li>
</ul>
</section>
<section id="id517">
<h4>1.8.0<a class="headerlink" href="#id517" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>BugFix: <code class="docutils literal notranslate"><span class="pre">RPCProvider</span></code> not sending a content-type header</p></li>
<li><p>Bugfix: <code class="docutils literal notranslate"><span class="pre">web3.toWei</span></code> now returns an integer instead of a decimal.Decimal</p></li>
</ul>
</section>
<section id="id518">
<h4>1.7.1<a class="headerlink" href="#id518" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TestRPCProvider</span></code> can now be imported directly from <code class="docutils literal notranslate"><span class="pre">web3</span></code></p></li>
</ul>
</section>
<section id="id519">
<h4>1.7.0<a class="headerlink" href="#id519" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">eth.admin</span></code> interface.</p></li>
<li><p>Bugfix: Format the return value of <code class="docutils literal notranslate"><span class="pre">web3.eth.syncing</span></code></p></li>
<li><p>Bugfix: IPCProvider socket interactions are now more robust.</p></li>
</ul>
</section>
<section id="id520">
<h4>1.6.0<a class="headerlink" href="#id520" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Downstream package upgrades for <code class="docutils literal notranslate"><span class="pre">eth-testrpc</span></code> and <code class="docutils literal notranslate"><span class="pre">ethereum-tester-client</span></code> to
handle configuration of the Homestead and DAO fork block numbers.</p></li>
</ul>
</section>
<section id="id521">
<h4>1.5.0<a class="headerlink" href="#id521" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Rename <code class="docutils literal notranslate"><span class="pre">web3.contract._Contract</span></code> to <code class="docutils literal notranslate"><span class="pre">web3.contract.Contract</span></code>
to expose it for static analysis and auto completion tools</p></li>
<li><p>Allow passing string parameters to functions</p></li>
<li><p>Automatically compute gas requirements for contract deployment and</p></li>
<li><p>transactions.</p></li>
<li><p>Contract Filters</p></li>
<li><p>Block, Transaction, and Log filters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.eth.txpool</span></code> interface</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.eth.mining</span></code> interface</p></li>
<li><p>Fixes for encoding.</p></li>
</ul>
</section>
<section id="id522">
<h4>1.4.0<a class="headerlink" href="#id522" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Bugfix to allow address types in constructor arguments.</p></li>
</ul>
</section>
<section id="id523">
<h4>1.3.0<a class="headerlink" href="#id523" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Partial implementation of the <code class="docutils literal notranslate"><span class="pre">web3.eth.contract</span></code> interface.</p></li>
</ul>
</section>
<section id="id524">
<h4>1.2.0<a class="headerlink" href="#id524" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Restructure project modules to be more <em>flat</em></p></li>
<li><p>Add ability to run test suite without the <em>slow</em> tests.</p></li>
<li><p>Breakup <code class="docutils literal notranslate"><span class="pre">encoding</span></code> utils into smaller modules.</p></li>
<li><p>Basic pep8 formatting.</p></li>
<li><p>Apply python naming conventions to internal APIs</p></li>
<li><p>Lots of minor bugfixes.</p></li>
<li><p>Removal of dead code left behind from <code class="docutils literal notranslate"><span class="pre">1.0.0</span></code> refactor.</p></li>
<li><p>Removal of <code class="docutils literal notranslate"><span class="pre">web3/solidity</span></code> module.</p></li>
</ul>
</section>
<section id="id525">
<h4>1.1.0<a class="headerlink" href="#id525" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Add missing <code class="docutils literal notranslate"><span class="pre">isConnected()</span></code> method.</p></li>
<li><p>Add test coverage for <code class="docutils literal notranslate"><span class="pre">setProvider()</span></code></p></li>
</ul>
</section>
<section id="id526">
<h4>1.0.1<a class="headerlink" href="#id526" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Specify missing <code class="docutils literal notranslate"><span class="pre">pyrlp</span></code> and <code class="docutils literal notranslate"><span class="pre">gevent</span></code> dependencies</p></li>
</ul>
</section>
<section id="id527">
<h4>1.0.0<a class="headerlink" href="#id527" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Massive refactor to the majority of the app.</p></li>
</ul>
</section>
<section id="id528">
<h4>0.1.0<a class="headerlink" href="#id528" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Initial release</p></li>
</ul>
</section>
</section>
</div>
<div class="toctree-wrapper compound">
<span id="document-providers"></span><section id="providers">
<span id="id1"></span><h3>Providers<a class="headerlink" href="#providers" title="Link to this heading">ÔÉÅ</a></h3>
<p>Using Ethereum requires access to an Ethereum node. If you have the means, you‚Äôre
encouraged to <a class="reference external" href="https://ethereum.org/en/developers/docs/nodes-and-clients/run-a-node/">run your own node</a>. (Note that you do not need to stake ether to
run a node.) If you‚Äôre unable to run your own node, you can use a <a class="reference external" href="https://ethereum.org/en/developers/docs/nodes-and-clients/nodes-as-a-service/">remote node</a>.</p>
<p>Once you have access to a node, you can connect to it using a <strong>provider</strong>.
Providers generate <a class="reference external" href="https://ethereum.org/en/developers/docs/apis/json-rpc/">JSON-RPC</a> requests and return the response. This is done by submitting
the request to an HTTP, WebSocket, or IPC socket-based server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>web3.py supports one provider per instance. If you have an advanced use case
that requires multiple providers, create and configure a new web3 instance
per connection.</p>
</div>
<p>If you are already happily connected to your Ethereum node, then you
can skip the rest of this providers section.</p>
<section id="choosing-a-provider">
<span id="choosing-provider"></span><h4>Choosing a Provider<a class="headerlink" href="#choosing-a-provider" title="Link to this heading">ÔÉÅ</a></h4>
<p>Most nodes have a variety of ways to connect to them. Most commonly:</p>
<ol class="arabic simple">
<li><p>IPC (uses local filesystem: fastest and most secure)</p></li>
<li><p>WebSocket (works remotely, faster than HTTP)</p></li>
<li><p>HTTP (more nodes support it)</p></li>
</ol>
<p>If you‚Äôre not sure how to decide, choose this way:</p>
<ul class="simple">
<li><p>If you have the option of running web3.py on the same machine as the node, choose IPC.</p></li>
<li><p>If you must connect to a node on a different computer, use WebSocket.</p></li>
<li><p>If your node does not support WebSocket, use HTTP.</p></li>
</ul>
<p>Once you have decided how to connect, you‚Äôll select and configure the appropriate provider
class:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#web3.providers.rpc.HTTPProvider" title="web3.providers.rpc.HTTPProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPProvider</span></code></a></p></li>
<li><p><a class="reference internal" href="#web3.providers.ipc.IPCProvider" title="web3.providers.ipc.IPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">IPCProvider</span></code></a></p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code></p></li>
<li><p><a class="reference internal" href="#web3.providers.persistent.AsyncIPCProvider" title="web3.providers.persistent.AsyncIPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncIPCProvider</span></code></a> (Persistent Connection Provider)</p></li>
<li><p><a class="reference internal" href="#web3.providers.persistent.WebSocketProvider" title="web3.providers.persistent.WebSocketProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketProvider</span></code></a> (Persistent Connection Provider)</p></li>
</ul>
<p>Each provider above links to the documentation on how to properly initialize that
provider. Once you have reviewed the relevant documentation for the provider of your
choice, you are ready to <a class="reference internal" href="index.html#first-w3-use"><span class="std std-ref">get started with web3.py</span></a>.</p>
<section id="provider-via-environment-variable">
<h5>Provider via Environment Variable<a class="headerlink" href="#provider-via-environment-variable" title="Link to this heading">ÔÉÅ</a></h5>
<p>Alternatively, you can set the environment variable <code class="docutils literal notranslate"><span class="pre">WEB3_PROVIDER_URI</span></code>
before starting your script, and web3 will look for that provider first.</p>
<p>Valid formats for this environment variable are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file:///path/to/node/rpc-json/file.ipc</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">http://192.168.1.2:8545</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">https://node.ontheweb.com</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ws://127.0.0.1:8546</span></code></p></li>
</ul>
</section>
</section>
<section id="auto-initialization-provider-shortcuts">
<h4>Auto-initialization Provider Shortcuts<a class="headerlink" href="#auto-initialization-provider-shortcuts" title="Link to this heading">ÔÉÅ</a></h4>
<section id="geth-dev-proof-of-authority">
<h5>Geth dev Proof of Authority<a class="headerlink" href="#geth-dev-proof-of-authority" title="Link to this heading">ÔÉÅ</a></h5>
<p>To connect to a <code class="docutils literal notranslate"><span class="pre">geth</span> <span class="pre">--dev</span></code> Proof of Authority instance with
the POA middleware loaded by default:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.auto.gethdev</span> <span class="kn">import</span> <span class="n">w3</span>

<span class="go"># confirm that the connection succeeded</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Or, connect to an async web3 instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.auto.gethdev</span> <span class="kn">import</span> <span class="n">async_w3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>

<span class="go"># confirm that the connection succeeded</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
</section>
<section id="built-in-providers">
<h4>Built In Providers<a class="headerlink" href="#built-in-providers" title="Link to this heading">ÔÉÅ</a></h4>
<p>Web3 ships with the following providers which are appropriate for connecting to
local and remote JSON-RPC servers.</p>
<section id="httpprovider">
<h5>HTTPProvider<a class="headerlink" href="#httpprovider" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.rpc.HTTPProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.rpc.</span></span><span class="sig-name descname"><span class="pre">HTTPProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception_retry_configuration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">ExceptionRetryConfiguration()</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.rpc.HTTPProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This provider handles interactions with an HTTP or HTTPS based JSON-RPC server.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">endpoint_uri</span></code> should be the full URI to the RPC endpoint such as
<code class="docutils literal notranslate"><span class="pre">'https://localhost:8545'</span></code>.  For RPC servers behind HTTP connections
running on port 80 and HTTPS connections running on port 443 the port can
be omitted from the URI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">request_kwargs</span></code> should be a dictionary of keyword arguments which
will be passed onto each http/https POST request made to your node.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">session</span></code> allows you to pass a <code class="docutils literal notranslate"><span class="pre">requests.Session</span></code> object initialized
as desired.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exception_retry_configuration</span></code> is an instance of the
<a class="reference internal" href="index.html#web3.providers.rpc.utils.ExceptionRetryConfiguration" title="web3.providers.rpc.utils.ExceptionRetryConfiguration"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExceptionRetryConfiguration</span></code></a>
class which allows you to configure how the provider should handle exceptions
when making certain requests. Setting this to <code class="docutils literal notranslate"><span class="pre">None</span></code> will disable
exception retries.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s2">&quot;http://127.0.0.1:8545&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Note that you should create only one HTTPProvider with the same provider URL
per python process, as the HTTPProvider recycles underlying TCP/IP
network connections, for better performance. Multiple HTTPProviders with different
URLs will work as expected.</p>
<p>Under the hood, the <code class="docutils literal notranslate"><span class="pre">HTTPProvider</span></code> uses the python requests library for
making requests.  If you would like to modify how requests are made, you can
use the <code class="docutils literal notranslate"><span class="pre">request_kwargs</span></code> to do so.  A common use case for this is increasing
the timeout for each request.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s2">&quot;http://127.0.0.1:8545&quot;</span><span class="p">,</span> <span class="n">request_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;timeout&#39;</span><span class="p">:</span> <span class="mi">60</span><span class="p">}))</span>
</pre></div>
</div>
<p>To tune the connection pool size, you can pass your own <code class="docutils literal notranslate"><span class="pre">requests.Session</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">adapter</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">adapters</span><span class="o">.</span><span class="n">HTTPAdapter</span><span class="p">(</span><span class="n">pool_connections</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">pool_maxsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">Session</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">&#39;http://&#39;</span><span class="p">,</span> <span class="n">adapter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">session</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">&#39;https://&#39;</span><span class="p">,</span> <span class="n">adapter</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s2">&quot;http://127.0.0.1:8545&quot;</span><span class="p">,</span> <span class="n">session</span><span class="o">=</span><span class="n">session</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="ipcprovider">
<h5>IPCProvider<a class="headerlink" href="#ipcprovider" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.ipc.IPCProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.ipc.</span></span><span class="sig-name descname"><span class="pre">IPCProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipc_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.ipc.IPCProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This provider handles interaction with an IPC Socket based JSON-RPC
server.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ipc_path</span></code> is the filesystem path to the IPC socket:</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">IPCProvider</span><span class="p">(</span><span class="s2">&quot;~/Library/Ethereum/geth.ipc&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>If no <code class="docutils literal notranslate"><span class="pre">ipc_path</span></code> is specified, it will use a default depending on your operating
system.</p>
<ul class="simple">
<li><p>On Linux and FreeBSD: <code class="docutils literal notranslate"><span class="pre">~/.ethereum/geth.ipc</span></code></p></li>
<li><p>On Mac OS: <code class="docutils literal notranslate"><span class="pre">~/Library/Ethereum/geth.ipc</span></code></p></li>
<li><p>On Windows: <code class="docutils literal notranslate"><span class="pre">\\.\pipe\geth.ipc</span></code></p></li>
</ul>
</dd></dl>

</section>
<section id="asynchttpprovider">
<h5>AsyncHTTPProvider<a class="headerlink" href="#asynchttpprovider" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.rpc.AsyncHTTPProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.rpc.</span></span><span class="sig-name descname"><span class="pre">AsyncHTTPProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint_uri</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request_kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception_retry_configuration</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">ExceptionRetryConfiguration()</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.rpc.AsyncHTTPProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This provider handles interactions with an HTTP or HTTPS based JSON-RPC server asynchronously.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">endpoint_uri</span></code> should be the full URI to the RPC endpoint such as
<code class="docutils literal notranslate"><span class="pre">'https://localhost:8545'</span></code>.  For RPC servers behind HTTP connections
running on port 80 and HTTPS connections running on port 443 the port can
be omitted from the URI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">request_kwargs</span></code> should be a dictionary of keyword arguments which
will be passed onto each http/https POST request made to your node.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exception_retry_configuration</span></code> is an instance of the
<a class="reference internal" href="index.html#web3.providers.rpc.utils.ExceptionRetryConfiguration" title="web3.providers.rpc.utils.ExceptionRetryConfiguration"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExceptionRetryConfiguration</span></code></a>
class which allows you to configure how the provider should handle exceptions
when making certain requests. Setting this to <code class="docutils literal notranslate"><span class="pre">None</span></code> will disable
exception retries.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">cache_async_session()</span></code> method allows you to use your own
<code class="docutils literal notranslate"><span class="pre">aiohttp.ClientSession</span></code> object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">aiohttp</span> <span class="kn">import</span> <span class="n">ClientSession</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">AsyncWeb3</span><span class="p">,</span> <span class="n">AsyncHTTPProvider</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncHTTPProvider</span><span class="p">(</span><span class="n">endpoint_uri</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># If you want to pass in your own session:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">custom_session</span> <span class="o">=</span> <span class="n">ClientSession</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">cache_async_session</span><span class="p">(</span><span class="n">custom_session</span><span class="p">)</span> <span class="c1"># This method is an async method so it needs to be handled accordingly</span>
</pre></div>
</div>
<p>Under the hood, the <code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code> uses the python
<a class="reference external" href="https://docs.aiohttp.org/en/stable/">aiohttp</a> library for making requests.</p>
</dd></dl>

</section>
<section id="persistent-connection-providers">
<h5>Persistent Connection Providers<a class="headerlink" href="#persistent-connection-providers" title="Link to this heading">ÔÉÅ</a></h5>
<section id="persistent-connection-base-class">
<h6>Persistent Connection Base Class<a class="headerlink" href="#persistent-connection-base-class" title="Link to this heading">ÔÉÅ</a></h6>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This class is not meant to be used directly. If your provider class inherits
from this class, look to these docs for additional configuration options.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.persistent.PersistentConnectionProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.persistent.</span></span><span class="sig-name descname"><span class="pre">PersistentConnectionProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request_timeout</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><span class="pre">float</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">50.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subscription_response_queue_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">500</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">silence_listener_task_exceptions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.persistent.PersistentConnectionProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This is a base provider class, inherited by the following providers:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="#web3.providers.persistent.WebSocketProvider" title="web3.providers.persistent.WebSocketProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketProvider</span></code></a></p></li>
<li><p><a class="reference internal" href="#web3.providers.persistent.AsyncIPCProvider" title="web3.providers.persistent.AsyncIPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncIPCProvider</span></code></a></p></li>
</ul>
</div></blockquote>
<p>It handles interactions with a persistent connection to a JSON-RPC server. Among
its configuration, it houses all of the
<a class="reference internal" href="index.html#web3.providers.persistent.request_processor.RequestProcessor" title="web3.providers.persistent.request_processor.RequestProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">RequestProcessor</span></code></a> logic for
handling the asynchronous sending and receiving of requests and responses. See
the <a class="reference internal" href="index.html#internals-persistent-connection-providers"><span class="std std-ref">Request Processing for Persistent Connection Providers</span></a> section for more details on
the internals of persistent connection providers.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">request_timeout</span></code> is the timeout in seconds, used when sending data over the
connection and waiting for a response to be received from the listener task.
Defaults to <code class="docutils literal notranslate"><span class="pre">50.0</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subscription_response_queue_size</span></code> is the size of the queue used to store
subscription responses, defaults to <code class="docutils literal notranslate"><span class="pre">500</span></code>. While messages are being consumed,
this queue should never fill up as it is a transient queue and meant to handle
asynchronous receiving and processing of responses. When in sync with the
socket stream, this queue should only ever store 1 to a few messages at a time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">silence_listener_task_exceptions</span></code> is a boolean that determines whether
exceptions raised by the listener task are silenced. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>,
raising any exceptions that occur in the listener task.</p></li>
</ul>
</dd></dl>

</section>
<section id="asyncipcprovider">
<h6>AsyncIPCProvider<a class="headerlink" href="#asyncipcprovider" title="Link to this heading">ÔÉÅ</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.persistent.AsyncIPCProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.persistent.</span></span><span class="sig-name descname"><span class="pre">AsyncIPCProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ipc_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_connection_retries</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.persistent.AsyncIPCProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This provider handles asynchronous, persistent interaction with an IPC Socket based
JSON-RPC server.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ipc_path</span></code> is the filesystem path to the IPC socket:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">read_buffer_limit</span></code> is the maximum size of data, in bytes, that can be read
from the socket at one time. Defaults to 20MB (20 * 1024 * 1024). Raises
<code class="docutils literal notranslate"><span class="pre">ReadBufferLimitReached</span></code> if the limit is reached, suggesting that the buffer
limit be increased.</p></li>
</ul>
<p>This provider inherits from the
<a class="reference internal" href="#web3.providers.persistent.PersistentConnectionProvider" title="web3.providers.persistent.PersistentConnectionProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code></a> class. Refer to
the <a class="reference internal" href="#web3.providers.persistent.PersistentConnectionProvider" title="web3.providers.persistent.PersistentConnectionProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code></a> documentation
for details on additional configuration options available for this provider.</p>
<p>If no <code class="docutils literal notranslate"><span class="pre">ipc_path</span></code> is specified, it will use a default depending on your operating
system.</p>
<ul class="simple">
<li><p>On Linux and FreeBSD: <code class="docutils literal notranslate"><span class="pre">~/.ethereum/geth.ipc</span></code></p></li>
<li><p>On Mac OS: <code class="docutils literal notranslate"><span class="pre">~/Library/Ethereum/geth.ipc</span></code></p></li>
<li><p>On Windows: <code class="docutils literal notranslate"><span class="pre">\\.\pipe\geth.ipc</span></code></p></li>
</ul>
</dd></dl>

</section>
<section id="websocketprovider">
<h6>WebSocketProvider<a class="headerlink" href="#websocketprovider" title="Link to this heading">ÔÉÅ</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.persistent.WebSocketProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.persistent.</span></span><span class="sig-name descname"><span class="pre">WebSocketProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint_uri</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">websocket_kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">{}</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.persistent.WebSocketProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This provider handles interactions with an WS or WSS based JSON-RPC server.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">endpoint_uri</span></code> should be the full URI to the RPC endpoint such as
<code class="docutils literal notranslate"><span class="pre">'ws://localhost:8546'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">websocket_kwargs</span></code> this should be a dictionary of keyword arguments which
will be passed onto the ws/wss websocket connection.</p></li>
</ul>
<p>This provider inherits from the
<a class="reference internal" href="#web3.providers.persistent.PersistentConnectionProvider" title="web3.providers.persistent.PersistentConnectionProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code></a> class. Refer to
the <a class="reference internal" href="#web3.providers.persistent.PersistentConnectionProvider" title="web3.providers.persistent.PersistentConnectionProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code></a> documentation
for details on additional configuration options available for this provider.</p>
<p>Under the hood, the <code class="docutils literal notranslate"><span class="pre">WebSocketProvider</span></code> uses the python websockets library for
making requests.  If you would like to modify how requests are made, you can
use the <code class="docutils literal notranslate"><span class="pre">websocket_kwargs</span></code> to do so.  See the <a class="reference external" href="https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.WebSocketClientProtocol">websockets documentation</a> for
available arguments.</p>
</dd></dl>

</section>
<section id="using-persistent-connection-providers">
<span id="subscription-examples"></span><h6>Using Persistent Connection Providers<a class="headerlink" href="#using-persistent-connection-providers" title="Link to this heading">ÔÉÅ</a></h6>
<p>The <code class="docutils literal notranslate"><span class="pre">AsyncWeb3</span></code> class may be used as a context manager, utilizing the <code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">with</span></code>
syntax, when instantiating with a
<a class="reference internal" href="#web3.providers.persistent.PersistentConnectionProvider" title="web3.providers.persistent.PersistentConnectionProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code></a>. This will
automatically close the connection when the context manager exits and is the
recommended way to initiate a persistent connection to the provider.</p>
<p>A similar example using a <code class="docutils literal notranslate"><span class="pre">websockets</span></code> connection as an asynchronous context manager
can be found in the <a class="reference external" href="https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.connect">websockets connection</a> docs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">AsyncWeb3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.providers.persistent</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">AsyncIPCProvider</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">WebSocketProvider</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">LOG</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># toggle debug logging</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">if</span> <span class="n">LOG</span><span class="p">:</span>
<span class="gp">... </span>    <span class="kn">import</span> <span class="nn">logging</span>
<span class="gp">... </span>    <span class="c1"># logger = logging.getLogger(&quot;web3.providers.AsyncIPCProvider&quot;)  # for the AsyncIPCProvider</span>
<span class="gp">... </span>    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;web3.providers.WebSocketProvider&quot;</span><span class="p">)</span>  <span class="c1"># for the WebSocketProvider</span>
<span class="gp">... </span>    <span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">())</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">context_manager_subscription_example</span><span class="p">():</span>
<span class="gp">... </span>    <span class="c1">#  async with AsyncWeb3(AsyncIPCProvider(&quot;./path/to.filename.ipc&quot;) as w3:  # for the AsyncIPCProvider</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ws://127.0.0.1:8546&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">w3</span><span class="p">:</span>  <span class="c1"># for the WebSocketProvider</span>
<span class="gp">... </span>        <span class="c1"># subscribe to new block headers</span>
<span class="gp">... </span>        <span class="n">subscription_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;newHeads&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="k">async</span> <span class="k">for</span> <span class="n">response</span> <span class="ow">in</span> <span class="n">w3</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">process_subscriptions</span><span class="p">():</span>
<span class="gp">... </span>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">... </span>            <span class="c1"># handle responses here</span>
<span class="gp">...</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">some_condition</span><span class="p">:</span>
<span class="gp">... </span>                <span class="c1"># unsubscribe from new block headers and break out of</span>
<span class="gp">... </span>                <span class="c1"># iterator</span>
<span class="gp">... </span>                <span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">)</span>
<span class="gp">... </span>                <span class="k">break</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="c1"># still an open connection, make any other requests and get</span>
<span class="gp">... </span>        <span class="c1"># responses via send / receive</span>
<span class="gp">... </span>        <span class="n">latest_block</span> <span class="o">=</span> <span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="s2">&quot;latest&quot;</span><span class="p">)</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Latest block: </span><span class="si">{</span><span class="n">latest_block</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="c1"># the connection closes automatically when exiting the context</span>
<span class="gp">... </span>        <span class="c1"># manager (the `async with` block)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">context_manager_subscription_example</span><span class="p">())</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">AsyncWeb3</span></code> class may also be used as an asynchronous iterator, utilizing the
<code class="docutils literal notranslate"><span class="pre">async</span> <span class="pre">for</span></code> syntax, when instantiating with a
<a class="reference internal" href="#web3.providers.persistent.PersistentConnectionProvider" title="web3.providers.persistent.PersistentConnectionProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code></a>. This may be used to
set up an indefinite websocket connection and reconnect automatically if the connection
is lost.</p>
<p>A similar example using a <code class="docutils literal notranslate"><span class="pre">websockets</span></code> connection as an asynchronous iterator can
be found in the <a class="reference external" href="https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.connect">websockets connection</a> docs.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">websockets</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">AsyncWeb3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.providers.persistent</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">AsyncIPCProvider</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">WebSocketProvider</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">subscription_iterator_example</span><span class="p">():</span>
<span class="gp">... </span>    <span class="c1"># async for w3 in AsyncWeb3(AsyncIPCProvider(&quot;./path/to/filename.ipc&quot;)):  # for the AsyncIPCProvider</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">for</span> <span class="n">w3</span> <span class="ow">in</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ws://127.0.0.1:8546&quot;</span><span class="p">)):</span>  <span class="c1"># for the WebSocketProvider</span>
<span class="gp">... </span>        <span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>            <span class="o">...</span>
<span class="gp">... </span>        <span class="k">except</span> <span class="n">websockets</span><span class="o">.</span><span class="n">ConnectionClosed</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">continue</span>

<span class="go"># run the example</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">subscription_iterator_example</span><span class="p">())</span>
</pre></div>
</div>
<p>Awaiting the instantiation with a
<a class="reference internal" href="#web3.providers.persistent.PersistentConnectionProvider" title="web3.providers.persistent.PersistentConnectionProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code></a>, or instantiating
and awaiting the <code class="docutils literal notranslate"><span class="pre">connect()</span></code> method is also possible. Both of these examples are
shown below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">await_instantiation_example</span><span class="p">():</span>
<span class="gp">... </span>    <span class="c1"># w3 = await AsyncWeb3(AsyncIPCProvider(&quot;./path/to/filename.ipc&quot;))  # for the AsyncIPCProvider</span>
<span class="gp">... </span>    <span class="n">w3</span> <span class="o">=</span> <span class="k">await</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ws://127.0.0.1:8546&quot;</span><span class="p">))</span>  <span class="c1"># for the WebSocketProvider</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># some code here</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># manual cleanup</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>

<span class="go"># run the example</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">await_instantiation_example</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">await_provider_connect_example</span><span class="p">():</span>
<span class="gp">... </span>    <span class="c1"># w3 = AsyncWeb3(AsyncIPCProvider(&quot;./path/to/filename.ipc&quot;))  # for the AsyncIPCProvider</span>
<span class="gp">... </span>    <span class="n">w3</span> <span class="o">=</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ws://127.0.0.1:8546&quot;</span><span class="p">))</span>  <span class="c1"># for the WebSocketProvider</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># some code here</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="c1"># manual cleanup</span>
<span class="gp">... </span>    <span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>

<span class="go"># run the example</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">await_provider_connect_example</span><span class="p">)</span>
</pre></div>
</div>
<p><a class="reference internal" href="#web3.providers.persistent.PersistentConnectionProvider" title="web3.providers.persistent.PersistentConnectionProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code></a> classes use the
<a class="reference internal" href="index.html#web3.providers.persistent.request_processor.RequestProcessor" title="web3.providers.persistent.request_processor.RequestProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">RequestProcessor</span></code></a> class under the
hood to sync up the receiving of responses and response processing for one-to-one and
one-to-many request-to-response requests. Refer to the
<a class="reference internal" href="index.html#web3.providers.persistent.request_processor.RequestProcessor" title="web3.providers.persistent.request_processor.RequestProcessor"><code class="xref py py-class docutils literal notranslate"><span class="pre">RequestProcessor</span></code></a>
documentation for details.</p>
</section>
<section id="asyncweb3-with-persistent-connection-providers">
<h6>AsyncWeb3 with Persistent Connection Providers<a class="headerlink" href="#asyncweb3-with-persistent-connection-providers" title="Link to this heading">ÔÉÅ</a></h6>
<p>When an <code class="docutils literal notranslate"><span class="pre">AsyncWeb3</span></code> class is connected to a
<a class="reference internal" href="#web3.providers.persistent.PersistentConnectionProvider" title="web3.providers.persistent.PersistentConnectionProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code></a>, some attributes and
methods become available.</p>
<blockquote>
<div><dl class="py attribute">
<dt class="sig sig-object py" id="socket">
<span class="sig-name descname"><span class="pre">socket</span></span><a class="headerlink" href="#socket" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The public API for interacting with the websocket connection is available via
the <code class="docutils literal notranslate"><span class="pre">socket</span></code> attribute of the <code class="docutils literal notranslate"><span class="pre">Asyncweb3</span></code> class. This attribute is an
instance of the
<a class="reference internal" href="#web3.providers.persistent.persistent_connection.PersistentConnection" title="web3.providers.persistent.persistent_connection.PersistentConnection"><code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnection</span></code></a>
class and is the main interface for interacting with the socket connection.</p>
</dd></dl>

</div></blockquote>
</section>
<section id="interacting-with-the-persistent-connection">
<h6>Interacting with the Persistent Connection<a class="headerlink" href="#interacting-with-the-persistent-connection" title="Link to this heading">ÔÉÅ</a></h6>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.persistent.persistent_connection.PersistentConnection">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.persistent.persistent_connection.</span></span><span class="sig-name descname"><span class="pre">PersistentConnection</span></span><a class="headerlink" href="#web3.providers.persistent.persistent_connection.PersistentConnection" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This class handles interactions with a persistent socket connection. It is available
via the <code class="docutils literal notranslate"><span class="pre">socket</span></code> attribute on the <code class="docutils literal notranslate"><span class="pre">AsyncWeb3</span></code> class. The
<code class="docutils literal notranslate"><span class="pre">PersistentConnection</span></code> class has the following methods and attributes:</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="web3.providers.persistent.persistent_connection.PersistentConnection.subscriptions">
<span class="sig-name descname"><span class="pre">subscriptions</span></span><a class="headerlink" href="#web3.providers.persistent.persistent_connection.PersistentConnection.subscriptions" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This attribute returns the current active subscriptions as a dict mapping
the subscription <code class="docutils literal notranslate"><span class="pre">id</span></code> to a dict of metadata about the subscription
request.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.providers.persistent.persistent_connection.PersistentConnection.process_subscriptions">
<span class="sig-name descname"><span class="pre">process_subscriptions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.persistent.persistent_connection.PersistentConnection.process_subscriptions" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This method is available for listening to websocket subscriptions indefinitely.
It is an asynchronous iterator that yields strictly one-to-many
(e.g. <code class="docutils literal notranslate"><span class="pre">eth_subscription</span></code> responses) request-to-response messages from the
websocket connection. To receive responses for one-to-one request-to-response
calls, use the standard API for making requests via the appropriate module
(e.g. <code class="docutils literal notranslate"><span class="pre">block_num</span> <span class="pre">=</span> <span class="pre">await</span> <span class="pre">w3.eth.block_number</span></code>)</p>
<p>The responses from this method are formatted by <em>web3.py</em> formatters and run
through the middleware that were present at the time of subscription.
Examples on how to use this method can be seen above in the
<a class="reference internal" href="#using-persistent-connection-providers">Using Persistent Connection Providers</a> section.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.providers.persistent.persistent_connection.PersistentConnection.send">
<span class="sig-name descname"><span class="pre">send</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">RPCEndpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.persistent.persistent_connection.PersistentConnection.send" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This method is available strictly for sending raw requests to the socket,
if desired. It is not recommended to use this method directly, as the
responses will not be formatted by <em>web3.py</em> formatters or run through the
middleware. Instead, use the methods available on the respective web3
module. For example, use <code class="docutils literal notranslate"><span class="pre">w3.eth.get_block(&quot;latest&quot;)</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">w3.socket.send(&quot;eth_getBlockByNumber&quot;,</span> <span class="pre">[&quot;latest&quot;,</span> <span class="pre">True])</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.providers.persistent.persistent_connection.PersistentConnection.recv">
<span class="sig-name descname"><span class="pre">recv</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.persistent.persistent_connection.PersistentConnection.recv" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">recv()</span></code> method can be used to receive the next response for a request
from the socket. The response from this method is the raw response. This is not
the recommended way to receive a response for a request, as it is not formatted
by <em>web3.py</em> formatters or run through the middleware. Instead, use the methods
available on the respective web3 module
(e.g. <code class="docutils literal notranslate"><span class="pre">block_num</span> <span class="pre">=</span> <span class="pre">await</span> <span class="pre">w3.eth.block_number</span></code>) for retrieving responses for
one-to-one request-to-response calls.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.providers.persistent.persistent_connection.PersistentConnection.make_request">
<span class="sig-name descname"><span class="pre">make_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">RPCEndpoint</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Sequence</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.persistent.persistent_connection.PersistentConnection.make_request" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This method is available for making requests to the socket and retrieving the
response. It is not recommended to use this method directly, as the responses
will not be properly formatted by <em>web3.py</em> formatters or run through the
middleware. Instead, use the methods available on the respective web3 module.
For example, use <code class="docutils literal notranslate"><span class="pre">w3.eth.get_block(&quot;latest&quot;)</span></code> instead of
<code class="docutils literal notranslate"><span class="pre">w3.socket.make_request(&quot;eth_getBlockByNumber&quot;,</span> <span class="pre">[&quot;latest&quot;,</span> <span class="pre">True])</span></code>.</p>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="legacywebsocketprovider">
<h5>LegacyWebSocketProvider<a class="headerlink" href="#legacywebsocketprovider" title="Link to this heading">ÔÉÅ</a></h5>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">LegacyWebSocketProvider</span></code> is deprecated and is likely to be removed in a
future major release. Please use <code class="docutils literal notranslate"><span class="pre">WebSocketProvider</span></code> instead.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.legacy_websocket.LegacyWebSocketProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.legacy_websocket.</span></span><span class="sig-name descname"><span class="pre">LegacyWebSocketProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">endpoint_uri</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">websocket_timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">websocket_kwargs</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.legacy_websocket.LegacyWebSocketProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This provider handles interactions with an WS or WSS based JSON-RPC server.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">endpoint_uri</span></code> should be the full URI to the RPC endpoint such as
<code class="docutils literal notranslate"><span class="pre">'ws://localhost:8546'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">websocket_timeout</span></code> is the timeout in seconds, used when receiving or
sending data over the connection. Defaults to 10.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">websocket_kwargs</span></code> this should be a dictionary of keyword arguments which
will be passed onto the ws/wss websocket connection.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">LegacyWebSocketProvider</span><span class="p">(</span><span class="s2">&quot;ws://127.0.0.1:8546&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>Under the hood, <code class="docutils literal notranslate"><span class="pre">LegacyWebSocketProvider</span></code> uses the python <code class="docutils literal notranslate"><span class="pre">websockets</span></code> library for
making requests.  If you would like to modify how requests are made, you can
use the <code class="docutils literal notranslate"><span class="pre">websocket_kwargs</span></code> to do so.  See the <a class="reference external" href="https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.WebSocketClientProtocol">websockets documentation</a> for
available arguments.</p>
<p>Unlike HTTP connections, the timeout for WS connections is controlled by a
separate <code class="docutils literal notranslate"><span class="pre">websocket_timeout</span></code> argument, as shown below.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">LegacyWebSocketProvider</span><span class="p">(</span><span class="s2">&quot;ws://127.0.0.1:8546&quot;</span><span class="p">,</span> <span class="n">websocket_timeout</span><span class="o">=</span><span class="mi">60</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="autoprovider">
<h5>AutoProvider<a class="headerlink" href="#autoprovider" title="Link to this heading">ÔÉÅ</a></h5>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">AutoProvider</span></code> is the default used when initializing
<a class="reference internal" href="index.html#web3.Web3" title="web3.Web3"><code class="xref py py-class docutils literal notranslate"><span class="pre">web3.Web3</span></code></a> without any providers. There‚Äôs rarely a reason to use it
explicitly.</p>
</section>
<section id="ethereumtesterprovider">
<h5>EthereumTesterProvider<a class="headerlink" href="#ethereumtesterprovider" title="Link to this heading">ÔÉÅ</a></h5>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Experimental:  This provider is experimental. There are still significant
gaps in functionality. However it is being actively developed and supported.</p>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.eth_tester.EthereumTesterProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.eth_tester.</span></span><span class="sig-name descname"><span class="pre">EthereumTesterProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ethereum_tester</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_endpoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.eth_tester.EthereumTesterProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.eth_tester.AsyncEthereumTesterProvider">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.eth_tester.</span></span><span class="sig-name descname"><span class="pre">AsyncEthereumTesterProvider</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ethereum_tester</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">api_endpoints</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.providers.eth_tester.AsyncEthereumTesterProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This provider integrates with the <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> library. The <code class="docutils literal notranslate"><span class="pre">ethereum_tester</span></code>
constructor argument should be an instance of the <code class="xref py py-class docutils literal notranslate"><span class="pre">EthereumTester</span></code>
or a subclass of <code class="xref py py-class docutils literal notranslate"><span class="pre">BaseChainBackend</span></code> class provided
by the <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> library. The <code class="docutils literal notranslate"><span class="pre">api_endpoints</span></code> argument should be a <code class="docutils literal notranslate"><span class="pre">dict</span></code>
of RPC endpoints. You can see the structure and defaults <a class="reference external" href="https://github.com/ethereum/web3.py/blob/283b536c7d53e605c61468941e3fc07a6c5d0c09/web3/providers/eth_tester/defaults.py#L228">here</a>.
If you would like a custom <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> instance to test with, see the
<code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> library <a class="reference external" href="https://github.com/ethereum/eth-tester">documentation</a>
for details.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">EthereumTesterProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">EthereumTesterProvider</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To install the needed dependencies to use EthereumTesterProvider, you can
install the pip extras package that has the correct interoperable versions of the
<code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> and <code class="docutils literal notranslate"><span class="pre">py-evm</span></code> dependencies needed: e.g. <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">&quot;web3[tester]&quot;</span></code></p>
</div>
</section>
</section>
</section>
<span id="document-web3.eth.account"></span><section id="accounts">
<span id="eth-account"></span><h3>Accounts<a class="headerlink" href="#accounts" title="Link to this heading">ÔÉÅ</a></h3>
<section id="local-vs-hosted-nodes">
<span id="local-vs-hosted"></span><h4>Local vs Hosted Nodes<a class="headerlink" href="#local-vs-hosted-nodes" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="simple">
<dt>Hosted Node</dt><dd><p>A <strong>hosted</strong> node is controlled by someone else. You may also see these referred to
as <strong>remote</strong> nodes. View a list of commercial <a class="reference external" href="https://ethereum.org/en/developers/docs/nodes-and-clients/nodes-as-a-service/">node providers</a>.</p>
</dd>
<dt>Local Node</dt><dd><p>A <strong>local</strong> node is started and controlled by you on your computer. For several reasons
(e.g., privacy, security), this is the recommended path, but it requires more resources
and work to set up and maintain. See <a class="reference external" href="https://ethereum.org/en/developers/docs/nodes-and-clients/">ethereum.org</a> for a guided tour.</p>
</dd>
</dl>
</section>
<section id="local-vs-hosted-keys">
<h4>Local vs Hosted Keys<a class="headerlink" href="#local-vs-hosted-keys" title="Link to this heading">ÔÉÅ</a></h4>
<p>An Ethereum private key is a 256-bit (32 bytes) random integer.
For each private key, you get one Ethereum address,
also known as an Externally Owned Account (EOA).</p>
<p>In Python, the private key is expressed as a 32-byte long Python <code class="docutils literal notranslate"><span class="pre">bytes</span></code> object.
When a private key is presented to users in a hexadecimal format, it may or may
not contain a starting <code class="docutils literal notranslate"><span class="pre">0x</span></code> hexadecimal prefix.</p>
<dl>
<dt>Local Private Key</dt><dd><p>A local private key is a locally stored secret you import to your Python application.
Please read below how you can create and import a local private key
and use it to sign transactions.</p>
</dd>
<dt>Hosted Private Key</dt><dd><p>This is a legacy way to use accounts when working with unit test backends like
<code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code> or <a class="reference external" href="https://book.getfoundry.sh/reference/anvil/">Anvil</a>.
Calling <code class="docutils literal notranslate"><span class="pre">web3.eth.accounts</span></code> gives you a
predefined list of accounts that have been funded with test ETH.
You can use <a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a> on any of these accounts
without further configuration.</p>
<p>In the past, around 2015, this was also a way to use private keys
in a locally hosted node, but this practice is now discouraged.</p>
</dd>
</dl>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><code class="docutils literal notranslate"><span class="pre">web3.eth.send_transaction</span></code> does not work with modern node providers,
because they relied on a node state and all modern nodes are stateless.
You must always use local private keys when working with nodes hosted by
someone else.</p>
</div>
</section>
<section id="some-common-uses-for-local-private-keys">
<h4>Some Common Uses for Local Private Keys<a class="headerlink" href="#some-common-uses-for-local-private-keys" title="Link to this heading">ÔÉÅ</a></h4>
<p>A very common reason to work with local private keys is to interact
with a hosted node.</p>
<p>Some common things you might want to do with a <cite>Local Private Key</cite> are:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#sign-a-transaction">Sign a Transaction</a></p></li>
<li><p><a class="reference internal" href="#sign-a-contract-transaction">Sign a Contract Transaction</a></p></li>
<li><p><a class="reference internal" href="#sign-a-message">Sign a Message</a></p></li>
<li><p><a class="reference internal" href="#verify-a-message">Verify a Message</a></p></li>
</ul>
<p>Using private keys usually involves <code class="docutils literal notranslate"><span class="pre">w3.eth.account</span></code> in one way or another. Read on for more,
or see a full list of things you can do in the docs for
<a class="reference external" href="https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account" title="(in eth-account v0.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">eth_account.Account</span></code></a>.</p>
</section>
<section id="creating-a-private-key">
<h4>Creating a Private Key<a class="headerlink" href="#creating-a-private-key" title="Link to this heading">ÔÉÅ</a></h4>
<p>Each Ethereum address has a matching private key. To create a new Ethereum
account you can just generate a random number that acts as a private key.</p>
<ul class="simple">
<li><p>A private key is just a random unguessable, or cryptographically safe, 256-bit integer number</p></li>
<li><p>A valid private key is &gt; 0 and &lt; max private key value (a number above the elliptic curve order FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFE BAAEDCE6 AF48A03B BFD25E8C D0364141)</p></li>
<li><p>Private keys do not have checksums.</p></li>
</ul>
<p>To create a private key using web3.py and command line you can do:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;from web3 import Web3; w3 = Web3(); acc = w3.eth.account.create(); print(f&#39;private key={w3.to_hex(acc.key)}, account={acc.address}&#39;)&quot;</span>
</pre></div>
</div>
<p>Which outputs a new private key and an account pair:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">private</span> <span class="n">key</span><span class="o">=</span><span class="mh">0x480c4aec9fa</span><span class="o">...</span><span class="p">,</span> <span class="n">account</span><span class="o">=</span><span class="mh">0x9202a9d5D2d129CB400a40e00aC822a53ED81167</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>Never store private key with your source</em>. Use environment variables
to store the key. Read more below.</p></li>
<li><p>You can also import the raw hex private key to MetaMask and any other
wallet - the private key can be shared between your Python code
and any number of wallets.</p></li>
</ul>
</section>
<section id="funding-a-new-account">
<h4>Funding a New Account<a class="headerlink" href="#funding-a-new-account" title="Link to this heading">ÔÉÅ</a></h4>
<p>If you create a private key, it comes with its own Ethereum address.
By default, the balance of this address is zero.
Before you can send any transactions with your account,
you need to top up.</p>
<ul class="simple">
<li><p>For a local test environment (e.g., <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code>), any
environment is bootstrapped with accounts that have test ETH in them.
Move ETH from default accounts to your newly created account.</p></li>
<li><p>For public mainnet, you need to buy ETH in a cryptocurrency exchange
and send it to your privately controlled account.</p></li>
<li><p>For a testnet, find a relevant testnet <a class="reference internal" href="index.html#faucets"><span class="std std-ref">faucet</span></a>.</p></li>
</ul>
</section>
<section id="reading-a-private-key-from-an-environment-variable">
<h4>Reading a Private Key from an Environment Variable<a class="headerlink" href="#reading-a-private-key-from-an-environment-variable" title="Link to this heading">ÔÉÅ</a></h4>
<p>In this example we pass the private key to our Python application in an
<a class="reference external" href="https://en.wikipedia.org/wiki/Environment_variable">environment variable</a>.
This private key is then added to the transaction signing keychain
with <code class="docutils literal notranslate"><span class="pre">Signing</span></code> middleware.</p>
<p>If unfamiliar, note that you can <a class="reference external" href="https://metamask.zendesk.com/hc/en-us/articles/360015289632-How-to-Export-an-Account-Private-Key">export your private keys from Metamask and other wallets</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul class="simple">
<li><p><strong>Never</strong> share your private keys.</p></li>
<li><p><strong>Never</strong> put your private keys in source code.</p></li>
<li><p><strong>Never</strong> commit private keys to a Git repository.</p></li>
</ul>
</div>
<p>Example <code class="docutils literal notranslate"><span class="pre">account_test_script.py</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">eth_account</span> <span class="kn">import</span> <span class="n">Account</span>
<span class="kn">from</span> <span class="nn">eth_account.signers.local</span> <span class="kn">import</span> <span class="n">LocalAccount</span>
<span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">EthereumTesterProvider</span>
<span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">SignAndSendRawMiddlewareBuilder</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">EthereumTesterProvider</span><span class="p">())</span>

<span class="n">private_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;PRIVATE_KEY&quot;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">private_key</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;You must set PRIVATE_KEY environment variable&quot;</span>
<span class="k">assert</span> <span class="n">private_key</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;0x&quot;</span><span class="p">),</span> <span class="s2">&quot;Private key must start with 0x hex prefix&quot;</span>

<span class="n">account</span><span class="p">:</span> <span class="n">LocalAccount</span> <span class="o">=</span> <span class="n">Account</span><span class="o">.</span><span class="n">from_key</span><span class="p">(</span><span class="n">private_key</span><span class="p">)</span>
<span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">SignAndSendRawMiddlewareBuilder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">account</span><span class="p">),</span> <span class="n">layer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Your hot wallet address is </span><span class="si">{</span><span class="n">account</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Now you can use web3.eth.send_transaction(), Contract.functions.xxx.transact() functions</span>
<span class="c1"># with your local private key through middleware and you no longer get the error</span>
<span class="c1"># &quot;ValueError: The method eth_sendTransaction does not exist/is not available</span>
</pre></div>
</div>
<p>Example how to run this in UNIX shell:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate a new 256-bit random integer using openssl UNIX command that acts as a private key.</span>
<span class="c1"># You can also do:</span>
<span class="c1"># python -c &quot;from web3 import Web3; w3 = Web3(); acc = w3.eth.account.create(); print(f&#39;private key={w3.to_hex(acc.key)}, account={acc.address}&#39;)&quot;</span>
<span class="c1"># Store this in a safe place, like in your password manager.</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PRIVATE_KEY</span><span class="o">=</span>0x<span class="sb">`</span>openssl<span class="w"> </span>rand<span class="w"> </span>-hex<span class="w"> </span><span class="m">32</span><span class="sb">`</span>

<span class="c1"># Run our script</span>
python<span class="w"> </span>account_test_script.py
</pre></div>
</div>
<p>This will print:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Your</span> <span class="n">hot</span> <span class="n">wallet</span> <span class="n">address</span> <span class="ow">is</span> <span class="mh">0x27C8F899bb69E1501BBB96d09d7477a2a7518918</span>
</pre></div>
</div>
</section>
<section id="extract-private-key-from-geth-keyfile">
<span id="extract-geth-pk"></span><h4>Extract private key from geth keyfile<a class="headerlink" href="#extract-private-key-from-geth-keyfile" title="Link to this heading">ÔÉÅ</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The amount of available ram should be greater than 1GB.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;~/.ethereum/keystore/UTC--...--5ce9454909639D2D17A3F753ce7d93fa0b9aB12E&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">keyfile</span><span class="p">:</span>
    <span class="n">encrypted_key</span> <span class="o">=</span> <span class="n">keyfile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">private_key</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">decrypt</span><span class="p">(</span><span class="n">encrypted_key</span><span class="p">,</span> <span class="s1">&#39;correcthorsebatterystaple&#39;</span><span class="p">)</span>
    <span class="c1"># tip: do not save the key or password anywhere, especially into a shared source file</span>
</pre></div>
</div>
</section>
<section id="sign-a-message">
<h4>Sign a Message<a class="headerlink" href="#sign-a-message" title="Link to this heading">ÔÉÅ</a></h4>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There is no single message format that is broadly adopted
with community consensus. Keep an eye on several options,
like <a class="reference external" href="https://github.com/ethereum/EIPs/pull/683">EIP-683</a>,
<a class="reference external" href="https://github.com/ethereum/EIPs/pull/712">EIP-712</a>, and
<a class="reference external" href="https://github.com/ethereum/EIPs/pull/719">EIP-719</a>. Consider
the <a class="reference internal" href="index.html#web3.eth.Eth.sign" title="web3.eth.Eth.sign"><code class="xref py py-meth docutils literal notranslate"><span class="pre">w3.eth.sign()</span></code></a> approach be deprecated.</p>
</div>
<p>For this example, we will use the same message hashing mechanism that
is provided by <a class="reference internal" href="index.html#web3.eth.Eth.sign" title="web3.eth.Eth.sign"><code class="xref py py-meth docutils literal notranslate"><span class="pre">w3.eth.sign()</span></code></a>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">EthereumTesterProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">eth_account.messages</span> <span class="kn">import</span> <span class="n">encode_defunct</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">EthereumTesterProvider</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;I‚ô•SF&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">private_key</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\xb2\\</span><span class="s2">}</span><span class="se">\xb3\x1f\xee\xd9\x12</span><span class="s2">&#39;&#39;</span><span class="se">\xbf\t</span><span class="s2">9</span><span class="se">\xdc</span><span class="s2">v</span><span class="se">\x9a\x96</span><span class="s2">VK-</span><span class="se">\xe4\xc4</span><span class="s2">rm</span><span class="se">\x03</span><span class="s2">[6</span><span class="se">\xec\xf1\xe5\xb3</span><span class="s2">d&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">message</span> <span class="o">=</span> <span class="n">encode_defunct</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed_message</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">sign_message</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">private_key</span><span class="o">=</span><span class="n">private_key</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed_message</span>
<span class="go">SignedMessage(message_hash=HexBytes(&#39;0x1476abb745d423bf09273f1afd887d951181d25adc66c4834a70491911b7f750&#39;),</span>
<span class="go"> r=104389933075820307925104709181714897380569894203213074526835978196648170704563,</span>
<span class="go"> s=28205917190874851400050446352651915501321657673772411533993420917949420456142,</span>
<span class="go"> v=28,</span>
<span class="go"> signature=HexBytes(&#39;0xe6ca9bba58c88611fad66a6ce8f996908195593807c4b38bd528d2cff09d4eb33e5bfbbf4d3e39b1a2fd816a7680c19ebebaf3a141b239934ad43cb33fcec8ce1c&#39;))</span>
</pre></div>
</div>
</section>
<section id="verify-a-message">
<h4>Verify a Message<a class="headerlink" href="#verify-a-message" title="Link to this heading">ÔÉÅ</a></h4>
<p>With the original message text and a signature:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">message</span> <span class="o">=</span> <span class="n">encode_defunct</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;I‚ô•SF&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">recover_message</span><span class="p">(</span><span class="n">message</span><span class="p">,</span> <span class="n">signature</span><span class="o">=</span><span class="n">signed_message</span><span class="o">.</span><span class="n">signature</span><span class="p">)</span>
<span class="go">&#39;0x5ce9454909639D2D17A3F753ce7d93fa0b9aB12E&#39;</span>
</pre></div>
</div>
</section>
<section id="prepare-message-for-ecrecover-in-solidity">
<h4>Prepare message for ecrecover in Solidity<a class="headerlink" href="#prepare-message-for-ecrecover-in-solidity" title="Link to this heading">ÔÉÅ</a></h4>
<p>Let‚Äôs say you want a contract to validate a signed message,
like if you‚Äôre making payment channels, and you want to
validate the value in Remix or web3.js.</p>
<p>You might have produced the signed_message locally, as in
<a class="reference internal" href="#sign-a-message">Sign a Message</a>. If so, this will prepare it for Solidity:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>

<span class="go"># ecrecover in Solidity expects v as a uint8, but r and s as left-padded bytes32</span>
<span class="go"># Remix / web3.js expect r and s to be encoded to hex</span>
<span class="go"># This convenience method will do the pad &amp; hex for us:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">to_32byte_hex</span><span class="p">(</span><span class="n">val</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">return</span> <span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">val</span><span class="p">)</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\0</span><span class="s1">&#39;</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ec_recover_args</span> <span class="o">=</span> <span class="p">(</span><span class="n">msghash</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">r</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span>
<span class="gp">... </span>  <span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">signed_message</span><span class="o">.</span><span class="n">message_hash</span><span class="p">),</span>
<span class="gp">... </span>  <span class="n">signed_message</span><span class="o">.</span><span class="n">v</span><span class="p">,</span>
<span class="gp">... </span>  <span class="n">to_32byte_hex</span><span class="p">(</span><span class="n">signed_message</span><span class="o">.</span><span class="n">r</span><span class="p">),</span>
<span class="gp">... </span>  <span class="n">to_32byte_hex</span><span class="p">(</span><span class="n">signed_message</span><span class="o">.</span><span class="n">s</span><span class="p">),</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ec_recover_args</span>
<span class="go">(&#39;0x1476abb745d423bf09273f1afd887d951181d25adc66c4834a70491911b7f750&#39;,</span>
<span class="go"> 28,</span>
<span class="go"> &#39;0xe6ca9bba58c88611fad66a6ce8f996908195593807c4b38bd528d2cff09d4eb3&#39;,</span>
<span class="go"> &#39;0x3e5bfbbf4d3e39b1a2fd816a7680c19ebebaf3a141b239934ad43cb33fcec8ce&#39;)</span>
</pre></div>
</div>
<p>Instead, you might have received a message and a signature encoded to hex. Then
this will prepare it for Solidity:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">eth_account.messages</span> <span class="kn">import</span> <span class="n">encode_defunct</span><span class="p">,</span> <span class="n">_hash_eip191_message</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">hex_message</span> <span class="o">=</span> <span class="s1">&#39;0x49e299a55346&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hex_signature</span> <span class="o">=</span> <span class="s1">&#39;0xe6ca9bba58c88611fad66a6ce8f996908195593807c4b38bd528d2cff09d4eb33e5bfbbf4d3e39b1a2fd816a7680c19ebebaf3a141b239934ad43cb33fcec8ce1c&#39;</span>

<span class="go"># ecrecover in Solidity expects an encoded version of the message</span>

<span class="go"># - encode the message</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">message</span> <span class="o">=</span> <span class="n">encode_defunct</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="n">hex_message</span><span class="p">)</span>

<span class="go"># - hash the message explicitly</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">message_hash</span> <span class="o">=</span> <span class="n">_hash_eip191_message</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="go"># Remix / web3.js expect the message hash to be encoded to a hex string</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hex_message_hash</span> <span class="o">=</span> <span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">message_hash</span><span class="p">)</span>

<span class="go"># ecrecover in Solidity expects the signature to be split into v as a uint8,</span>
<span class="go">#   and r, s as a bytes32</span>
<span class="go"># Remix / web3.js expect r and s to be encoded to hex</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span> <span class="o">=</span> <span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="n">hex_signature</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">v</span><span class="p">,</span> <span class="n">hex_r</span><span class="p">,</span> <span class="n">hex_s</span> <span class="o">=</span> <span class="n">Web3</span><span class="o">.</span><span class="n">to_int</span><span class="p">(</span><span class="n">sig</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">sig</span><span class="p">[:</span><span class="mi">32</span><span class="p">]),</span> <span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">sig</span><span class="p">[</span><span class="mi">32</span><span class="p">:</span><span class="mi">64</span><span class="p">])</span>

<span class="go"># ecrecover in Solidity takes the arguments in order = (msghash, v, r, s)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ec_recover_args</span> <span class="o">=</span> <span class="p">(</span><span class="n">hex_message_hash</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">hex_r</span><span class="p">,</span> <span class="n">hex_s</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ec_recover_args</span>
<span class="go">(&#39;0x1476abb745d423bf09273f1afd887d951181d25adc66c4834a70491911b7f750&#39;,</span>
<span class="go"> 28,</span>
<span class="go"> &#39;0xe6ca9bba58c88611fad66a6ce8f996908195593807c4b38bd528d2cff09d4eb3&#39;,</span>
<span class="go"> &#39;0x3e5bfbbf4d3e39b1a2fd816a7680c19ebebaf3a141b239934ad43cb33fcec8ce&#39;)</span>
</pre></div>
</div>
</section>
<section id="verify-a-message-with-ecrecover-in-solidity">
<h4>Verify a message with ecrecover in Solidity<a class="headerlink" href="#verify-a-message-with-ecrecover-in-solidity" title="Link to this heading">ÔÉÅ</a></h4>
<p>Create a simple ecrecover contract in <a class="reference external" href="https://remix.ethereum.org/">Remix</a>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pragma solidity ^0.4.19;

contract Recover {
  function ecr (bytes32 msgh, uint8 v, bytes32 r, bytes32 s) public pure
  returns (address sender) {
    return ecrecover(msgh, v, r, s);
  }
}
</pre></div>
</div>
<p>Then call ecr with these arguments from <a class="reference internal" href="#prepare-message-for-ecrecover-in-solidity">Prepare message for ecrecover in Solidity</a> in Remix,
<code class="docutils literal notranslate"><span class="pre">&quot;0x1476abb745d423bf09273f1afd887d951181d25adc66c4834a70491911b7f750&quot;,</span> <span class="pre">28,</span> <span class="pre">&quot;0xe6ca9bba58c88611fad66a6ce8f996908195593807c4b38bd528d2cff09d4eb3&quot;,</span> <span class="pre">&quot;0x3e5bfbbf4d3e39b1a2fd816a7680c19ebebaf3a141b239934ad43cb33fcec8ce&quot;</span></code></p>
<p>The message is verified, because we get the correct sender of
the message back in response: <code class="docutils literal notranslate"><span class="pre">0x5ce9454909639d2d17a3f753ce7d93fa0b9ab12e</span></code>.</p>
</section>
<section id="sign-a-transaction">
<span id="local-sign-transaction"></span><h4>Sign a Transaction<a class="headerlink" href="#sign-a-transaction" title="Link to this heading">ÔÉÅ</a></h4>
<p>Create a transaction, sign it locally, and then send it to your node for broadcasting,
with <a class="reference internal" href="index.html#web3.eth.Eth.send_raw_transaction" title="web3.eth.Eth.send_raw_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_raw_transaction()</span></code></a>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">transaction</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;0xF0109fC8DF283027b6285cc889F5aA624EaC1F55&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1000000000</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;gas&#39;</span><span class="p">:</span> <span class="mi">2000000</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;maxFeePerGas&#39;</span><span class="p">:</span> <span class="mi">2000000000</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;maxPriorityFeePerGas&#39;</span><span class="p">:</span> <span class="mi">1000000000</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;nonce&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;chainId&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;0x2&#39;</span><span class="p">,</span>  <span class="c1"># the type is optional and, if omitted, will be interpreted based on the provided transaction parameters</span>
<span class="gp">... </span>    <span class="s1">&#39;accessList&#39;</span><span class="p">:</span> <span class="p">(</span>  <span class="c1"># accessList is optional for dynamic fee transactions</span>
<span class="gp">... </span>        <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;address&#39;</span><span class="p">:</span> <span class="s1">&#39;0xde0b295669a9fd93d5f28d9ec85e40f4cb697bae&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s1">&#39;storageKeys&#39;</span><span class="p">:</span> <span class="p">(</span>
<span class="gp">... </span>                <span class="s1">&#39;0x0000000000000000000000000000000000000000000000000000000000000003&#39;</span><span class="p">,</span>
<span class="gp">... </span>                <span class="s1">&#39;0x0000000000000000000000000000000000000000000000000000000000000007&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="p">)</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>        <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;address&#39;</span><span class="p">:</span> <span class="s1">&#39;0xbb9bc244d798123fde783fcc1c72d3bb8c189413&#39;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s1">&#39;storageKeys&#39;</span><span class="p">:</span> <span class="p">()</span>
<span class="gp">... </span>        <span class="p">},</span>
<span class="gp">... </span>    <span class="p">)</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;0x4c0883a69102937d6231471b5dbb6204fe5129617082792ae468d01a3f362318&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">transaction</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed</span><span class="o">.</span><span class="n">raw_transaction</span>
<span class="go">HexBytes(&#39;0x02f8e20180843b9aca008477359400831e848094f0109fc8df283027b6285cc889f5aa624eac1f55843b9aca0080f872f85994de0b295669a9fd93d5f28d9ec85e40f4cb697baef842a00000000000000000000000000000000000000000000000000000000000000003a00000000000000000000000000000000000000000000000000000000000000007d694bb9bc244d798123fde783fcc1c72d3bb8c189413c001a0b9ec671ccee417ff79e06e9e52bfa82b37cf1145affde486006072ca7a11cf8da0484a9beea46ff6a90ac76e7bbf3718db16a8b4b09cef477fb86cf4e123d98fde&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed</span><span class="o">.</span><span class="n">hash</span>
<span class="go">HexBytes(&#39;0xe85ce7efa52c16cb5c469c7bde54fbd4911639fdfde08003f65525a85076d915&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed</span><span class="o">.</span><span class="n">r</span>
<span class="go">84095564551732371065849105252408326384410939276686534847013731510862163857293</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed</span><span class="o">.</span><span class="n">s</span>
<span class="go">32698347985257114675470251181312399332782188326270244072370350491677872459742</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed</span><span class="o">.</span><span class="n">v</span>
<span class="go">1</span>

<span class="go"># When you run send_raw_transaction, you get back the hash of the transaction:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_raw_transaction</span><span class="p">(</span><span class="n">signed</span><span class="o">.</span><span class="n">raw_transaction</span><span class="p">)</span>  
<span class="go">&#39;0xe85ce7efa52c16cb5c469c7bde54fbd4911639fdfde08003f65525a85076d915&#39;</span>
</pre></div>
</div>
</section>
<section id="sign-a-contract-transaction">
<h4>Sign a Contract Transaction<a class="headerlink" href="#sign-a-contract-transaction" title="Link to this heading">ÔÉÅ</a></h4>
<p>To sign a transaction locally that will invoke a smart contract:</p>
<ol class="arabic simple">
<li><p>Initialize your <a class="reference internal" href="index.html#web3.eth.Eth.contract" title="web3.eth.Eth.contract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Contract</span></code></a> object</p></li>
<li><p>Build the transaction</p></li>
<li><p>Sign the transaction, with <a class="reference external" href="https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction" title="(in eth-account v0.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">w3.eth.account.sign_transaction()</span></code></a></p></li>
<li><p>Broadcast the transaction with <a class="reference internal" href="index.html#web3.eth.Eth.send_raw_transaction" title="web3.eth.Eth.send_raw_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_raw_transaction()</span></code></a></p></li>
</ol>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="go"># When running locally, execute the statements found in the file linked below to load the EIP20_ABI variable.</span>
<span class="go"># See: https://github.com/carver/ethtoken.py/blob/v0.0.1-alpha.4/ethtoken/abi.py</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">EthereumTesterProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">EthereumTesterProvider</span><span class="p">())</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">unicorns</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s2">&quot;0xfB6916095ca1df60bB79Ce92cE3Ea74c37c5d359&quot;</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">EIP20_ABI</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">nonce</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_count</span><span class="p">(</span><span class="s1">&#39;0x5ce9454909639D2D17A3F753ce7d93fa0b9aB12E&#39;</span><span class="p">)</span>  

<span class="go"># Build a transaction that invokes this contract&#39;s function, called transfer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unicorn_txn</span> <span class="o">=</span> <span class="n">unicorns</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span>
<span class="gp">... </span>    <span class="s1">&#39;0xfB6916095ca1df60bB79Ce92cE3Ea74c37c5d359&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span><span class="o">.</span><span class="n">build_transaction</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">&#39;chainId&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;gas&#39;</span><span class="p">:</span> <span class="mi">70000</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;maxFeePerGas&#39;</span><span class="p">:</span> <span class="n">w3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;gwei&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s1">&#39;maxPriorityFeePerGas&#39;</span><span class="p">:</span> <span class="n">w3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;gwei&#39;</span><span class="p">),</span>
<span class="gp">... </span>    <span class="s1">&#39;nonce&#39;</span><span class="p">:</span> <span class="n">nonce</span><span class="p">,</span>
<span class="gp">... </span><span class="p">})</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">unicorn_txn</span>
<span class="go">{&#39;value&#39;: 0,</span>
<span class="go"> &#39;chainId&#39;: 1,</span>
<span class="go"> &#39;gas&#39;: 70000,</span>
<span class="go"> &#39;maxFeePerGas&#39;: 2000000000,</span>
<span class="go"> &#39;maxPriorityFeePerGas&#39;: 1000000000,</span>
<span class="go"> &#39;nonce&#39;: 0,</span>
<span class="go"> &#39;to&#39;: &#39;0xfB6916095ca1df60bB79Ce92cE3Ea74c37c5d359&#39;,</span>
<span class="go"> &#39;data&#39;: &#39;0xa9059cbb000000000000000000000000fb6916095ca1df60bb79ce92ce3ea74c37c5d3590000000000000000000000000000000000000000000000000000000000000001&#39;}</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">private_key</span> <span class="o">=</span> <span class="sa">b</span><span class="s2">&quot;</span><span class="se">\xb2\\</span><span class="s2">}</span><span class="se">\xb3\x1f\xee\xd9\x12</span><span class="s2">&#39;&#39;</span><span class="se">\xbf\t</span><span class="s2">9</span><span class="se">\xdc</span><span class="s2">v</span><span class="se">\x9a\x96</span><span class="s2">VK-</span><span class="se">\xe4\xc4</span><span class="s2">rm</span><span class="se">\x03</span><span class="s2">[6</span><span class="se">\xec\xf1\xe5\xb3</span><span class="s2">d&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed_txn</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">unicorn_txn</span><span class="p">,</span> <span class="n">private_key</span><span class="o">=</span><span class="n">private_key</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed_txn</span><span class="o">.</span><span class="n">hash</span>
<span class="go">HexBytes(&#39;0x748db062639a45e519dba934fce09c367c92043867409160c9989673439dc817&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed_txn</span><span class="o">.</span><span class="n">raw_transaction</span>
<span class="go">HexBytes(&#39;0x02f8b00180843b9aca0084773594008301117094fb6916095ca1df60bb79ce92ce3ea74c37c5d35980b844a9059cbb000000000000000000000000fb6916095ca1df60bb79ce92ce3ea74c37c5d3590000000000000000000000000000000000000000000000000000000000000001c001a0cec4150e52898cf1295cc4020ac0316cbf186071e7cdc5ec44eeb7cdda05afa2a06b0b3a09c7fb0112123c0bef1fd6334853a9dcf3cb5bab3ccd1f5baae926d449&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed_txn</span><span class="o">.</span><span class="n">r</span>
<span class="go">93522894155654168208483453926995743737629589441154283159505514235904280342434</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed_txn</span><span class="o">.</span><span class="n">s</span>
<span class="go">48417310681110102814014302147799665717176259465062324746227758019974374282313</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">signed_txn</span><span class="o">.</span><span class="n">v</span>
<span class="go">1</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_raw_transaction</span><span class="p">(</span><span class="n">signed_txn</span><span class="o">.</span><span class="n">raw_transaction</span><span class="p">)</span>  

<span class="go"># When you run send_raw_transaction, you get the same result as the hash of the transaction:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">keccak</span><span class="p">(</span><span class="n">signed_txn</span><span class="o">.</span><span class="n">raw_transaction</span><span class="p">))</span>
<span class="go">&#39;0x748db062639a45e519dba934fce09c367c92043867409160c9989673439dc817&#39;</span>
</pre></div>
</div>
</section>
</section>
<span id="document-transactions"></span><section id="transactions">
<h3>Transactions<a class="headerlink" href="#transactions" title="Link to this heading">ÔÉÅ</a></h3>
<p>There are a handful of ways to interact with transactions in web3.py. See the
<a class="reference internal" href="index.html#web3-eth-methods"><span class="std std-ref">Web3.eth module</span></a> for a full list of transaction-related methods. Note that you may also <a class="reference internal" href="index.html#batch-requests"><span class="std std-ref">batch requests</span></a> that read transaction data, but not send new transactions in a batch request.</p>
<p>The rest of this guide covers the decision tree for how to send a transaction.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Prefer to view this code in a Jupyter Notebook? View the repo <a class="reference external" href="https://github.com/wolovim/ethereum-notebooks/blob/master/Sending%20Transactions.ipynb">here</a>.</p>
</div>
<p>There are two methods for sending transactions using web3.py: <a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a> and <a class="reference internal" href="index.html#web3.eth.Eth.send_raw_transaction" title="web3.eth.Eth.send_raw_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_raw_transaction()</span></code></a>. A brief guide:</p>
<ol class="arabic simple">
<li><p>Want to sign a transaction offline or send pre-signed transactions?</p>
<ul class="simple">
<li><p>use <a class="reference external" href="https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction" title="(in eth-account v0.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sign_transaction</span></code></a> + <a class="reference internal" href="index.html#web3.eth.Eth.send_raw_transaction" title="web3.eth.Eth.send_raw_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_raw_transaction()</span></code></a></p></li>
</ul>
</li>
<li><p>Are you primarily using the same account for all transactions and would you prefer to save a few lines of code?</p>
<ul class="simple">
<li><p>configure the <code class="docutils literal notranslate"><span class="pre">build</span></code> method for <a class="reference internal" href="index.html#web3.middleware.SignAndSendRawMiddlewareBuilder" title="web3.middleware.SignAndSendRawMiddlewareBuilder"><code class="xref py py-class docutils literal notranslate"><span class="pre">SignAndSendRawMiddlewareBuilder</span></code></a>, then</p></li>
<li><p>use <a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a></p></li>
</ul>
</li>
<li><p>Otherwise:</p>
<ul class="simple">
<li><p>load account via eth-account (<a class="reference external" href="https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.from_key" title="(in eth-account v0.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">w3.eth.account.from_key(pk)</span></code></a>), then</p></li>
<li><p>use <a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a></p></li>
</ul>
</li>
</ol>
<p>Interacting with or deploying a contract?</p>
<ul class="simple">
<li><p>Option 1: <a class="reference internal" href="index.html#web3.contract.ContractFunction.transact" title="web3.contract.ContractFunction.transact"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transact()</span></code></a> uses <a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a> under the hood</p></li>
<li><p>Option 2: <a class="reference internal" href="index.html#web3.contract.ContractFunction.build_transaction" title="web3.contract.ContractFunction.build_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_transaction()</span></code></a> + <a class="reference external" href="https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction" title="(in eth-account v0.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sign_transaction</span></code></a> + <a class="reference internal" href="index.html#web3.eth.Eth.send_raw_transaction" title="web3.eth.Eth.send_raw_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_raw_transaction()</span></code></a></p></li>
</ul>
<p>An example for each can be found below.</p>
<section id="chapter-0-w3-eth-send-transaction-with-eth-tester">
<h4>Chapter 0: <code class="docutils literal notranslate"><span class="pre">w3.eth.send_transaction</span></code> with <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code><a class="headerlink" href="#chapter-0-w3-eth-send-transaction-with-eth-tester" title="Link to this heading">ÔÉÅ</a></h4>
<p>Many tutorials use <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> (via EthereumTesterProvider) for convenience and speed
of conveying ideas/building a proof of concept. Transactions sent by test accounts are
auto-signed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">EthereumTesterProvider</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">EthereumTesterProvider</span><span class="p">())</span>

<span class="c1"># eth-tester populates accounts with test ether:</span>
<span class="n">acct1</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="n">some_address</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000000&quot;</span>

<span class="c1"># when using one of its generated test accounts,</span>
<span class="c1"># eth-tester signs the tx (under the hood) before sending:</span>
<span class="n">tx_hash</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">({</span>
    <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">acct1</span><span class="p">,</span>
    <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="n">some_address</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">123123123123123</span>
<span class="p">})</span>

<span class="n">tx</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">tx</span><span class="p">[</span><span class="s2">&quot;from&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">acct1</span>
</pre></div>
</div>
</section>
<section id="chapter-1-w3-eth-send-transaction-signer-middleware">
<h4>Chapter 1: <code class="docutils literal notranslate"><span class="pre">w3.eth.send_transaction</span></code> + signer middleware<a class="headerlink" href="#chapter-1-w3-eth-send-transaction-signer-middleware" title="Link to this heading">ÔÉÅ</a></h4>
<p>The <a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a> method is convenient and to-the-point.
If you want to continue using the pattern after graduating from <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code>, you can
utilize web3.py middleware to sign transactions from a particular account:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">SignAndSendRawMiddlewareBuilder</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Note: Never commit your key in your code! Use env variables instead:</span>
<span class="n">pk</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PRIVATE_KEY&#39;</span><span class="p">)</span>

<span class="c1"># Instantiate an Account object from your key:</span>
<span class="n">acct2</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">from_key</span><span class="p">(</span><span class="n">pk</span><span class="p">)</span>

<span class="c1"># For the sake of this example, fund the new account:</span>
<span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">({</span>
    <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">acct1</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">w3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;ether&#39;</span><span class="p">),</span>
    <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="n">acct2</span><span class="o">.</span><span class="n">address</span>
<span class="p">})</span>

<span class="c1"># Add acct2 as auto-signer:</span>
<span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">SignAndSendRawMiddlewareBuilder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">acct2</span><span class="p">),</span> <span class="n">layer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># pk also works: w3.middleware_onion.inject(SignAndSendRawMiddlewareBuilder.build(pk), layer=0)</span>

<span class="c1"># Transactions from `acct2` will then be signed, under the hood, in the middleware:</span>
<span class="n">tx_hash</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">({</span>
    <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">acct2</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
    <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">3333333333</span><span class="p">,</span>
    <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="n">some_address</span>
<span class="p">})</span>

<span class="n">tx</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">tx</span><span class="p">[</span><span class="s2">&quot;from&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">acct2</span><span class="o">.</span><span class="n">address</span>

<span class="c1"># Optionally, you can set a default signer as well:</span>
<span class="c1"># w3.eth.default_account = acct2.address</span>
<span class="c1"># Then, if you omit a &quot;from&quot; key, acct2 will be used.</span>
</pre></div>
</div>
</section>
<section id="chapter-2-w3-eth-send-raw-transaction">
<h4>Chapter 2: <code class="docutils literal notranslate"><span class="pre">w3.eth.send_raw_transaction</span></code><a class="headerlink" href="#chapter-2-w3-eth-send-raw-transaction" title="Link to this heading">ÔÉÅ</a></h4>
<p>if you don‚Äôt opt for the middleware, you‚Äôll need to:</p>
<ul class="simple">
<li><p>build each transaction,</p></li>
<li><p><a class="reference external" href="https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction" title="(in eth-account v0.13)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sign_transaction</span></code></a>, and</p></li>
<li><p>then use <a class="reference internal" href="index.html#web3.eth.Eth.send_raw_transaction" title="web3.eth.Eth.send_raw_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_raw_transaction()</span></code></a>.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. Build a new tx</span>
<span class="n">transaction</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">acct2</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
    <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="n">some_address</span><span class="p">,</span>
    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">1000000000</span><span class="p">,</span>
    <span class="s1">&#39;nonce&#39;</span><span class="p">:</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_count</span><span class="p">(</span><span class="n">acct2</span><span class="o">.</span><span class="n">address</span><span class="p">),</span>
    <span class="s1">&#39;gas&#39;</span><span class="p">:</span> <span class="mi">200000</span><span class="p">,</span>
    <span class="s1">&#39;maxFeePerGas&#39;</span><span class="p">:</span> <span class="mi">2000000000</span><span class="p">,</span>
    <span class="s1">&#39;maxPriorityFeePerGas&#39;</span><span class="p">:</span> <span class="mi">1000000000</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># 2. Sign tx with a private key</span>
<span class="n">signed</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">transaction</span><span class="p">,</span> <span class="n">pk</span><span class="p">)</span>

<span class="c1"># 3. Send the signed transaction</span>
<span class="n">tx_hash</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_raw_transaction</span><span class="p">(</span><span class="n">signed</span><span class="o">.</span><span class="n">raw_transaction</span><span class="p">)</span>
<span class="n">tx</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">tx</span><span class="p">[</span><span class="s2">&quot;from&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">acct2</span><span class="o">.</span><span class="n">address</span>
</pre></div>
</div>
</section>
<section id="chapter-3-contract-transactions">
<h4>Chapter 3: Contract transactions<a class="headerlink" href="#chapter-3-contract-transactions" title="Link to this heading">ÔÉÅ</a></h4>
<p>The same concepts apply for contract interactions, at least under the hood.</p>
<p>Executing a function on a smart contract requires sending a transaction, which is typically done in one of two ways:</p>
<ul class="simple">
<li><p>executing the <a class="reference internal" href="index.html#web3.contract.ContractFunction.transact" title="web3.contract.ContractFunction.transact"><code class="xref py py-meth docutils literal notranslate"><span class="pre">transact()</span></code></a> function, or</p></li>
<li><p><a class="reference internal" href="index.html#web3.contract.ContractFunction.build_transaction" title="web3.contract.ContractFunction.build_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">build_transaction()</span></code></a>, then signing and sending the raw transaction.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#########################################</span>
<span class="c1">#### SMOL CONTRACT FOR THIS EXAMPLE: ####</span>
<span class="c1">#########################################</span>
<span class="c1"># // SPDX-License-Identifier: MIT</span>
<span class="c1"># pragma solidity 0.8.17;</span>
<span class="c1">#</span>
<span class="c1"># contract Billboard {</span>
<span class="c1">#     string public message;</span>
<span class="c1">#</span>
<span class="c1">#     constructor(string memory _message) {</span>
<span class="c1">#         message = _message;</span>
<span class="c1">#     }</span>
<span class="c1">#</span>
<span class="c1">#     function writeBillboard(string memory _message) public {</span>
<span class="c1">#         message = _message;</span>
<span class="c1">#     }</span>
<span class="c1"># }</span>

<span class="c1"># After compiling the contract, initialize the contract factory:</span>
<span class="n">init_bytecode</span> <span class="o">=</span> <span class="s2">&quot;60806040523480156200001157600080fd5b5060...&quot;</span>
<span class="n">abi</span> <span class="o">=</span> <span class="s1">&#39;[{&quot;inputs&quot;: [{&quot;internalType&quot;: &quot;string&quot;,&quot;name&quot;: &quot;_message&quot;,...&#39;</span>
<span class="n">Billboard</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">bytecode</span><span class="o">=</span><span class="n">init_bytecode</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">)</span>

<span class="c1"># Deploy a contract using `transact` + the signer middleware:</span>
<span class="n">tx_hash</span> <span class="o">=</span> <span class="n">Billboard</span><span class="o">.</span><span class="n">constructor</span><span class="p">(</span><span class="s2">&quot;gm&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">({</span><span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">acct2</span><span class="o">.</span><span class="n">address</span><span class="p">})</span>
<span class="n">receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="n">deployed_addr</span> <span class="o">=</span> <span class="n">receipt</span><span class="p">[</span><span class="s2">&quot;contractAddress&quot;</span><span class="p">]</span>

<span class="c1"># Reference the deployed contract:</span>
<span class="n">billboard</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="n">deployed_addr</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">)</span>

<span class="c1"># Manually build and sign a transaction:</span>
<span class="n">unsent_billboard_tx</span> <span class="o">=</span> <span class="n">billboard</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">writeBillboard</span><span class="p">(</span><span class="s2">&quot;gn&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">build_transaction</span><span class="p">({</span>
    <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">acct2</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>
    <span class="s2">&quot;nonce&quot;</span><span class="p">:</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_count</span><span class="p">(</span><span class="n">acct2</span><span class="o">.</span><span class="n">address</span><span class="p">),</span>
<span class="p">})</span>
<span class="n">signed_tx</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="n">unsent_billboard_tx</span><span class="p">,</span> <span class="n">private_key</span><span class="o">=</span><span class="n">acct2</span><span class="o">.</span><span class="n">key</span><span class="p">)</span>

<span class="c1"># Send the raw transaction:</span>
<span class="k">assert</span> <span class="n">billboard</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">message</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;gm&quot;</span>
<span class="n">tx_hash</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_raw_transaction</span><span class="p">(</span><span class="n">signed_tx</span><span class="o">.</span><span class="n">raw_transaction</span><span class="p">)</span>
<span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">billboard</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">message</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;gn&quot;</span>
</pre></div>
</div>
</section>
</section>
<span id="document-web3.contract"></span><section id="contracts">
<span id="id1"></span><h3>Contracts<a class="headerlink" href="#contracts" title="Link to this heading">ÔÉÅ</a></h3>
<p id="module-web3.contract">Smart contracts are programs deployed to the Ethereum network. See the
<a class="reference external" href="https://ethereum.org/en/developers/docs/smart-contracts">ethereum.org docs</a>
for a proper introduction.</p>
<section id="interacting-with-deployed-contracts">
<h4>Interacting with deployed contracts<a class="headerlink" href="#interacting-with-deployed-contracts" title="Link to this heading">ÔÉÅ</a></h4>
<p>In order to use an existing contract, you‚Äôll need its deployed address and its ABI.
Both can be found using block explorers, like Etherscan. Once you instantiate a contract
instance, you can read data and execute transactions.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Configure w3, e.g., w3 = Web3(...)</span>
<span class="n">address</span> <span class="o">=</span> <span class="s1">&#39;0x1f9840a85d5aF5bf1D1762F925BDADdC4201F988&#39;</span>
<span class="n">abi</span> <span class="o">=</span> <span class="s1">&#39;[{&quot;inputs&quot;:[{&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;account&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;internalType&quot;:&quot;address&quot;,&quot;name&quot;:&quot;minter_&quot;,&quot;type&quot;:&quot;address&quot;},...&#39;</span>
<span class="n">contract_instance</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="n">address</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">)</span>

<span class="c1"># read state:</span>
<span class="n">contract_instance</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">storedValue</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="c1"># 42</span>

<span class="c1"># update state:</span>
<span class="n">tx_hash</span> <span class="o">=</span> <span class="n">contract_instance</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">updateValue</span><span class="p">(</span><span class="mi">43</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="contract-deployment-example">
<span id="contract-example"></span><h4>Contract Deployment Example<a class="headerlink" href="#contract-deployment-example" title="Link to this heading">ÔÉÅ</a></h4>
<p>To run this example, you will need to install a few extra features:</p>
<ul class="simple">
<li><p>The sandbox node provided by eth-tester. You can install it with:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span><span class="s2">&quot;web3[tester]&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">py-solc-x</span></code>. This is the supported route to installing the solidity compiler <code class="docutils literal notranslate"><span class="pre">solc</span></code>. You can install it with:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>py-solc-x
</pre></div>
</div>
<p>After <code class="docutils literal notranslate"><span class="pre">py-solc-x</span></code> is installed, you will need to install a version of <code class="docutils literal notranslate"><span class="pre">solc</span></code>. You can install the latest version via a new REPL with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">solcx</span> <span class="kn">import</span> <span class="n">install_solc</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">install_solc</span><span class="p">(</span><span class="n">version</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You should now be set up to compile and deploy a contract.</p>
<p>The following example runs through these steps:</p>
<ol class="arabic simple">
<li><p>Compile Solidity contract into bytecode and an ABI</p></li>
<li><p>Initialize a Contract instance</p></li>
<li><p>Deploy the contract using the Contract instance to initiate a transaction</p></li>
<li><p>Interact with the contract functions using the Contract instance</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">solcx</span> <span class="kn">import</span> <span class="n">compile_source</span>

<span class="go"># Solidity source code</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">compiled_sol</span> <span class="o">=</span> <span class="n">compile_source</span><span class="p">(</span>
<span class="gp">... </span><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="gp">... </span><span class="sd">    pragma solidity &gt;0.5.0;</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="sd">    contract Greeter {</span>
<span class="gp">... </span><span class="sd">        string public greeting;</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="sd">        constructor() public {</span>
<span class="gp">... </span><span class="sd">            greeting = &#39;Hello&#39;;</span>
<span class="gp">... </span><span class="sd">        }</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="sd">        function setGreeting(string memory _greeting) public {</span>
<span class="gp">... </span><span class="sd">            greeting = _greeting;</span>
<span class="gp">... </span><span class="sd">        }</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="sd">        function greet() view public returns (string memory) {</span>
<span class="gp">... </span><span class="sd">            return greeting;</span>
<span class="gp">... </span><span class="sd">        }</span>
<span class="gp">... </span><span class="sd">    }</span>
<span class="gp">... </span><span class="sd">    &#39;&#39;&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">output_values</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;abi&#39;</span><span class="p">,</span> <span class="s1">&#39;bin&#39;</span><span class="p">]</span>
<span class="gp">... </span><span class="p">)</span>

<span class="go"># retrieve the contract interface</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract_id</span><span class="p">,</span> <span class="n">contract_interface</span> <span class="o">=</span> <span class="n">compiled_sol</span><span class="o">.</span><span class="n">popitem</span><span class="p">()</span>

<span class="go"># get bytecode / bin</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bytecode</span> <span class="o">=</span> <span class="n">contract_interface</span><span class="p">[</span><span class="s1">&#39;bin&#39;</span><span class="p">]</span>

<span class="go"># get abi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abi</span> <span class="o">=</span> <span class="n">contract_interface</span><span class="p">[</span><span class="s1">&#39;abi&#39;</span><span class="p">]</span>

<span class="go"># web3.py instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">EthereumTesterProvider</span><span class="p">())</span>

<span class="go"># set pre-funded account as sender</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">default_account</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Greeter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">,</span> <span class="n">bytecode</span><span class="o">=</span><span class="n">bytecode</span><span class="p">)</span>

<span class="go"># Submit the transaction that deploys the contract</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">Greeter</span><span class="o">.</span><span class="n">constructor</span><span class="p">()</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>

<span class="go"># Wait for the transaction to be mined, and get the transaction receipt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">greeter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">address</span><span class="o">=</span><span class="n">tx_receipt</span><span class="o">.</span><span class="n">contractAddress</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">abi</span><span class="o">=</span><span class="n">abi</span>
<span class="gp">... </span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">greeter</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">greet</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">&#39;Hello&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">greeter</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">setGreeting</span><span class="p">(</span><span class="s1">&#39;Nihao&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">greeter</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">greet</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">&#39;Nihao&#39;</span>
</pre></div>
</div>
</section>
<section id="contract-factories">
<h4>Contract Factories<a class="headerlink" href="#contract-factories" title="Link to this heading">ÔÉÅ</a></h4>
<p>These factories are not intended to be initialized directly.
Instead, create contract objects using the <a class="reference internal" href="index.html#web3.eth.Eth.contract" title="web3.eth.Eth.contract"><code class="xref py py-meth docutils literal notranslate"><span class="pre">w3.eth.contract()</span></code></a>
method. By default, the contract factory is <a class="reference internal" href="#web3.contract.Contract" title="web3.contract.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">Contract</span></code></a>.</p>
<dl class="py class">
<dt class="sig sig-object py" id="web3.contract.Contract">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.contract.</span></span><span class="sig-name descname"><span class="pre">Contract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Contract provides a default interface for deploying and interacting with
Ethereum smart contracts.</p>
<p>The address parameter can be a hex address or an ENS name, like <code class="docutils literal notranslate"><span class="pre">mycontract.eth</span></code>.</p>
</dd></dl>

</section>
<section id="properties">
<h4>Properties<a class="headerlink" href="#properties" title="Link to this heading">ÔÉÅ</a></h4>
<p>Each Contract Factory exposes the following properties.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="web3.contract.Contract.address">
<span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">address</span></span><a class="headerlink" href="#web3.contract.Contract.address" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The hexadecimal encoded 20-byte address of the contract, or an ENS name.
May be <code class="docutils literal notranslate"><span class="pre">None</span></code> if not provided during factory creation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.contract.Contract.abi">
<span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">abi</span></span><a class="headerlink" href="#web3.contract.Contract.abi" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The contract <code class="docutils literal notranslate"><span class="pre">abi</span></code>, or Application Binary Interface, specifies how a contract can
be interacted with. Without an <code class="docutils literal notranslate"><span class="pre">abi</span></code>, the contract cannot be decoded. The <code class="docutils literal notranslate"><span class="pre">abi</span></code>
enables the Contract instance to expose functions and events as object properties.</p>
<p>For further details, see the <a class="reference external" href="https://docs.soliditylang.org/en/develop/abi-spec.html">Solidity ABI specification</a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.contract.Contract.bytecode">
<span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">bytecode</span></span><a class="headerlink" href="#web3.contract.Contract.bytecode" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The contract bytecode string.  May be <code class="docutils literal notranslate"><span class="pre">None</span></code> if not provided during
factory creation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.contract.Contract.bytecode_runtime">
<span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">bytecode_runtime</span></span><a class="headerlink" href="#web3.contract.Contract.bytecode_runtime" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The runtime part of the contract bytecode string.  May be <code class="docutils literal notranslate"><span class="pre">None</span></code> if not
provided during factory creation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.contract.Contract.decode_tuples">
<span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">decode_tuples</span></span><a class="headerlink" href="#web3.contract.Contract.decode_tuples" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>If a Tuple/Struct is returned by a contract function, this flag defines whether
to apply the field names from the ABI to the returned data.
If False, the returned value will be a normal Python <code class="docutils literal notranslate"><span class="pre">Tuple</span></code>. If True, the returned
value will be a Python <code class="docutils literal notranslate"><span class="pre">NamedTuple</span></code> of the class <code class="docutils literal notranslate"><span class="pre">ABIDecodedNamedTuple</span></code>.</p>
<p>NamedTuples have some restrictions regarding field names.
web3.py sets <code class="docutils literal notranslate"><span class="pre">NamedTuple</span></code>‚Äôs <code class="docutils literal notranslate"><span class="pre">rename=True</span></code>, so disallowed field names may be
different than expected. See the <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.namedtuple">Python docs</a>
for more information.</p>
<p>Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code> if not provided during factory creation.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.contract.Contract.functions">
<span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">functions</span></span><a class="headerlink" href="#web3.contract.Contract.functions" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This provides access to contract functions as attributes.  For example:
<code class="docutils literal notranslate"><span class="pre">myContract.functions.MyMethod()</span></code>.  The exposed contract functions are classes of the
type <a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.contract.Contract.events">
<span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">events</span></span><a class="headerlink" href="#web3.contract.Contract.events" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This provides access to contract events as attributes.  For example:
<code class="docutils literal notranslate"><span class="pre">myContract.events.MyEvent()</span></code>.  The exposed contract events are classes of the
type <code class="xref py py-class docutils literal notranslate"><span class="pre">ContractEvent</span></code>.</p>
</dd></dl>

</section>
<section id="methods">
<h4>Methods<a class="headerlink" href="#methods" title="Link to this heading">ÔÉÅ</a></h4>
<p>Method doctests use the following ABI and bytecode.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bytecode</span> <span class="o">=</span> <span class="s1">&#39;6060604052341561000c57fe5b604051602080610acb833981016040528080519060200190919050505b620f42408114151561003b5760006000fd5b670de0b6b3a76400008102600281905550600254600060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b505b610a27806100a46000396000f30060606040523615610097576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde0314610099578063095ea7b31461013257806318160ddd1461018957806323b872dd146101af578063313ce5671461022557806370a082311461025157806395d89b411461029b578063a9059cbb14610334578063dd62ed3e1461038b575bfe5b34156100a157fe5b6100a96103f4565b60405180806020018281038252838181518152602001915080519060200190808383600083146100f8575b8051825260208311156100f8576020820191506020810190506020830392506100d4565b505050905090810190601f1680156101245780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561013a57fe5b61016f600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061042e565b604051808215151515815260200191505060405180910390f35b341561019157fe5b610199610521565b6040518082815260200191505060405180910390f35b34156101b757fe5b61020b600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610527565b604051808215151515815260200191505060405180910390f35b341561022d57fe5b610235610791565b604051808260ff1660ff16815260200191505060405180910390f35b341561025957fe5b610285600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610796565b6040518082815260200191505060405180910390f35b34156102a357fe5b6102ab6107e0565b60405180806020018281038252838181518152602001915080519060200190808383600083146102fa575b8051825260208311156102fa576020820191506020810190506020830392506102d6565b505050905090810190601f1680156103265780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561033c57fe5b610371600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061081a565b604051808215151515815260200191505060405180910390f35b341561039357fe5b6103de600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610973565b6040518082815260200191505060405180910390f35b604060405190810160405280600981526020017f54657374546f6b656e000000000000000000000000000000000000000000000081525081565b600081600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a3600190505b92915050565b60025481565b600081600060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410806105f1575081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054105b156105fc5760006000fd5b81600060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254019250508190555081600060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190505b9392505050565b601281565b6000600060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b604060405190810160405280600481526020017f544553540000000000000000000000000000000000000000000000000000000081525081565b600081600060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410156108695760006000fd5b81600060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190505b92915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b929150505600a165627a7a723058205071371ee2a4a1be3c96e77d939cdc26161a256fdd638efc08bd33dfc65d3b850029&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abi</span> <span class="o">=</span> <span class="s1">&#39;[{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;name&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;payable&quot;:false,&quot;type&quot;:&quot;function&quot;,&quot;stateMutability&quot;:&quot;view&quot;},{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;_spender&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;name&quot;:&quot;_value&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;approve&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;}],&quot;payable&quot;:false,&quot;type&quot;:&quot;function&quot;,&quot;stateMutability&quot;:&quot;nonpayable&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;totalSupply&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;payable&quot;:false,&quot;type&quot;:&quot;function&quot;,&quot;stateMutability&quot;:&quot;view&quot;},{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;_from&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;name&quot;:&quot;_to&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;name&quot;:&quot;_value&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;transferFrom&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;}],&quot;payable&quot;:false,&quot;type&quot;:&quot;function&quot;,&quot;stateMutability&quot;:&quot;nonpayable&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;decimals&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint8&quot;}],&quot;payable&quot;:false,&quot;type&quot;:&quot;function&quot;,&quot;stateMutability&quot;:&quot;view&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[{&quot;name&quot;:&quot;_owner&quot;,&quot;type&quot;:&quot;address&quot;}],&quot;name&quot;:&quot;balanceOf&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;payable&quot;:false,&quot;type&quot;:&quot;function&quot;,&quot;stateMutability&quot;:&quot;view&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;symbol&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;payable&quot;:false,&quot;type&quot;:&quot;function&quot;,&quot;stateMutability&quot;:&quot;view&quot;},{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;_to&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;name&quot;:&quot;_value&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;transfer&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;}],&quot;payable&quot;:false,&quot;type&quot;:&quot;function&quot;,&quot;stateMutability&quot;:&quot;nonpayable&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[{&quot;name&quot;:&quot;_owner&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;name&quot;:&quot;_spender&quot;,&quot;type&quot;:&quot;address&quot;}],&quot;name&quot;:&quot;allowance&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;payable&quot;:false,&quot;type&quot;:&quot;function&quot;,&quot;stateMutability&quot;:&quot;view&quot;},{&quot;inputs&quot;:[{&quot;name&quot;:&quot;_totalSupply&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;payable&quot;:false,&quot;type&quot;:&quot;constructor&quot;,&quot;stateMutability&quot;:&quot;nonpayable&quot;},{&quot;anonymous&quot;:false,&quot;inputs&quot;:[{&quot;indexed&quot;:true,&quot;name&quot;:&quot;from&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;indexed&quot;:true,&quot;name&quot;:&quot;to&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;indexed&quot;:false,&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;Transfer&quot;,&quot;type&quot;:&quot;event&quot;},{&quot;anonymous&quot;:false,&quot;inputs&quot;:[{&quot;indexed&quot;:true,&quot;name&quot;:&quot;owner&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;indexed&quot;:true,&quot;name&quot;:&quot;spender&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;indexed&quot;:false,&quot;name&quot;:&quot;value&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;Approval&quot;,&quot;type&quot;:&quot;event&quot;}]&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">,</span> <span class="n">bytecode</span><span class="o">=</span><span class="n">bytecode</span><span class="p">)</span>
</pre></div>
</div>
<p>Each Contract Factory exposes the following methods.</p>
<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.constructor">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">constructor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs).transact(transaction=None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.constructor" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Construct and deploy a contract by sending a new public transaction.</p>
<p>If provided <code class="docutils literal notranslate"><span class="pre">transaction</span></code> should be a dictionary conforming to the
<code class="docutils literal notranslate"><span class="pre">web3.eth.send_transaction(transaction)</span></code> method.  This value may not
contain the keys <code class="docutils literal notranslate"><span class="pre">data</span></code> or <code class="docutils literal notranslate"><span class="pre">to</span></code>.</p>
<p>If the contract takes constructor parameters they should be provided as
positional arguments or keyword arguments.</p>
<p>If any of the arguments specified in the ABI are an <code class="docutils literal notranslate"><span class="pre">address</span></code> type, they
will accept ENS names.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">gas</span></code> value is not provided, then the <code class="docutils literal notranslate"><span class="pre">gas</span></code> value for the
deployment transaction will be created using the <code class="docutils literal notranslate"><span class="pre">web3.eth.estimate_gas()</span></code>
method.</p>
<p>Returns the transaction hash for the deploy transaction.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deploy_txn</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">constructor</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">({</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;gas&#39;</span><span class="p">:</span> <span class="mi">899000</span><span class="p">,</span> <span class="s1">&#39;gasPrice&#39;</span><span class="p">:</span> <span class="n">Web3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;gwei&#39;</span><span class="p">)})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txn_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_receipt</span><span class="p">(</span><span class="n">deploy_txn</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txn_receipt</span><span class="p">[</span><span class="s1">&#39;contractAddress&#39;</span><span class="p">]</span>
<span class="go">&#39;0xF2E246BB76DF876Cef8b38ae84130F4F55De395b&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">constructor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs).estimate_gas(transaction=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier=None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Estimate gas for constructing and deploying the contract.</p>
<p>This method behaves the same as the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">Contract.constructor(*args,</span> <span class="pre">**kwargs).transact()</span></code> method,
with transaction details being passed into the end portion of the
function call, and function arguments being passed into the first portion.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> parameter is passed directly to the call at the end portion
of the function call.</p>
<p>Returns the amount of gas consumed which can be used as a gas estimate for
executing this transaction publicly.</p>
<p>Returns the gas needed to deploy the contract.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">constructor</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span><span class="o">.</span><span class="n">estimate_gas</span><span class="p">()</span>
<span class="go">664971</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">constructor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs).build_transaction(transaction=None</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Construct the contract deploy transaction bytecode data.</p>
<p>If the contract takes constructor parameters they should be provided as
positional arguments or keyword arguments.</p>
<p>If any of the <code class="docutils literal notranslate"><span class="pre">args</span></code> specified in the ABI are an <code class="docutils literal notranslate"><span class="pre">address</span></code> type, they
will accept ENS names.</p>
<p>Returns the transaction dictionary that you can pass to send_transaction method.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">transaction</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>  <span class="s1">&#39;gas&#39;</span><span class="p">:</span> <span class="mi">664971</span><span class="p">,</span>
<span class="gp">... </span>  <span class="s1">&#39;chainId&#39;</span><span class="p">:</span> <span class="mi">131277322940537</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract_data</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">constructor</span><span class="p">(</span><span class="mi">1000000</span><span class="p">)</span><span class="o">.</span><span class="n">build_transaction</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">(</span><span class="n">contract_data</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0x40c51804800dee88e14e69826cfe51bc5f25f61935331e8aa6d8d7771fb36350&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method" id="contract-create-filter">
<dt class="sig sig-object py" id="web3.contract.Contract.events.your_event_name.create_filter">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.events.your_event_name.</span></span><span class="sig-name descname"><span class="pre">create_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">from_block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_block</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'latest'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topics</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.events.your_event_name.create_filter" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Creates a new event filter, an instance of <a class="reference internal" href="index.html#web3.utils.filters.LogFilter" title="web3.utils.filters.LogFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">web3.utils.filters.LogFilter</span></code></a>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from_block</span></code> is a mandatory field. Defines the starting block (exclusive) filter block range. It can be either the starting block number, or ‚Äòlatest‚Äô for the last mined block, or ‚Äòpending‚Äô for unmined transactions. In the case of <code class="docutils literal notranslate"><span class="pre">from_block</span></code>, ‚Äòlatest‚Äô and ‚Äòpending‚Äô set the ‚Äòlatest‚Äô or ‚Äòpending‚Äô block as a static value for the starting filter block.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to_block</span></code> optional. Defaults to ‚Äòlatest‚Äô. Defines the ending block (inclusive) in the filter block range.  Special values ‚Äòlatest‚Äô and ‚Äòpending‚Äô set a dynamic range that always includes the ‚Äòlatest‚Äô or ‚Äòpending‚Äô blocks for the filter‚Äôs upper block range.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> optional. Defaults to the contract address. The filter matches the event logs emanating from <code class="docutils literal notranslate"><span class="pre">address</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">argument_filters</span></code>, optional. Expects a dictionary of argument names and values. When provided event logs are filtered for the event argument values. Event arguments can be both indexed or unindexed. Indexed values will be translated to their corresponding topic arguments. Unindexed arguments will be filtered using a regular expression.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">topics</span></code> optional, accepts the standard JSON-RPC topics argument.  See the JSON-RPC documentation for <a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_newfilter">eth_newFilter</a> more information on the <code class="docutils literal notranslate"><span class="pre">topics</span></code> parameters.</p></li>
</ul>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">filter</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Transfer</span><span class="o">.</span><span class="n">create_filter</span><span class="p">(</span><span class="n">from_block</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.events.your_event_name.build_filter">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.events.your_event_name.</span></span><span class="sig-name descname"><span class="pre">build_filter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.events.your_event_name.build_filter" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Creates a EventFilterBuilder instance with the event abi, and the contract address if called from a deployed contract instance.  The EventFilterBuilder provides a convenient way to construct the filter parameters with value checking against the event abi. It allows for defining multiple match values or of single values through the match_any and match_single methods.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filter_builder</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Transfer</span><span class="o">.</span><span class="n">build_filter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_builder</span><span class="o">.</span><span class="n">from_block</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_builder</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;from&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">match_any</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_builder</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;to&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">match_single</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_builder</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">match_single</span><span class="p">(</span><span class="mi">10000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_instance</span> <span class="o">=</span> <span class="n">filter_builder</span><span class="o">.</span><span class="n">deploy</span><span class="p">(</span><span class="n">w3</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">deploy</span></code> method returns a <a class="reference internal" href="index.html#web3.utils.filters.LogFilter" title="web3.utils.filters.LogFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">web3.utils.filters.LogFilter</span></code></a> instance from the filter parameters generated by the filter builder. Defining multiple match values for array arguments can be accomplished easily with the filter builder:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filter_builder</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Transfer</span><span class="o">.</span><span class="n">build_filter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_builder</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="s1">&#39;to&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">match_any</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>The filter builder blocks already defined filter parameters from being changed.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">filter_builder</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Transfer</span><span class="o">.</span><span class="n">build_filter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_builder</span><span class="o">.</span><span class="n">from_block</span> <span class="o">=</span> <span class="s2">&quot;latest&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filter_builder</span><span class="o">.</span><span class="n">from_block</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="gr">web3.exceptions.Web3ValueError</span>: <span class="n">from_block is already set to &#39;latest&#39;. Resetting filter parameters is not permitted</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.encode_abi">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">encode_abi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abi_element_identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">args</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kwargs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.encode_abi" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Encodes the arguments using the Ethereum ABI for the contract function that
matches the given <code class="docutils literal notranslate"><span class="pre">abi_element_identifier</span></code> and arguments <code class="docutils literal notranslate"><span class="pre">args</span></code>. The <code class="docutils literal notranslate"><span class="pre">data</span></code> parameter
defaults to the function selector.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">encode_abi</span><span class="p">(</span><span class="s2">&quot;approve&quot;</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">[</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">])</span>
<span class="go">&#39;0x095ea7b30000000000000000000000007e5f4552091a69125d5dfcb7b8c2659029395bdf000000000000000000000000000000000000000000000000000000000000000a&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.all_events">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">all_events</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.all_events" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns a list of all the events present in a Contract where every event is
an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">ContractEvent</span></code>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">all_events</span><span class="p">()</span>
<span class="go">[&lt;Event Transfer(address,address,uint256)&gt;, &lt;Event Approval(address,address,uint256)&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.get_event_by_signature">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">get_event_by_signature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signature</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.get_event_by_signature" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for a distinct event with matching signature. Returns an instance of
<code class="xref py py-class docutils literal notranslate"><span class="pre">ContractEvent</span></code> upon finding a match. Raises <code class="docutils literal notranslate"><span class="pre">Web3ValueError</span></code> if no
match is found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_event_by_signature</span><span class="p">(</span><span class="s1">&#39;Transfer(address,address,uint256)&#39;</span><span class="p">)</span>
<span class="go">&lt;Event Transfer(address,address,uint256)&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.find_events_by_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">find_events_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.find_events_by_name" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for all events matching the provided name. Returns a list of matching
events where every event is an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">ContractEvent</span></code>. Returns an
empty list when no match is found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">find_events_by_name</span><span class="p">(</span><span class="s1">&#39;Transfer&#39;</span><span class="p">)</span>
<span class="go">[&lt;Event Transfer(address,address,uint256)&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.get_event_by_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">get_event_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.get_event_by_name" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for a distinct event matching the name. Returns an instance of
<code class="xref py py-class docutils literal notranslate"><span class="pre">ContractEvent</span></code> upon finding a match. Raises <code class="docutils literal notranslate"><span class="pre">Web3ValueError</span></code> if no
match is found or if multiple matches are found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_event_by_name</span><span class="p">(</span><span class="s1">&#39;Approval&#39;</span><span class="p">)</span>
<span class="go">&lt;Event Approval(address,address,uint256)&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.find_events_by_selector">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">find_events_by_selector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selector</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.find_events_by_selector" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for all events matching the provided selector. Returns a list of matching
events where every event is an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">ContractEvent</span></code>. Returns an
empty list when no match is found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">find_events_by_selector</span><span class="p">(</span><span class="s1">&#39;0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925&#39;</span><span class="p">)</span>
<span class="go">[&lt;Event Approval(address,address,uint256)&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.get_event_by_selector">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">get_event_by_selector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selector</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.get_event_by_selector" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for a distinct event with matching selector.
The selector can be a hexadecimal string, bytes or int.
Returns an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">ContractEvent</span></code> upon finding a match.
Raises <code class="docutils literal notranslate"><span class="pre">Web3ValueError</span></code> if no match is found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_event_by_selector</span><span class="p">(</span><span class="s1">&#39;0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925&#39;</span><span class="p">)</span>
<span class="go">&lt;Event Approval(address,address,uint256)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_event_by_selector</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x8c</span><span class="s1">[</span><span class="se">\xe1\xe5\xeb\xec</span><span class="s1">}[</span><span class="se">\xd1</span><span class="s1">OqB}</span><span class="se">\x1e\x84\xf3\xdd\x03\x14\xc0\xf7\xb2</span><span class="s1">)</span><span class="se">\x1e</span><span class="s1">[ </span><span class="se">\n\xc8\xc7\xc3\xb9</span><span class="s1">%&#39;</span><span class="p">)</span>
<span class="go">&lt;Event Approval(address,address,uint256)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_event_by_selector</span><span class="p">(</span><span class="mh">0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925</span><span class="p">)</span>
<span class="go">&lt;Event Approval(address,address,uint256)&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.find_events_by_topic">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">find_events_by_topic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.find_events_by_topic" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for all events matching the provided topic. Returns a list of matching
events where every event is an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">ContractEvent</span></code>. Returns an
empty list when no match is found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">find_events_by_topic</span><span class="p">(</span><span class="s1">&#39;0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925&#39;</span><span class="p">)</span>
<span class="go">[&lt;Event Approval(address,address,uint256)&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.get_event_by_topic">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">get_event_by_topic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.get_event_by_topic" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for a distinct event with matching topic.
The topic is a hexadecimal string.
Returns an instance of <code class="xref py py-class docutils literal notranslate"><span class="pre">ContractEvent</span></code> upon finding a match.
Raises <code class="docutils literal notranslate"><span class="pre">Web3ValueError</span></code> if no match is found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_event_by_topic</span><span class="p">(</span><span class="s1">&#39;0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925&#39;</span><span class="p">)</span>
<span class="go">&lt;Event Approval(address,address,uint256)&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.all_functions">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">all_functions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.all_functions" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns a list of all the functions present in a Contract where every function is
an instance of <a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">all_functions</span><span class="p">()</span>
<span class="go">[&lt;Function name()&gt;, &lt;Function approve(address,uint256)&gt;, &lt;Function totalSupply()&gt;, &lt;Function transferFrom(address,address,uint256)&gt;, &lt;Function decimals()&gt;, &lt;Function balanceOf(address)&gt;, &lt;Function symbol()&gt;, &lt;Function transfer(address,uint256)&gt;, &lt;Function allowance(address,address)&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.get_function_by_signature">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">get_function_by_signature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">signature</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.get_function_by_signature" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for a distinct function with matching signature. Returns an instance of
<a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a> upon finding a match. Raises <code class="docutils literal notranslate"><span class="pre">Web3ValueError</span></code> if no
match is found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_function_by_signature</span><span class="p">(</span><span class="s1">&#39;approve(address,uint256)&#39;</span><span class="p">)</span>
<span class="go">&lt;Function approve(address,uint256)&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.find_functions_by_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">find_functions_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.find_functions_by_name" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for all functions matching the name. Returns a list of matching functions
where every function is an instance of <a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a>. Returns an empty
list when no match is found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">find_functions_by_name</span><span class="p">(</span><span class="s1">&#39;transferFrom&#39;</span><span class="p">)</span>
<span class="go">[&lt;Function transferFrom(address,address,uint256)&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.get_function_by_name">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">get_function_by_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.get_function_by_name" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for a distinct function with matching name. Returns an instance of
<a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a> upon finding a match. Raises <code class="docutils literal notranslate"><span class="pre">Web3ValueError</span></code> if no
match is found or if multiple matches are found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_function_by_name</span><span class="p">(</span><span class="s1">&#39;decimals&#39;</span><span class="p">)</span>
<span class="go">&lt;Function decimals()&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.get_function_by_selector">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">get_function_by_selector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">selector</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.get_function_by_selector" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for a distinct function with matching selector.
The selector can be a hexadecimal string, bytes or int.
Returns an instance of <a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a> upon finding a match.
Raises <code class="docutils literal notranslate"><span class="pre">Web3ValueError</span></code> if no match is found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_function_by_selector</span><span class="p">(</span><span class="s1">&#39;0xdd62ed3e&#39;</span><span class="p">)</span>
<span class="go">&lt;Function allowance(address,address)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_function_by_selector</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\xdd</span><span class="s1">b</span><span class="se">\xed</span><span class="s1">&gt;&#39;</span><span class="p">)</span>
<span class="go">&lt;Function allowance(address,address)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_function_by_selector</span><span class="p">(</span><span class="mh">0xdd62ed3e</span><span class="p">)</span>
<span class="go">&lt;Function allowance(address,address)&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.find_functions_by_args">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">find_functions_by_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.find_functions_by_args" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for all function with matching args. Returns a list of matching functions
where every function is an instance of <a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a>. Returns an empty
list when no match is found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">find_functions_by_args</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10000</span><span class="p">)</span>
<span class="go">[&lt;Function approve(address,uint256)&gt;, &lt;Function transfer(address,uint256)&gt;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.get_function_by_args">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">get_function_by_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.get_function_by_args" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Searches for a distinct function with matching args. Returns an instance of
<a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a> upon finding a match. Raises <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> if no
match is found or if multiple matches are found.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">get_function_by_args</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">10000</span><span class="p">)</span>
<span class="go">&lt;Function transferFrom(address,address,uint256)&gt;</span>
</pre></div>
</div>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Contract</span></code> methods <code class="docutils literal notranslate"><span class="pre">all_functions</span></code>, <code class="docutils literal notranslate"><span class="pre">get_function_by_signature</span></code>, <code class="docutils literal notranslate"><span class="pre">find_functions_by_name</span></code>,
<code class="docutils literal notranslate"><span class="pre">get_function_by_name</span></code>, <code class="docutils literal notranslate"><span class="pre">get_function_by_selector</span></code>, <code class="docutils literal notranslate"><span class="pre">find_functions_by_args</span></code> and
<code class="docutils literal notranslate"><span class="pre">get_function_by_args</span></code> can only be used when abi is provided to the contract.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>web3.py rejects the initialization of contracts that have more than one function
with the same selector or signature.
eg. <code class="docutils literal notranslate"><span class="pre">blockHashAddendsInexpansible(uint256)</span></code> and <code class="docutils literal notranslate"><span class="pre">blockHashAskewLimitary(uint256)</span></code> have the
same selector value equal to <code class="docutils literal notranslate"><span class="pre">0x00000000</span></code>. A contract containing both of these functions
will be rejected.</p>
</div>
</section>
<section id="disabling-strict-checks-for-bytes-types">
<span id="disable-strict-byte-check"></span><h4>Disabling Strict Checks for Bytes Types<a class="headerlink" href="#disabling-strict-checks-for-bytes-types" title="Link to this heading">ÔÉÅ</a></h4>
<p>By default, web3 is strict when it comes to hex and bytes values, as of <code class="docutils literal notranslate"><span class="pre">v6</span></code>.
If an abi specifies a byte size, but the value that gets passed in is not the specified
size, web3 will invalidate the value. For example, if an abi specifies a type of
<code class="docutils literal notranslate"><span class="pre">bytes4</span></code>, web3 will invalidate the following values:</p>
<table class="docutils align-default" id="id7">
<caption><span class="caption-text">Invalid byte and hex strings with strict (default) bytes4 type checking</span><a class="headerlink" href="#id7" title="Link to this table">ÔÉÅ</a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Input</p></th>
<th class="head"><p>Reason</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">''</span></code></p></td>
<td><p>Needs to be prefixed with a ‚Äú0x‚Äù to be interpreted as an empty hex string</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">2</span></code></p></td>
<td><p>Wrong type</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'ah'</span></code></p></td>
<td><p>String is not valid hex</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'1234'</span></code></p></td>
<td><p>Needs to either be a bytestring (b‚Äô1234‚Äô) or be a hex value of the right size, prefixed with 0x (in this case: ‚Äò0x31323334‚Äô)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">b''</span></code></p></td>
<td><p>Needs to have exactly 4 bytes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">b'ab'</span></code></p></td>
<td><p>Needs to have exactly 4 bytes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'0xab'</span></code></p></td>
<td><p>Needs to have exactly 4 bytes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'0x6162636464'</span></code></p></td>
<td><p>Needs to have exactly 4 bytes</p></td>
</tr>
</tbody>
</table>
<p>However, you may want to be less strict with acceptable values for bytes types.
This may prove useful if you trust that values coming through are what they are
meant to be with respect to the ABI. In this case, the automatic padding might be
convenient for inferred types. For this, you can set the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">w3.strict_bytes_type_checking()</span></code> flag to <code class="docutils literal notranslate"><span class="pre">False</span></code>, which is available on the
Web3 instance. A Web3 instance which has this flag set to <code class="docutils literal notranslate"><span class="pre">False</span></code> will have a less
strict set of rules on which values are accepted. A <code class="docutils literal notranslate"><span class="pre">bytes</span></code> type will allow values as
a hex string, a bytestring, or a regular Python string that can be decoded as a hex.
0x-prefixed hex strings are also not required.</p>
<blockquote>
<div><ul class="simple">
<li><p>A Python string that is not prefixed with <code class="docutils literal notranslate"><span class="pre">0x</span></code> is valid.</p></li>
<li><p>A bytestring whose length is less than the specified byte size is valid.</p></li>
</ul>
</div></blockquote>
<table class="docutils align-default" id="id8">
<caption><span class="caption-text">Valid byte and hex strings for a non-strict bytes4 type</span><a class="headerlink" href="#id8" title="Link to this table">ÔÉÅ</a></caption>
<colgroup>
<col style="width: 25.0%" />
<col style="width: 75.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Input</p></th>
<th class="head"><p>Normalizes to</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">''</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b'\x00\x00\x00\x00'</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'0x'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b'\x00\x00\x00\x00'</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">b''</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b'\x00\x00\x00\x00'</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">b'ab'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b'ab\x00\x00'</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'0xab'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b'\xab\x00\x00\x00'</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'1234'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b'\x124\x00\x00'</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'0x61626364'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b'abcd'</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'1234'</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">b'1234'</span></code></p></td>
</tr>
</tbody>
</table>
<p>Taking the following contract code as an example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1">#  pragma solidity &gt;=0.4.22 &lt;0.6.0;</span>
<span class="gp">...</span>
<span class="gp">... </span><span class="c1">#   contract ArraysContract {</span>
<span class="gp">... </span><span class="c1">#      bytes2[] public bytes2Value;</span>

<span class="go">... #      constructor(bytes2[] memory _bytes2Value) public {</span>
<span class="go">... #          bytes2Value = _bytes2Value;</span>
<span class="go">... #      }</span>

<span class="go">... #      function setBytes2Value(bytes2[] memory _bytes2Value) public {</span>
<span class="go">... #          bytes2Value = _bytes2Value;</span>
<span class="go">... #      }</span>

<span class="go">... #      function getBytes2Value() public view returns (bytes2[] memory) {</span>
<span class="go">... #          return bytes2Value;</span>
<span class="go">... #      }</span>
<span class="go">... #  }</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># abi = &quot;...&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># bytecode = &quot;6080...&quot;</span>
</pre></div>
</div>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">arrays_contract_instance</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">,</span> <span class="n">bytecode</span><span class="o">=</span><span class="n">bytecode</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">arrays_contract_instance</span><span class="o">.</span><span class="n">constructor</span><span class="p">([</span><span class="sa">b</span><span class="s1">&#39;bb&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arrays_contract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">address</span><span class="o">=</span><span class="n">tx_receipt</span><span class="o">.</span><span class="n">contractAddress</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">abi</span><span class="o">=</span><span class="n">abi</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arrays_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">getBytes2Value</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">[b&#39;bb&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># set value with appropriate byte size</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arrays_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">setBytes2Value</span><span class="p">([</span><span class="sa">b</span><span class="s1">&#39;aa&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">transact</span><span class="p">({</span><span class="s1">&#39;gas&#39;</span><span class="p">:</span> <span class="mi">420000</span><span class="p">,</span> <span class="s2">&quot;maxPriorityFeePerGas&quot;</span><span class="p">:</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">,</span> <span class="s2">&quot;maxFeePerGas&quot;</span><span class="p">:</span> <span class="mi">10</span> <span class="o">**</span> <span class="mi">9</span><span class="p">})</span>
<span class="go">HexBytes(&#39;0xcb95151142ea56dbf2753d70388aef202a7bb5a1e323d448bc19f1d2e1fe3dc9&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># check value</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arrays_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">getBytes2Value</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">[b&#39;aa&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># trying to set value without appropriate size (bytes2) is not valid</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arrays_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">setBytes2Value</span><span class="p">([</span><span class="sa">b</span><span class="s1">&#39;b&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">   </span><span class="c">...</span>
<span class="gr">web3.exceptions.MismatchedABI</span><span class="w">:</span>
<span class="x">Could not identify the intended function with name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># check value is still b&#39;aa&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arrays_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">getBytes2Value</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">[b&#39;aa&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># disabling strict byte checking...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span> <span class="o">=</span> <span class="kc">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">arrays_contract_instance</span><span class="o">.</span><span class="n">constructor</span><span class="p">([</span><span class="sa">b</span><span class="s1">&#39;b&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arrays_contract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">address</span><span class="o">=</span><span class="n">tx_receipt</span><span class="o">.</span><span class="n">contractAddress</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">abi</span><span class="o">=</span><span class="n">abi</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># check value is zero-padded... i.e. b&#39;b\x00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">arrays_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">getBytes2Value</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">[b&#39;b\x00&#39;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># set the flag back to True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span> <span class="o">=</span> <span class="kc">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">arrays_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">setBytes2Value</span><span class="p">([</span><span class="sa">b</span><span class="s1">&#39;a&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="gt">Traceback (most recent call last):</span>
<span class="w">   </span><span class="c">...</span>
<span class="gr">web3.exceptions.MismatchedABI</span><span class="w">:</span>
<span class="x">Could not identify the intended function with name</span>
</pre></div>
</div>
</section>
<section id="contract-functions">
<span id="id2"></span><h4>Contract Functions<a class="headerlink" href="#contract-functions" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="web3.contract.ContractFunction">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.contract.</span></span><span class="sig-name descname"><span class="pre">ContractFunction</span></span><a class="headerlink" href="#web3.contract.ContractFunction" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p>The named functions exposed through the <a class="reference internal" href="#web3.contract.Contract.functions" title="web3.contract.Contract.functions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.functions</span></code></a> property are
of the ContractFunction type. This class is not to be used directly,
but instead through <a class="reference internal" href="#web3.contract.Contract.functions" title="web3.contract.Contract.functions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.functions</span></code></a>.</p>
<p>For example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myContract</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="n">contract_address</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">contract_abi</span><span class="p">)</span>
<span class="n">twentyone</span> <span class="o">=</span> <span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">multiply7</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>If you have the function name in a variable, you might prefer this alternative:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">func_to_call</span> <span class="o">=</span> <span class="s1">&#39;multiply7&#39;</span>
<span class="n">contract_func</span> <span class="o">=</span> <span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="p">[</span><span class="n">func_to_call</span><span class="p">]</span>
<span class="n">twentyone</span> <span class="o">=</span> <span class="n">contract_func</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>You can also interact with contract functions without parentheses if the function doesn‚Äôt
take any arguments. For example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">return13</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">13</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">return13</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">13</span>
</pre></div>
</div>
</div></blockquote>
<p><a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a> provides methods to interact with contract functions.
Positional and keyword arguments supplied to the contract function subclass
will be used to find the contract function by signature,
and forwarded to the contract function when applicable.</p>
<p><a class="reference external" href="https://eips.ethereum.org/EIPS/eip-3668">EIP-3668</a> introduced support for the <code class="docutils literal notranslate"><span class="pre">OffchainLookup</span></code> revert /
CCIP Read support. CCIP Read is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> for calls by default, as recommended in EIP-3668. This is done via a
global <code class="docutils literal notranslate"><span class="pre">global_ccip_read_enabled</span></code> flag on the provider. If raising the <code class="docutils literal notranslate"><span class="pre">OffchainLookup</span></code> revert is preferred for a
specific call, the <code class="docutils literal notranslate"><span class="pre">ccip_read_enabled</span></code> flag on the call may be set to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># raises the revert instead of handling the offchain lookup</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">revertsWithOffchainLookup</span><span class="p">(</span><span class="n">myData</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">ccip_read_enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">*** web3.exceptions.OffchainLookup</span>
</pre></div>
</div>
</div></blockquote>
<p>Disabling CCIP Read support can be useful if a transaction needs to be sent to the callback function. In such cases,
‚Äúpreflighting‚Äù with an <code class="docutils literal notranslate"><span class="pre">eth_call</span></code>, handling the <code class="docutils literal notranslate"><span class="pre">OffchainLookup</span></code>, and sending the data via a transaction may be
necessary. See <a class="reference internal" href="#ccip-read-example"><span class="std std-ref">CCIP Read support for offchain lookup</span></a> in the examples section for how to preflight a transaction with a contract call.</p>
<p>Similarly, if CCIP Read is globally set to <code class="docutils literal notranslate"><span class="pre">False</span></code> via the <code class="docutils literal notranslate"><span class="pre">global_ccip_read_enabled</span></code> flag on the provider, it may be
enabled on a per-call basis - overriding the global flag. This ensures only explicitly enabled calls will handle the
<code class="docutils literal notranslate"><span class="pre">OffchainLookup</span></code> revert appropriately.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># global flag set to `False`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">global_ccip_read_enabled</span> <span class="o">=</span> <span class="kc">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># does not raise the revert since explicitly enabled on the call:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">response</span> <span class="o">=</span> <span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">revertsWithOffchainLookup</span><span class="p">(</span><span class="n">myData</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">ccip_read_enabled</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>If the function called results in a <code class="docutils literal notranslate"><span class="pre">revert</span></code> error, a <code class="docutils literal notranslate"><span class="pre">ContractLogicError</span></code> will be raised.
If there is an error message with the error, web3.py attempts to parse the
message that comes back and return it to the user as the error string.
As of v6.3.0, the raw data is also returned and
can be accessed via the <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute on <code class="docutils literal notranslate"><span class="pre">ContractLogicError</span></code>.</p>
<section id="id3">
<h5>Methods<a class="headerlink" href="#id3" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.ContractFunction.transact">
<span class="sig-prename descclassname"><span class="pre">ContractFunction.</span></span><span class="sig-name descname"><span class="pre">transact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.ContractFunction.transact" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Execute the specified function by sending a new public transaction.</p>
<p>Refer to the following invocation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myMethod</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
</pre></div>
</div>
<p>The first portion of the function call <code class="docutils literal notranslate"><span class="pre">myMethod(*args,</span> <span class="pre">**kwargs)</span></code>
selects the appropriate contract function based on the name and provided
argument.  Arguments can be provided as positional arguments, keyword
arguments, or a mix of the two.</p>
<p>The end portion of this function call <code class="docutils literal notranslate"><span class="pre">transact(transaction)</span></code> takes a
single parameter which should be a python dictionary conforming to
the same format as the <code class="docutils literal notranslate"><span class="pre">web3.eth.send_transaction(transaction)</span></code> method.
This dictionary may not contain the keys <code class="docutils literal notranslate"><span class="pre">data</span></code>.</p>
<p>If any of the <code class="docutils literal notranslate"><span class="pre">args</span></code> or <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> specified in the ABI are an <code class="docutils literal notranslate"><span class="pre">address</span></code> type, they
will accept ENS names.</p>
<p>If a <code class="docutils literal notranslate"><span class="pre">gas</span></code> value is not provided, then the <code class="docutils literal notranslate"><span class="pre">gas</span></code> value for the
method transaction will be created using the <code class="docutils literal notranslate"><span class="pre">web3.eth.estimate_gas()</span></code>
method.</p>
<p>Returns the transaction hash.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">token_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">12345</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="go">&quot;0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.ContractFunction.call">
<span class="sig-prename descclassname"><span class="pre">ContractFunction.</span></span><span class="sig-name descname"><span class="pre">call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'latest'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.ContractFunction.call" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Call a contract function, executing the transaction locally using the
<code class="docutils literal notranslate"><span class="pre">eth_call</span></code> API.  This will not create a new public transaction.</p>
<p>Refer to the following invocation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myMethod</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
</pre></div>
</div>
<p>This method behaves the same as the <a class="reference internal" href="#web3.contract.ContractFunction.transact" title="web3.contract.ContractFunction.transact"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ContractFunction.transact()</span></code></a> method,
with transaction details being passed into the end portion of the
function call, and function arguments being passed into the first portion.</p>
<p>Returns the return value of the executed function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">multiply7</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">21</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myBalance</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">({</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]})</span>
<span class="go">12345  # the token balance for `web3.eth.accounts[0]`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">token_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myBalance</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">({</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">1</span><span class="p">]})</span>
<span class="go">54321  # the token balance for the account `web3.eth.accounts[1]`</span>
</pre></div>
</div>
<p>You can call the method at a historical block using <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>. Some examples:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># You can call your contract method at a block number:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">token_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myBalance</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">block_identifier</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="c1"># or a number of blocks back from pending,</span>
<span class="c1"># in this case, the block just before the latest block:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">token_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myBalance</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">block_identifier</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># or a block hash:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">token_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myBalance</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">block_identifier</span><span class="o">=</span><span class="s1">&#39;0x4ff4a38b278ab49f7739d3a4ed4e12714386a9fdf72192f2e8f7da7822f10b4d&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">token_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myBalance</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">block_identifier</span><span class="o">=</span><span class="sa">b</span><span class="s1">&#39;O</span><span class="se">\xf4\xa3\x8b\&#39;\x8a\xb4\x9f</span><span class="s1">w9</span><span class="se">\xd3\xa4\xed</span><span class="s1">N</span><span class="se">\x12</span><span class="s1">qC</span><span class="se">\x86\xa9\xfd\xf7</span><span class="s1">!</span><span class="se">\x92\xf2\xe8\xf7\xda</span><span class="s1">x&quot;</span><span class="se">\xf1\x0b</span><span class="s1">M&#39;</span><span class="p">)</span>

<span class="c1"># Latest is the default, so this is redundant:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">token_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myBalance</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">block_identifier</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>

<span class="c1"># You can check the state after your pending transactions (if supported by your node):</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">token_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myBalance</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">block_identifier</span><span class="o">=</span><span class="s1">&#39;pending&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Passing the <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> parameter for past block numbers requires that your Ethereum API node
is running in the more expensive archive node mode. Normally synced Ethereum nodes will fail with
a ‚Äúmissing trie node‚Äù error, because Ethereum node may have purged the past state from its database.
<a class="reference external" href="https://ethereum.stackexchange.com/a/84200/620">More information about archival nodes here</a>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.ContractFunction.estimate_gas">
<span class="sig-prename descclassname"><span class="pre">ContractFunction.</span></span><span class="sig-name descname"><span class="pre">estimate_gas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.ContractFunction.estimate_gas" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Call a contract function, executing the transaction locally using the
<code class="docutils literal notranslate"><span class="pre">eth_call</span></code> API.  This will not create a new public transaction.</p>
<p>Refer to the following invocation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myMethod</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">estimate_gas</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
</pre></div>
</div>
<p>This method behaves the same as the <a class="reference internal" href="#web3.contract.ContractFunction.transact" title="web3.contract.ContractFunction.transact"><code class="xref py py-meth docutils literal notranslate"><span class="pre">ContractFunction.transact()</span></code></a> method,
with transaction details being passed into the end portion of the
function call, and function arguments being passed into the first portion.</p>
<p>Returns the amount of gas consumed which can be used as a gas estimate for
executing this transaction publicly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">my_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">multiply7</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="o">.</span><span class="n">estimate_gas</span><span class="p">()</span>
<span class="go">42650</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The parameter <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> is not enabled in geth nodes,
hence passing a value of <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> when connected to a geth
nodes would result in an error like:  <code class="docutils literal notranslate"><span class="pre">ValueError:</span> <span class="pre">{'code':</span> <span class="pre">-32602,</span> <span class="pre">'message':</span> <span class="pre">'too</span> <span class="pre">many</span> <span class="pre">arguments,</span> <span class="pre">want</span> <span class="pre">at</span> <span class="pre">most</span> <span class="pre">1'}</span></code></p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.ContractFunction.build_transaction">
<span class="sig-prename descclassname"><span class="pre">ContractFunction.</span></span><span class="sig-name descname"><span class="pre">build_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.ContractFunction.build_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Builds a transaction dictionary based on the contract function call specified.</p>
<p>Refer to the following invocation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myMethod</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">build_transaction</span><span class="p">(</span><span class="n">transaction</span><span class="p">)</span>
</pre></div>
</div>
<p>This method behaves the same as the <code class="xref py py-meth docutils literal notranslate"><span class="pre">Contract.transact()</span></code> method,
with transaction details being passed into the end portion of the
function call, and function arguments being passed into the first portion.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><cite>nonce</cite> is not returned as part of the transaction dictionary unless it is
specified in the first portion of the function call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">math_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">build_transaction</span><span class="p">({</span><span class="s1">&#39;nonce&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>You may use <code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionCount()</span></code> to get the current nonce
for an account. Therefore a shortcut for producing a transaction dictionary with
nonce included looks like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">math_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">build_transaction</span><span class="p">({</span><span class="s1">&#39;nonce&#39;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_count</span><span class="p">(</span><span class="s1">&#39;0xF5...&#39;</span><span class="p">)})</span>
</pre></div>
</div>
</div>
<p>Returns a transaction dictionary. This transaction dictionary can then be sent using
<a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a>.</p>
<p>Additionally, the dictionary may be used for offline transaction signing using
<code class="xref py py-meth docutils literal notranslate"><span class="pre">sign_transaction()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">math_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">increment</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">build_transaction</span><span class="p">({</span><span class="s1">&#39;maxFeePerGas&#39;</span><span class="p">:</span> <span class="mi">2000000000</span><span class="p">,</span> <span class="s1">&#39;maxPriorityFeePerGas&#39;</span><span class="p">:</span> <span class="mi">1000000000</span><span class="p">})</span>
<span class="go">{</span>
<span class="go">    &#39;to&#39;: &#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;,</span>
<span class="go">    &#39;data&#39;: &#39;0x7cf5dab00000000000000000000000000000000000000000000000000000000000000005&#39;,</span>
<span class="go">    &#39;value&#39;: 0,</span>
<span class="go">    &#39;gas&#39;: 43242,</span>
<span class="go">    &#39;maxFeePerGas&#39;: 2000000000,</span>
<span class="go">    &#39;maxPriorityFeePerGas&#39;: 1000000000,</span>
<span class="go">    &#39;chainId&#39;: 1</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="fallback-function">
<span id="id4"></span><h5>Fallback Function<a class="headerlink" href="#fallback-function" title="Link to this heading">ÔÉÅ</a></h5>
<blockquote>
<div><p>The Contract Factory also offers an API to interact with the fallback function, which supports four methods like
normal functions:</p>
</div></blockquote>
<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.fallback.call">
<span class="sig-prename descclassname"><span class="pre">Contract.fallback.</span></span><span class="sig-name descname"><span class="pre">call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.fallback.call" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Call fallback function, executing the transaction locally using the
<code class="docutils literal notranslate"><span class="pre">eth_call</span></code> API.  This will not create a new public transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.fallback.estimate_gas">
<span class="sig-prename descclassname"><span class="pre">Contract.fallback.</span></span><span class="sig-name descname"><span class="pre">estimate_gas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.fallback.estimate_gas" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Call fallback function and return the gas estimation.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.fallback.transact">
<span class="sig-prename descclassname"><span class="pre">Contract.fallback.</span></span><span class="sig-name descname"><span class="pre">transact</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.fallback.transact" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Execute fallback function by sending a new public transaction.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.fallback.build_transaction">
<span class="sig-prename descclassname"><span class="pre">Contract.fallback.</span></span><span class="sig-name descname"><span class="pre">build_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.fallback.build_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Builds a transaction dictionary based on the contract fallback function call.</p>
</dd></dl>

</section>
</section>
<section id="events">
<h4>Events<a class="headerlink" href="#events" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="web3.contract.ContractEvents">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.contract.</span></span><span class="sig-name descname"><span class="pre">ContractEvents</span></span><a class="headerlink" href="#web3.contract.ContractEvents" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p>The named events exposed through the <a class="reference internal" href="#web3.contract.Contract.events" title="web3.contract.Contract.events"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.events</span></code></a> property are of the ContractEvents type. This class is not to be used directly, but instead through <a class="reference internal" href="#web3.contract.Contract.events" title="web3.contract.Contract.events"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Contract.events</span></code></a>.</p>
<p>For example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myContract</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="n">contract_address</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">contract_abi</span><span class="p">)</span>
<span class="n">tx_hash</span> <span class="o">=</span> <span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myFunction</span><span class="p">()</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="n">receipt</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="n">myContract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">myEvent</span><span class="p">()</span><span class="o">.</span><span class="n">process_receipt</span><span class="p">(</span><span class="n">receipt</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractEvent</span></code> provides methods to interact with contract events. Positional and keyword arguments supplied to the contract event subclass will be used to find the contract event by signature.</p>
<dl class="py method" id="contract-get-logs">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">ContractEvents.</span></span><span class="sig-name descname"><span class="pre">myEvent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs).get_logs(from_block=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">to_block=&quot;latest&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_hash=None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_filters={}</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Fetches all logs for a given event within the specified block range or block hash.</p>
<p>Returns a list of decoded event logs sorted by <code class="docutils literal notranslate"><span class="pre">logIndex</span></code>.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">argument_filters</span></code> is an optional dictionary argument that can be used to filter
for logs where the event‚Äôs argument values match the values provided in the
dictionary. The keys must match the event argument names as they exist in the ABI.
The values can either be a single value or a list of values to match against. If a
list is provided, the logs will be filtered for any logs that match any of the
values in the list. Indexed arguments are filtered pre-call by building specific
<code class="docutils literal notranslate"><span class="pre">topics</span></code> to filter for. Non-indexed arguments are filtered by the library after
the logs are fetched from the node.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_contract</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="n">contract_address</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">contract_abi</span><span class="p">)</span>

<span class="c1"># get ``myEvent`` logs from block 1337 to block 2337 where the value for the</span>
<span class="c1"># event argument &quot;eventArg1&quot; is either 1, 2, or 3</span>
<span class="n">my_contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">myEvent</span><span class="p">()</span><span class="o">.</span><span class="n">get_logs</span><span class="p">(</span>
    <span class="n">argument_filters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;eventArg1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]},</span>
    <span class="n">from_block</span><span class="o">=</span><span class="mi">1337</span><span class="p">,</span>
    <span class="n">to_block</span><span class="o">=</span><span class="mi">2337</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="py method" id="process-receipt">
<dt class="sig sig-object py">
<span class="sig-prename descclassname"><span class="pre">ContractEvents.</span></span><span class="sig-name descname"><span class="pre">myEvent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs).process_receipt(transaction_receipt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">errors=WARN</span></span></em><span class="sig-paren">)</span></dt>
<dd><p>Extracts the pertinent logs from a transaction receipt.</p>
<p>If there are no errors, <code class="docutils literal notranslate"><span class="pre">process_receipt</span></code> returns a tuple of <a class="reference internal" href="#event-log-object"><span class="std std-ref">Event Log Objects</span></a>, emitted from the event (e.g. <code class="docutils literal notranslate"><span class="pre">myEvent</span></code>),
with decoded output.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myFunction</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">({</span><span class="s1">&#39;to&#39;</span><span class="p">:</span><span class="n">contract_address</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rich_logs</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">myEvent</span><span class="p">()</span><span class="o">.</span><span class="n">process_receipt</span><span class="p">(</span><span class="n">tx_receipt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rich_logs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;args&#39;</span><span class="p">]</span>
<span class="go">{&#39;myArg&#39;: 12345}</span>
</pre></div>
</div>
<p>If there are errors, the logs will be handled differently depending on the flag that is passed in:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">WARN</span></code> (default) - logs a warning to the console for the log that has an error, and discards the log. Returns any logs that are able to be processed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">STRICT</span></code> - stops all processing and raises the error encountered.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IGNORE</span></code> - returns any raw logs that raised an error with an added ‚Äúerrors‚Äù field, along with any other logs were able to be processed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DISCARD</span></code> - silently discards any logs that have errors, and returns processed logs that don‚Äôt have errors.</p></li>
</ul>
</div></blockquote>
<p>An event log error flag needs to be imported from <code class="docutils literal notranslate"><span class="pre">web3/logs.py</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myFunction</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">({</span><span class="s1">&#39;to&#39;</span><span class="p">:</span><span class="n">contract_address</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processed_logs</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">myEvent</span><span class="p">()</span><span class="o">.</span><span class="n">process_receipt</span><span class="p">(</span><span class="n">tx_receipt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processed_logs</span>
<span class="go">(</span>
<span class="go">   AttributeDict({</span>
<span class="go">       &#39;args&#39;: AttributeDict({}),</span>
<span class="go">       &#39;event&#39;: &#39;myEvent&#39;,</span>
<span class="go">       &#39;logIndex&#39;: 0,</span>
<span class="go">       &#39;transactionIndex&#39;: 0,</span>
<span class="go">       &#39;transactionHash&#39;: HexBytes(&#39;0xfb95ccb6ab39e19821fb339dee33e7afe2545527725b61c64490a5613f8d11fa&#39;),</span>
<span class="go">       &#39;address&#39;: &#39;0xF2E246BB76DF876Cef8b38ae84130F4F55De395b&#39;,</span>
<span class="go">       &#39;blockHash&#39;: HexBytes(&#39;0xd74c3e8bdb19337987b987aee0fa48ed43f8f2318edfc84e3a8643e009592a68&#39;),</span>
<span class="go">       &#39;blockNumber&#39;: 3</span>
<span class="go">   })</span>
<span class="go">)</span>


<span class="go"># Or, if there were errors encountered during processing:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.logs</span> <span class="kn">import</span> <span class="n">STRICT</span><span class="p">,</span> <span class="n">IGNORE</span><span class="p">,</span> <span class="n">DISCARD</span><span class="p">,</span> <span class="n">WARN</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processed_logs</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">myEvent</span><span class="p">()</span><span class="o">.</span><span class="n">process_receipt</span><span class="p">(</span><span class="n">tx_receipt</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="n">IGNORE</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processed_logs</span>
<span class="go">(</span>
<span class="go">    AttributeDict({</span>
<span class="go">        &#39;type&#39;: &#39;mined&#39;,</span>
<span class="go">        &#39;logIndex&#39;: 0,</span>
<span class="go">        &#39;transactionIndex&#39;: 0,</span>
<span class="go">        &#39;transactionHash&#39;: HexBytes(&#39;0x01682095d5abb0270d11a31139b9a1f410b363c84add467004e728ec831bd529&#39;),</span>
<span class="go">        &#39;blockHash&#39;: HexBytes(&#39;0x92abf9325a3959a911a2581e9ea36cba3060d8b293b50e5738ff959feb95258a&#39;),</span>
<span class="go">        &#39;blockNumber&#39;: 5,</span>
<span class="go">        &#39;address&#39;: &#39;0xF2E246BB76DF876Cef8b38ae84130F4F55De395b&#39;,</span>
<span class="go">        &#39;data&#39;: &#39;0x0000000000000000000000000000000000000000000000000000000000003039&#39;,</span>
<span class="go">        &#39;topics&#39;: [</span>
<span class="go">            HexBytes(&#39;0xf70fe689e290d8ce2b2a388ac28db36fbb0e16a6d89c6804c461f65a1b40bb15&#39;)</span>
<span class="go">        ],</span>
<span class="go">        &#39;errors&#39;: LogTopicError(&#39;Expected 1 log topics.  Got 0&#39;)})</span>
<span class="go">   })</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processed_logs</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">myEvent</span><span class="p">()</span><span class="o">.</span><span class="n">process_receipt</span><span class="p">(</span><span class="n">tx_receipt</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="n">DISCARD</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">processed_logs</span> <span class="o">==</span> <span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.ContractEvents.myEvent">
<span class="sig-prename descclassname"><span class="pre">ContractEvents.</span></span><span class="sig-name descname"><span class="pre">myEvent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">*args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">**kwargs).process_log(log</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.ContractEvents.myEvent" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Similar to <a class="reference internal" href="#process-receipt">process_receipt</a>, but only processes one log at a time, instead of a whole transaction receipt.
Will return a single <a class="reference internal" href="#event-log-object"><span class="std std-ref">Event Log Object</span></a> if there are no errors encountered during processing. If an error is encountered during processing, it will be raised.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">myFunction</span><span class="p">(</span><span class="mi">12345</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">({</span><span class="s1">&#39;to&#39;</span><span class="p">:</span><span class="n">contract_address</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_to_process</span> <span class="o">=</span> <span class="n">tx_receipt</span><span class="p">[</span><span class="s1">&#39;logs&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processed_log</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">myEvent</span><span class="p">()</span><span class="o">.</span><span class="n">process_log</span><span class="p">(</span><span class="n">log_to_process</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">processed_log</span>
<span class="go">AttributeDict({</span>
<span class="go">    &#39;args&#39;: AttributeDict({}),</span>
<span class="go">    &#39;event&#39;: &#39;myEvent&#39;,</span>
<span class="go">    &#39;logIndex&#39;: 0,</span>
<span class="go">    &#39;transactionIndex&#39;: 0,</span>
<span class="go">    &#39;transactionHash&#39;: HexBytes(&#39;0xfb95ccb6ab39e19821fb339dee33e7afe2545527725b61c64490a5613f8d11fa&#39;),</span>
<span class="go">    &#39;address&#39;: &#39;0xF2E246BB76DF876Cef8b38ae84130F4F55De395b&#39;,</span>
<span class="go">    &#39;blockHash&#39;: HexBytes(&#39;0xd74c3e8bdb19337987b987aee0fa48ed43f8f2318edfc84e3a8643e009592a68&#39;),</span>
<span class="go">    &#39;blockNumber&#39;: 3</span>
<span class="go">})</span>
</pre></div>
</div>
</dd></dl>

<section id="event-log-object">
<span id="id5"></span><h5>Event Log Object<a class="headerlink" href="#event-log-object" title="Link to this heading">ÔÉÅ</a></h5>
<blockquote>
<div><p>The Event Log Object is a python dictionary with the following keys:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">args</span></code>: Dictionary - The arguments coming from the event.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">event</span></code>: String - The event name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logIndex</span></code>: Number - integer of the log index position in the block.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transactionIndex</span></code>: Number - integer of the transactions index position
log was created from.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">transactionHash</span></code>: String, 32 Bytes - hash of the transactions this log
was created from.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code>: String, 32 Bytes - address from which this log originated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blockHash</span></code>: String, 32 Bytes - hash of the block where this log was
in. null when it‚Äôs pending.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blockNumber</span></code>: Number - the block number where this log was in. null
when it‚Äôs pending.</p></li>
</ul>
</div></blockquote>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">transfer_filter</span> <span class="o">=</span> <span class="n">my_token_contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Transfer</span><span class="o">.</span><span class="n">create_filter</span><span class="p">(</span><span class="n">from_block</span><span class="o">=</span><span class="s2">&quot;0x0&quot;</span><span class="p">,</span> <span class="n">argument_filters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transfer_filter</span><span class="o">.</span><span class="n">get_new_entries</span><span class="p">()</span>
<span class="go">[AttributeDict({&#39;args&#39;: AttributeDict({&#39;from&#39;: &#39;0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf&#39;,</span>
<span class="go"> &#39;to&#39;: &#39;0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf&#39;,</span>
<span class="go"> &#39;value&#39;: 10}),</span>
<span class="go"> &#39;event&#39;: &#39;Transfer&#39;,</span>
<span class="go"> &#39;logIndex&#39;: 0,</span>
<span class="go"> &#39;transactionIndex&#39;: 0,</span>
<span class="go"> &#39;transactionHash&#39;: HexBytes(&#39;0x9da859237e7259832b913d51cb128c8d73d1866056f7a41b52003c953e749678&#39;),</span>
<span class="go"> &#39;address&#39;: &#39;0xF2E246BB76DF876Cef8b38ae84130F4F55De395b&#39;,</span>
<span class="go"> &#39;blockHash&#39;: HexBytes(&#39;...&#39;),</span>
<span class="go"> &#39;blockNumber&#39;: 2})]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transfer_filter</span><span class="o">.</span><span class="n">get_new_entries</span><span class="p">()</span>
<span class="go">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">({</span><span class="s1">&#39;gas&#39;</span><span class="p">:</span> <span class="mi">899000</span><span class="p">,</span> <span class="s1">&#39;gasPrice&#39;</span><span class="p">:</span> <span class="mi">1000000000</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transfer_filter</span><span class="o">.</span><span class="n">get_new_entries</span><span class="p">()</span>
<span class="go">[AttributeDict({&#39;args&#39;: AttributeDict({&#39;from&#39;: &#39;0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf&#39;,</span>
<span class="go"> &#39;to&#39;: &#39;0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf&#39;,</span>
<span class="go"> &#39;value&#39;: 10}),</span>
<span class="go"> &#39;event&#39;: &#39;Transfer&#39;,</span>
<span class="go"> &#39;logIndex&#39;: 0,</span>
<span class="go"> &#39;transactionIndex&#39;: 0,</span>
<span class="go"> &#39;transactionHash&#39;: HexBytes(&#39;...&#39;),</span>
<span class="go"> &#39;address&#39;: &#39;0xF2E246BB76DF876Cef8b38ae84130F4F55De395b&#39;,</span>
<span class="go"> &#39;blockHash&#39;: HexBytes(&#39;...&#39;),</span>
<span class="go"> &#39;blockNumber&#39;: 3})]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transfer_filter</span><span class="o">.</span><span class="n">get_all_entries</span><span class="p">()</span>
<span class="go">[AttributeDict({&#39;args&#39;: AttributeDict({&#39;from&#39;: &#39;0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf&#39;,</span>
<span class="go"> &#39;to&#39;: &#39;0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf&#39;,</span>
<span class="go"> &#39;value&#39;: 10}),</span>
<span class="go"> &#39;event&#39;: &#39;Transfer&#39;,</span>
<span class="go"> &#39;logIndex&#39;: 0,</span>
<span class="go"> &#39;transactionIndex&#39;: 0,</span>
<span class="go"> &#39;transactionHash&#39;: HexBytes(&#39;...&#39;),</span>
<span class="go"> &#39;address&#39;: &#39;0xF2E246BB76DF876Cef8b38ae84130F4F55De395b&#39;,</span>
<span class="go"> &#39;blockHash&#39;: HexBytes(&#39;...&#39;),</span>
<span class="go"> &#39;blockNumber&#39;: 2}),</span>
<span class="go"> AttributeDict({&#39;args&#39;: AttributeDict({&#39;from&#39;: &#39;0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf&#39;,</span>
<span class="go"> &#39;to&#39;: &#39;0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf&#39;,</span>
<span class="go"> &#39;value&#39;: 10}),</span>
<span class="go"> &#39;event&#39;: &#39;Transfer&#39;,</span>
<span class="go"> &#39;logIndex&#39;: 0,</span>
<span class="go"> &#39;transactionIndex&#39;: 0,</span>
<span class="go"> &#39;transactionHash&#39;: HexBytes(&#39;...&#39;),</span>
<span class="go"> &#39;address&#39;: &#39;0xF2E246BB76DF876Cef8b38ae84130F4F55De395b&#39;,</span>
<span class="go"> &#39;blockHash&#39;: HexBytes(&#39;...&#39;),</span>
<span class="go"> &#39;blockNumber&#39;: 3})]</span>
</pre></div>
</div>
</section>
</section>
<section id="utils">
<h4>Utils<a class="headerlink" href="#utils" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.contract.Contract.decode_function_input">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Contract.</span></span><span class="sig-name descname"><span class="pre">decode_function_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.contract.Contract.decode_function_input" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Decodes the transaction data used to invoke a smart contract function, and returns
<a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a> and decoded parameters as <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">transaction</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction</span><span class="p">(</span><span class="s1">&#39;0x5798fbc45e3b63832abc4984b0f3574a13545f415dd672cd8540cd71f735db56&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">transaction</span><span class="o">.</span><span class="n">input</span>
<span class="go">&#39;0x612e45a3000000000000000000000000b656b2a9c3b2416437a811e07466ca712f5a5b5a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000093a80000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000116c6f6e656c792c20736f206c6f6e656c7900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">decode_function_input</span><span class="p">(</span><span class="n">transaction</span><span class="o">.</span><span class="n">input</span><span class="p">)</span>
<span class="go">(&lt;Function newProposal(address,uint256,string,bytes,uint256,bool)&gt;,</span>
<span class="go"> {&#39;_recipient&#39;: &#39;0xB656b2a9c3b2416437A811e07466cA712F5a5b5a&#39;,</span>
<span class="go">  &#39;_amount&#39;: 0,</span>
<span class="go">  &#39;_description&#39;: b&#39;lonely, so lonely&#39;,</span>
<span class="go">  &#39;_transactionData&#39;: b&#39;&#39;,</span>
<span class="go">  &#39;_debatingPeriod&#39;: 604800,</span>
<span class="go">  &#39;_newCurator&#39;: True})</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="contractcaller">
<h4>ContractCaller<a class="headerlink" href="#contractcaller" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="web3.contract.ContractCaller">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.contract.</span></span><span class="sig-name descname"><span class="pre">ContractCaller</span></span><a class="headerlink" href="#web3.contract.ContractCaller" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p>The <code class="docutils literal notranslate"><span class="pre">ContractCaller</span></code> class provides an API to call functions in a contract. This class
is not to be used directly, but instead through <code class="docutils literal notranslate"><span class="pre">Contract.caller</span></code>.</p>
<p>There are a number of different ways to invoke the <code class="docutils literal notranslate"><span class="pre">ContractCaller</span></code>.</p>
<p>For example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myContract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="n">address</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">ABI</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twentyone</span> <span class="o">=</span> <span class="n">myContract</span><span class="o">.</span><span class="n">caller</span><span class="o">.</span><span class="n">multiply7</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twentyone</span>
<span class="go">21</span>
</pre></div>
</div>
<p>It can also be invoked using parentheses:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">twentyone</span> <span class="o">=</span> <span class="n">myContract</span><span class="o">.</span><span class="n">caller</span><span class="p">()</span><span class="o">.</span><span class="n">multiply7</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twentyone</span>
<span class="go">21</span>
</pre></div>
</div>
<p>And a transaction dictionary, with or without the <code class="docutils literal notranslate"><span class="pre">transaction</span></code> keyword.
You can also optionally include a block identifier. For example:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">from_address</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twentyone</span> <span class="o">=</span> <span class="n">myContract</span><span class="o">.</span><span class="n">caller</span><span class="p">({</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">from_address</span><span class="p">})</span><span class="o">.</span><span class="n">multiply7</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twentyone</span>
<span class="go">21</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twentyone</span> <span class="o">=</span> <span class="n">myContract</span><span class="o">.</span><span class="n">caller</span><span class="p">(</span><span class="n">transaction</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">from_address</span><span class="p">})</span><span class="o">.</span><span class="n">multiply7</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twentyone</span>
<span class="go">21</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twentyone</span> <span class="o">=</span> <span class="n">myContract</span><span class="o">.</span><span class="n">caller</span><span class="p">(</span><span class="n">block_identifier</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">multiply7</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">twentyone</span>
<span class="go">21</span>
</pre></div>
</div>
<p>Like <a class="reference internal" href="#web3.contract.ContractFunction" title="web3.contract.ContractFunction"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractFunction</span></code></a>, <a class="reference internal" href="#web3.contract.ContractCaller" title="web3.contract.ContractCaller"><code class="xref py py-class docutils literal notranslate"><span class="pre">ContractCaller</span></code></a>
provides methods to interact with contract functions.
Positional and keyword arguments supplied to the contract caller subclass
will be used to find the contract function by signature,
and forwarded to the contract function when applicable.</p>
</section>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Link to this heading">ÔÉÅ</a></h4>
<section id="working-with-an-erc-20-token-contract">
<h5>Working with an ERC-20 Token Contract<a class="headerlink" href="#working-with-an-erc-20-token-contract" title="Link to this heading">ÔÉÅ</a></h5>
<p>Most fungible tokens on the Ethereum blockchain conform to the <a class="reference external" href="https://github.com/ethereum/ERCs/blob/master/ERCS/erc-20.md">ERC-20</a>
standard.  This section of the guide covers interacting with an existing token
contract which conforms to this standard.</p>
<p>In this guide we will interact with an existing token contract that we have
already deployed to a local testing chain.  This guide assumes:</p>
<ol class="arabic simple">
<li><p>An existing token contract at a known address.</p></li>
<li><p>Access to the proper <code class="docutils literal notranslate"><span class="pre">ABI</span></code> for the given contract.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">web3.main.Web3</span></code> instance connected to a provider with an unlocked account which can send transactions.</p></li>
</ol>
<section id="creating-the-contract-factory">
<h6>Creating the contract factory<a class="headerlink" href="#creating-the-contract-factory" title="Link to this heading">ÔÉÅ</a></h6>
<p>First we need to create a contract instance with the address of our token
contract and the <code class="docutils literal notranslate"><span class="pre">ERC-20</span></code> ABI.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">contract_address</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">ABI</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">address</span>
<span class="go">&#39;0xF2E246BB76DF876Cef8b38ae84130F4F55De395b&#39;</span>
</pre></div>
</div>
</section>
<section id="querying-token-metadata">
<h6>Querying token metadata<a class="headerlink" href="#querying-token-metadata" title="Link to this heading">ÔÉÅ</a></h6>
<p>Each token will have a total supply which represents the total number of tokens
in circulation.  In this example we‚Äôve initialized the token contract to have 1
million tokens.  Since this token contract is setup to have 18 decimal places,
the raw total supply returned by the contract is going to have 18 additional
decimal places.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">name</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">&#39;TestToken&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">symbol</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">&#39;TEST&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimals</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">decimals</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">decimals</span>
<span class="go">18</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">DECIMALS</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">decimals</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">totalSupply</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span> <span class="o">//</span> <span class="n">DECIMALS</span>
<span class="go">1000000</span>
</pre></div>
</div>
</section>
<section id="query-account-balances">
<h6>Query account balances<a class="headerlink" href="#query-account-balances" title="Link to this heading">ÔÉÅ</a></h6>
<p>Next we can query some account balances using the contract‚Äôs <code class="docutils literal notranslate"><span class="pre">balanceOf</span></code>
function.  The token contract we are using starts with a single account which
we‚Äôll refer to as <code class="docutils literal notranslate"><span class="pre">alice</span></code> holding all of the tokens.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">alice</span> <span class="o">=</span> <span class="s1">&#39;0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bob</span> <span class="o">=</span> <span class="s1">&#39;0x2B5AD5c4795c026514f8317c7a215E218DcCD6cF&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raw_balance</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">balanceOf</span><span class="p">(</span><span class="n">alice</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raw_balance</span>
<span class="go">1000000000000000000000000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">raw_balance</span> <span class="o">//</span> <span class="n">DECIMALS</span>
<span class="go">1000000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">balanceOf</span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">0</span>
</pre></div>
</div>
</section>
<section id="sending-tokens">
<h6>Sending tokens<a class="headerlink" href="#sending-tokens" title="Link to this heading">ÔÉÅ</a></h6>
<p>Next we can transfer some tokens from <code class="docutils literal notranslate"><span class="pre">alice</span></code> to <code class="docutils literal notranslate"><span class="pre">bob</span></code> using the contract‚Äôs
<code class="docutils literal notranslate"><span class="pre">transfer</span></code> function.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">transfer</span><span class="p">(</span><span class="n">bob</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">({</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">alice</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">balanceOf</span><span class="p">(</span><span class="n">alice</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">999999999999999999999900</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">balanceOf</span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">100</span>
</pre></div>
</div>
</section>
<section id="creating-an-approval-for-external-transfers">
<h6>Creating an approval for external transfers<a class="headerlink" href="#creating-an-approval-for-external-transfers" title="Link to this heading">ÔÉÅ</a></h6>
<p>Alice could also <em>approve</em> someone else to spend tokens from her account using
the <code class="docutils literal notranslate"><span class="pre">approve</span></code> function.  We can also query how many tokens we‚Äôre approved to
spend using the <code class="docutils literal notranslate"><span class="pre">allowance</span></code> function.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">allowance</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">approve</span><span class="p">(</span><span class="n">bob</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">({</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">alice</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">allowance</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">200</span>
</pre></div>
</div>
</section>
<section id="performing-an-external-transfer">
<h6>Performing an external transfer<a class="headerlink" href="#performing-an-external-transfer" title="Link to this heading">ÔÉÅ</a></h6>
<p>When someone has an allowance they can transfer those tokens using the
<code class="docutils literal notranslate"><span class="pre">transferFrom</span></code> function.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">allowance</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">200</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">balanceOf</span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">100</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_hash</span> <span class="o">=</span> <span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">transferFrom</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">({</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">bob</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">allowance</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">125</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">balanceOf</span><span class="p">(</span><span class="n">bob</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">175</span>
</pre></div>
</div>
</section>
</section>
<section id="using-a-struct-as-a-function-argument">
<h5>Using a struct as a function argument<a class="headerlink" href="#using-a-struct-as-a-function-argument" title="Link to this heading">ÔÉÅ</a></h5>
<p>web3.py accepts struct arguments as dictionaries. This format also supports nested structs.
Let‚Äôs take a look at a quick example. Given the following Solidity contract:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>contract Example {
  address addr;

  struct S1 {
    address a1;
    address a2;
  }

  struct S2 {
    bytes32 b1;
    bytes32 b2;
  }

  struct X {
    S1 s1;
    S2 s2;
    address[] users;
  }

  function update(X memory x) public {
    addr = x.s1.a2;
  }

  function retrieve() public view returns (address) {
    return addr;
  }
}
</pre></div>
</div>
<p>You can interact with the web3.py contract API as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># deploy or lookup the deployed contract, then:</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">deployed_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">retrieve</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="s1">&#39;0x0000000000000000000000000000000000000000&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">deployed_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;s1&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;0x0000000000000000000000000000000000000001&#39;</span><span class="p">,</span> <span class="s1">&#39;0x0000000000000000000000000000000000000002&#39;</span><span class="p">],</span> <span class="s1">&#39;s2&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa">b</span><span class="s1">&#39;0&#39;</span><span class="o">*</span><span class="mi">32</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="o">*</span><span class="mi">32</span><span class="p">],</span> <span class="s1">&#39;users&#39;</span><span class="p">:</span> <span class="p">[]})</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">deployed_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">retrieve</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="s1">&#39;0x0000000000000000000000000000000000000002&#39;</span>
</pre></div>
</div>
</section>
<section id="invoke-ambiguous-contract-functions">
<span id="ambiguous-contract-functions"></span><h5>Invoke Ambiguous Contract Functions<a class="headerlink" href="#invoke-ambiguous-contract-functions" title="Link to this heading">ÔÉÅ</a></h5>
<p>Calling overloaded functions can be done as you would expect. Passing arguments will
disambiguate which function you want to call.</p>
<p>For example, if you have a contract with two functions with the name <code class="docutils literal notranslate"><span class="pre">identity</span></code> that
accept different types of arguments, you can call them like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">ambiguous_contract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=...</span><span class="p">,</span> <span class="n">abi</span><span class="o">=...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ambiguous_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ambiguous_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="s2">&quot;one&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">1</span>
</pre></div>
</div>
<p>If there is a need to first retrieve the function, you can use the contract instance‚Äôs
<code class="docutils literal notranslate"><span class="pre">get_function_by_signature</span></code> method to get the function you want to call.</p>
<p>Below is an example of a contract that has multiple functions of the same name,
and the arguments are ambiguous. You can use the <a class="reference internal" href="#web3.contract.Contract.get_function_by_signature" title="web3.contract.Contract.get_function_by_signature"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Contract.get_function_by_signature()</span></code></a>
method to reference the intended function and call it with the correct arguments.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">contract_source_code</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="go">pragma solidity ^0.8.24;</span>
<span class="go">contract AmbiguousDuo {</span>
<span class="go">  function identity(uint256 input, bool uselessFlag) public pure returns (uint256) {</span>
<span class="go">    return input;</span>
<span class="go">  }</span>
<span class="go">  function identity(int256 input, bool uselessFlag) public pure returns (int256) {</span>
<span class="go">    return input;</span>
<span class="go">  }</span>
<span class="go">}</span>
<span class="go">&quot;&quot;&quot;</span>
<span class="go"># fast forward all the steps of compiling and deploying the contract.</span>

<span class="gp">&gt;&gt;&gt; </span><span class="s2">identity_func = ambiguous_contract.get_function_by_signature(&#39;identity(uint256,bool)&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">identity_func(1, True)</span>
<span class="go">&lt;Function identity(uint256,bool) bound to (1, True)&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s2">identity_func(1, True).call()</span>
<span class="go">1</span>
</pre></div>
</div>
</section>
<section id="ccip-read-support-for-offchain-lookup">
<span id="ccip-read-example"></span><h5>CCIP Read support for offchain lookup<a class="headerlink" href="#ccip-read-support-for-offchain-lookup" title="Link to this heading">ÔÉÅ</a></h5>
<p>Contract calls support CCIP Read by default, via a <code class="docutils literal notranslate"><span class="pre">ccip_read_enabled</span></code> flag on the call and, more globally, a
<code class="docutils literal notranslate"><span class="pre">global_ccip_read_enabled</span></code> flag on the provider. The following should work by default without raising an
<code class="docutils literal notranslate"><span class="pre">OffchainLookup</span></code> and instead handling it appropriately as per the specification outlined in
<a class="reference external" href="https://eips.ethereum.org/EIPS/eip-3668">EIP-3668</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">revertsWithOffchainLookup</span><span class="p">(</span><span class="n">myData</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
</pre></div>
</div>
<p>If the offchain lookup requires the user to send a transaction rather than make a call, this may be handled
appropriately in the following way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">WebSocketProvider</span>
<span class="kn">from</span> <span class="nn">web3.utils</span> <span class="kn">import</span> <span class="n">handle_offchain_lookup</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>

<span class="n">myContract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=...</span><span class="p">)</span>
<span class="n">myData</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;data for offchain lookup function call&#39;</span>

<span class="c1"># preflight with an `eth_call` and handle the exception</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">revertsWithOffchainLookup</span><span class="p">(</span><span class="n">myData</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="n">ccip_read_enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="k">except</span> <span class="n">OffchainLookup</span> <span class="k">as</span> <span class="n">ocl</span><span class="p">:</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="n">myContract</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">my_account</span><span class="p">}</span>
    <span class="n">data_for_callback_function</span> <span class="o">=</span> <span class="n">handle_offchain_lookup</span><span class="p">(</span><span class="n">ocl</span><span class="o">.</span><span class="n">payload</span><span class="p">)</span>
    <span class="n">tx</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data_for_callback_function</span>

    <span class="c1"># send the built transaction with `eth_sendTransaction` or sign and send with `eth_sendRawTransaction`</span>
    <span class="n">tx_hash</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">(</span><span class="n">tx</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="contract-unit-tests-in-python">
<h5>Contract Unit Tests in Python<a class="headerlink" href="#contract-unit-tests-in-python" title="Link to this heading">ÔÉÅ</a></h5>
<p>Here is an example of how one can use the <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a> framework in python, web3.py,
eth-tester, and PyEVM to perform unit tests entirely in python without any
additional need for a full featured ethereum node/client. To install needed
dependencies you can use the pinned extra for testing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>web3<span class="o">[</span>test<span class="o">]</span><span class="w"> </span>pytest
</pre></div>
</div>
<p>Once you have an environment set up for testing, you can then write your tests
like so:</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># of how to write unit tests with web3.py</span>
<span class="kn">import</span> <span class="nn">pytest</span>

<span class="kn">import</span> <span class="nn">pytest_asyncio</span>

<span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AsyncWeb3</span><span class="p">,</span>
    <span class="n">EthereumTesterProvider</span><span class="p">,</span>
    <span class="n">Web3</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">web3.providers.eth_tester.main</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AsyncEthereumTesterProvider</span><span class="p">,</span>
<span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">tester_provider</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">EthereumTesterProvider</span><span class="p">()</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">eth_tester</span><span class="p">(</span><span class="n">tester_provider</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">tester_provider</span><span class="o">.</span><span class="n">ethereum_tester</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">w3</span><span class="p">(</span><span class="n">tester_provider</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Web3</span><span class="p">(</span><span class="n">tester_provider</span><span class="p">)</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">foo_contract</span><span class="p">(</span><span class="n">eth_tester</span><span class="p">,</span> <span class="n">w3</span><span class="p">):</span>
    <span class="c1"># For simplicity of this example we statically define the</span>
    <span class="c1"># contract code here. You might read your contracts from a</span>
    <span class="c1"># file, or something else to test with in your own code</span>
    <span class="c1">#</span>
    <span class="c1"># pragma solidity^0.5.3;</span>
    <span class="c1">#</span>
    <span class="c1"># contract Foo {</span>
    <span class="c1">#</span>
    <span class="c1">#     string public bar;</span>
    <span class="c1">#     event barred(string _bar);</span>
    <span class="c1">#</span>
    <span class="c1">#     constructor() public {</span>
    <span class="c1">#         bar = &quot;hello world&quot;;</span>
    <span class="c1">#     }</span>
    <span class="c1">#</span>
    <span class="c1">#     function setBar(string memory _bar) public {</span>
    <span class="c1">#         bar = _bar;</span>
    <span class="c1">#         emit barred(_bar);</span>
    <span class="c1">#     }</span>
    <span class="c1">#</span>
    <span class="c1"># }</span>

    <span class="n">deploy_address</span> <span class="o">=</span> <span class="n">eth_tester</span><span class="o">.</span><span class="n">get_accounts</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">abi</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;[{&quot;anonymous&quot;:false,&quot;inputs&quot;:[{&quot;indexed&quot;:false,&quot;name&quot;:&quot;_bar&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;name&quot;:&quot;barred&quot;,&quot;type&quot;:&quot;event&quot;},{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;_bar&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;name&quot;:&quot;setBar&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;inputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;constructor&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;bar&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;}]&quot;&quot;&quot;</span>  <span class="c1"># noqa: E501</span>
    <span class="c1"># This bytecode is the output of compiling with</span>
    <span class="c1"># solc version:0.5.3+commit.10d17f24.Emscripten.clang</span>
    <span class="n">bytecode</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;608060405234801561001057600080fd5b506040805190810160405280600b81526020017f68656c6c6f20776f726c640000000000000000000000000000000000000000008152506000908051906020019061005c929190610062565b50610107565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100a357805160ff19168380011785556100d1565b828001600101855582156100d1579182015b828111156100d05782518255916020019190600101906100b5565b5b5090506100de91906100e2565b5090565b61010491905b808211156101005760008160009055506001016100e8565b5090565b90565b6103bb806101166000396000f3fe608060405234801561001057600080fd5b5060043610610053576000357c01000000000000000000000000000000000000000000000000000000009004806397bc14aa14610058578063febb0f7e14610113575b600080fd5b6101116004803603602081101561006e57600080fd5b810190808035906020019064010000000081111561008b57600080fd5b82018360208201111561009d57600080fd5b803590602001918460018302840111640100000000831117156100bf57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610196565b005b61011b61024c565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561015b578082015181840152602081019050610140565b50505050905090810190601f1680156101885780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b80600090805190602001906101ac9291906102ea565b507f5f71ad82e16f082de5ff496b140e2fbc8621eeb37b36d59b185c3f1364bbd529816040518080602001828103825283818151815260200191508051906020019080838360005b8381101561020f5780820151818401526020810190506101f4565b50505050905090810190601f16801561023c5780820380516001836020036101000a031916815260200191505b509250505060405180910390a150565b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156102e25780601f106102b7576101008083540402835291602001916102e2565b820191906000526020600020905b8154815290600101906020018083116102c557829003601f168201915b505050505081565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061032b57805160ff1916838001178555610359565b82800160010185558215610359579182015b8281111561035857825182559160200191906001019061033d565b5b509050610366919061036a565b5090565b61038c91905b80821115610388576000816000905550600101610370565b5090565b9056fea165627a7a72305820ae6ca683d45ee8a71bba45caee29e4815147cd308f772c853a20dfe08214dbb50029&quot;&quot;&quot;</span>  <span class="c1"># noqa: E501</span>

    <span class="c1"># Create our contract class.</span>
    <span class="n">FooContract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">,</span> <span class="n">bytecode</span><span class="o">=</span><span class="n">bytecode</span><span class="p">)</span>
    <span class="c1"># issue a transaction to deploy the contract.</span>
    <span class="n">tx_hash</span> <span class="o">=</span> <span class="n">FooContract</span><span class="o">.</span><span class="n">constructor</span><span class="p">()</span><span class="o">.</span><span class="n">transact</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">deploy_address</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="c1"># wait for the transaction to be mined</span>
    <span class="n">tx_receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>
    <span class="c1"># instantiate and return an instance of our contract.</span>
    <span class="k">return</span> <span class="n">FooContract</span><span class="p">(</span><span class="n">tx_receipt</span><span class="o">.</span><span class="n">contractAddress</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">test_initial_greeting</span><span class="p">(</span><span class="n">foo_contract</span><span class="p">):</span>
    <span class="n">hw</span> <span class="o">=</span> <span class="n">foo_contract</span><span class="o">.</span><span class="n">caller</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">hw</span> <span class="o">==</span> <span class="s2">&quot;hello world&quot;</span>


<span class="k">def</span> <span class="nf">test_can_update_greeting</span><span class="p">(</span><span class="n">w3</span><span class="p">,</span> <span class="n">foo_contract</span><span class="p">):</span>
    <span class="c1"># send transaction that updates the greeting</span>
    <span class="n">tx_hash</span> <span class="o">=</span> <span class="n">foo_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">setBar</span><span class="p">(</span><span class="s2">&quot;testing contracts is easy&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>

    <span class="c1"># verify that the contract is now using the updated greeting</span>
    <span class="n">hw</span> <span class="o">=</span> <span class="n">foo_contract</span><span class="o">.</span><span class="n">caller</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">hw</span> <span class="o">==</span> <span class="s2">&quot;testing contracts is easy&quot;</span>


<span class="k">def</span> <span class="nf">test_updating_greeting_emits_event</span><span class="p">(</span><span class="n">w3</span><span class="p">,</span> <span class="n">foo_contract</span><span class="p">):</span>
    <span class="c1"># send transaction that updates the greeting</span>
    <span class="n">tx_hash</span> <span class="o">=</span> <span class="n">foo_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">setBar</span><span class="p">(</span><span class="s2">&quot;testing contracts is easy&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="n">receipt</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>

    <span class="c1"># get all of the `barred` logs for the contract</span>
    <span class="n">logs</span> <span class="o">=</span> <span class="n">foo_contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">barred</span><span class="o">.</span><span class="n">get_logs</span><span class="p">()</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">logs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="c1"># verify that the log&#39;s data matches the expected value</span>
    <span class="n">event</span> <span class="o">=</span> <span class="n">logs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">event</span><span class="o">.</span><span class="n">blockHash</span> <span class="o">==</span> <span class="n">receipt</span><span class="o">.</span><span class="n">blockHash</span>
    <span class="k">assert</span> <span class="n">event</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">_bar</span> <span class="o">==</span> <span class="s2">&quot;testing contracts is easy&quot;</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">fixture</span>
<span class="k">def</span> <span class="nf">async_eth_tester</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">AsyncEthereumTesterProvider</span><span class="p">()</span><span class="o">.</span><span class="n">ethereum_tester</span>


<span class="nd">@pytest_asyncio</span><span class="o">.</span><span class="n">fixture</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">async_w3</span><span class="p">():</span>
    <span class="n">async_w3</span> <span class="o">=</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncEthereumTesterProvider</span><span class="p">())</span>
    <span class="n">accounts</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span>
    <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">default_account</span> <span class="o">=</span> <span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">async_w3</span>


<span class="nd">@pytest_asyncio</span><span class="o">.</span><span class="n">fixture</span><span class="p">()</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">async_foo_contract</span><span class="p">(</span><span class="n">async_w3</span><span class="p">):</span>
    <span class="c1"># For simplicity of this example we statically define the</span>
    <span class="c1"># contract code here. You might read your contracts from a</span>
    <span class="c1"># file, or something else to test with in your own code</span>
    <span class="c1">#</span>
    <span class="c1"># pragma solidity^0.5.3;</span>
    <span class="c1">#</span>
    <span class="c1"># contract Foo {</span>
    <span class="c1">#</span>
    <span class="c1">#     string public bar;</span>
    <span class="c1">#     event barred(string _bar);</span>
    <span class="c1">#</span>
    <span class="c1">#     constructor() public {</span>
    <span class="c1">#         bar = &quot;hello world&quot;;</span>
    <span class="c1">#     }</span>
    <span class="c1">#</span>
    <span class="c1">#     function setBar(string memory _bar) public {</span>
    <span class="c1">#         bar = _bar;</span>
    <span class="c1">#         emit barred(_bar);</span>
    <span class="c1">#     }</span>
    <span class="c1">#</span>
    <span class="c1"># }</span>

    <span class="n">abi</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;[{&quot;anonymous&quot;:false,&quot;inputs&quot;:[{&quot;indexed&quot;:false,&quot;name&quot;:&quot;_bar&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;name&quot;:&quot;barred&quot;,&quot;type&quot;:&quot;event&quot;},{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;_bar&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;name&quot;:&quot;setBar&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;inputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;constructor&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;bar&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;}]&quot;&quot;&quot;</span>  <span class="c1"># noqa: E501</span>
    <span class="c1"># This bytecode is the output of compiling with</span>
    <span class="c1"># solc version:0.5.3+commit.10d17f24.Emscripten.clang</span>
    <span class="n">bytecode</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;608060405234801561001057600080fd5b506040805190810160405280600b81526020017f68656c6c6f20776f726c640000000000000000000000000000000000000000008152506000908051906020019061005c929190610062565b50610107565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100a357805160ff19168380011785556100d1565b828001600101855582156100d1579182015b828111156100d05782518255916020019190600101906100b5565b5b5090506100de91906100e2565b5090565b61010491905b808211156101005760008160009055506001016100e8565b5090565b90565b6103bb806101166000396000f3fe608060405234801561001057600080fd5b5060043610610053576000357c01000000000000000000000000000000000000000000000000000000009004806397bc14aa14610058578063febb0f7e14610113575b600080fd5b6101116004803603602081101561006e57600080fd5b810190808035906020019064010000000081111561008b57600080fd5b82018360208201111561009d57600080fd5b803590602001918460018302840111640100000000831117156100bf57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610196565b005b61011b61024c565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561015b578082015181840152602081019050610140565b50505050905090810190601f1680156101885780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b80600090805190602001906101ac9291906102ea565b507f5f71ad82e16f082de5ff496b140e2fbc8621eeb37b36d59b185c3f1364bbd529816040518080602001828103825283818151815260200191508051906020019080838360005b8381101561020f5780820151818401526020810190506101f4565b50505050905090810190601f16801561023c5780820380516001836020036101000a031916815260200191505b509250505060405180910390a150565b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156102e25780601f106102b7576101008083540402835291602001916102e2565b820191906000526020600020905b8154815290600101906020018083116102c557829003601f168201915b505050505081565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061032b57805160ff1916838001178555610359565b82800160010185558215610359579182015b8281111561035857825182559160200191906001019061033d565b5b509050610366919061036a565b5090565b61038c91905b80821115610388576000816000905550600101610370565b5090565b9056fea165627a7a72305820ae6ca683d45ee8a71bba45caee29e4815147cd308f772c853a20dfe08214dbb50029&quot;&quot;&quot;</span>  <span class="c1"># noqa: E501</span>

    <span class="c1"># Create our contract class.</span>
    <span class="n">FooContract</span> <span class="o">=</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">,</span> <span class="n">bytecode</span><span class="o">=</span><span class="n">bytecode</span><span class="p">)</span>
    <span class="c1"># issue a transaction to deploy the contract.</span>
    <span class="n">tx_hash</span> <span class="o">=</span> <span class="k">await</span> <span class="n">FooContract</span><span class="o">.</span><span class="n">constructor</span><span class="p">()</span><span class="o">.</span><span class="n">transact</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">default_account</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="c1"># wait for the transaction to be mined</span>
    <span class="n">tx_receipt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>
    <span class="c1"># instantiate and return an instance of our contract.</span>
    <span class="k">return</span> <span class="n">FooContract</span><span class="p">(</span><span class="n">tx_receipt</span><span class="p">[</span><span class="s2">&quot;contractAddress&quot;</span><span class="p">])</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">test_async_initial_greeting</span><span class="p">(</span><span class="n">async_foo_contract</span><span class="p">):</span>
    <span class="n">hw</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_foo_contract</span><span class="o">.</span><span class="n">caller</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">hw</span> <span class="o">==</span> <span class="s2">&quot;hello world&quot;</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">test_async_can_update_greeting</span><span class="p">(</span><span class="n">async_w3</span><span class="p">,</span> <span class="n">async_foo_contract</span><span class="p">):</span>
    <span class="n">tx_hash</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_foo_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">setBar</span><span class="p">(</span>
        <span class="s2">&quot;testing contracts is easy&quot;</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">default_account</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="k">await</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>

    <span class="c1"># verify that the contract is now using the updated greeting</span>
    <span class="n">hw</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_foo_contract</span><span class="o">.</span><span class="n">caller</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">hw</span> <span class="o">==</span> <span class="s2">&quot;testing contracts is easy&quot;</span>


<span class="nd">@pytest</span><span class="o">.</span><span class="n">mark</span><span class="o">.</span><span class="n">asyncio</span>
<span class="k">async</span> <span class="k">def</span> <span class="nf">test_async_updating_greeting_emits_event</span><span class="p">(</span><span class="n">async_w3</span><span class="p">,</span> <span class="n">async_foo_contract</span><span class="p">):</span>
    <span class="c1"># send transaction that updates the greeting</span>
    <span class="n">tx_hash</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_foo_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">setBar</span><span class="p">(</span>
        <span class="s2">&quot;testing contracts is easy&quot;</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">(</span>
        <span class="p">{</span>
            <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">default_account</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="n">receipt</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">,</span> <span class="mi">180</span><span class="p">)</span>

    <span class="c1"># get all of the `barred` logs for the contract</span>
    <span class="n">logs</span> <span class="o">=</span> <span class="k">await</span> <span class="n">async_foo_contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">barred</span><span class="o">.</span><span class="n">get_logs</span><span class="p">()</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">logs</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="c1"># verify that the log&#39;s data matches the expected value</span>
    <span class="n">event</span> <span class="o">=</span> <span class="n">logs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">event</span><span class="o">.</span><span class="n">blockHash</span> <span class="o">==</span> <span class="n">receipt</span><span class="o">.</span><span class="n">blockHash</span>
    <span class="k">assert</span> <span class="n">event</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">_bar</span> <span class="o">==</span> <span class="s2">&quot;testing contracts is easy&quot;</span>
</pre></div>
</div>
</section>
</section>
</section>
<span id="document-filters"></span><section id="events-and-logs">
<span id="filtering"></span><h3>Events and Logs<a class="headerlink" href="#events-and-logs" title="Link to this heading">ÔÉÅ</a></h3>
<p>If you‚Äôre on this page, you‚Äôre likely looking for an answer to this question:
<strong>How do I know when a specific contract is used?</strong> You have several options:</p>
<ol class="arabic simple">
<li><p>Query blocks for transactions that include the contract address in the <code class="docutils literal notranslate"><span class="pre">&quot;to&quot;</span></code> field.
This contrived example is searching the latest block for any transactions sent to the
<a class="reference external" href="https://etherscan.io/token/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2#code">WETH</a> contract.</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">WETH_ADDRESS</span> <span class="o">=</span> <span class="s1">&#39;0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2&#39;</span>

<span class="n">block</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">tx_hash</span> <span class="ow">in</span> <span class="n">block</span><span class="o">.</span><span class="n">transactions</span><span class="p">:</span>
    <span class="n">tx</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction</span><span class="p">(</span><span class="n">tx_hash</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tx</span><span class="p">[</span><span class="s1">&#39;to&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">WETH_ADDRESS</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Found interaction with WETH contract! </span><span class="si">{</span><span class="n">tx</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Query for logs emitted by a contract. After instantiating a web3.py Contract object,
you can <a class="reference internal" href="index.html#contract-get-logs"><span class="std std-ref">fetch logs</span></a> for any event listed in the ABI.  In this
example, we query for <code class="docutils literal notranslate"><span class="pre">Transfer</span></code> events in the latest block and log out the results.</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">WETH_ADDRESS</span> <span class="o">=</span> <span class="s1">&#39;0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2&#39;</span>
<span class="n">WETH_ABI</span> <span class="o">=</span> <span class="s1">&#39;[{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;name&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;guy&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;approve&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;totalSupply&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;src&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;name&quot;:&quot;dst&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;transferFrom&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;withdraw&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;decimals&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint8&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;}],&quot;name&quot;:&quot;balanceOf&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;symbol&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:false,&quot;inputs&quot;:[{&quot;name&quot;:&quot;dst&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;transfer&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;bool&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:false,&quot;inputs&quot;:[],&quot;name&quot;:&quot;deposit&quot;,&quot;outputs&quot;:[],&quot;payable&quot;:true,&quot;stateMutability&quot;:&quot;payable&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;constant&quot;:true,&quot;inputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;address&quot;}],&quot;name&quot;:&quot;allowance&quot;,&quot;outputs&quot;:[{&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;},{&quot;payable&quot;:true,&quot;stateMutability&quot;:&quot;payable&quot;,&quot;type&quot;:&quot;fallback&quot;},{&quot;anonymous&quot;:false,&quot;inputs&quot;:[{&quot;indexed&quot;:true,&quot;name&quot;:&quot;src&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;indexed&quot;:true,&quot;name&quot;:&quot;guy&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;indexed&quot;:false,&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;Approval&quot;,&quot;type&quot;:&quot;event&quot;},{&quot;anonymous&quot;:false,&quot;inputs&quot;:[{&quot;indexed&quot;:true,&quot;name&quot;:&quot;src&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;indexed&quot;:true,&quot;name&quot;:&quot;dst&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;indexed&quot;:false,&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;Transfer&quot;,&quot;type&quot;:&quot;event&quot;},{&quot;anonymous&quot;:false,&quot;inputs&quot;:[{&quot;indexed&quot;:true,&quot;name&quot;:&quot;dst&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;indexed&quot;:false,&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;Deposit&quot;,&quot;type&quot;:&quot;event&quot;},{&quot;anonymous&quot;:false,&quot;inputs&quot;:[{&quot;indexed&quot;:true,&quot;name&quot;:&quot;src&quot;,&quot;type&quot;:&quot;address&quot;},{&quot;indexed&quot;:false,&quot;name&quot;:&quot;wad&quot;,&quot;type&quot;:&quot;uint256&quot;}],&quot;name&quot;:&quot;Withdrawal&quot;,&quot;type&quot;:&quot;event&quot;}]&#39;</span>

<span class="n">weth_contract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="n">WETH_ADDRESS</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">WETH_ABI</span><span class="p">)</span>

<span class="c1"># fetch transfer events in the last block</span>
<span class="n">logs</span> <span class="o">=</span> <span class="n">weth_contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Transfer</span><span class="p">()</span><span class="o">.</span><span class="n">get_logs</span><span class="p">(</span><span class="n">from_block</span><span class="o">=</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">block_number</span><span class="p">)</span>

<span class="k">for</span> <span class="n">log</span> <span class="ow">in</span> <span class="n">logs</span><span class="p">:</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transfer of </span><span class="si">{</span><span class="n">w3</span><span class="o">.</span><span class="n">from_wei</span><span class="p">(</span><span class="n">log</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">wad</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ether&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> WETH from </span><span class="si">{</span><span class="n">log</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">src</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">log</span><span class="o">.</span><span class="n">args</span><span class="o">.</span><span class="n">dst</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>See an advanced example of fetching log history <a class="reference internal" href="#advanced-token-fetch"><span class="std std-ref">here</span></a>.</p>
<ol class="arabic simple" start="3">
<li><p>Subscribe to events for real-time updates. When using a persistent connection provider
(<a class="reference internal" href="index.html#web3.providers.persistent.WebSocketProvider" title="web3.providers.persistent.WebSocketProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketProvider</span></code></a> or
<a class="reference internal" href="index.html#web3.providers.persistent.AsyncIPCProvider" title="web3.providers.persistent.AsyncIPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncIPCProvider</span></code></a>), the
<a class="reference internal" href="index.html#web3.eth.Eth.subscribe" title="web3.eth.Eth.subscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscribe()</span></code></a> method can be used to establish a new
event subscription. This example subscribes to <code class="docutils literal notranslate"><span class="pre">Transfer</span></code> events of the WETH contract.</p></li>
</ol>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">asyncio</span>
<span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">AsyncWeb3</span><span class="p">,</span> <span class="n">WebSocketProvider</span>
<span class="kn">from</span> <span class="nn">eth_abi.abi</span> <span class="kn">import</span> <span class="n">decode</span>

<span class="n">WETH_ADDRESS</span> <span class="o">=</span> <span class="s2">&quot;0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2&quot;</span>


<span class="k">async</span> <span class="k">def</span> <span class="nf">subscribe_to_transfer_events</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="s2">&quot;...&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">w3</span><span class="p">:</span>
        <span class="n">transfer_event_topic</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">keccak</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;Transfer(address,address,uint256)&quot;</span><span class="p">)</span>
        <span class="n">filter_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="n">WETH_ADDRESS</span><span class="p">,</span>
            <span class="s2">&quot;topics&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">transfer_event_topic</span><span class="p">],</span>
        <span class="p">}</span>
        <span class="n">subscription_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;logs&quot;</span><span class="p">,</span> <span class="n">filter_params</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Subscribing to transfer events for WETH at </span><span class="si">{</span><span class="n">subscription_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">async</span> <span class="k">for</span> <span class="n">payload</span> <span class="ow">in</span> <span class="n">w3</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">process_subscriptions</span><span class="p">():</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">payload</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span>

            <span class="n">from_addr</span> <span class="o">=</span> <span class="n">decode</span><span class="p">([</span><span class="s2">&quot;address&quot;</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;topics&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">to_addr</span> <span class="o">=</span> <span class="n">decode</span><span class="p">([</span><span class="s2">&quot;address&quot;</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;topics&quot;</span><span class="p">][</span><span class="mi">2</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">amount</span> <span class="o">=</span> <span class="n">decode</span><span class="p">([</span><span class="s2">&quot;uint256&quot;</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="s2">&quot;data&quot;</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">w3</span><span class="o">.</span><span class="n">from_wei</span><span class="p">(</span><span class="n">amount</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ether&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> WETH from </span><span class="si">{</span><span class="n">from_addr</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">to_addr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">subscribe_to_transfer_events</span><span class="p">())</span>
</pre></div>
</div>
<p>For more usage examples see the docs on <a class="reference internal" href="index.html#subscription-examples"><span class="std std-ref">Using Persistent Connection Providers</span></a>.</p>
</div></blockquote>
<ol class="arabic simple" start="4">
<li><p>Use a filter.</p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>While filters can be a very convenient way to monitor for blocks, transactions, or
events, they are notoriously unreliable. Both remote and locally hosted nodes have
a reputation for occasionally dropping filters, and some remote node providers don‚Äôt
support filter-related RPC calls at all.</p>
</div>
<p id="module-web3.utils.filters">The <a class="reference internal" href="index.html#web3.eth.Eth.filter" title="web3.eth.Eth.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.eth.Eth.filter()</span></code></a> method can be used to set up filters for:</p>
<ul>
<li><p>Pending Transactions: <code class="docutils literal notranslate"><span class="pre">w3.eth.filter(&quot;pending&quot;)</span></code></p></li>
<li><p>New Blocks <code class="docutils literal notranslate"><span class="pre">w3.eth.filter(&quot;latest&quot;)</span></code></p></li>
<li><p>Event Logs</p>
<blockquote>
<div><p>Through the contract instance api:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">event_filter</span> <span class="o">=</span> <span class="n">my_contract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">myEvent</span><span class="o">.</span><span class="n">create_filter</span><span class="p">(</span><span class="n">from_block</span><span class="o">=</span><span class="s1">&#39;latest&#39;</span><span class="p">,</span> <span class="n">argument_filters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<p>Or built manually by supplying <a class="reference external" href="https://github.com/ethereum/execution-apis/blob/bea0266c42919a2fb3ee524fb91e624a23bc17c5/src/schemas/filter.json#L28">valid filter params</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">event_filter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">({</span><span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="n">contract_address</span><span class="p">})</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Attaching to an existing filter</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">existing_filter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">filter_id</span><span class="o">=</span><span class="s2">&quot;0x0&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Creating event filters requires that your Ethereum node has an API support enabled for filters.
Note that Infura support for filters does not offer access to <cite>pending</cite> filters.
To get event logs on other stateless nodes please see <a class="reference internal" href="index.html#web3.contract.ContractEvents" title="web3.contract.ContractEvents"><code class="xref py py-class docutils literal notranslate"><span class="pre">web3.contract.ContractEvents</span></code></a>.</p>
</div>
<section id="filter-class">
<h4>Filter Class<a class="headerlink" href="#filter-class" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="web3.utils.filters.Filter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.utils.filters.</span></span><span class="sig-name descname"><span class="pre">Filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">web3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.filters.Filter" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.utils.filters.Filter.filter_id">
<span class="sig-prename descclassname"><span class="pre">Filter.</span></span><span class="sig-name descname"><span class="pre">filter_id</span></span><a class="headerlink" href="#web3.utils.filters.Filter.filter_id" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">filter_id</span></code> for this filter as returned by the <code class="docutils literal notranslate"><span class="pre">eth_newFilter</span></code> RPC
method when this filter was created.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.utils.filters.Filter.get_new_entries">
<span class="sig-prename descclassname"><span class="pre">Filter.</span></span><span class="sig-name descname"><span class="pre">get_new_entries</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.filters.Filter.get_new_entries" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Retrieve new entries for this filter.</p>
<p>Logs will be retrieved using the
<a class="reference internal" href="index.html#web3.eth.Eth.get_filter_changes" title="web3.eth.Eth.get_filter_changes"><code class="xref py py-func docutils literal notranslate"><span class="pre">web3.eth.Eth.get_filter_changes()</span></code></a> which returns only new entries since the last
poll.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.utils.filters.Filter.get_all_entries">
<span class="sig-prename descclassname"><span class="pre">Filter.</span></span><span class="sig-name descname"><span class="pre">get_all_entries</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.filters.Filter.get_all_entries" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Retrieve all entries for this filter.</p>
<p>Logs will be retrieved using the
<a class="reference internal" href="index.html#web3.eth.Eth.get_filter_logs" title="web3.eth.Eth.get_filter_logs"><code class="xref py py-func docutils literal notranslate"><span class="pre">web3.eth.Eth.get_filter_logs()</span></code></a> which returns all entries that match the given
filter.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.utils.filters.Filter.format_entry">
<span class="sig-prename descclassname"><span class="pre">Filter.</span></span><span class="sig-name descname"><span class="pre">format_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.filters.Filter.format_entry" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Hook for subclasses to modify the format of the log entries this filter
returns, or passes to its callback functions.</p>
<p>By default this returns the <code class="docutils literal notranslate"><span class="pre">entry</span></code> parameter unmodified.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.utils.filters.Filter.is_valid_entry">
<span class="sig-prename descclassname"><span class="pre">Filter.</span></span><span class="sig-name descname"><span class="pre">is_valid_entry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entry</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.filters.Filter.is_valid_entry" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Hook for subclasses to add additional programmatic filtering.  The default
implementation always returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd></dl>

</section>
<section id="block-and-transaction-filter-classes">
<h4>Block and Transaction Filter Classes<a class="headerlink" href="#block-and-transaction-filter-classes" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="web3.utils.filters.BlockFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.utils.filters.</span></span><span class="sig-name descname"><span class="pre">BlockFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">...</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.filters.BlockFilter" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">BlockFilter</span></code> is a subclass of <a class="reference internal" href="#web3.utils.filters.Filter" title="web3.utils.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a>.</p>
<p>You can setup a filter for new blocks using <code class="docutils literal notranslate"><span class="pre">web3.eth.filter('latest')</span></code> which
will return a new <a class="reference internal" href="#web3.utils.filters.BlockFilter" title="web3.utils.filters.BlockFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">BlockFilter</span></code></a> object.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_block_filter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
<span class="n">new_block_filter</span><span class="o">.</span><span class="n">get_new_entries</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">&quot;safe&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;finalized&quot;</span></code> block identifiers are not yet supported for
<code class="docutils literal notranslate"><span class="pre">eth_newBlockFilter</span></code>.</p>
</div>
</div></blockquote>
<dl class="py class">
<dt class="sig sig-object py" id="web3.utils.filters.TransactionFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.utils.filters.</span></span><span class="sig-name descname"><span class="pre">TransactionFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">...</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.filters.TransactionFilter" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">TransactionFilter</span></code> is a subclass of <a class="reference internal" href="#web3.utils.filters.Filter" title="web3.utils.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a>.</p>
<p>You can setup a filter for new blocks using <code class="docutils literal notranslate"><span class="pre">web3.eth.filter('pending')</span></code> which
will return a new <a class="reference internal" href="#web3.utils.filters.TransactionFilter" title="web3.utils.filters.TransactionFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">TransactionFilter</span></code></a> object.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">new_transaction_filter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">)</span>
<span class="n">new_transaction_filter</span><span class="o">.</span><span class="n">get_new_entries</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="event-log-filters">
<h4>Event Log Filters<a class="headerlink" href="#event-log-filters" title="Link to this heading">ÔÉÅ</a></h4>
<p>You can set up a filter for event logs using the web3.py contract api:
<a class="reference internal" href="index.html#web3.contract.Contract.events.your_event_name.create_filter" title="web3.contract.Contract.events.your_event_name.create_filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.contract.Contract.events.your_event_name.create_filter()</span></code></a>, which provides some conveniences for
creating event log filters. Refer to the following example:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">event_filter</span> <span class="o">=</span> <span class="n">my_contract</span><span class="o">.</span><span class="n">events</span><span class="o">.&lt;</span><span class="n">event_name</span><span class="o">&gt;.</span><span class="n">create_filter</span><span class="p">(</span><span class="n">from_block</span><span class="o">=</span><span class="s2">&quot;latest&quot;</span><span class="p">,</span> <span class="n">argument_filters</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;arg1&#39;</span><span class="p">:</span><span class="mi">10</span><span class="p">})</span>
<span class="n">event_filter</span><span class="o">.</span><span class="n">get_new_entries</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>See <a class="reference internal" href="index.html#web3.contract.Contract.events.your_event_name.create_filter" title="web3.contract.Contract.events.your_event_name.create_filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">web3.contract.Contract.events.your_event_name.create_filter()</span></code></a> documentation for more information.</p>
<p>You can set up an event log filter like the one above with <code class="docutils literal notranslate"><span class="pre">web3.eth.filter</span></code> by supplying a
dictionary containing the standard filter parameters. Assuming that <code class="docutils literal notranslate"><span class="pre">arg1</span></code> is indexed, the
equivalent filter creation would look like:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">event_signature_hash</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">keccak</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;eventName(uint32)&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>
<span class="n">event_filter</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">({</span>
    <span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="n">myContract_address</span><span class="p">,</span>
    <span class="s2">&quot;topics&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">event_signature_hash</span><span class="p">,</span>
               <span class="s2">&quot;0x000000000000000000000000000000000000000000000000000000000000000a&quot;</span><span class="p">],</span>
    <span class="p">})</span>
</pre></div>
</div>
</div></blockquote>
<p>The <code class="docutils literal notranslate"><span class="pre">topics</span></code> argument is order-dependent. For non-anonymous events, the first item in the topic list is always the keccack hash of the event signature. Subsequent topic items are the hex encoded values for indexed event arguments. In the above example, the second item is the <code class="docutils literal notranslate"><span class="pre">arg1</span></code> value <code class="docutils literal notranslate"><span class="pre">10</span></code> encoded to its hex string representation.</p>
<p>In addition to being order-dependent, there are a few more points to recognize when specifying topic filters:</p>
<blockquote>
<div><p>Given a transaction log with topics [A, B], the following topic filters will yield a match:</p>
<ul class="simple">
<li><p>[] ‚Äúanything‚Äù</p></li>
<li><p>[A] ‚ÄúA in first position (and anything after)‚Äù</p></li>
<li><p>[None, B] ‚Äúanything in first position AND B in second position (and anything after)‚Äù</p></li>
<li><p>[A, B] ‚ÄúA in first position AND B in second position (and anything after)‚Äù</p></li>
<li><p>[[A, B], [A, B]] ‚Äú(A OR B) in first position AND (A OR B) in second position (and anything after)‚Äù</p></li>
</ul>
</div></blockquote>
<p>See the JSON-RPC documentation for <a class="reference external" href="https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_newfilter">eth_newFilter</a> more information on the standard filter parameters.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Though <code class="docutils literal notranslate"><span class="pre">&quot;finalized&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;safe&quot;</span></code> block identifiers are not yet part of the
specifications for <code class="docutils literal notranslate"><span class="pre">eth_newFilter</span></code>, they are supported by web3.py and may or
may not yield expected results depending on the node being accessed.</p>
</div>
</div></blockquote>
<p>Creating a log filter by either of the above methods will return a <a class="reference internal" href="#web3.utils.filters.LogFilter" title="web3.utils.filters.LogFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogFilter</span></code></a> instance.</p>
<dl class="py class">
<dt class="sig sig-object py" id="web3.utils.filters.LogFilter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.utils.filters.</span></span><span class="sig-name descname"><span class="pre">LogFilter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">web3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">log_entry_formatter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data_filter_set</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.filters.LogFilter" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p>The <a class="reference internal" href="#web3.utils.filters.LogFilter" title="web3.utils.filters.LogFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogFilter</span></code></a> class is a subclass of <a class="reference internal" href="#web3.utils.filters.Filter" title="web3.utils.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a>.  See the <a class="reference internal" href="#web3.utils.filters.Filter" title="web3.utils.filters.Filter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Filter</span></code></a>
documentation for inherited methods.</p>
<p><a class="reference internal" href="#web3.utils.filters.LogFilter" title="web3.utils.filters.LogFilter"><code class="xref py py-class docutils literal notranslate"><span class="pre">LogFilter</span></code></a> provides the following additional
methods:</p>
<dl class="py method">
<dt class="sig sig-object py" id="web3.utils.filters.LogFilter.set_data_filters">
<span class="sig-prename descclassname"><span class="pre">LogFilter.</span></span><span class="sig-name descname"><span class="pre">set_data_filters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_filter_set</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.filters.LogFilter.set_data_filters" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p>Provides a means to filter on the log data, in other words the ability to filter on values from
un-indexed event arguments. The parameter <code class="docutils literal notranslate"><span class="pre">data_filter_set</span></code> should be a list or set of 32-byte hex encoded values.</p>
</section>
<section id="examples-listening-for-events">
<h4>Examples: Listening For Events<a class="headerlink" href="#examples-listening-for-events" title="Link to this heading">ÔÉÅ</a></h4>
<section id="synchronous">
<h5>Synchronous<a class="headerlink" href="#synchronous" title="Link to this heading">ÔÉÅ</a></h5>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">IPCProvider</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># instantiate Web3 instance</span>
<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">IPCProvider</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">handle_event</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">log_loop</span><span class="p">(</span><span class="n">event_filter</span><span class="p">,</span> <span class="n">poll_interval</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">event_filter</span><span class="o">.</span><span class="n">get_new_entries</span><span class="p">():</span>
            <span class="n">handle_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">poll_interval</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">block_filter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
    <span class="n">log_loop</span><span class="p">(</span><span class="n">block_filter</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="asynchronous-filter-polling">
<span id="asynchronous-filters"></span><h5>Asynchronous Filter Polling<a class="headerlink" href="#asynchronous-filter-polling" title="Link to this heading">ÔÉÅ</a></h5>
<p>Starting with web3 version 4, the <code class="docutils literal notranslate"><span class="pre">watch</span></code> method was taken out of the web3 filter objects.
There are many decisions to be made when designing a system regarding threading and concurrency.
Rather than force a decision, web3 leaves these choices up to the user. Below are some example
implementations of asynchronous filter-event handling that can serve as starting points.</p>
<section id="single-threaded-concurrency-with-async-and-await">
<h6>Single threaded concurrency with <code class="docutils literal notranslate"><span class="pre">async</span></code> and <code class="docutils literal notranslate"><span class="pre">await</span></code><a class="headerlink" href="#single-threaded-concurrency-with-async-and-await" title="Link to this heading">ÔÉÅ</a></h6>
<p>Beginning in python 3.5, the <code class="docutils literal notranslate"><span class="pre">async</span></code> and <code class="docutils literal notranslate"><span class="pre">await</span></code> built-in keywords were added.  These provide a
shared api for coroutines that can be utilized by modules such as the built-in <a class="reference external" href="https://docs.python.org/3/library/asyncio.html">asyncio</a>.  Below is
an example event loop using <a class="reference external" href="https://docs.python.org/3/library/asyncio.html">asyncio</a>, that polls multiple web3 filter object, and passes new
entries to a handler.</p>
<blockquote>
<div><blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">IPCProvider</span>
<span class="kn">import</span> <span class="nn">asyncio</span>

<span class="c1"># instantiate Web3 instance</span>
<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">IPCProvider</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">handle_event</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="c1"># and whatever</span>

<span class="k">async</span> <span class="k">def</span> <span class="nf">log_loop</span><span class="p">(</span><span class="n">event_filter</span><span class="p">,</span> <span class="n">poll_interval</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">event_filter</span><span class="o">.</span><span class="n">get_new_entries</span><span class="p">():</span>
            <span class="n">handle_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">poll_interval</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">block_filter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
    <span class="n">tx_filter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">)</span>
    <span class="n">loop</span> <span class="o">=</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">loop</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span>
            <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
                <span class="n">log_loop</span><span class="p">(</span><span class="n">block_filter</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
                <span class="n">log_loop</span><span class="p">(</span><span class="n">tx_filter</span><span class="p">,</span> <span class="mi">2</span><span class="p">)))</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">loop</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>Read the <a class="reference external" href="https://docs.python.org/3/library/asyncio.html">asyncio</a> documentation for more information.</p>
</div></blockquote>
</section>
<section id="running-the-event-loop-in-a-separate-thread">
<h6>Running the event loop in a separate thread<a class="headerlink" href="#running-the-event-loop-in-a-separate-thread" title="Link to this heading">ÔÉÅ</a></h6>
<p>Here is an extended version of above example, where the event loop is run in a separate thread,
releasing the <code class="docutils literal notranslate"><span class="pre">main</span></code> function for other tasks.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">IPCProvider</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># instantiate Web3 instance</span>
<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">IPCProvider</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">handle_event</span><span class="p">(</span><span class="n">event</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
    <span class="c1"># and whatever</span>


<span class="k">def</span> <span class="nf">log_loop</span><span class="p">(</span><span class="n">event_filter</span><span class="p">,</span> <span class="n">poll_interval</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">event_filter</span><span class="o">.</span><span class="n">get_new_entries</span><span class="p">():</span>
            <span class="n">handle_event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">poll_interval</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">block_filter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
    <span class="n">worker</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">log_loop</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">block_filter</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">worker</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        <span class="c1"># .. do some other stuff</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div></blockquote>
<p>Here are some other libraries that provide frameworks for writing asynchronous python:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference external" href="https://www.gevent.org/">gevent</a></p></li>
<li><p><a class="reference external" href="https://twistedmatrix.com/">twisted</a></p></li>
<li><p><a class="reference external" href="https://www.celeryproject.org/">celery</a></p></li>
</ul>
</div></blockquote>
</section>
</section>
</section>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Link to this heading">ÔÉÅ</a></h4>
<section id="advanced-example-fetching-all-token-transfer-events">
<span id="advanced-token-fetch"></span><h5>Advanced example: Fetching all token transfer events<a class="headerlink" href="#advanced-example-fetching-all-token-transfer-events" title="Link to this heading">ÔÉÅ</a></h5>
<p>In this example, we show how to fetch all events of a certain event type from the Ethereum blockchain. There are three challenges when working with a large set of events:</p>
<ul class="simple">
<li><p>How to incrementally update an existing database of fetched events</p></li>
<li><p>How to deal with interruptions in long running processes</p></li>
<li><p>How to deal with <cite>eth_getLogs</cite> JSON-RPC call query limitations</p></li>
<li><p>How to handle Ethereum minor chain reorganisations in (near) real-time data</p></li>
</ul>
<section id="eth-getlogs-limitations">
<h6>eth_getLogs limitations<a class="headerlink" href="#eth-getlogs-limitations" title="Link to this heading">ÔÉÅ</a></h6>
<p>Ethereum JSON-RPC API servers, like Geth, do not provide an easy way to paginate over events, only over blocks. There‚Äôs no request that can find the first block with an event or how many events occur within a range of blocks. The only feedback the JSON-RPC service will give you is whether the <code class="docutils literal notranslate"><span class="pre">eth_getLogs</span></code> call failed.</p>
<p>In this example script, we provide two kinds of heuristics to deal with this issue. The script scans events in a chunk of blocks (start block number - end block number). Then it uses two methods to find how many events there are likely to be in a block window:</p>
<ul class="simple">
<li><p>Dynamically set the block range window size, while never exceeding a threshold (e.g., 10,000 blocks).</p></li>
<li><p>In the case of <code class="docutils literal notranslate"><span class="pre">eth_getLogs</span></code>, the JSON-RPC call gives a timeout error, decrease the end block number and tries again with a smaller block range window.</p></li>
</ul>
</section>
<section id="example-code">
<h6>Example code<a class="headerlink" href="#example-code" title="Link to this heading">ÔÉÅ</a></h6>
<p>The following example code is divided into a reusable <code class="docutils literal notranslate"><span class="pre">EventScanner</span></code> class and then a demo script that:</p>
<ul class="simple">
<li><p>fetches all transfer events for <a class="reference external" href="https://etherscan.io/token/0x9b6443b0fb9c241a7fdac375595cea13e6b7807a">RCC token</a>,</p></li>
<li><p>can incrementally run again to check if there are new events,</p></li>
<li><p>handles interruptions (e.g., CTRL+C abort) gracefully,</p></li>
<li><p>writes all <code class="docutils literal notranslate"><span class="pre">Transfer</span></code> events in a single file JSON database, so that other process can consume them,</p></li>
<li><p>uses the <a class="reference external" href="https://pypi.org/project/tqdm/">tqdm</a> library for progress bar output in a console,</p></li>
<li><p>only supports <code class="docutils literal notranslate"><span class="pre">HTTPS</span></code> providers, because JSON-RPC retry logic depends on the implementation details of the underlying protocol,</p></li>
<li><p>disables the default exception retry configuration because it does not know how to handle the shrinking block range window for <code class="docutils literal notranslate"><span class="pre">eth_getLogs</span></code>, and</p></li>
<li><p>consumes around 20k JSON-RPC API calls.</p></li>
</ul>
<p>The script can be run with: <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">./eventscanner.py</span> <span class="pre">&lt;your</span> <span class="pre">JSON-RPC</span> <span class="pre">API</span> <span class="pre">URL&gt;</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;A stateful event scanner for Ethereum-based blockchains using web3.py.</span>

<span class="sd">With the stateful mechanism, you can do one batch scan or incremental scans,</span>
<span class="sd">where events are added wherever the scanner left off.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Iterable</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>

<span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="kn">from</span> <span class="nn">web3.contract</span> <span class="kn">import</span> <span class="n">Contract</span>
<span class="kn">from</span> <span class="nn">web3.datastructures</span> <span class="kn">import</span> <span class="n">AttributeDict</span>
<span class="kn">from</span> <span class="nn">web3.exceptions</span> <span class="kn">import</span> <span class="n">BlockNotFound</span>
<span class="kn">from</span> <span class="nn">eth_abi.codec</span> <span class="kn">import</span> <span class="n">ABICodec</span>

<span class="c1"># Currently this method is not exposed over official web3 API,</span>
<span class="c1"># but we need it to construct eth_getLogs parameters</span>
<span class="kn">from</span> <span class="nn">web3._utils.filters</span> <span class="kn">import</span> <span class="n">construct_event_filter_params</span>
<span class="kn">from</span> <span class="nn">web3._utils.events</span> <span class="kn">import</span> <span class="n">get_event_data</span>


<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">EventScannerState</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Application state that remembers what blocks we have scanned in the case of crash.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">get_last_scanned_block</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Number of the last block we have scanned on the previous cycle.</span>

<span class="sd">        :return: 0 if no blocks scanned yet</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">start_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Scanner is about to ask data of multiple blocks over JSON-RPC.</span>

<span class="sd">        Start a database session if needed.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">end_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_number</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Scanner finished a number of blocks.</span>

<span class="sd">        Persistent any data in your state now.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_when</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">AttributeDict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">object</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Process incoming events.</span>

<span class="sd">        This function takes raw events from Web3, transforms them to your application internal</span>
<span class="sd">        format, then saves them in a database or some other state.</span>

<span class="sd">        :param block_when: When this block was mined</span>

<span class="sd">        :param event: Symbolic dictionary of the event data</span>

<span class="sd">        :return: Internal state structure that is the result of event transformation.</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">delete_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">since_block</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete any data since this block was scanned.</span>

<span class="sd">        Purges any potential minor reorg data.</span>
<span class="sd">        &quot;&quot;&quot;</span>


<span class="k">class</span> <span class="nc">EventScanner</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Scan blockchain for events and try not to abuse JSON-RPC API too much.</span>

<span class="sd">    Can be used for real-time scans, as it detects minor chain reorganisation and rescans.</span>
<span class="sd">    Unlike the easy web3.contract.Contract, this scanner can scan events from multiple contracts at once.</span>
<span class="sd">    For example, you can get all transfers from all tokens in the same scan.</span>

<span class="sd">    You *should* disable the default ``exception_retry_configuration`` on your provider for Web3,</span>
<span class="sd">    because it cannot correctly throttle and decrease the `eth_getLogs` block number range.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w3</span><span class="p">:</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">contract</span><span class="p">:</span> <span class="n">Contract</span><span class="p">,</span> <span class="n">state</span><span class="p">:</span> <span class="n">EventScannerState</span><span class="p">,</span> <span class="n">events</span><span class="p">:</span> <span class="n">List</span><span class="p">,</span> <span class="n">filters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
                 <span class="n">max_chunk_scan_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10000</span><span class="p">,</span> <span class="n">max_request_retries</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span> <span class="n">request_retry_seconds</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">3.0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        :param contract: Contract</span>
<span class="sd">        :param events: List of web3 Event we scan</span>
<span class="sd">        :param filters: Filters passed to get_logs</span>
<span class="sd">        :param max_chunk_scan_size: JSON-RPC API limit in the number of blocks we query. (Recommendation: 10,000 for mainnet, 500,000 for testnets)</span>
<span class="sd">        :param max_request_retries: How many times we try to reattempt a failed JSON-RPC call</span>
<span class="sd">        :param request_retry_seconds: Delay between failed requests to let JSON-RPC server to recover</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">logger</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contract</span> <span class="o">=</span> <span class="n">contract</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w3</span> <span class="o">=</span> <span class="n">w3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">events</span> <span class="o">=</span> <span class="n">events</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filters</span> <span class="o">=</span> <span class="n">filters</span>

        <span class="c1"># Our JSON-RPC throttling parameters</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">min_scan_chunk_size</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># 12 s/block = 120 seconds period</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_scan_chunk_size</span> <span class="o">=</span> <span class="n">max_chunk_scan_size</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_request_retries</span> <span class="o">=</span> <span class="n">max_request_retries</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">request_retry_seconds</span> <span class="o">=</span> <span class="n">request_retry_seconds</span>

        <span class="c1"># Factor how fast we increase the chunk size if results are found</span>
        <span class="c1"># # (slow down scan after starting to get hits)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chunk_size_decrease</span> <span class="o">=</span> <span class="mf">0.5</span>

        <span class="c1"># Factor how fast we increase chunk size if no results found</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">chunk_size_increase</span> <span class="o">=</span> <span class="mf">2.0</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">address</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">token_address</span>

    <span class="k">def</span> <span class="nf">get_block_timestamp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_num</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get Ethereum block timestamp&quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">block_info</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="n">block_num</span><span class="p">)</span>
        <span class="k">except</span> <span class="n">BlockNotFound</span><span class="p">:</span>
            <span class="c1"># Block was not mined yet,</span>
            <span class="c1"># minor chain reorganisation?</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">last_time</span> <span class="o">=</span> <span class="n">block_info</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">last_time</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_suggested_scan_start_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get where we should start to scan for new token events.</span>

<span class="sd">        If there are no prior scans, start from block 1.</span>
<span class="sd">        Otherwise, start from the last end block minus ten blocks.</span>
<span class="sd">        We rescan the last ten scanned blocks in the case there were forks to avoid</span>
<span class="sd">        misaccounting due to minor single block works (happens once in an hour in Ethereum).</span>
<span class="sd">        These heuristics could be made more robust, but this is for the sake of simple reference implementation.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">end_block</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_last_scanned_block</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">end_block</span><span class="p">:</span>
            <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">end_block</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">NUM_BLOCKS_RESCAN_FOR_FORKS</span><span class="p">)</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">get_suggested_scan_end_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the last mined block on Ethereum chain we are following.&quot;&quot;&quot;</span>

        <span class="c1"># Do not scan all the way to the final block, as this</span>
        <span class="c1"># block might not be mined yet</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">block_number</span> <span class="o">-</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">get_last_scanned_block</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">get_last_scanned_block</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">delete_potentially_forked_block_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">after_block</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Purge old data in the case of blockchain reorganisation.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">delete_data</span><span class="p">(</span><span class="n">after_block</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">scan_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Read and process events between to block numbers.</span>

<span class="sd">        Dynamically decrease the size of the chunk if the case JSON-RPC server pukes out.</span>

<span class="sd">        :return: tuple(actual end block number, when this block was mined, processed events)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">block_timestamps</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">get_block_timestamp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_block_timestamp</span>

        <span class="c1"># Cache block timestamps to reduce some RPC overhead</span>
        <span class="c1"># Real solution might include smarter models around block</span>
        <span class="k">def</span> <span class="nf">get_block_when</span><span class="p">(</span><span class="n">block_num</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">block_num</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">block_timestamps</span><span class="p">:</span>
                <span class="n">block_timestamps</span><span class="p">[</span><span class="n">block_num</span><span class="p">]</span> <span class="o">=</span> <span class="n">get_block_timestamp</span><span class="p">(</span><span class="n">block_num</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">block_timestamps</span><span class="p">[</span><span class="n">block_num</span><span class="p">]</span>

        <span class="n">all_processed</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">event_type</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">events</span><span class="p">:</span>

            <span class="c1"># Callable that takes care of the underlying web3 call</span>
            <span class="k">def</span> <span class="nf">_fetch_events</span><span class="p">(</span><span class="n">_start_block</span><span class="p">,</span> <span class="n">_end_block</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">_fetch_events_for_all_contracts</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">w3</span><span class="p">,</span>
                                                       <span class="n">event_type</span><span class="p">,</span>
                                                       <span class="bp">self</span><span class="o">.</span><span class="n">filters</span><span class="p">,</span>
                                                       <span class="n">from_block</span><span class="o">=</span><span class="n">_start_block</span><span class="p">,</span>
                                                       <span class="n">to_block</span><span class="o">=</span><span class="n">_end_block</span><span class="p">)</span>

            <span class="c1"># Do `n` retries on `eth_getLogs`,</span>
            <span class="c1"># throttle down block range if needed</span>
            <span class="n">end_block</span><span class="p">,</span> <span class="n">events</span> <span class="o">=</span> <span class="n">_retry_web3_call</span><span class="p">(</span>
                <span class="n">_fetch_events</span><span class="p">,</span>
                <span class="n">start_block</span><span class="o">=</span><span class="n">start_block</span><span class="p">,</span>
                <span class="n">end_block</span><span class="o">=</span><span class="n">end_block</span><span class="p">,</span>
                <span class="n">retries</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">max_request_retries</span><span class="p">,</span>
                <span class="n">delay</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">request_retry_seconds</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">evt</span> <span class="ow">in</span> <span class="n">events</span><span class="p">:</span>
                <span class="n">idx</span> <span class="o">=</span> <span class="n">evt</span><span class="p">[</span><span class="s2">&quot;logIndex&quot;</span><span class="p">]</span>  <span class="c1"># Integer of the log index position in the block, null when its pending</span>

                <span class="c1"># We cannot avoid minor chain reorganisations, but</span>
                <span class="c1"># at least we must avoid blocks that are not mined yet</span>
                <span class="k">assert</span> <span class="n">idx</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">&quot;Somehow tried to scan a pending block&quot;</span>

                <span class="n">block_number</span> <span class="o">=</span> <span class="n">evt</span><span class="p">[</span><span class="s2">&quot;blockNumber&quot;</span><span class="p">]</span>

                <span class="c1"># Get UTC time when this event happened (block mined timestamp)</span>
                <span class="c1"># from our in-memory cache</span>
                <span class="n">block_when</span> <span class="o">=</span> <span class="n">get_block_when</span><span class="p">(</span><span class="n">block_number</span><span class="p">)</span>

                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Processing event </span><span class="si">{</span><span class="n">evt</span><span class="p">[</span><span class="s1">&#39;event&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">, block: </span><span class="si">{</span><span class="n">evt</span><span class="p">[</span><span class="s1">&#39;blockNumber&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> count: </span><span class="si">{</span><span class="n">evt</span><span class="p">[</span><span class="s1">&#39;blockNumber&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">processed</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">process_event</span><span class="p">(</span><span class="n">block_when</span><span class="p">,</span> <span class="n">evt</span><span class="p">)</span>
                <span class="n">all_processed</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">processed</span><span class="p">)</span>

        <span class="n">end_block_timestamp</span> <span class="o">=</span> <span class="n">get_block_when</span><span class="p">(</span><span class="n">end_block</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">end_block</span><span class="p">,</span> <span class="n">end_block_timestamp</span><span class="p">,</span> <span class="n">all_processed</span>

    <span class="k">def</span> <span class="nf">estimate_next_chunk_size</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_chuck_size</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">event_found_count</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Try to figure out optimal chunk size</span>

<span class="sd">        Our scanner might need to scan the whole blockchain for all events</span>

<span class="sd">        * We want to minimize API calls over empty blocks</span>

<span class="sd">        * We want to make sure that one scan chunk does not try to process too many entries once, as we try to control commit buffer size and potentially asynchronous busy loop</span>

<span class="sd">        * Do not overload node serving JSON-RPC API by asking data for too many events at a time</span>

<span class="sd">        Currently Ethereum JSON-API does not have an API to tell when a first event occurred in a blockchain</span>
<span class="sd">        and our heuristics try to accelerate block fetching (chunk size) until we see the first event.</span>

<span class="sd">        These heuristics exponentially increase the scan chunk size depending on if we are seeing events or not.</span>
<span class="sd">        When any transfers are encountered, we are back to scanning only a few blocks at a time.</span>
<span class="sd">        It does not make sense to do a full chain scan starting from block 1, doing one JSON-RPC call per 20 blocks.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">event_found_count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># When we encounter first events, reset the chunk size window</span>
            <span class="n">current_chuck_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">min_scan_chunk_size</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">current_chuck_size</span> <span class="o">*=</span> <span class="bp">self</span><span class="o">.</span><span class="n">chunk_size_increase</span>

        <span class="n">current_chuck_size</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">min_scan_chunk_size</span><span class="p">,</span> <span class="n">current_chuck_size</span><span class="p">)</span>
        <span class="n">current_chuck_size</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">max_scan_chunk_size</span><span class="p">,</span> <span class="n">current_chuck_size</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">current_chuck_size</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">scan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">,</span> <span class="n">start_chunk_size</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="n">Optional</span><span class="p">[</span><span class="n">Callable</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span>
        <span class="nb">list</span><span class="p">,</span> <span class="nb">int</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Perform a token balances scan.</span>

<span class="sd">        Assumes all balances in the database are valid before start_block (no forks sneaked in).</span>

<span class="sd">        :param start_block: The first block included in the scan</span>

<span class="sd">        :param end_block: The last block included in the scan</span>

<span class="sd">        :param start_chunk_size: How many blocks we try to fetch over JSON-RPC on the first attempt</span>

<span class="sd">        :param progress_callback: If this is an UI application, update the progress of the scan</span>

<span class="sd">        :return: [All processed events, number of chunks used]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">assert</span> <span class="n">start_block</span> <span class="o">&lt;=</span> <span class="n">end_block</span>

        <span class="n">current_block</span> <span class="o">=</span> <span class="n">start_block</span>

        <span class="c1"># Scan in chunks, commit between</span>
        <span class="n">chunk_size</span> <span class="o">=</span> <span class="n">start_chunk_size</span>
        <span class="n">last_scan_duration</span> <span class="o">=</span> <span class="n">last_logs_found</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">total_chunks_scanned</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c1"># All processed entries we got on this scan cycle</span>
        <span class="n">all_processed</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">while</span> <span class="n">current_block</span> <span class="o">&lt;=</span> <span class="n">end_block</span><span class="p">:</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">start_chunk</span><span class="p">(</span><span class="n">current_block</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">)</span>

            <span class="c1"># Print some diagnostics to logs to try to fiddle with real world JSON-RPC API performance</span>
            <span class="n">estimated_end_block</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">current_block</span> <span class="o">+</span> <span class="n">chunk_size</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Scanning token transfers for blocks: </span><span class="si">{</span><span class="n">current_block</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">estimated_end_block</span><span class="si">}</span><span class="s2">, chunk size </span><span class="si">{</span><span class="n">chunk_size</span><span class="si">}</span><span class="s2">, last chunk scan took </span><span class="si">{</span><span class="n">last_scan_duration</span><span class="si">}</span><span class="s2">, last logs found </span><span class="si">{</span><span class="n">last_logs_found</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

            <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
            <span class="n">actual_end_block</span><span class="p">,</span> <span class="n">end_block_timestamp</span><span class="p">,</span> <span class="n">new_entries</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scan_chunk</span><span class="p">(</span><span class="n">current_block</span><span class="p">,</span> <span class="n">estimated_end_block</span><span class="p">)</span>

            <span class="c1"># Where does our current chunk scan ends - are we out of chain yet?</span>
            <span class="n">current_end</span> <span class="o">=</span> <span class="n">actual_end_block</span>

            <span class="n">last_scan_duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
            <span class="n">all_processed</span> <span class="o">+=</span> <span class="n">new_entries</span>

            <span class="c1"># Print progress bar</span>
            <span class="k">if</span> <span class="n">progress_callback</span><span class="p">:</span>
                <span class="n">progress_callback</span><span class="p">(</span><span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">,</span> <span class="n">current_block</span><span class="p">,</span> <span class="n">end_block_timestamp</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_entries</span><span class="p">))</span>

            <span class="c1"># Try to guess how many blocks to fetch over `eth_getLogs` API next time</span>
            <span class="n">chunk_size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">estimate_next_chunk_size</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">new_entries</span><span class="p">))</span>

            <span class="c1"># Set where the next chunk starts</span>
            <span class="n">current_block</span> <span class="o">=</span> <span class="n">current_end</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">total_chunks_scanned</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">end_chunk</span><span class="p">(</span><span class="n">current_end</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">all_processed</span><span class="p">,</span> <span class="n">total_chunks_scanned</span>


<span class="k">def</span> <span class="nf">_retry_web3_call</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">,</span> <span class="n">retries</span><span class="p">,</span> <span class="n">delay</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A custom retry loop to throttle down block range.</span>

<span class="sd">    If our JSON-RPC server cannot serve all incoming `eth_getLogs` in a single request,</span>
<span class="sd">    we retry and throttle down block range for every retry.</span>

<span class="sd">    For example, Go Ethereum does not indicate what is an acceptable response size.</span>
<span class="sd">    It just fails on the server-side with a &quot;context was cancelled&quot; warning.</span>

<span class="sd">    :param func: A callable that triggers Ethereum JSON-RPC, as func(start_block, end_block)</span>
<span class="sd">    :param start_block: The initial start block of the block range</span>
<span class="sd">    :param end_block: The initial start block of the block range</span>
<span class="sd">    :param retries: How many times we retry</span>
<span class="sd">    :param delay: Time to sleep between retries</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">retries</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">end_block</span><span class="p">,</span> <span class="n">func</span><span class="p">(</span><span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="c1"># Assume this is HTTPConnectionPool(host=&#39;localhost&#39;, port=8545): Read timed out. (read timeout=10)</span>
            <span class="c1"># from Go Ethereum. This translates to the error &quot;context was cancelled&quot; on the server side:</span>
            <span class="c1"># https://github.com/ethereum/go-ethereum/issues/20426</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">retries</span> <span class="o">-</span> <span class="mi">1</span><span class="p">:</span>
                <span class="c1"># Give some more verbose info than the default middleware</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;Retrying events for block range </span><span class="si">{</span><span class="n">start_block</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">end_block</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">end_block</span><span class="o">-</span><span class="n">start_block</span><span class="si">}</span><span class="s2">) failed with </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2"> , retrying in </span><span class="si">{</span><span class="n">delay</span><span class="si">}</span><span class="s2"> seconds&quot;</span><span class="p">)</span>
                <span class="c1"># Decrease the `eth_getBlocks` range</span>
                <span class="n">end_block</span> <span class="o">=</span> <span class="n">start_block</span> <span class="o">+</span> <span class="p">((</span><span class="n">end_block</span> <span class="o">-</span> <span class="n">start_block</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
                <span class="c1"># Let the JSON-RPC to recover e.g. from restart</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Out of retries&quot;</span><span class="p">)</span>
                <span class="k">raise</span>


<span class="k">def</span> <span class="nf">_fetch_events_for_all_contracts</span><span class="p">(</span>
        <span class="n">w3</span><span class="p">,</span>
        <span class="n">event</span><span class="p">,</span>
        <span class="n">argument_filters</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">from_block</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
        <span class="n">to_block</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Iterable</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get events using eth_getLogs API.</span>

<span class="sd">    This method is detached from any contract instance.</span>

<span class="sd">    This is a stateless method, as opposed to create_filter.</span>
<span class="sd">    It can be safely called against nodes which do not provide `eth_newFilter` API, like Infura.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">from_block</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">Web3TypeError</span><span class="p">(</span><span class="s2">&quot;Missing mandatory keyword argument to get_logs: from_block&quot;</span><span class="p">)</span>

    <span class="c1"># Currently no way to poke this using a public web3.py API.</span>
    <span class="c1"># This will return raw underlying ABI JSON object for the event</span>
    <span class="n">abi</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">_get_event_abi</span><span class="p">()</span>

    <span class="c1"># Depending on the Solidity version used to compile</span>
    <span class="c1"># the contract that uses the ABI,</span>
    <span class="c1"># it might have Solidity ABI encoding v1 or v2.</span>
    <span class="c1"># We just assume the default that you set on Web3 object here.</span>
    <span class="c1"># More information here https://eth-abi.readthedocs.io/en/latest/index.html</span>
    <span class="n">codec</span><span class="p">:</span> <span class="n">ABICodec</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">codec</span>

    <span class="c1"># Here we need to poke a bit into Web3 internals, as this</span>
    <span class="c1"># functionality is not exposed by default.</span>
    <span class="c1"># Construct JSON-RPC raw filter presentation based on human readable Python descriptions</span>
    <span class="c1"># Namely, convert event names to their keccak signatures</span>
    <span class="c1"># More information here:</span>
    <span class="c1"># https://github.com/ethereum/web3.py/blob/e176ce0793dafdd0573acc8d4b76425b6eb604ca/web3/_utils/filters.py#L71</span>
    <span class="n">data_filter_set</span><span class="p">,</span> <span class="n">event_filter_params</span> <span class="o">=</span> <span class="n">construct_event_filter_params</span><span class="p">(</span>
        <span class="n">abi</span><span class="p">,</span>
        <span class="n">codec</span><span class="p">,</span>
        <span class="n">address</span><span class="o">=</span><span class="n">argument_filters</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;address&quot;</span><span class="p">),</span>
        <span class="n">argument_filters</span><span class="o">=</span><span class="n">argument_filters</span><span class="p">,</span>
        <span class="n">from_block</span><span class="o">=</span><span class="n">from_block</span><span class="p">,</span>
        <span class="n">to_block</span><span class="o">=</span><span class="n">to_block</span>
    <span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Querying eth_getLogs with the following parameters: </span><span class="si">{</span><span class="n">event_filter_params</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Call JSON-RPC API on your Ethereum node.</span>
    <span class="c1"># get_logs() returns raw AttributedDict entries</span>
    <span class="n">logs</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_logs</span><span class="p">(</span><span class="n">event_filter_params</span><span class="p">)</span>

    <span class="c1"># Convert raw binary data to Python proxy objects as described by ABI</span>
    <span class="n">all_events</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">log</span> <span class="ow">in</span> <span class="n">logs</span><span class="p">:</span>
        <span class="c1"># Convert raw JSON-RPC log result to human readable event by using ABI data</span>
        <span class="c1"># More information how process_log works here</span>
        <span class="c1"># https://github.com/ethereum/web3.py/blob/fbaf1ad11b0c7fac09ba34baff2c256cffe0a148/web3/_utils/events.py#L200</span>
        <span class="n">evt</span> <span class="o">=</span> <span class="n">get_event_data</span><span class="p">(</span><span class="n">codec</span><span class="p">,</span> <span class="n">abi</span><span class="p">,</span> <span class="n">log</span><span class="p">)</span>
        <span class="c1"># Note: This was originally yield,</span>
        <span class="c1"># but deferring the timeout exception caused the throttle logic not to work</span>
        <span class="n">all_events</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">evt</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">all_events</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="c1"># Simple demo that scans all the token transfers of RCC token (11k).</span>
    <span class="c1"># The demo supports persistent state by using a JSON file.</span>
    <span class="c1"># You will need an Ethereum node for this.</span>
    <span class="c1"># Running this script will consume around 20k JSON-RPC calls.</span>
    <span class="c1"># With locally running Geth, the script takes 10 minutes.</span>
    <span class="c1"># The resulting JSON state file is 2.9 MB.</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="kn">import</span> <span class="nn">json</span>
    <span class="kn">from</span> <span class="nn">web3.providers.rpc</span> <span class="kn">import</span> <span class="n">HTTPProvider</span>

    <span class="c1"># We use tqdm library to render a nice progress bar in the console</span>
    <span class="c1"># https://pypi.org/project/tqdm/</span>
    <span class="kn">from</span> <span class="nn">tqdm</span> <span class="kn">import</span> <span class="n">tqdm</span>

    <span class="c1"># RCC has around 11k Transfer events</span>
    <span class="c1"># https://etherscan.io/token/0x9b6443b0fb9c241a7fdac375595cea13e6b7807a</span>
    <span class="n">RCC_ADDRESS</span> <span class="o">=</span> <span class="s2">&quot;0x9b6443b0fb9c241a7fdac375595cea13e6b7807a&quot;</span>

    <span class="c1"># Reduced ERC-20 ABI, only Transfer event</span>
    <span class="n">ABI</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;[</span>
<span class="s2">        {</span>
<span class="s2">            &quot;anonymous&quot;: false,</span>
<span class="s2">            &quot;inputs&quot;: [</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;indexed&quot;: true,</span>
<span class="s2">                    &quot;name&quot;: &quot;from&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;address&quot;</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;indexed&quot;: true,</span>
<span class="s2">                    &quot;name&quot;: &quot;to&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;address&quot;</span>
<span class="s2">                },</span>
<span class="s2">                {</span>
<span class="s2">                    &quot;indexed&quot;: false,</span>
<span class="s2">                    &quot;name&quot;: &quot;value&quot;,</span>
<span class="s2">                    &quot;type&quot;: &quot;uint256&quot;</span>
<span class="s2">                }</span>
<span class="s2">            ],</span>
<span class="s2">            &quot;name&quot;: &quot;Transfer&quot;,</span>
<span class="s2">            &quot;type&quot;: &quot;event&quot;</span>
<span class="s2">        }</span>
<span class="s2">    ]</span>
<span class="s2">    &quot;&quot;&quot;</span>

    <span class="k">class</span> <span class="nc">JSONifiedState</span><span class="p">(</span><span class="n">EventScannerState</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Store the state of scanned blocks and all events.</span>

<span class="sd">        All state is an in-memory dict.</span>
<span class="sd">        Simple load/store massive JSON on start up.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fname</span> <span class="o">=</span> <span class="s2">&quot;test-state.json&quot;</span>
            <span class="c1"># How many second ago we saved the JSON file</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_save</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Create initial state of nothing scanned.&quot;&quot;&quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;last_scanned_block&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                <span class="s2">&quot;blocks&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="p">}</span>

        <span class="k">def</span> <span class="nf">restore</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Restore the last scan state from a file.&quot;&quot;&quot;</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">))</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Restored the state, previously </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s1">&#39;last_scanned_block&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> blocks have been scanned&quot;</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="n">json</span><span class="o">.</span><span class="n">decoder</span><span class="o">.</span><span class="n">JSONDecodeError</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;State starting from scratch&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Save everything we have scanned so far in a file.&quot;&quot;&quot;</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fname</span><span class="p">,</span> <span class="s2">&quot;wt&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_save</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="c1">#</span>
        <span class="c1"># EventScannerState methods implemented below</span>
        <span class="c1">#</span>

        <span class="k">def</span> <span class="nf">get_last_scanned_block</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;The number of the last block we have stored.&quot;&quot;&quot;</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;last_scanned_block&quot;</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">delete_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">since_block</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Remove potentially reorganised blocks from the scan data.&quot;&quot;&quot;</span>
            <span class="k">for</span> <span class="n">block_num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">since_block</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_last_scanned_block</span><span class="p">()):</span>
                <span class="k">if</span> <span class="n">block_num</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;blocks&quot;</span><span class="p">]:</span>
                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;blocks&quot;</span><span class="p">][</span><span class="n">block_num</span><span class="p">]</span>

        <span class="k">def</span> <span class="nf">start_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_number</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">):</span>
            <span class="k">pass</span>

        <span class="k">def</span> <span class="nf">end_chunk</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_number</span><span class="p">):</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Save at the end of each block, so we can resume in the case of a crash or CTRL+C&quot;&quot;&quot;</span>
            <span class="c1"># Next time the scanner is started we will resume from this block</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;last_scanned_block&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">block_number</span>

            <span class="c1"># Save the database file for every minute</span>
            <span class="k">if</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">last_save</span> <span class="o">&gt;</span> <span class="mi">60</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">process_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">block_when</span><span class="p">:</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">,</span> <span class="n">event</span><span class="p">:</span> <span class="n">AttributeDict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;Record a ERC-20 transfer in our database.&quot;&quot;&quot;</span>
            <span class="c1"># Events are keyed by their transaction hash and log index</span>
            <span class="c1"># One transaction may contain multiple events</span>
            <span class="c1"># and each one of those gets their own log index</span>

            <span class="c1"># event_name = event.event # &quot;Transfer&quot;</span>
            <span class="n">log_index</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">logIndex</span>  <span class="c1"># Log index within the block</span>
            <span class="c1"># transaction_index = event.transactionIndex  # Transaction index within the block</span>
            <span class="n">txhash</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">transactionHash</span><span class="o">.</span><span class="n">hex</span><span class="p">()</span>  <span class="c1"># Transaction hash</span>
            <span class="n">block_number</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">blockNumber</span>

            <span class="c1"># Convert ERC-20 Transfer event to our internal format</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">event</span><span class="p">[</span><span class="s2">&quot;args&quot;</span><span class="p">]</span>
            <span class="n">transfer</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;from&quot;</span><span class="p">:</span> <span class="n">args</span><span class="p">[</span><span class="s2">&quot;from&quot;</span><span class="p">],</span>
                <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="n">args</span><span class="o">.</span><span class="n">to</span><span class="p">,</span>
                <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">args</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                <span class="s2">&quot;timestamp&quot;</span><span class="p">:</span> <span class="n">block_when</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(),</span>
            <span class="p">}</span>

            <span class="c1"># Create empty dict as the block that contains all transactions by txhash</span>
            <span class="k">if</span> <span class="n">block_number</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;blocks&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;blocks&quot;</span><span class="p">][</span><span class="n">block_number</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="n">block</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;blocks&quot;</span><span class="p">][</span><span class="n">block_number</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">txhash</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">block</span><span class="p">:</span>
                <span class="c1"># We have not yet recorded any transfers in this transaction</span>
                <span class="c1"># (One transaction may contain multiple events if executed by a smart contract).</span>
                <span class="c1"># Create a tx entry that contains all events by a log index</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;blocks&quot;</span><span class="p">][</span><span class="n">block_number</span><span class="p">][</span><span class="n">txhash</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

            <span class="c1"># Record ERC-20 transfer in our database</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="p">[</span><span class="s2">&quot;blocks&quot;</span><span class="p">][</span><span class="n">block_number</span><span class="p">][</span><span class="n">txhash</span><span class="p">][</span><span class="n">log_index</span><span class="p">]</span> <span class="o">=</span> <span class="n">transfer</span>

            <span class="c1"># Return a pointer that allows us to look up this event later if needed</span>
            <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">block_number</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">txhash</span><span class="si">}</span><span class="s2">-</span><span class="si">{</span><span class="n">log_index</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">():</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Usage: eventscanner.py http://your-node-url&quot;</span><span class="p">)</span>
            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">api_url</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># Enable logs to the stdout.</span>
        <span class="c1"># DEBUG is very verbose level</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>

        <span class="n">provider</span> <span class="o">=</span> <span class="n">HTTPProvider</span><span class="p">(</span><span class="n">api_url</span><span class="p">)</span>

        <span class="c1"># Disable the default JSON-RPC retry configuration</span>
        <span class="c1"># as it correctly cannot handle eth_getLogs block range</span>
        <span class="n">provider</span><span class="o">.</span><span class="n">exception_retry_configuration</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>

        <span class="c1"># Prepare stub ERC-20 contract object</span>
        <span class="n">abi</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">ABI</span><span class="p">)</span>
        <span class="n">ERC20</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">)</span>

        <span class="c1"># Restore/create our persistent state</span>
        <span class="n">state</span> <span class="o">=</span> <span class="n">JSONifiedState</span><span class="p">()</span>
        <span class="n">state</span><span class="o">.</span><span class="n">restore</span><span class="p">()</span>

        <span class="c1"># chain_id: int, w3: Web3, abi: Dict, state: EventScannerState, events: List, filters: Dict, max_chunk_scan_size: int=10000</span>
        <span class="n">scanner</span> <span class="o">=</span> <span class="n">EventScanner</span><span class="p">(</span>
            <span class="n">w3</span><span class="o">=</span><span class="n">w3</span><span class="p">,</span>
            <span class="n">contract</span><span class="o">=</span><span class="n">ERC20</span><span class="p">,</span>
            <span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">,</span>
            <span class="n">events</span><span class="o">=</span><span class="p">[</span><span class="n">ERC20</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">Transfer</span><span class="p">],</span>
            <span class="n">filters</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="n">RCC_ADDRESS</span><span class="p">},</span>
            <span class="c1"># How many maximum blocks at the time we request from JSON-RPC</span>
            <span class="c1"># and we are unlikely to exceed the response size limit of the JSON-RPC server</span>
            <span class="n">max_chunk_scan_size</span><span class="o">=</span><span class="mi">10000</span>
        <span class="p">)</span>

        <span class="c1"># Assume we might have scanned the blocks all the way to the last Ethereum block</span>
        <span class="c1"># that mined a few seconds before the previous scan run ended.</span>
        <span class="c1"># Because there might have been a minor Ethereum chain reorganisations</span>
        <span class="c1"># since the last scan ended, we need to discard</span>
        <span class="c1"># the last few blocks from the previous scan results.</span>
        <span class="n">chain_reorg_safety_blocks</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">scanner</span><span class="o">.</span><span class="n">delete_potentially_forked_block_data</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">get_last_scanned_block</span><span class="p">()</span> <span class="o">-</span> <span class="n">chain_reorg_safety_blocks</span><span class="p">)</span>

        <span class="c1"># Scan from [last block scanned] - [latest ethereum block]</span>
        <span class="c1"># Note that our chain reorg safety blocks cannot go negative</span>
        <span class="n">start_block</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">state</span><span class="o">.</span><span class="n">get_last_scanned_block</span><span class="p">()</span> <span class="o">-</span> <span class="n">chain_reorg_safety_blocks</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">end_block</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="n">get_suggested_scan_end_block</span><span class="p">()</span>
        <span class="n">blocks_to_scan</span> <span class="o">=</span> <span class="n">end_block</span> <span class="o">-</span> <span class="n">start_block</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Scanning events from blocks </span><span class="si">{</span><span class="n">start_block</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">end_block</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># Render a progress bar in the console</span>
        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
        <span class="k">with</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="n">blocks_to_scan</span><span class="p">)</span> <span class="k">as</span> <span class="n">progress_bar</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">_update_progress</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">end</span><span class="p">,</span> <span class="n">current</span><span class="p">,</span> <span class="n">current_block_timestamp</span><span class="p">,</span> <span class="n">chunk_size</span><span class="p">,</span> <span class="n">events_count</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">current_block_timestamp</span><span class="p">:</span>
                    <span class="n">formatted_time</span> <span class="o">=</span> <span class="n">current_block_timestamp</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">-%m-%Y&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">formatted_time</span> <span class="o">=</span> <span class="s2">&quot;no block time available&quot;</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">set_description</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current block: </span><span class="si">{</span><span class="n">current</span><span class="si">}</span><span class="s2"> (</span><span class="si">{</span><span class="n">formatted_time</span><span class="si">}</span><span class="s2">), blocks in a scan batch: </span><span class="si">{</span><span class="n">chunk_size</span><span class="si">}</span><span class="s2">, events processed in a batch </span><span class="si">{</span><span class="n">events_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">progress_bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">chunk_size</span><span class="p">)</span>

            <span class="c1"># Run the scan</span>
            <span class="n">result</span><span class="p">,</span> <span class="n">total_chunks_scanned</span> <span class="o">=</span> <span class="n">scanner</span><span class="o">.</span><span class="n">scan</span><span class="p">(</span><span class="n">start_block</span><span class="p">,</span> <span class="n">end_block</span><span class="p">,</span> <span class="n">progress_callback</span><span class="o">=</span><span class="n">_update_progress</span><span class="p">)</span>

        <span class="n">state</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Scanned total </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="si">}</span><span class="s2"> Transfer events, in </span><span class="si">{</span><span class="n">duration</span><span class="si">}</span><span class="s2"> seconds, total </span><span class="si">{</span><span class="n">total_chunks_scanned</span><span class="si">}</span><span class="s2"> chunk scans performed&quot;</span><span class="p">)</span>

    <span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<span id="document-middleware"></span><section id="middleware">
<span id="middleware-internals"></span><h3>Middleware<a class="headerlink" href="#middleware" title="Link to this heading">ÔÉÅ</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Web3</span></code> is instantiated with layers of middleware by default. They sit between the public
<code class="docutils literal notranslate"><span class="pre">Web3</span></code> methods and the <a class="reference internal" href="#document-providers"><span class="doc">Providers</span></a>, and are used to perform sanity checks, convert data
types, enable ENS support, and more. Each layer can modify the request and/or response.
While several middleware are enabled by default, others are available for optional use,
and you‚Äôre free to create your own!</p>
<p>Each middleware layer gets invoked before the request reaches the provider, and then
processes the result after the provider returns, in reverse order. However, it is
possible for a middleware to return early from a call without the request ever getting
to the provider (or even reaching the middleware that are in deeper layers).</p>
<section id="configuring-middleware">
<span id="modifying-middleware"></span><h4>Configuring Middleware<a class="headerlink" href="#configuring-middleware" title="Link to this heading">ÔÉÅ</a></h4>
<p>Middleware can be added, removed, replaced, and cleared at runtime. To make that easier, you
can name the middleware for later reference.</p>
<section id="middleware-order">
<h5>Middleware Order<a class="headerlink" href="#middleware-order" title="Link to this heading">ÔÉÅ</a></h5>
<p>Think of the middleware as being layered in an onion, where you initiate a web3.py request at
the outermost layer of the onion, and the Ethereum node (like geth) receives and responds
to the request inside the innermost layer of the onion. Here is a (simplified) diagram:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>                            New request from web3.py

                                        |
                                        |
                                        v

                                `````Layer 2``````
                         ```````                  ```````
                    `````               |                ````
                 ````                   v                    ````
              ```                                                ```
            `.               ````````Layer 1```````                `.`
          ``             ````                      `````              .`
        `.            ```               |               ```            `.`
       .`          ```                  v                  ```           `.
     `.          `.`                                         ```           .`
    ``          .`                  `Layer 0`                  ``           .`
   ``         `.               `````        ``````               .           .`
  `.         ``             ```         |        ```              .`          .
  .         ``            `.`           |           ``             .           .
 .         `.            ``       JSON-RPC call       .`            .          .`
 .         .            ``              |              .            ``          .
``         .            .               v               .            .          .
.         .`           .                                .            .          ``
.         .            .          Ethereum node         .`           .           .
.         .            .                                .            .           .
.         ``           `.               |               .            .           .
.          .            .`              |              .`            .          .
`.         .`            .`          Response         .`            .`          .
 .          .             `.`           |           `.`            `.           .
 `.          .              ```         |        ````             `.           .
  .          `.               `````     v     ````               `.           ``
   .           .`                 ```Layer 0``                  ``           `.
    .           `.                                            `.`           `.
     .            `.                    |                   `.`            `.
      .`            ```                 |                 ```             .`
       `.              ```              v             ````              `.`
         ``               ``````                 `````                 .`
           ``                   `````Layer 1`````                   `.`
             ```                                                  ```
               ````                     |                      ```
                  `````                 v                  ````
                      ``````                          `````
                            `````````Layer 2``````````

                                        |
                                        v

                             Returned value in web3.py
</pre></div>
</div>
<p>The middleware are maintained in <code class="docutils literal notranslate"><span class="pre">Web3.middleware_onion</span></code>. See below for the API.</p>
<p>When specifying middleware in a list, or retrieving the list of middleware, they will
be returned in the order of outermost layer first and innermost layer last. In the above
example, that means that <code class="docutils literal notranslate"><span class="pre">w3.middleware_onion.middleware</span></code> would return the middleware
in the order of: <code class="docutils literal notranslate"><span class="pre">[2,</span> <span class="pre">1,</span> <span class="pre">0]</span></code>.</p>
</section>
<section id="middleware-stack-api">
<span id="id1"></span><h5>Middleware Stack API<a class="headerlink" href="#middleware-stack-api" title="Link to this heading">ÔÉÅ</a></h5>
<p>To add or remove items in different layers, use the following API:</p>
<dl class="py method">
<dt class="sig sig-object py" id="Web3.middleware_onion.add">
<span class="sig-prename descclassname"><span class="pre">Web3.middleware_onion.</span></span><span class="sig-name descname"><span class="pre">add</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">middleware</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Web3.middleware_onion.add" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Middleware will be added to the outermost layer. That means the new middleware will modify the
request first, and the response last. You can optionally name it with any hashable object,
typically a string.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">web3</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">GasPriceStrategyMiddleware</span><span class="p">)</span>
<span class="go"># or</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">web3</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">GasPriceStrategyMiddleware</span><span class="p">,</span> <span class="s1">&#39;gas_price_strategy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Web3.middleware_onion.inject">
<span class="sig-prename descclassname"><span class="pre">Web3.middleware_onion.</span></span><span class="sig-name descname"><span class="pre">inject</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">middleware</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">layer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Web3.middleware_onion.inject" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Inject a named middleware to an arbitrary layer.</p>
<p>The current implementation only supports injection at the innermost or
outermost layers. Note that injecting to the outermost layer is equivalent to calling
<a class="reference internal" href="#Web3.middleware_onion.add" title="Web3.middleware_onion.add"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Web3.middleware_onion.add()</span></code></a> .</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Either of these will put the gas_price_strategy middleware at the innermost layer</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">web3</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">GasPriceStrategyMiddleware</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">web3</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">GasPriceStrategyMiddleware</span><span class="p">,</span> <span class="s1">&#39;gas_price_strategy&#39;</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Web3.middleware_onion.remove">
<span class="sig-prename descclassname"><span class="pre">Web3.middleware_onion.</span></span><span class="sig-name descname"><span class="pre">remove</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">middleware</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Web3.middleware_onion.remove" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Middleware will be removed from whatever layer it was in. If you added the middleware with
a name, use the name to remove it. If you added the middleware as an object, use the object
again later to remove it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">web3</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">GasPriceStrategyMiddleware</span><span class="p">)</span>
<span class="go"># or</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;gas_price_strategy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Web3.middleware_onion.replace">
<span class="sig-prename descclassname"><span class="pre">Web3.middleware_onion.</span></span><span class="sig-name descname"><span class="pre">replace</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">old_middleware</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_middleware</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Web3.middleware_onion.replace" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Middleware will be replaced from whatever layer it was in. If the middleware was named, it will
continue to have the same name. If it was un-named, then you will now reference it with the new
middleware object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">GasPriceStrategyMiddleware</span><span class="p">,</span> <span class="n">AttributeDictMiddleware</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">provider</span><span class="p">,</span> <span class="n">middleware</span><span class="o">=</span><span class="p">[</span><span class="n">GasPriceStrategyMiddleware</span><span class="p">,</span> <span class="n">AttributeDictMiddleware</span><span class="p">])</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">GasPriceStrategyMiddleware</span><span class="p">,</span> <span class="n">AttributeDictMiddleware</span><span class="p">)</span>
<span class="go"># this is now referenced by the new middleware object, so to remove it:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">AttributeDictMiddleware</span><span class="p">)</span>

<span class="go"># or, if it was named</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;gas_price_strategy&#39;</span><span class="p">,</span> <span class="n">AttributeDictMiddleware</span><span class="p">)</span>
<span class="go"># this is still referenced by the original name, so to remove it:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;gas_price_strategy&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Web3.middleware_onion.clear">
<span class="sig-prename descclassname"><span class="pre">Web3.middleware_onion.</span></span><span class="sig-name descname"><span class="pre">clear</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Web3.middleware_onion.clear" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Empty all the middleware, including the default ones.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="Web3.middleware_onion.middleware">
<span class="sig-prename descclassname"><span class="pre">Web3.middleware_onion.</span></span><span class="sig-name descname"><span class="pre">middleware</span></span><a class="headerlink" href="#Web3.middleware_onion.middleware" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Return all the current middleware for the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance in the appropriate order for importing into a new
<code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3_1</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="go"># add uniquely named middleware:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3_1</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">web3</span><span class="o">.</span><span class="n">middleware</span><span class="o">.</span><span class="n">GasPriceStrategyMiddleware</span><span class="p">,</span> <span class="s1">&#39;test_middleware&#39;</span><span class="p">)</span>
<span class="go"># export middleware from first w3 instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">middleware</span> <span class="o">=</span> <span class="n">w3_1</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">middleware</span>

<span class="go"># import into second instance</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3_2</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">middleware</span><span class="o">=</span><span class="n">middleware</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">w3_1</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">middleware</span> <span class="o">==</span> <span class="n">w3_2</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">middleware</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">w3_2</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;test_middleware&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="instantiate-with-custom-middleware">
<h5>Instantiate with Custom Middleware<a class="headerlink" href="#instantiate-with-custom-middleware" title="Link to this heading">ÔÉÅ</a></h5>
<p>Instead of working from the default list, you can specify a custom list of
middleware when initializing Web3:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Web3</span><span class="p">(</span><span class="n">middleware</span><span class="o">=</span><span class="p">[</span><span class="n">my_middleware1</span><span class="p">,</span> <span class="n">my_middleware2</span><span class="p">])</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This will <em>replace</em> the default middleware. To keep the default functionality,
either use <code class="docutils literal notranslate"><span class="pre">middleware_onion.add()</span></code> from above, or add the default middleware to
your list of new middleware.</p>
</div>
</section>
</section>
<section id="default-middleware">
<span id="id2"></span><h4>Default Middleware<a class="headerlink" href="#default-middleware" title="Link to this heading">ÔÉÅ</a></h4>
<p>The following middleware are included by default:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">gas_price_strategy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ens_name_to_address</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">attrdict</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">validation</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gas_estimate</span></code></p></li>
</ul>
<p>The defaults are defined in the <code class="docutils literal notranslate"><span class="pre">get_default_middleware()</span></code> method in <code class="docutils literal notranslate"><span class="pre">web3/manager.py</span></code>.</p>
<section id="attributedict">
<h5>AttributeDict<a class="headerlink" href="#attributedict" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py class">
<dt class="sig sig-object py" id="web3.middleware.AttributeDictMiddleware">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.middleware.</span></span><span class="sig-name descname"><span class="pre">AttributeDictMiddleware</span></span><a class="headerlink" href="#web3.middleware.AttributeDictMiddleware" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This middleware recursively converts any dictionary type in the result of a call
to an <code class="docutils literal notranslate"><span class="pre">AttributeDict</span></code>. This enables dot-syntax access, like
<code class="docutils literal notranslate"><span class="pre">eth.get_block('latest').number</span></code> in addition to
<code class="docutils literal notranslate"><span class="pre">eth.get_block('latest')['number']</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Accessing a property via attribute breaks type hinting. For this reason, this
feature is available as a middleware, which may be removed if desired.</p>
</div>
</dd></dl>

</section>
<section id="ens-name-to-address-resolution">
<h5>ENS Name to Address Resolution<a class="headerlink" href="#ens-name-to-address-resolution" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py class">
<dt class="sig sig-object py" id="web3.middleware.ENSNameToAddressMiddleware">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.middleware.</span></span><span class="sig-name descname"><span class="pre">ENSNameToAddressMiddleware</span></span><a class="headerlink" href="#web3.middleware.ENSNameToAddressMiddleware" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This middleware converts Ethereum Name Service (ENS) names into the
address that the name points to. For example <a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">w3.eth.send_transaction</span></code></a> will
accept .eth names in the ‚Äòfrom‚Äô and ‚Äòto‚Äô fields.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This middleware only converts ENS names on chains where the proper ENS
contracts are deployed to support this functionality. All other cases will
result in a <code class="docutils literal notranslate"><span class="pre">NameNotFound</span></code> error.</p>
</div>
</dd></dl>

</section>
<section id="gas-price-strategy">
<h5>Gas Price Strategy<a class="headerlink" href="#gas-price-strategy" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py class">
<dt class="sig sig-object py" id="web3.middleware.GasPriceStrategyMiddleware">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.middleware.</span></span><span class="sig-name descname"><span class="pre">GasPriceStrategyMiddleware</span></span><a class="headerlink" href="#web3.middleware.GasPriceStrategyMiddleware" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Gas price strategy is only supported for legacy transactions. The London fork
introduced <code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code> and <code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code> transaction parameters
which should be used over <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> whenever possible.</p>
</div>
<p>This adds a <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> to transactions if applicable and when a gas price strategy has
been set. See <a class="reference internal" href="index.html#gas-price"><span class="std std-ref">Gas Price API</span></a> for information about how gas price is derived.</p>
</dd></dl>

</section>
<section id="buffered-gas-estimate">
<h5>Buffered Gas Estimate<a class="headerlink" href="#buffered-gas-estimate" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py class">
<dt class="sig sig-object py" id="web3.middleware.BufferedGasEstimateMiddleware">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.middleware.</span></span><span class="sig-name descname"><span class="pre">BufferedGasEstimateMiddleware</span></span><a class="headerlink" href="#web3.middleware.BufferedGasEstimateMiddleware" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This adds a gas estimate to transactions if <code class="docutils literal notranslate"><span class="pre">gas</span></code> is not present in the transaction
parameters. Sets gas to:
<code class="docutils literal notranslate"><span class="pre">min(w3.eth.estimate_gas</span> <span class="pre">+</span> <span class="pre">gas_buffer,</span> <span class="pre">gas_limit)</span></code>
where the gas_buffer default is 100,000</p>
</dd></dl>

</section>
<section id="validation">
<h5>Validation<a class="headerlink" href="#validation" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py class">
<dt class="sig sig-object py" id="web3.middleware.ValidationMiddleware">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.middleware.</span></span><span class="sig-name descname"><span class="pre">ValidationMiddleware</span></span><a class="headerlink" href="#web3.middleware.ValidationMiddleware" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This middleware includes block and transaction validators which perform validations
for transaction parameters.</p>
</dd></dl>

</section>
</section>
<section id="optional-middleware">
<h4>Optional Middleware<a class="headerlink" href="#optional-middleware" title="Link to this heading">ÔÉÅ</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Web3</span></code> includes optional middleware for common use cases. Below is a list of available
middleware which are not enabled by default.</p>
<section id="stalecheck">
<h5>Stalecheck<a class="headerlink" href="#stalecheck" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py method">
<dt class="sig sig-object py" id="web3.middleware.StalecheckMiddlewareBuilder">
<span class="sig-prename descclassname"><span class="pre">web3.middleware.</span></span><span class="sig-name descname"><span class="pre">StalecheckMiddlewareBuilder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.middleware.StalecheckMiddlewareBuilder" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This middleware checks how stale the blockchain is, and interrupts calls with a failure
if the blockchain is too old.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">allowable_delay</span></code> is the length in seconds that the blockchain is allowed to be
behind of <code class="docutils literal notranslate"><span class="pre">time.time()</span></code></p></li>
</ul>
<p>Because this middleware takes an argument, you must create the middleware
with a method call.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">two_day_stalecheck</span> <span class="o">=</span> <span class="n">StalecheckMiddlewareBuilder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">web3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">two_day_stalecheck</span><span class="p">)</span>
</pre></div>
</div>
<p>If the latest block in the blockchain is older than 2 days in this example, then the
middleware will raise a <code class="docutils literal notranslate"><span class="pre">StaleBlockchain</span></code> exception on every call except
<code class="docutils literal notranslate"><span class="pre">web3.eth.get_block()</span></code>.</p>
</dd></dl>

</section>
<section id="proof-of-authority">
<span id="geth-poa"></span><h5>Proof of Authority<a class="headerlink" href="#proof-of-authority" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py class">
<dt class="sig sig-object py" id="web3.middleware.ExtraDataToPOAMiddleware">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.middleware.</span></span><span class="sig-name descname"><span class="pre">ExtraDataToPOAMiddleware</span></span><a class="headerlink" href="#web3.middleware.ExtraDataToPOAMiddleware" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<div class="admonition important">
<p class="admonition-title">Important</p>
<p>It is <strong>crucial</strong> that this middleware is injected at the 0th layer of the
middleware onion, using
<code class="docutils literal notranslate"><span class="pre">w3.middleware_onion.inject(ExtraDataToPOAMiddleware,</span> <span class="pre">layer=0)</span></code>, to guarantee
it is the <em>first</em> middleware to process the response and modify the <code class="docutils literal notranslate"><span class="pre">extraData</span></code>
field. This ensures it processes the field before any other middleware attempts
to validate it.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">ExtraDataToPOAMiddleware</span></code> is required to connect to <code class="docutils literal notranslate"><span class="pre">geth</span> <span class="pre">--dev</span></code> and may
also be needed for other EVM compatible blockchains like Polygon or BNB Chain
(Binance Smart Chain).</p>
<p>If the middleware is not injected at the 0th layer of the middleware onion, you may get
errors like the example below when interacting with your EVM node.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>web3.exceptions.ExtraDataLengthError:<span class="w"> </span>The<span class="w"> </span>field<span class="w"> </span>extraData<span class="w"> </span>is<span class="w"> </span><span class="m">97</span><span class="w"> </span>bytes,<span class="w"> </span>but<span class="w"> </span>should<span class="w"> </span>be
<span class="m">32</span>.<span class="w">  </span>It<span class="w"> </span>is<span class="w"> </span>quite<span class="w"> </span>likely<span class="w"> </span>that<span class="w"> </span>you<span class="w"> </span>are<span class="w"> </span>connected<span class="w"> </span>to<span class="w"> </span>a<span class="w"> </span>POA<span class="w"> </span>chain.<span class="w"> </span>Refer<span class="w"> </span>to
http://web3py.readthedocs.io/en/stable/middleware.html#proof-of-authority
<span class="k">for</span><span class="w"> </span>more<span class="w"> </span>details.<span class="w"> </span>The<span class="w"> </span>full<span class="w"> </span>extraData<span class="w"> </span>is:<span class="w"> </span>HexBytes<span class="o">(</span><span class="s1">&#39;...&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>The easiest way to connect to a default <code class="docutils literal notranslate"><span class="pre">geth</span> <span class="pre">--dev</span></code> instance which loads the
middleware is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.auto.gethdev</span> <span class="kn">import</span> <span class="n">w3</span>

<span class="go"># confirm that the connection succeeded</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">client_version</span>
<span class="go">&#39;Geth/v1.14.5-stable-4bb3c89d/linux-amd64/go1.22.4&#39;</span>
</pre></div>
</div>
<p>This example connects to a local <code class="docutils literal notranslate"><span class="pre">geth</span> <span class="pre">--dev</span></code> instance on Linux with a
unique IPC location and loads the middleware:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">IPCProvider</span>

<span class="go"># connect to the IPC location started with &#39;geth --dev --datadir ~/mynode&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">IPCProvider</span><span class="p">(</span><span class="s1">&#39;~/mynode/geth.ipc&#39;</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">ExtraDataToPOAMiddleware</span>

<span class="go"># inject the poa compatibility middleware to the innermost layer (0th layer)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">ExtraDataToPOAMiddleware</span><span class="p">,</span> <span class="n">layer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="go"># confirm that the connection succeeded</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">client_version</span>
<span class="go">&#39;Geth/v1.7.3-stable-4bb3c89d/linux-amd64/go1.9&#39;</span>
</pre></div>
</div>
<section id="why-is-extradatatopoamiddleware-necessary">
<h6>Why is <code class="docutils literal notranslate"><span class="pre">ExtraDataToPOAMiddleware</span></code> necessary?<a class="headerlink" href="#why-is-extradatatopoamiddleware-necessary" title="Link to this heading">ÔÉÅ</a></h6>
<p>There is no strong community consensus on a single Proof-of-Authority (PoA) standard yet.
Some nodes have successful experiments running though. One is go-ethereum (geth),
which uses a prototype PoA for its development mode and the Goerli test network.</p>
<p>Unfortunately, it does deviate from the yellow paper specification, which constrains the
<code class="docutils literal notranslate"><span class="pre">extraData</span></code> field in each block to a maximum of 32-bytes. Geth is one such example
where PoA uses more than 32 bytes, so this middleware modifies the block data a bit
before returning it.</p>
</section>
</section>
<section id="locally-managed-log-and-block-filters">
<span id="local-filter"></span><h5>Locally Managed Log and Block Filters<a class="headerlink" href="#locally-managed-log-and-block-filters" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py method">
<dt class="sig sig-object py" id="web3.middleware.LocalFilterMiddleware">
<span class="sig-prename descclassname"><span class="pre">web3.middleware.</span></span><span class="sig-name descname"><span class="pre">LocalFilterMiddleware</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.middleware.LocalFilterMiddleware" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p>This middleware provides an alternative to ethereum node managed filters. When used, Log and
Block filter logic are handled locally while using the same web3 filter api. Filter results are
retrieved using JSON-RPC endpoints that don‚Äôt rely on server state.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">EthereumTesterProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">EthereumTesterProvider</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">LocalFilterMiddleware</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">LocalFilterMiddleware</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#  Normal block and log filter apis behave as before.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">block_filter</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s2">&quot;latest&quot;</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">log_filter</span> <span class="o">=</span> <span class="n">myContract</span><span class="o">.</span><span class="n">events</span><span class="o">.</span><span class="n">myEvent</span><span class="o">.</span><span class="n">build_filter</span><span class="p">()</span><span class="o">.</span><span class="n">deploy</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="signing">
<h5>Signing<a class="headerlink" href="#signing" title="Link to this heading">ÔÉÅ</a></h5>
<dl class="py method">
<dt class="sig sig-object py" id="web3.middleware.SignAndSendRawMiddlewareBuilder">
<span class="sig-prename descclassname"><span class="pre">web3.middleware.</span></span><span class="sig-name descname"><span class="pre">SignAndSendRawMiddlewareBuilder</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.middleware.SignAndSendRawMiddlewareBuilder" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p>This middleware automatically captures transactions, signs them, and sends them as raw transactions.
The <code class="docutils literal notranslate"><span class="pre">from</span></code> field on the transaction, or <code class="docutils literal notranslate"><span class="pre">w3.eth.default_account</span></code> must be set to the address of the private key for
this middleware to have any effect.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">build</span></code> method for this middleware builder takes a single argument:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">private_key_or_account</span></code> A single private key or a tuple, list or set of private keys.</p>
<blockquote>
<div><p>Keys can be in any of the following formats:</p>
<ul class="simple">
<li><p>An <code class="docutils literal notranslate"><span class="pre">eth_account.LocalAccount</span></code> object</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">eth_keys.PrivateKey</span></code> object</p></li>
<li><p>A raw private key as a hex string or byte string</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Since this middleware signs transactions, it must always run after any middleware
that modifies the transaction. Therefore, it is recommended to inject the signing
middleware at the 0th layer of the middleware onion using
<code class="docutils literal notranslate"><span class="pre">w3.middleware_onion.inject(SignAndSendRawMiddlewareBuilder.build(...),</span> <span class="pre">layer=0)</span></code>.
Ensure that any transaction-modifying middleware exists in a higher layer within the
onion so that it runs before the signing middleware.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If used with <code class="docutils literal notranslate"><span class="pre">ExtraDataToPOAMiddleware</span></code>, the injection order doesn‚Äôt matter, as
the <code class="docutils literal notranslate"><span class="pre">extraData</span></code> field isn‚Äôt involved in transaction signing. The key is ensuring
<code class="docutils literal notranslate"><span class="pre">SignAndSendRawMiddlewareBuilder</span></code> runs after any middleware that modifies the
transaction.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">EthereumTesterProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">EthereumTesterProvider</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">SignAndSendRawMiddlewareBuilder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">eth_account</span> <span class="kn">import</span> <span class="n">Account</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">acct</span> <span class="o">=</span> <span class="n">Account</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s1">&#39;KEYSMASH FJAFJKLDSKF7JKFDJ 1530&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">SignAndSendRawMiddlewareBuilder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">acct</span><span class="p">),</span> <span class="n">layer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">default_account</span> <span class="o">=</span> <span class="n">acct</span><span class="o">.</span><span class="n">address</span>
</pre></div>
</div>
<p><a class="reference internal" href="index.html#local-vs-hosted"><span class="std std-ref">Hosted nodes</span></a> (like Infura or Alchemy) only support signed
transactions. This often results in <code class="docutils literal notranslate"><span class="pre">send_raw_transaction</span></code> being used repeatedly.
Instead, we can automate this process with
<code class="docutils literal notranslate"><span class="pre">SignAndSendRawMiddlewareBuilder.build(private_key_or_account)</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s1">&#39;HTTP_ENDPOINT&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">SignAndSendRawMiddlewareBuilder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">eth_account</span> <span class="kn">import</span> <span class="n">Account</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">acct</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">from_key</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PRIVATE_KEY&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">SignAndSendRawMiddlewareBuilder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">acct</span><span class="p">),</span> <span class="n">layer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">default_account</span> <span class="o">=</span> <span class="n">acct</span><span class="o">.</span><span class="n">address</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># use `eth_sendTransaction` to automatically sign and send the raw transaction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">(</span><span class="n">tx_dict</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0x09511acf75918fd03de58141d2fd409af4fd6d3dce48eb3aa1656c8f3c2c5c21&#39;)</span>
</pre></div>
</div>
<p>Similarly, with AsyncWeb3:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">AsyncWeb3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">async_w3</span> <span class="o">=</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncHTTPProvider</span><span class="p">(</span><span class="s1">&#39;HTTP_ENDPOINT&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">SignAndSendRawMiddlewareBuilder</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">eth_account</span> <span class="kn">import</span> <span class="n">Account</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">acct</span> <span class="o">=</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">from_key</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;PRIVATE_KEY&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">async_w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">SignAndSendRawMiddlewareBuilder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">acct</span><span class="p">),</span> <span class="n">layer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">default_account</span> <span class="o">=</span> <span class="n">acct</span><span class="o">.</span><span class="n">address</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># use `eth_sendTransaction` to automatically sign and send the raw transaction</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">await</span> <span class="n">async_w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">(</span><span class="n">tx_dict</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0x09511acf75918fd03de58141d2fd409af4fd6d3dce48eb3aa1656c8f3c2c5c21&#39;)</span>
</pre></div>
</div>
<p>Now you can send a transaction from acct.address without having to build and sign each raw transaction.</p>
<p>When making use of this signing middleware, when sending dynamic fee transactions (recommended over legacy transactions),
the transaction <code class="docutils literal notranslate"><span class="pre">type</span></code> of <code class="docutils literal notranslate"><span class="pre">2</span></code> (or <code class="docutils literal notranslate"><span class="pre">'0x2'</span></code>) is necessary. This is because transaction signing is validated based
on the transaction <code class="docutils literal notranslate"><span class="pre">type</span></code> parameter. This value defaults to <code class="docutils literal notranslate"><span class="pre">'0x2'</span></code> when <code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code> and / or
<code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code> are present as parameters in the transaction as these params imply a dynamic fee transaction.
Since these values effectively replace the legacy <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> value, do not set a <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> for dynamic fee transactions.
Doing so will lead to validation issues.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># dynamic fee transaction, introduced by EIP-1559:</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dynamic_fee_transaction</span> <span class="o">=</span> <span class="p">{</span>
<span class="o">...</span>     <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;0x2&#39;</span><span class="p">,</span>  <span class="c1"># optional - defaults to &#39;0x2&#39; when dynamic fee transaction params are present</span>
<span class="o">...</span>     <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">acct</span><span class="o">.</span><span class="n">address</span><span class="p">,</span>  <span class="c1"># optional if w3.eth.default_account was set with acct.address</span>
<span class="o">...</span>     <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="n">receiving_account_address</span><span class="p">,</span>
<span class="o">...</span>     <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
<span class="o">...</span>     <span class="s1">&#39;maxFeePerGas&#39;</span><span class="p">:</span> <span class="mi">2000000000</span><span class="p">,</span>  <span class="c1"># required for dynamic fee transactions</span>
<span class="o">...</span>     <span class="s1">&#39;maxPriorityFeePerGas&#39;</span><span class="p">:</span> <span class="mi">1000000000</span><span class="p">,</span>  <span class="c1"># required for dynamic fee transactions</span>
<span class="o">...</span> <span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">(</span><span class="n">dynamic_fee_transaction</span><span class="p">)</span>
</pre></div>
</div>
<p>A legacy transaction still works in the same way as it did before EIP-1559 was introduced:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">legacy_transaction</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="n">receiving_account_address</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s1">&#39;gasPrice&#39;</span><span class="p">:</span> <span class="mi">123456</span><span class="p">,</span>  <span class="c1"># optional - if not provided, gas_price_strategy (if exists) or eth_gasPrice is used</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">(</span><span class="n">legacy_transaction</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="creating-custom-middleware">
<h4>Creating Custom Middleware<a class="headerlink" href="#creating-custom-middleware" title="Link to this heading">ÔÉÅ</a></h4>
<p>To write your own middleware, create a class and extend from the base <code class="docutils literal notranslate"><span class="pre">Web3Middleware</span></code>
class, then override only the parts of the middleware that make sense for your use case.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Middleware API borrows from the Django middleware API introduced
in version 1.10.0.</p>
</div>
<p>If all you need is to modify the params before a request is made, you can override
the <code class="docutils literal notranslate"><span class="pre">request_processor</span></code> method, make the necessary tweaks to the params, and pass the
arguments to the next element in the middleware stack. Need to do some processing on the
response? Override the <code class="docutils literal notranslate"><span class="pre">response_processor</span></code> method and return the modified response.</p>
<p>The pattern:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">Web3Middleware</span>

<span class="k">class</span> <span class="nc">CustomMiddleware</span><span class="p">(</span><span class="n">Web3Middleware</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">request_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="c1"># Pre-request processing goes here before passing to the next middleware.</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">response_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="c1"># Response processing goes here before passing to the next middleware.</span>
        <span class="k">return</span> <span class="n">response</span>

    <span class="c1"># If your provider is asynchronous, override the async methods instead:</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">async_request_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
        <span class="c1"># Pre-request processing goes here before passing to the next middleware.</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">async_response_processor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">method</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="c1"># Response processing goes here before passing to the next middleware.</span>
        <span class="k">return</span> <span class="n">response</span>
</pre></div>
</div>
<p>If you wish to prevent making a call under certain conditions, you can override the
<code class="docutils literal notranslate"><span class="pre">wrap_make_request</span></code> method. This allows for defining pre-request processing,
skipping or making the request under certain conditions, as well as response
processing before passing it to the next middleware.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">Web3Middleware</span>

<span class="k">class</span> <span class="nc">CustomMiddleware</span><span class="p">(</span><span class="n">Web3Middleware</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">wrap_make_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">make_request</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">middleware</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
            <span class="c1"># pre-request processing goes here</span>
            <span class="n">response</span> <span class="o">=</span> <span class="n">make_request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>  <span class="c1"># make the request</span>
            <span class="c1"># response processing goes here</span>
            <span class="k">return</span> <span class="n">response</span>

        <span class="k">return</span> <span class="n">middleware</span>

    <span class="c1"># If your provider is asynchronous, override the async method instead:</span>

    <span class="k">async</span> <span class="k">def</span> <span class="nf">async_wrap_make_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">make_request</span><span class="p">):</span>
        <span class="k">async</span> <span class="k">def</span> <span class="nf">middleware</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
            <span class="c1"># pre-request processing goes here</span>
            <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">make_request</span><span class="p">(</span><span class="n">method</span><span class="p">,</span> <span class="n">params</span><span class="p">)</span>
            <span class="c1"># response processing goes here</span>
            <span class="k">return</span> <span class="n">response</span>

        <span class="k">return</span> <span class="n">middleware</span>
</pre></div>
</div>
<p>Custom middleware can be added to the stack via the class itself, using the
<a class="reference internal" href="#middleware-stack-api"><span class="std std-ref">Middleware Stack API</span></a>. The <code class="docutils literal notranslate"><span class="pre">name</span></code> kwarg is optional. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="kn">from</span> <span class="nn">my_module</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">CustomMiddleware</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="n">endpoint_uri</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">))</span>

<span class="c1"># add the middleware to the stack as the class</span>
<span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">CustomMiddleware</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;custom_middleware&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<span id="document-internals"></span><section id="web3-internals">
<h3>Web3 Internals<a class="headerlink" href="#web3-internals" title="Link to this heading">ÔÉÅ</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This section of the documentation is for advanced users.  You should probably stay away from these APIs if you don‚Äôt know what you are doing.</p>
</div>
<p>The Web3 library has multiple layers of abstraction between the public api
exposed by the web3 object and the backend or node that web3 is connecting to.</p>
<ul class="simple">
<li><p><strong>Providers</strong> are responsible for the actual communication with the
blockchain such as sending JSON-RPC requests over HTTP or an IPC socket.</p></li>
<li><p><strong>Middleware</strong> provide hooks for monitoring and modifying requests and
responses to and from the provider.</p></li>
<li><p><strong>Managers</strong> provide thread safety and primitives to allow for asynchronous usage of web3.</p></li>
</ul>
<p>Here are some common things you might want to do with these APIs.</p>
<ul class="simple">
<li><p>Redirect certain RPC requests to different providers such as sending all
<em>read</em> operations to a provider backed by a remote node and all <em>write</em> operations
to a local node that you control.</p></li>
<li><p>Transparently intercept transactions sent over <code class="docutils literal notranslate"><span class="pre">eth_sendTransaction</span></code>, sign
them locally, and then send them through <code class="docutils literal notranslate"><span class="pre">eth_sendRawTransaction</span></code>.</p></li>
<li><p>Modify the response from an RPC request so that it is returned in different
format such as converting all integer values to their hexadecimal
representation.</p></li>
<li><p>Validate the inputs to RPC requests</p></li>
</ul>
<section id="request-lifecycle">
<h4>Request Lifecycle<a class="headerlink" href="#request-lifecycle" title="Link to this heading">ÔÉÅ</a></h4>
<p>Each web3 RPC call passes through these layers in the following manner.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>  ***********    ************
  | Request |    | Response |
  ***********    ************
      |                ^
      v                |
+-----------------------------+
|           Manager           |
+-----------------------------+
      |                ^
      v                |
+-----------------------------+
|         Middleware          |
+-----------------------------+
      |                ^
      v                |
+-----------------------------+
|          Provider           |
+-----------------------------+
</pre></div>
</div>
<p>You can visualize this relationship like an onion, with the Provider at the
center. The request originates from the <code class="docutils literal notranslate"><span class="pre">Manager</span></code>, outside of the onion, passing
down through each layer of the onion until it reaches the <code class="docutils literal notranslate"><span class="pre">Provider</span></code> at the
center. The <code class="docutils literal notranslate"><span class="pre">Provider</span></code> then handles the request, producing a response which will
then pass back out from the center of the onion, through each layer until it is
finally returned by the <code class="docutils literal notranslate"><span class="pre">Manager</span></code>.</p>
</section>
<section id="providers">
<h4>Providers<a class="headerlink" href="#providers" title="Link to this heading">ÔÉÅ</a></h4>
<p>A provider is responsible for all direct blockchain interactions.  In most
cases this means interacting with the JSON-RPC server for an ethereum node over
HTTP or an IPC socket.  There is however nothing which requires providers to be
RPC based, allowing for providers designed for testing purposes which use an
in-memory EVM to fulfill requests.</p>
<section id="writing-your-own-provider">
<h5>Writing your own Provider<a class="headerlink" href="#writing-your-own-provider" title="Link to this heading">ÔÉÅ</a></h5>
<p>Writing your own provider requires implementing two required methods as well as
setting the middleware the provider should use.</p>
<dl class="py method">
<dt class="sig sig-object py" id="BaseProvider.make_request">
<span class="sig-prename descclassname"><span class="pre">BaseProvider.</span></span><span class="sig-name descname"><span class="pre">make_request</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#BaseProvider.make_request" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Each provider class <strong>must</strong> implement this method.  This method <strong>should</strong>
return a JSON object with either a <code class="docutils literal notranslate"><span class="pre">'result'</span></code> key in the case of success,
or an <code class="docutils literal notranslate"><span class="pre">'error'</span></code> key in the case of failure.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code>  This will be a string representing the JSON-RPC method that
is being called such as <code class="docutils literal notranslate"><span class="pre">'eth_sendTransaction'</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>  This will be a list or other iterable of the parameters for
the JSON-RPC method being called.</p></li>
</ul>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="BaseProvider.is_connected">
<span class="sig-prename descclassname"><span class="pre">BaseProvider.</span></span><span class="sig-name descname"><span class="pre">is_connected</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">show_traceback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#BaseProvider.is_connected" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This function should return <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> depending on whether the
provider should be considered <em>connected</em>.  For example, an IPC socket
based provider should return <code class="docutils literal notranslate"><span class="pre">True</span></code> if the socket is open and <code class="docutils literal notranslate"><span class="pre">False</span></code>
if the socket is closed.</p>
<p>If set to <code class="docutils literal notranslate"><span class="pre">True</span></code>, the optional <code class="docutils literal notranslate"><span class="pre">show_traceback</span></code> boolean will raise a
<code class="docutils literal notranslate"><span class="pre">ProviderConnectionError</span></code> and provide information on why the provider should
not be considered <em>connected</em>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="BaseProvider.middleware">
<span class="sig-prename descclassname"><span class="pre">BaseProvider.</span></span><span class="sig-name descname"><span class="pre">middleware</span></span><a class="headerlink" href="#BaseProvider.middleware" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This should be an iterable of middleware.</p>
</dd></dl>

<p>You can set a new list of middleware by assigning to <code class="docutils literal notranslate"><span class="pre">provider.middleware</span></code>,
with the first middleware that processes the request at the beginning of the list.</p>
</section>
<section id="provider-configurations">
<h5>Provider Configurations<a class="headerlink" href="#provider-configurations" title="Link to this heading">ÔÉÅ</a></h5>
<section id="request-caching">
<span id="id1"></span><h6>Request Caching<a class="headerlink" href="#request-caching" title="Link to this heading">ÔÉÅ</a></h6>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Familiarize yourself with the validation logic for request caching before
enabling it. Since this feature often requires making additional requests under the
hood to try to guarantee the validity of the data, it may create unnecessary
overhead for your use case. Validation can be turned off by setting the
<code class="docutils literal notranslate"><span class="pre">request_cache_validation_threshold</span></code> option to <code class="docutils literal notranslate"><span class="pre">None</span></code>, caching all allowed
requests, or configured for adjusting performance to your needs.</p>
</div>
<p>Request caching can be configured at the provider level via the following configuration
options on the provider instance:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cache_allowed_requests:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cacheable_requests:</span> <span class="pre">Optional[Set[RPCEndpoint]]</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">request_cache_validation_threshold:</span> <span class="pre">Optional[Union[RequestCacheValidationThreshold,</span> <span class="pre">int]]</span></code></p></li>
</ul>
<p>For requests that don‚Äôt rely on block data (e.g., <code class="docutils literal notranslate"><span class="pre">eth_chainId</span></code>), enabling request
caching by setting the <code class="docutils literal notranslate"><span class="pre">cache_allowed_requests</span></code> option to <code class="docutils literal notranslate"><span class="pre">True</span></code> will cache all
responses. This is safe to do.</p>
<p>However, for requests that rely on block data (e.g., <code class="docutils literal notranslate"><span class="pre">eth_getBlockByNumber</span></code>), it is
not safe to always cache their responses because block data can change - during a
chain reorganization or while finality has not been reached, for example. The
<code class="docutils literal notranslate"><span class="pre">request_cache_validation_threshold</span></code> option allows configuring a safe threshold for
caching responses that depend on block data. By default, this option is configured
to internal values deemed ‚Äúsafe‚Äù for the chain id you are connected to. If you are
connected to mainnet Ethereum, this value is set to the <code class="docutils literal notranslate"><span class="pre">finalized</span></code> block number.
If you are connected to another chain, this value is set to a time interval in seconds,
from the current time, that is deemed ‚Äúsafe‚Äù for that chain‚Äôs finality mechanism.</p>
<p><strong>It‚Äôs important to understand that, in order to perform these validations, extra
requests are sometimes made to the node to get the appropriate information. For a
transaction request, for example, it is necessary to get the block information to
validate the transaction is beyond the safe threshold. This can create overhead,
especially for high-frequency requests. For this reason, it is important to understand
when to turn on caching and how to configure the validation appropriately for your
use case in order to avoid unnecessary overhead.</strong></p>
<p>We keep a list of some reasonable values for bigger chains and
use the time interval of 1 hour for everything else. Below is a list of the default
values for internally configured chains:</p>
<blockquote>
<div><ul class="simple">
<li><p>ETH: RequestCacheValidationThreshold.FINALIZED (‚Äúfinalized‚Äù block)</p></li>
<li><p>ARB1: 7 days</p></li>
<li><p>ZKSYNC: 1 hour</p></li>
<li><p>OETH: 3 minutes</p></li>
<li><p>MATIC: 30 minutes</p></li>
<li><p>ZKEVM: 1 hour</p></li>
<li><p>BASE: 7 days</p></li>
<li><p>SCR: 1 hour</p></li>
<li><p>GNO: 5 minutes</p></li>
<li><p>AVAX: 2 minutes</p></li>
<li><p>BNB: 2 minutes</p></li>
<li><p>FTM: 1 minute</p></li>
</ul>
</div></blockquote>
<p>For Ethereum mainnet, for example, this means that a request‚Äôs response will be cached
if the block number the request relies on is less than or equal to the <code class="docutils literal notranslate"><span class="pre">finalized</span></code>
block number. If the block number exceeds the <code class="docutils literal notranslate"><span class="pre">finalized</span></code> block number, the response
won‚Äôt be cached. For all others, the response will be cached if the block timestamp
related to the data that is being requested is older than or equal to the time interval
configured for that chain. For any chain not on this list, the default value is set to
1 hour (this includes all testnets).</p>
<p>This behavior can be modified by setting the <code class="docutils literal notranslate"><span class="pre">request_cache_validation_threshold</span></code>
option to <code class="docutils literal notranslate"><span class="pre">RequestCacheValidationThreshold.SAFE</span></code>, which uses the <code class="docutils literal notranslate"><span class="pre">safe</span></code> block as
the threshold (Ethereum mainnet only), to your own time interval in seconds (for any
chain, including mainnet Ethereum), or to <code class="docutils literal notranslate"><span class="pre">None</span></code>, which disables any validation and
caches all requests (this is not recommended for non testnet chains). The
<code class="docutils literal notranslate"><span class="pre">RequestCacheValidationThreshold</span></code> enum, for mainnet <code class="docutils literal notranslate"><span class="pre">finalized</span></code> and <code class="docutils literal notranslate"><span class="pre">safe</span></code> values,
is imported from the <code class="docutils literal notranslate"><span class="pre">web3.utils</span></code> module.</p>
<p>Note that the <code class="docutils literal notranslate"><span class="pre">cacheable_requests</span></code> option can be used to specify a set of RPC
endpoints that are allowed to be cached. By default, this option is set to an internal
list of deemed-safe-to-cache endpoints, excluding endpoints such as <code class="docutils literal notranslate"><span class="pre">eth_call</span></code>, whose
responses can vary and are not safe to cache. The default list of cacheable requests is
below, with requests validated by the <code class="docutils literal notranslate"><span class="pre">request_cache_validation_threshold</span></code> option in
bold:</p>
<blockquote>
<div><ul class="simple">
<li><p>eth_chainId</p></li>
<li><p>web3_clientVersion</p></li>
<li><p>net_version</p></li>
<li><p><strong>eth_getBlockByNumber</strong></p></li>
<li><p><strong>eth_getRawTransactionByBlockNumberAndIndex</strong></p></li>
<li><p><strong>eth_getBlockTransactionCountByNumber</strong></p></li>
<li><p><strong>eth_getUncleByBlockNumberAndIndex</strong></p></li>
<li><p><strong>eth_getUncleCountByBlockNumber</strong></p></li>
<li><p><strong>eth_getBlockByHash</strong></p></li>
<li><p><strong>eth_getTransactionByHash</strong></p></li>
<li><p><strong>eth_getTransactionByBlockNumberAndIndex</strong></p></li>
<li><p><strong>eth_getTransactionByBlockHashAndIndex</strong></p></li>
<li><p><strong>eth_getBlockTransactionCountByHash</strong></p></li>
<li><p><strong>eth_getRawTransactionByBlockHashAndIndex</strong></p></li>
<li><p><strong>eth_getUncleByBlockHashAndIndex</strong></p></li>
<li><p><strong>eth_getUncleCountByBlockHash</strong></p></li>
</ul>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">HTTPProvider</span>
<span class="kn">from</span> <span class="nn">web3.utils</span> <span class="kn">import</span> <span class="n">RequestCacheValidationThreshold</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">HTTPProvider</span><span class="p">(</span>
    <span class="n">endpoint_uri</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">,</span>

    <span class="c1"># optional flag to turn on cached requests, defaults to ``False``</span>
    <span class="n">cache_allowed_requests</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>

    <span class="c1"># optional, defaults to an internal list of deemed-safe-to-cache endpoints (see above)</span>
    <span class="n">cacheable_requests</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;eth_chainId&quot;</span><span class="p">,</span> <span class="s2">&quot;eth_getBlockByNumber&quot;</span><span class="p">},</span>

    <span class="c1"># optional, defaults to a value that is based on the chain id (see above)</span>
    <span class="n">request_cache_validation_threshold</span><span class="o">=</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">,</span>  <span class="c1"># 1 hour</span>
    <span class="c1"># request_cache_validation_threshold=RequestCacheValidationThreshold.SAFE,  # Ethereum mainnet only</span>
<span class="p">))</span>
</pre></div>
</div>
</section>
<section id="retry-requests-for-http-providers">
<span id="http-retry-requests"></span><h6>Retry Requests for HTTP Providers<a class="headerlink" href="#retry-requests-for-http-providers" title="Link to this heading">ÔÉÅ</a></h6>
<p><code class="docutils literal notranslate"><span class="pre">HTTPProvider</span></code> and <code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code> instances retry certain requests by default
on exceptions. This can be configured via the <code class="docutils literal notranslate"><span class="pre">exception_retry_configuration</span></code>
property on the provider instance, which takes a
<a class="reference internal" href="#web3.providers.rpc.utils.ExceptionRetryConfiguration" title="web3.providers.rpc.utils.ExceptionRetryConfiguration"><code class="xref py py-class docutils literal notranslate"><span class="pre">ExceptionRetryConfiguration</span></code></a> class as its value. The
retry mechanism employs an exponential backoff strategy, starting from the initial
value determined by the <code class="docutils literal notranslate"><span class="pre">backoff_factor</span></code>, and doubling the delay with each attempt,
up to the <code class="docutils literal notranslate"><span class="pre">retries</span></code> value. Below is an example showing the default options for the
retry configuration and how to override them.</p>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.rpc.utils.ExceptionRetryConfiguration">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.rpc.utils.</span></span><span class="sig-name descname"><span class="pre">ExceptionRetryConfiguration</span></span><a class="headerlink" href="#web3.providers.rpc.utils.ExceptionRetryConfiguration" title="Link to this definition">ÔÉÅ</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="web3.providers.rpc.utils.ExceptionRetryConfiguration.errors">
<span class="sig-name descname"><span class="pre">errors</span></span><a class="headerlink" href="#web3.providers.rpc.utils.ExceptionRetryConfiguration.errors" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>A tuple of exceptions that the provider should retry on. The default is
<code class="docutils literal notranslate"><span class="pre">HTTPProvider</span></code>: <code class="docutils literal notranslate"><span class="pre">(ConnectionError,</span> <span class="pre">requests.HTTPError,</span> <span class="pre">requests.Timeout)</span></code>
and <code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code>: <code class="docutils literal notranslate"><span class="pre">(aiohttp.ClientError,</span> <span class="pre">asyncio.TimeoutError)</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.providers.rpc.utils.ExceptionRetryConfiguration.retries">
<span class="sig-name descname"><span class="pre">retries</span></span><a class="headerlink" href="#web3.providers.rpc.utils.ExceptionRetryConfiguration.retries" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The number of retries to attempt. The default is 5.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.providers.rpc.utils.ExceptionRetryConfiguration.backoff_factor">
<span class="sig-name descname"><span class="pre">backoff_factor</span></span><a class="headerlink" href="#web3.providers.rpc.utils.ExceptionRetryConfiguration.backoff_factor" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The initial delay multiplier, which doubles with each retry attempt. The default
is 0.125.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.providers.rpc.utils.ExceptionRetryConfiguration.method_allowlist">
<span class="sig-name descname"><span class="pre">method_allowlist</span></span><a class="headerlink" href="#web3.providers.rpc.utils.ExceptionRetryConfiguration.method_allowlist" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>A list of retryable methods. The default is an in-house list of deemed-safe-to-
retry methods.</p>
</dd></dl>

</dd></dl>

<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">HTTPProvider</span>
<span class="kn">from</span> <span class="nn">web3.providers.rpc.utils</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">REQUEST_RETRY_ALLOWLIST</span><span class="p">,</span>
    <span class="n">ExceptionRetryConfiguration</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">HTTPProvider</span><span class="p">(</span>
    <span class="n">endpoint_uri</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">,</span>
    <span class="n">exception_retry_configuration</span><span class="o">=</span><span class="n">ExceptionRetryConfiguration</span><span class="p">(</span>
        <span class="n">errors</span><span class="o">=</span><span class="n">DEFAULT_EXCEPTIONS</span><span class="p">,</span>

        <span class="c1"># number of retries to attempt</span>
        <span class="n">retries</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>

        <span class="c1"># initial delay multiplier, doubles with each retry attempt</span>
        <span class="n">backoff_factor</span><span class="o">=</span><span class="mf">0.125</span><span class="p">,</span>

        <span class="c1"># an in-house default list of retryable methods</span>
        <span class="n">method_allowlist</span><span class="o">=</span><span class="n">REQUEST_RETRY_ALLOWLIST</span><span class="p">,</span>
    <span class="p">),</span>
<span class="p">))</span>
</pre></div>
</div>
<p>For the different http providers, <code class="docutils literal notranslate"><span class="pre">DEFAULT_EXCEPTIONS</span></code> is defined as:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">HTTPProvider</span></code>: <code class="docutils literal notranslate"><span class="pre">(ConnectionError,</span> <span class="pre">requests.HTTPError,</span> <span class="pre">requests.Timeout)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code>: <code class="docutils literal notranslate"><span class="pre">(ConnectionError,</span> <span class="pre">aiohttp.ClientError,</span> <span class="pre">asyncio.TimeoutError)</span></code></p></li>
</ul>
<p>Setting <code class="docutils literal notranslate"><span class="pre">retry_configuration</span></code> to <code class="docutils literal notranslate"><span class="pre">None</span></code> will disable retries on exceptions for the
provider instance.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">HTTPProvider</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="n">endpoint_uri</span><span class="o">=</span><span class="s2">&quot;...&quot;</span><span class="p">,</span> <span class="n">retry_configuration</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="managers">
<h4>Managers<a class="headerlink" href="#managers" title="Link to this heading">ÔÉÅ</a></h4>
<p>The Manager acts as a gatekeeper for the request/response lifecycle.  It is
unlikely that you will need to change the Manager as most functionality can be
implemented in the Middleware layer.</p>
</section>
<section id="request-processing-for-persistent-connection-providers">
<span id="internals-persistent-connection-providers"></span><h4>Request Processing for Persistent Connection Providers<a class="headerlink" href="#request-processing-for-persistent-connection-providers" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="web3.providers.persistent.request_processor.RequestProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.providers.persistent.request_processor.</span></span><span class="sig-name descname"><span class="pre">RequestProcessor</span></span><a class="headerlink" href="#web3.providers.persistent.request_processor.RequestProcessor" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p>The <code class="docutils literal notranslate"><span class="pre">RequestProcessor</span></code> class is responsible for the storing and syncing up of
asynchronous requests to responses for a <code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code>. The
<a class="reference internal" href="index.html#web3.providers.persistent.WebSocketProvider" title="web3.providers.persistent.WebSocketProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketProvider</span></code></a> and the
<a class="reference internal" href="index.html#web3.providers.persistent.AsyncIPCProvider" title="web3.providers.persistent.AsyncIPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncIPCProvider</span></code></a> are two persistent connection
providers. In order to send a request and receive a response to that same request,
<code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code> instances have to match request <em>id</em> values to
response <em>id</em> values coming back from the socket connection. Any provider that does
not adhere to the <a class="reference external" href="https://www.jsonrpc.org/specification">JSON-RPC 2.0 specification</a>
in this way will not work with <code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code> instances. The specifics
of how the request processor handles this are outlined below.</p>
<section id="listening-for-responses">
<h5>Listening for Responses<a class="headerlink" href="#listening-for-responses" title="Link to this heading">ÔÉÅ</a></h5>
<p>Implementations of the <code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code> class have a message listener
background task that is called when the socket connection is established. This task
is responsible for listening for any and all messages coming in over the socket
connection and storing them in the <code class="docutils literal notranslate"><span class="pre">RequestProcessor</span></code> instance internal to the
<code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code> instance. The <code class="docutils literal notranslate"><span class="pre">RequestProcessor</span></code> instance is
responsible for storing the messages in the correct cache, either the one-to-one cache
or the one-to-many (subscriptions) queue, depending on whether the message has a
JSON-RPC <em>id</em> value or not.</p>
</section>
<section id="one-to-one-requests">
<h5>One-To-One Requests<a class="headerlink" href="#one-to-one-requests" title="Link to this heading">ÔÉÅ</a></h5>
<p>One-to-one requests can be summarized as any request that expects only one response
back. An example is using the <code class="docutils literal notranslate"><span class="pre">eth</span></code> module API to request the latest block number.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">ws_one_to_one_example</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ws://127.0.0.1:8546&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">w3</span><span class="p">:</span>
<span class="gp">... </span>        <span class="c1"># make a request and expect a single response returned on the same line</span>
<span class="gp">... </span>        <span class="n">latest_block_num</span> <span class="o">=</span> <span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">block_number</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">ws_one_to_one_example</span><span class="p">())</span>
</pre></div>
</div>
<p>With persistent socket connections, we have to call <code class="docutils literal notranslate"><span class="pre">send()</span></code> and asynchronously
receive responses via another means, generally by calling <code class="docutils literal notranslate"><span class="pre">recv()</span></code> or by iterating
on the socket connection for messages. As outlined above, the
<code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code> class has a message listener background task that
handles the receiving of messages.</p>
<p>Due to this asynchronous nature of sending and receiving, in order to make one-to-one
request-to-response calls work, we have to save the request information somewhere so
that, when the response is received, we can match it to the original request that was
made (i.e. the request with a matching <em>id</em> to the response that was received). The
stored request information is then used to process the response when it is received,
piping it through the response formatters and middleware internal to the <em>web3.py</em>
library.</p>
<p>In order to store the request information, the <code class="docutils literal notranslate"><span class="pre">RequestProcessor</span></code> class has an
internal <code class="docutils literal notranslate"><span class="pre">RequestInformation</span></code> cache. The <code class="docutils literal notranslate"><span class="pre">RequestInformation</span></code> class saves important
information about a request.</p>
<dl class="py class">
<dt class="sig sig-object py" id="web3._utils.caching.RequestInformation">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3._utils.caching.</span></span><span class="sig-name descname"><span class="pre">RequestInformation</span></span><a class="headerlink" href="#web3._utils.caching.RequestInformation" title="Link to this definition">ÔÉÅ</a></dt>
<dd><dl class="py attribute">
<dt class="sig sig-object py" id="web3._utils.caching.RequestInformation.method">
<span class="sig-name descname"><span class="pre">method</span></span><a class="headerlink" href="#web3._utils.caching.RequestInformation.method" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The name of the method - e.g. ‚Äúeth_subscribe‚Äù.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3._utils.caching.RequestInformation.params">
<span class="sig-name descname"><span class="pre">params</span></span><a class="headerlink" href="#web3._utils.caching.RequestInformation.params" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The params used when the call was made - e.g. (‚ÄúnewPendingTransactions‚Äù, True).</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3._utils.caching.RequestInformation.response_formatters">
<span class="sig-name descname"><span class="pre">response_formatters</span></span><a class="headerlink" href="#web3._utils.caching.RequestInformation.response_formatters" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The formatters that will be used to process the response.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3._utils.caching.RequestInformation.middleware_response_processors">
<span class="sig-name descname"><span class="pre">middleware_response_processors</span></span><a class="headerlink" href="#web3._utils.caching.RequestInformation.middleware_response_processors" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Any middleware that processes responses that is present on the instance at the
time of the request is appended here, in order, so the response may be piped
through that logic when it comes in.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3._utils.caching.RequestInformation.subscription_id">
<span class="sig-name descname"><span class="pre">subscription_id</span></span><a class="headerlink" href="#web3._utils.caching.RequestInformation.subscription_id" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>If the request is an <code class="docutils literal notranslate"><span class="pre">eth_subscribe</span></code> request, rather than
popping this information from the cache when the response to the subscription call
comes in (i.e. the subscription <em>id</em>), we save the subscription id with the
request information so that we can correctly process all subscription messages
that come in with that subscription <em>id</em>. For one-to-one request-to-response
calls, this value is always <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd></dl>

</dd></dl>

<p>One-to-one responses, those that include a JSON-RPC <em>id</em> in the response object, are
stored in an internal <code class="docutils literal notranslate"><span class="pre">SimpleCache</span></code> class, isolated from any one-to-many responses.
When the <code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code> is looking for a response internally, it will
expect the message listener task to store the response in this cache. Since the request
<em>id</em> is used in the cache key generation, it will then look for a cache key that matches
the response <em>id</em> with that of the request <em>id</em>. If the cache key is found, the response
is processed and returned to the user. If the cache key is not found, the operation will
time out and raise a <code class="docutils literal notranslate"><span class="pre">TimeExhausted</span></code> exception. This timeout can be configured by the
user when instantiating the <code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code> instance via the
<code class="docutils literal notranslate"><span class="pre">response_timeout</span></code> keyword argument.</p>
</section>
<section id="one-to-many-requests">
<h5>One-To-Many Requests<a class="headerlink" href="#one-to-many-requests" title="Link to this heading">ÔÉÅ</a></h5>
<p>One-to-many requests can be summarized by any request that expects many responses as a
result of the initial request. The only current example is the <code class="docutils literal notranslate"><span class="pre">eth_subscribe</span></code>
request. The initial <code class="docutils literal notranslate"><span class="pre">eth_subscribe</span></code> request expects only one response, the
subscription <em>id</em> value, but it also expects to receive many <code class="docutils literal notranslate"><span class="pre">eth_subscription</span></code>
messages if and when the request is successful. For this reason, the original request
is considered a one-to-one request so that a subscription <em>id</em> can be returned to the
user on the same line, but the <code class="docutils literal notranslate"><span class="pre">process_subscriptions()</span></code> method on the
<code class="xref py py-class docutils literal notranslate"><span class="pre">PersistentConnection</span></code> class, the public API for
interacting with the active persistent socket connection, is set up to receive
<code class="docutils literal notranslate"><span class="pre">eth_subscription</span></code> responses over an asynchronous interator pattern.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">async</span> <span class="k">def</span> <span class="nf">ws_subscription_example</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;ws://127.0.0.1:8546&quot;</span><span class="p">))</span> <span class="k">as</span> <span class="n">w3</span><span class="p">:</span>
<span class="gp">... </span>        <span class="c1"># Subscribe to new block headers and receive the subscription_id.</span>
<span class="gp">... </span>        <span class="c1"># A one-to-one call with a trigger for many responses</span>
<span class="gp">... </span>        <span class="n">subscription_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;newHeads&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>        <span class="c1"># Listen to the socket for the many responses utilizing the</span>
<span class="gp">... </span>        <span class="c1"># ``w3.socket`` ``PersistentConnection`` public API method</span>
<span class="gp">... </span>        <span class="c1"># ``process_subscriptions()``</span>
<span class="gp">... </span>        <span class="k">async</span> <span class="k">for</span> <span class="n">response</span> <span class="ow">in</span> <span class="n">w3</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">process_subscriptions</span><span class="p">():</span>
<span class="gp">... </span>            <span class="c1"># Receive only one-to-many responses here so that we don&#39;t</span>
<span class="gp">... </span>            <span class="c1"># accidentally return the response for a one-to-one request in this</span>
<span class="gp">... </span>            <span class="c1"># block</span>
<span class="gp">...</span>
<span class="gp">... </span>            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">response</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>            <span class="k">if</span> <span class="n">some_condition</span><span class="p">:</span>
<span class="gp">... </span>                <span class="c1"># unsubscribe from new block headers, another one-to-one request</span>
<span class="gp">... </span>                <span class="n">is_unsubscribed</span> <span class="o">=</span> <span class="k">await</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">)</span>
<span class="gp">... </span>                <span class="k">if</span> <span class="n">is_unsubscribed</span><span class="p">:</span>
<span class="gp">... </span>                    <span class="k">break</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">ws_subscription_example</span><span class="p">())</span>
</pre></div>
</div>
<p>One-to-many responses, those that do not include a JSON-RPC <em>id</em> in the response object,
are stored in an internal <code class="docutils literal notranslate"><span class="pre">asyncio.Queue</span></code> instance, isolated from any one-to-one
responses. When the <code class="docutils literal notranslate"><span class="pre">PersistentConnectionProvider</span></code> is looking for one-to-many
responses internally, it will expect the message listener task to store these messages
in this queue. Since the order of the messages is important, the queue is a FIFO queue.
The <code class="docutils literal notranslate"><span class="pre">process_subscriptions()</span></code> method on the <code class="docutils literal notranslate"><span class="pre">PersistentConnection</span></code> class is set up
to pop messages from this queue as FIFO over an asynchronous iterator pattern.</p>
<p>If the stream of messages from the socket is not being interrupted by any other
tasks, the queue will generally be in sync with the messages coming in over the
socket. That is, the message listener will put a message in the queue and the
<code class="docutils literal notranslate"><span class="pre">process_subscriptions()</span></code> method will pop that message from the queue and yield
control of the loop back to the listener. This will continue until the socket
connection is closed or the user unsubscribes from the subscription. If the stream of
messages lags a bit, or the provider is not consuming messages but has subscribed to
a subscription, this internal queue may fill up with messages until it reaches its max
size and then trigger a waiting <code class="docutils literal notranslate"><span class="pre">asyncio.Event</span></code> until the provider begins consuming
messages from the queue again. For this reason, it‚Äôs important to begin consuming
messages from the queue, via the <code class="docutils literal notranslate"><span class="pre">process_subscriptions()</span></code> method, as soon as a
subscription is made.</p>
</section>
</section>
</section>
<span id="document-ens_overview"></span><section id="ethereum-name-service-ens">
<span id="ens-overview"></span><h3>Ethereum Name Service (ENS)<a class="headerlink" href="#ethereum-name-service-ens" title="Link to this heading">ÔÉÅ</a></h3>
<p>The Ethereum Name Service (ENS) is analogous to the Domain Name Service. It
enables users and developers to use human-friendly names in place of error-prone
hexadecimal addresses, content hashes, and more.</p>
<p>The <a class="reference internal" href="index.html#module-ens" title="ens"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ens</span></code></a> module is included with web3.py. It provides an interface to look up
domains and addresses, add resolver records, or get and set metadata.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>web3.py <code class="docutils literal notranslate"><span class="pre">v6.6.0</span></code> introduced ENS name normalization standard
<a class="reference external" href="https://docs.ens.domains/ens-improvement-proposals/ensip-15-normalization-standard">ENSIP-15</a>.
This update to ENS name validation and normalization won‚Äôt affect ~99%
of names but may prevent invalid names from being created and from interacting with
the ENS contracts via web3.py. We feel strongly that this change, though breaking,
is in the best interest of our users as it ensures compatibility with the latest ENS
standards.</p>
</div>
<section id="setup">
<h4>Setup<a class="headerlink" href="#setup" title="Link to this heading">ÔÉÅ</a></h4>
<p>Create an <code class="xref py py-class docutils literal notranslate"><span class="pre">ENS</span></code> object (named <code class="docutils literal notranslate"><span class="pre">ns</span></code> below) in one of three ways:</p>
<ol class="arabic simple">
<li><p>Automatic detection</p></li>
<li><p>Specify an instance of a <a class="reference internal" href="index.html#providers"><span class="std std-ref">provider</span></a></p></li>
<li><p>From an existing <a class="reference internal" href="index.html#web3.Web3" title="web3.Web3"><code class="xref py py-class docutils literal notranslate"><span class="pre">web3.Web3</span></code></a> object</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># automatic detection</span>
<span class="kn">from</span> <span class="nn">ens.auto</span> <span class="kn">import</span> <span class="n">ns</span>

<span class="c1"># or, with a provider</span>
<span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">IPCProvider</span>
<span class="kn">from</span> <span class="nn">ens</span> <span class="kn">import</span> <span class="n">ENS</span>

<span class="n">provider</span> <span class="o">=</span> <span class="n">IPCProvider</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">ns</span> <span class="o">=</span> <span class="n">ENS</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>

<span class="c1"># or, with a w3 instance</span>
<span class="c1"># Note: This inherits the w3 middleware from the w3 instance and adds a stalecheck middleware to the middleware onion.</span>
<span class="c1"># It also inherits the provider and codec from the w3 instance, as well as the ``strict_bytes_type_checking`` flag value.</span>
<span class="kn">from</span> <span class="nn">ens</span> <span class="kn">import</span> <span class="n">ENS</span>
<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">ns</span> <span class="o">=</span> <span class="n">ENS</span><span class="o">.</span><span class="n">from_web3</span><span class="p">(</span><span class="n">w3</span><span class="p">)</span>
</pre></div>
</div>
<p>Asynchronous support is available via the <code class="docutils literal notranslate"><span class="pre">AsyncENS</span></code> module:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ens</span> <span class="kn">import</span> <span class="n">AsyncENS</span>

<span class="n">ns</span> <span class="o">=</span> <span class="n">AsyncENS</span><span class="p">(</span><span class="n">provider</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that an <code class="docutils literal notranslate"><span class="pre">ens</span></code> module instance is also available on the <code class="docutils literal notranslate"><span class="pre">w3</span></code> instance.
The first time it‚Äôs used, web3.py will create the  <code class="docutils literal notranslate"><span class="pre">ens</span></code> instance using
<code class="docutils literal notranslate"><span class="pre">ENS.from_web3(w3)</span></code> or <code class="docutils literal notranslate"><span class="pre">AsyncENS.from_web3(w3)</span></code> as appropriate.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># instantiate w3 instance</span>
<span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">IPCProvider</span>
<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">IPCProvider</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>

<span class="c1"># use the module</span>
<span class="n">w3</span><span class="o">.</span><span class="n">ens</span><span class="o">.</span><span class="n">address</span><span class="p">(</span><span class="s1">&#39;ethereum.eth&#39;</span><span class="p">)</span>
</pre></div>
</div>
<dl class="py attribute">
<dt class="sig sig-object py" id="ens.strict_bytes_type_checking">
<span class="sig-prename descclassname"><span class="pre">ens.</span></span><span class="sig-name descname"><span class="pre">strict_bytes_type_checking</span></span><a class="headerlink" href="#ens.strict_bytes_type_checking" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">ENS</span></code> instance has a <code class="docutils literal notranslate"><span class="pre">strict_bytes_type_checking</span></code> flag that toggles the flag
with the same name on the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance attached to the <code class="docutils literal notranslate"><span class="pre">ENS</span></code> instance.
You may disable the stricter bytes type checking that is loaded by default using
this flag. For more examples, see <a class="reference internal" href="index.html#disable-strict-byte-check"><span class="std std-ref">Disabling Strict Checks for Bytes Types</span></a></p>
<p>If instantiating a standalone ENS instance using <code class="docutils literal notranslate"><span class="pre">ENS.from_web3()</span></code>, the ENS
instance will inherit the value of the flag on the Web3 instance at time of
instantiation.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">EthereumTesterProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">ens</span> <span class="kn">import</span> <span class="n">ENS</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">EthereumTesterProvider</span><span class="p">())</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span>  <span class="c1"># assert strict by default</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>  <span class="c1"># zero-padded, so encoded to: b&#39;1\x00&#39;</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span> <span class="o">=</span> <span class="n">ENS</span><span class="o">.</span><span class="n">from_web3</span><span class="p">(</span><span class="n">w3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># assert inherited from w3 at time of instantiation via ENS.from_web3()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">ns</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span> <span class="ow">is</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># assert these are now separate instances</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ns</span><span class="o">.</span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># assert w3 flag value remains</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span> <span class="ow">is</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>However, if accessing the <code class="docutils literal notranslate"><span class="pre">ENS</span></code> class via the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance as a module
(<code class="docutils literal notranslate"><span class="pre">w3.ens</span></code>), since all modules use the same <code class="docutils literal notranslate"><span class="pre">Web3</span></code> object reference
under the hood (the parent <code class="docutils literal notranslate"><span class="pre">w3</span></code> object), changing the
<code class="docutils literal notranslate"><span class="pre">strict_bytes_type_checking</span></code> flag value on <code class="docutils literal notranslate"><span class="pre">w3</span></code> also changes the flag state
for <code class="docutils literal notranslate"><span class="pre">w3.ens.w3</span></code> and all modules.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">EthereumTesterProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">EthereumTesterProvider</span><span class="p">())</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span>  <span class="c1"># assert strict by default</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>  <span class="c1"># zero-padded, so encoded to: b&#39;1\x00&#39;</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="n">w3</span> <span class="o">==</span> <span class="n">w3</span><span class="o">.</span><span class="n">ens</span><span class="o">.</span><span class="n">w3</span>  <span class="c1"># assert same object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">w3</span><span class="o">.</span><span class="n">ens</span><span class="o">.</span><span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">ens</span><span class="o">.</span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># sanity check on eth module as well</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">assert</span> <span class="ow">not</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="usage">
<h4>Usage<a class="headerlink" href="#usage" title="Link to this heading">ÔÉÅ</a></h4>
<section id="name-info">
<h5>Name Info<a class="headerlink" href="#name-info" title="Link to this heading">ÔÉÅ</a></h5>
<section id="get-the-address-for-an-ens-name">
<span id="ens-get-address"></span><h6>Get the Address for an ENS Name<a class="headerlink" href="#get-the-address-for-an-ens-name" title="Link to this heading">ÔÉÅ</a></h6>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ens.auto</span> <span class="kn">import</span> <span class="n">ns</span>
<span class="n">eth_address</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">address</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">eth_address</span> <span class="o">==</span> <span class="s1">&#39;0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7&#39;</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ENS</span></code> module has no opinion as to which <strong>TLD (Top Level Domain)</strong> you can use,
but will not infer a TLD if it is not provided with the name.</p>
<section id="multichain-address-resolution">
<h6 aria-level="7">Multichain Address Resolution<a class="headerlink" href="#multichain-address-resolution" title="Link to this heading">ÔÉÅ</a></h6>
<p><a class="reference external" href="https://docs.ens.domains/ens-improvement-proposals/ensip-9-multichain-address-resolution">ENSIP-9</a>
introduced multichain address resolution, allowing users to resolve addresses from
different chains, specified by the coin type index from
<a class="reference external" href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md">SLIP44</a>. The
<code class="docutils literal notranslate"><span class="pre">address()</span></code> method on the <code class="docutils literal notranslate"><span class="pre">ENS</span></code> class supports multichain address resolution via
the <code class="docutils literal notranslate"><span class="pre">coin_type</span></code> keyword argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ens.auto</span> <span class="kn">import</span> <span class="n">ns</span>
<span class="n">eth_address</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">address</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">,</span> <span class="n">coin_type</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>  <span class="c1"># ETH is coin_type 60</span>
<span class="k">assert</span> <span class="n">eth_address</span> <span class="o">==</span> <span class="s1">&#39;0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="get-the-ens-name-for-an-address">
<h6>Get the ENS Name for an Address<a class="headerlink" href="#get-the-ens-name-for-an-address" title="Link to this heading">ÔÉÅ</a></h6>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">domain</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7&#39;</span><span class="p">)</span>

<span class="c1"># name() also accepts the bytes version of the address</span>
<span class="k">assert</span> <span class="n">ns</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\xfe\x89\xcc</span><span class="s1">z</span><span class="se">\xbb</span><span class="s1">,A</span><span class="se">\x83</span><span class="s1">h:</span><span class="se">\xb7\x16</span><span class="s1">S</span><span class="se">\xc4\xcd\xc9\xb0</span><span class="s1">-D</span><span class="se">\xb7</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="n">domain</span>

<span class="c1"># confirm that the name resolves back to the address that you looked up:</span>
<span class="k">assert</span> <span class="n">ns</span><span class="o">.</span><span class="n">address</span><span class="p">(</span><span class="n">domain</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For accuracy, and as a recommendation from the ENS documentation on
<a class="reference external" href="https://docs.ens.domains/dapp-developer-guide/resolving-names#reverse-resolution">reverse resolution</a>,
the <code class="docutils literal notranslate"><span class="pre">ENS</span></code> module now verifies that the forward resolution matches the address with every call to get the
<code class="docutils literal notranslate"><span class="pre">name()</span></code> for an address. This is the only sure way to know whether the reverse resolution is correct. Anyone can
claim any name, only forward resolution implies that the owner of the name gave their stamp of approval.</p>
</div>
</section>
<section id="get-the-owner-of-a-name">
<h6>Get the Owner of a Name<a class="headerlink" href="#get-the-owner-of-a-name" title="Link to this heading">ÔÉÅ</a></h6>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">eth_address</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">owner</span><span class="p">(</span><span class="s1">&#39;exchange.eth&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="set-up-your-name-and-address">
<h5>Set Up Your Name and Address<a class="headerlink" href="#set-up-your-name-and-address" title="Link to this heading">ÔÉÅ</a></h5>
<section id="link-a-name-to-an-address">
<h6>Link a Name to an Address<a class="headerlink" href="#link-a-name-to-an-address" title="Link to this heading">ÔÉÅ</a></h6>
<p>You can set up your name so that <code class="xref py py-meth docutils literal notranslate"><span class="pre">address()</span></code> will show the address it points to. In order to do so,
you must already be the owner of the domain (or its parent).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ns</span><span class="o">.</span><span class="n">setup_address</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">,</span> <span class="s1">&#39;0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In the common case where you want to point the name to the owning address, you can skip the address.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ns</span><span class="o">.</span><span class="n">setup_address</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>You can claim arbitrarily deep subdomains.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ns</span><span class="o">.</span><span class="n">setup_address</span><span class="p">(</span><span class="s1">&#39;supreme.executive.power.derives.from.a.mandate.from.the.masses.ens.eth&#39;</span><span class="p">)</span>

<span class="c1"># wait for the transaction to be mined, then:</span>
<span class="k">assert</span> <span class="p">(</span>
    <span class="n">ns</span><span class="o">.</span><span class="n">address</span><span class="p">(</span><span class="s1">&#39;supreme.executive.power.derives.from.a.mandate.from.the.masses.ens.eth&#39;</span><span class="p">)</span>
    <span class="o">==</span> <span class="s1">&#39;0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Gas costs scale up with the number of subdomains!</p>
</div>
<section id="multichain-address-support">
<h6 aria-level="7">Multichain Address Support<a class="headerlink" href="#multichain-address-support" title="Link to this heading">ÔÉÅ</a></h6>
<p><a class="reference external" href="https://docs.ens.domains/ens-improvement-proposals/ensip-9-multichain-address-resolution">ENSIP-9</a>
introduced multichain address resolution, allowing users to resolve addresses from
different chains, specified by the coin type index from
<a class="reference external" href="https://github.com/satoshilabs/slips/blob/master/slip-0044.md">SLIP44</a>. The
<code class="docutils literal notranslate"><span class="pre">setup_address()</span></code> method on the <code class="docutils literal notranslate"><span class="pre">ENS</span></code> class supports multichain address setup
via the <code class="docutils literal notranslate"><span class="pre">coin_type</span></code> keyword argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">ens.auto</span> <span class="kn">import</span> <span class="n">ns</span>
<span class="n">ns</span><span class="o">.</span><span class="n">setup_address</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">,</span> <span class="n">coin_type</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>  <span class="c1"># ETH is coin_type 60</span>
<span class="k">assert</span> <span class="n">ns</span><span class="o">.</span><span class="n">address</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">,</span> <span class="n">coin_type</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="link-an-address-to-a-name">
<h6>Link an Address to a Name<a class="headerlink" href="#link-an-address-to-a-name" title="Link to this heading">ÔÉÅ</a></h6>
<p>You can set up your address so that <code class="xref py py-meth docutils literal notranslate"><span class="pre">name()</span></code> will show the name that points to it.</p>
<p>This is like Caller ID. It enables you and others to take an account and determine what name points to it. Sometimes
this is referred to as ‚Äúreverse‚Äù resolution. The ENS Reverse Resolver is used for this functionality.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ns</span><span class="o">.</span><span class="n">setup_name</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">,</span> <span class="s1">&#39;0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you don‚Äôt supply the address, <code class="xref py py-meth docutils literal notranslate"><span class="pre">setup_name()</span></code> will assume you want the
address returned by <code class="xref py py-meth docutils literal notranslate"><span class="pre">address()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ns</span><span class="o">.</span><span class="n">setup_name</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the name doesn‚Äôt already point to an address, <code class="xref py py-meth docutils literal notranslate"><span class="pre">setup_name()</span></code> will
call <code class="xref py py-meth docutils literal notranslate"><span class="pre">setup_address()</span></code> for you.</p>
<p>Wait for the transaction to be mined, then:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span> <span class="n">ns</span><span class="o">.</span><span class="n">name</span><span class="p">(</span><span class="s1">&#39;0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;ens.eth&#39;</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="text-records">
<h5>Text Records<a class="headerlink" href="#text-records" title="Link to this heading">ÔÉÅ</a></h5>
<section id="set-text-metadata-for-an-ens-record">
<h6>Set Text Metadata for an ENS Record<a class="headerlink" href="#set-text-metadata-for-an-ens-record" title="Link to this heading">ÔÉÅ</a></h6>
<p>As the owner of an ENS record, you can add text metadata.
A list of supported fields can be found in the
<a class="reference external" href="https://docs.ens.domains/contract-api-reference/publicresolver#get-text-data">ENS documentation</a>.
You‚Äôll need to setup the address first, and then the text can be set:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ns</span><span class="o">.</span><span class="n">setup_address</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">,</span> <span class="s1">&#39;0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7&#39;</span><span class="p">)</span>
<span class="n">ns</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;https://example.com&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>A transaction dictionary can be passed as the last argument if desired:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">transaction_dict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="s1">&#39;0x123...&#39;</span><span class="p">}</span>
<span class="n">ns</span><span class="o">.</span><span class="n">set_text</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;https://example.com&#39;</span><span class="p">,</span> <span class="n">transaction_dict</span><span class="p">)</span>
</pre></div>
</div>
<p>If the transaction dictionary is not passed, sensible defaults will be used, and if
a transaction dictionary is passed but does not have a <code class="docutils literal notranslate"><span class="pre">from</span></code> value,
the default will be the <code class="docutils literal notranslate"><span class="pre">owner</span></code>.</p>
</section>
<section id="read-text-metadata-for-an-ens-record">
<h6>Read Text Metadata for an ENS Record<a class="headerlink" href="#read-text-metadata-for-an-ens-record" title="Link to this heading">ÔÉÅ</a></h6>
<p>Anyone can read the data from an ENS Record:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">get_text</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">,</span> <span class="s1">&#39;url&#39;</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">url</span> <span class="o">==</span> <span class="s1">&#39;https://example.com&#39;</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="working-with-resolvers">
<h5>Working With Resolvers<a class="headerlink" href="#working-with-resolvers" title="Link to this heading">ÔÉÅ</a></h5>
<section id="get-the-resolver-for-an-ens-record">
<h6>Get the Resolver for an ENS Record<a class="headerlink" href="#get-the-resolver-for-an-ens-record" title="Link to this heading">ÔÉÅ</a></h6>
<p>You can get the resolver for an ENS name via the <code class="xref py py-meth docutils literal notranslate"><span class="pre">resolver()</span></code> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">resolver</span> <span class="o">=</span> <span class="n">ns</span><span class="o">.</span><span class="n">resolver</span><span class="p">(</span><span class="s1">&#39;ens.eth&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">resolver</span><span class="o">.</span><span class="n">address</span>
<span class="go">&#39;0x5B2063246F2191f18F2675ceDB8b28102e957458&#39;</span>
</pre></div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="wildcard-resolution-support">
<h4>Wildcard Resolution Support<a class="headerlink" href="#wildcard-resolution-support" title="Link to this heading">ÔÉÅ</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">ENS</span></code> module supports Wildcard Resolution for resolvers that implement the <code class="docutils literal notranslate"><span class="pre">ExtendedResolver</span></code> interface
as described in <a class="reference external" href="https://docs.ens.domains/ens-improvement-proposals/ensip-10-wildcard-resolution">ENSIP-10</a>.
Resolvers that implement the extended resolver interface should return <code class="docutils literal notranslate"><span class="pre">True</span></code> when calling the
<code class="docutils literal notranslate"><span class="pre">supportsInterface()</span></code> function with the extended resolver interface id <code class="docutils literal notranslate"><span class="pre">&quot;0x9061b923&quot;</span></code> and should resolve subdomains
to a unique address.</p>
</section>
</section>
<span id="document-troubleshooting"></span><section id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">ÔÉÅ</a></h3>
<section id="set-up-a-clean-environment">
<span id="setup-environment"></span><h4>Set up a clean environment<a class="headerlink" href="#set-up-a-clean-environment" title="Link to this heading">ÔÉÅ</a></h4>
<p>Many things can cause a broken environment. You might be on an unsupported version of Python.
Another package might be installed that has a name or version conflict.
Often, the best way to guarantee a correct environment is with <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>, like:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># Install pip if it is not available:</span>
$<span class="w"> </span>which<span class="w"> </span>pip<span class="w"> </span><span class="o">||</span><span class="w"> </span>curl<span class="w"> </span>https://bootstrap.pypa.io/get-pip.py<span class="w"> </span><span class="p">|</span><span class="w"> </span>python

<span class="c1"># Install virtualenv if it is not available:</span>
$<span class="w"> </span>which<span class="w"> </span>virtualenv<span class="w"> </span><span class="o">||</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>virtualenv

<span class="c1"># *If* the above command displays an error, you can try installing as root:</span>
$<span class="w"> </span>sudo<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>virtualenv

<span class="c1"># Create a virtual environment:</span>
$<span class="w"> </span>virtualenv<span class="w"> </span>-p<span class="w"> </span>python3<span class="w"> </span>~/.venv-py3

<span class="c1"># Activate your new virtual environment:</span>
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>~/.venv-py3/bin/activate

<span class="c1"># With virtualenv active, make sure you have the latest packaging tools</span>
$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>pip<span class="w"> </span>setuptools

<span class="c1"># Now we can install web3.py...</span>
$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>--upgrade<span class="w"> </span>web3
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Remember that each new terminal session requires you to reactivate your virtualenv, like:
<code class="docutils literal notranslate"><span class="pre">$</span> <span class="pre">source</span> <span class="pre">~/.venv-py3/bin/activate</span></code></p>
</div>
</section>
<section id="why-can-t-i-use-a-particular-function">
<span id="instance-troubleshooting"></span><h4>Why can‚Äôt I use a particular function?<a class="headerlink" href="#why-can-t-i-use-a-particular-function" title="Link to this heading">ÔÉÅ</a></h4>
<p>Note that a web3.py instance must be configured before you can use most of its capabilities.
One symptom of not configuring the instance first is an error that looks something like this:
<code class="docutils literal notranslate"><span class="pre">AttributeError:</span> <span class="pre">type</span> <span class="pre">object</span> <span class="pre">'Web3'</span> <span class="pre">has</span> <span class="pre">no</span> <span class="pre">attribute</span> <span class="pre">'eth'</span></code>.</p>
<p>To properly configure your web3.py instance, specify which provider you‚Äôre using to connect to the
Ethereum network. An example configuration, if you‚Äôre connecting to a locally run node, might be:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="s1">&#39;http://localhost:8545&#39;</span><span class="p">))</span>

<span class="go"># now `w3` is available to use:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Refer to the <a class="reference internal" href="index.html#providers"><span class="std std-ref">Providers</span></a> documentation for further help with configuration.</p>
</section>
<section id="why-isn-t-my-web3-instance-connecting-to-the-network">
<span id="use-metamask-accounts"></span><h4>Why isn‚Äôt my web3 instance connecting to the network?<a class="headerlink" href="#why-isn-t-my-web3-instance-connecting-to-the-network" title="Link to this heading">ÔÉÅ</a></h4>
<p>You can check that your instance is connected via the <code class="docutils literal notranslate"><span class="pre">is_connected</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">()</span>
<span class="go">False</span>
</pre></div>
</div>
<p>There are a variety of explanations for why you may see <code class="docutils literal notranslate"><span class="pre">False</span></code> here. To help you
diagnose the problem, <code class="docutils literal notranslate"><span class="pre">is_connected</span></code> has an optional <code class="docutils literal notranslate"><span class="pre">show_traceback</span></code> argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_connected</span><span class="p">(</span><span class="n">show_traceback</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go"># this is an example, your error may differ</span>

<span class="go"># &lt;long stack trace output&gt;</span>
<span class="go">ProviderConnectionError: Problem connecting to provider with error: &lt;class &#39;FileNotFoundError&#39;&gt;: cannot connect to IPC socket at path: None</span>
</pre></div>
</div>
<p>If you‚Äôre running a local node, such as Geth, double-check that you‚Äôve indeed started
the binary and that you‚Äôve started it from the intended directory - particularly if
you‚Äôve specified a relative path to its ipc file.</p>
<p>If that does not address your issue, it‚Äôs probable that you still have a
Provider configuration issue. There are several options for configuring
a Provider, detailed <a class="reference internal" href="index.html#providers"><span class="std std-ref">here</span></a>.</p>
</section>
<section id="how-do-i-get-ether-for-my-test-network">
<span id="faucets"></span><h4>How do I get ether for my test network?<a class="headerlink" href="#how-do-i-get-ether-for-my-test-network" title="Link to this heading">ÔÉÅ</a></h4>
<p>Test networks usually have something called a ‚Äúfaucet‚Äù to
help get test ether to people who want to use it. The faucet
simply sends you test ether when you visit a web page, or ping a chat bot, etc.</p>
<p>Each test network has its own version of test ether, so each one must maintain
its own faucet. Faucet mechanisms tend to come and go, so a web search for
‚Äúethereum testnet faucet‚Äù should give you the most up-to-date options.</p>
</section>
<section id="how-do-i-use-my-metamask-accounts-from-web3-py">
<h4>How do I use my MetaMask accounts from web3.py?<a class="headerlink" href="#how-do-i-use-my-metamask-accounts-from-web3-py" title="Link to this heading">ÔÉÅ</a></h4>
<p>Export your private key from MetaMask, and use
the local private key tools in web3.py to sign and send transactions.</p>
<p>See <a class="reference external" href="https://ethereum.stackexchange.com/questions/33053/what-is-a-private-key-in-an-ethereum-wallet-like-metamask-and-how-do-i-find-it">how to export your private key</a>
and <a class="reference internal" href="index.html#eth-account"><span class="std std-ref">Accounts</span></a>.</p>
</section>
<section id="how-do-i-create-an-account">
<span id="account-troubleshooting"></span><h4>How do I create an account?<a class="headerlink" href="#how-do-i-create-an-account" title="Link to this heading">ÔÉÅ</a></h4>
<p>In general, your options for accounts are:</p>
<ul class="simple">
<li><p>Import a keystore file for an account and <a class="reference internal" href="index.html#extract-geth-pk"><span class="std std-ref">extract the private key</span></a>.</p></li>
<li><p>Create an account via the <a class="reference internal" href="index.html#eth-account"><span class="std std-ref">eth-account</span></a> API, e.g., <code class="docutils literal notranslate"><span class="pre">new_acct</span> <span class="pre">=</span> <span class="pre">w3.eth.account.create()</span></code>.</p></li>
<li><p>Use an external service (e.g. Metamask) to generate a new account, then securely import its private key.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Don‚Äôt store real value in an account until you are familiar with security best practices.
If you lose your private key, you lose your account!</p>
</div>
</section>
<section id="why-doesn-t-my-transaction-work-on-another-network">
<h4>Why doesn‚Äôt my transaction work on another network?<a class="headerlink" href="#why-doesn-t-my-transaction-work-on-another-network" title="Link to this heading">ÔÉÅ</a></h4>
<p>web3.py is an Ethereum-specific library, which defaults to
<a class="reference external" href="https://ethereum.org/en/developers/docs/transactions/#typed-transaction-envelope">‚Äútype 2‚Äù EIP-1559 transactions</a>
as of the London network upgrade. Some chains (including Ethereum L2s) do not support
the same transaction types.</p>
<p>If your chain doesn‚Äôt support this transaction type, you likely need to create a
‚Äúlegacy‚Äù transaction, i.e., include <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code>, but not <code class="docutils literal notranslate"><span class="pre">type</span></code>, <code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code>,
or <code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code> in your transaction body.</p>
<p>If that doesn‚Äôt resolve your issue, open a GitHub issue or reach out for help in the community
<a class="reference external" href="https://discord.gg/GHryRvPB84">Discord</a> server if you‚Äôre having trouble with an Ethereum-ecosystem chain. If you‚Äôre
debugging in an alternative ecosystem, please find another appropriate forum to raise
your question.</p>
</section>
<section id="how-do-i-conform-to-abi-types">
<h4>How do I conform to ABI types?<a class="headerlink" href="#how-do-i-conform-to-abi-types" title="Link to this heading">ÔÉÅ</a></h4>
<p>The web3 library follows the following conventions:</p>
<section id="bytes-vs-text">
<h5>Bytes vs Text<a class="headerlink" href="#bytes-vs-text" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>The term <em>bytes</em> is used to refer to the binary representation of a string.</p></li>
<li><p>The term <em>text</em> is used to refer to unicode representations of strings.</p></li>
</ul>
</section>
<section id="hexadecimal-representations">
<h5>Hexadecimal Representations<a class="headerlink" href="#hexadecimal-representations" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>All hexadecimal values will be returned as text.</p></li>
<li><p>All hexadecimal values will be <code class="docutils literal notranslate"><span class="pre">0x</span></code> prefixed.</p></li>
</ul>
</section>
<section id="ethereum-addresses">
<h5>Ethereum Addresses<a class="headerlink" href="#ethereum-addresses" title="Link to this heading">ÔÉÅ</a></h5>
<p>All addresses must be supplied in one of three ways:</p>
<ul class="simple">
<li><p>A 20-byte hexadecimal that is checksummed using the <a class="reference external" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md">EIP-55</a> spec.</p></li>
<li><p>A 20-byte binary address (python bytes type).</p></li>
<li><p>While connected to an Ethereum Name Service (ENS) supported chain, an ENS name
(often in the form <code class="docutils literal notranslate"><span class="pre">myname.eth</span></code>).</p></li>
</ul>
</section>
<section id="disabling-strict-bytes-type-checking">
<h5>Disabling Strict Bytes Type Checking<a class="headerlink" href="#disabling-strict-bytes-type-checking" title="Link to this heading">ÔÉÅ</a></h5>
<p>There is a boolean flag on the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> class and the <code class="docutils literal notranslate"><span class="pre">ENS</span></code> class that will disable
strict bytes type checking. This allows bytes values of Python strings and allows byte
strings less than the specified byte size, appropriately padding values that need
padding. To disable stricter checks, set the <code class="docutils literal notranslate"><span class="pre">w3.strict_bytes_type_checking</span></code>
(or <code class="docutils literal notranslate"><span class="pre">ns.strict_bytes_type_checking</span></code>) flag to <code class="docutils literal notranslate"><span class="pre">False</span></code>. This will no longer cause
the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> / <code class="docutils literal notranslate"><span class="pre">ENS</span></code> instance to raise an error if a Python string is passed in
without a ‚Äú0x‚Äù prefix. It will also render valid byte strings or hex strings
that are below the exact number of bytes specified by the ABI type by padding the value
appropriately, according to the ABI type. See the <a class="reference internal" href="index.html#disable-strict-byte-check"><span class="std std-ref">Disabling Strict Checks for Bytes Types</span></a>
section for an example on using the flag and more details.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If a standalone <code class="docutils literal notranslate"><span class="pre">ENS</span></code> instance is instantiated from a <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance, i.e.
<code class="docutils literal notranslate"><span class="pre">ns</span> <span class="pre">=</span> <span class="pre">ENS.from_web3(w3)</span></code>, it will inherit the value of the
<code class="docutils literal notranslate"><span class="pre">w3.strict_bytes_type_checking</span></code> flag from the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance at the time of
instantiation.</p>
<p>Also of note, all modules on the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> class will inherit the value of this flag,
since all modules use the parent <code class="docutils literal notranslate"><span class="pre">w3</span></code> object reference under the hood. This means
that <code class="docutils literal notranslate"><span class="pre">w3.eth.w3.strict_bytes_type_checking</span></code> will always have the same value as
<code class="docutils literal notranslate"><span class="pre">w3.strict_bytes_type_checking</span></code>.</p>
</div>
<p>For more details on the ABI
specification, refer to the
<a class="reference external" href="https://docs.soliditylang.org/en/latest/abi-spec.html">Solidity ABI Spec</a>.</p>
</section>
<section id="types-by-example">
<h5>Types by Example<a class="headerlink" href="#types-by-example" title="Link to this heading">ÔÉÅ</a></h5>
<p>Let‚Äôs use a contrived contract to demonstrate input types in web3.py:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>contract ManyTypes {
    // booleans
    bool public b;

    // unsigned ints
    uint8 public u8;
    uint256 public u256;
    uint256[] public u256s;

    // signed ints
    int8 public i8;

    // addresses
    address public addr;
    address[] public addrs;

    // bytes
    bytes1 public b1;

    // structs
    struct S {
      address sa;
      bytes32 sb;
    }
    mapping(address =&gt; S) addrStructs;

    function updateBool(bool x) public { b = x; }
    function updateUint8(uint8 x) public { u8 = x; }
    function updateUint256(uint256 x) public { u256 = x; }
    function updateUintArray(uint256[] memory x) public { u256s = x; }
    function updateInt8(int8 x) public { i8 = x; }
    function updateAddr(address x) public { addr = x; }
    function updateBytes1(bytes1 x) public { b1 = x; }
    function updateMapping(S memory x) public { addrStructs[x.sa] = x; }
}
</pre></div>
</div>
<section id="booleans">
<h6>Booleans<a class="headerlink" href="#booleans" title="Link to this heading">ÔÉÅ</a></h6>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">contract_instance</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">updateBool</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="unsigned-integers">
<h6>Unsigned Integers<a class="headerlink" href="#unsigned-integers" title="Link to this heading">ÔÉÅ</a></h6>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">contract_instance</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">updateUint8</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="n">contract_instance</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">updateUint256</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">256</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="n">contract_instance</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">updateUintArray</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="signed-integers">
<h6>Signed Integers<a class="headerlink" href="#signed-integers" title="Link to this heading">ÔÉÅ</a></h6>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">contract_instance</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">updateInt8</span><span class="p">(</span><span class="o">-</span><span class="mi">128</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="addresses">
<h6>Addresses<a class="headerlink" href="#addresses" title="Link to this heading">ÔÉÅ</a></h6>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">contract_instance</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">updateAddr</span><span class="p">(</span><span class="s2">&quot;0x0000000000000000000000000000000000000000&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="bytes">
<h6>Bytes<a class="headerlink" href="#bytes" title="Link to this heading">ÔÉÅ</a></h6>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">contract_instance</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">updateBytes1</span><span class="p">(</span><span class="n">HexBytes</span><span class="p">(</span><span class="mi">255</span><span class="p">))</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="structs">
<h6>Structs<a class="headerlink" href="#structs" title="Link to this heading">ÔÉÅ</a></h6>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">contract_instance</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">updateMapping</span><span class="p">({</span><span class="s2">&quot;sa&quot;</span><span class="p">:</span> <span class="s2">&quot;0x0000000000000000000000000000000000000000&quot;</span><span class="p">,</span> <span class="s2">&quot;sb&quot;</span><span class="p">:</span> <span class="n">HexBytes</span><span class="p">(</span><span class="mi">123</span><span class="p">)})</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="how-can-i-optimize-ethereum-json-rpc-api-access">
<h4>How can I optimize Ethereum JSON-RPC API access?<a class="headerlink" href="#how-can-i-optimize-ethereum-json-rpc-api-access" title="Link to this heading">ÔÉÅ</a></h4>
<p>Your Ethereum node JSON-RPC API might be slow when fetching multiple and large requests, especially when running batch jobs. Here are some tips for how to speed up your web3.py application.</p>
<ul class="simple">
<li><p>Run your client locally, e.g., <a class="reference external" href="https://github.com/ethereum/go-ethereum">Go Ethereum</a> or <a class="reference external" href="https://github.com/ledgerwatch/turbo-geth">TurboGeth</a>. The network latency and speed are the major limiting factors for fast API access.</p></li>
<li><p>Use IPC communication instead of HTTP/WebSockets. See <a class="reference internal" href="index.html#choosing-provider"><span class="std std-ref">Choosing a Provider</span></a>.</p></li>
<li><p>Use an optimised JSON decoder. A future iteration of web3.py may change the default decoder or provide an API to configure one, but for now, you may patch the provider class to use <a class="reference external" href="https://pypi.org/project/ujson/">ujson</a>.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;JSON-RPC decoding optimised for web3.py&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span>

<span class="kn">import</span> <span class="nn">ujson</span>

<span class="kn">from</span> <span class="nn">web3.providers</span> <span class="kn">import</span> <span class="n">JSONBaseProvider</span>
<span class="kn">from</span> <span class="nn">web3.types</span> <span class="kn">import</span> <span class="n">RPCResponse</span>


<span class="k">def</span> <span class="nf">_fast_decode_rpc_response</span><span class="p">(</span><span class="n">raw_response</span><span class="p">:</span> <span class="nb">bytes</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">RPCResponse</span><span class="p">:</span>
    <span class="n">decoded</span> <span class="o">=</span> <span class="n">ujson</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">raw_response</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">cast</span><span class="p">(</span><span class="n">RPCResponse</span><span class="p">,</span> <span class="n">decoded</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">patch_provider</span><span class="p">(</span><span class="n">provider</span><span class="p">:</span> <span class="n">JSONBaseProvider</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Monkey-patch web3.py provider for faster JSON decoding.</span>

<span class="sd">    Call this on your provider after construction.</span>

<span class="sd">    This greatly improves JSON-RPC API access speeds, when fetching</span>
<span class="sd">    multiple and large responses.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">provider</span><span class="o">.</span><span class="n">decode_rpc_response</span> <span class="o">=</span> <span class="n">_fast_decode_rpc_response</span>
</pre></div>
</div>
</section>
<section id="why-am-i-getting-visual-c-or-cython-not-installed-error">
<h4>Why am I getting Visual C++ or Cython not installed error?<a class="headerlink" href="#why-am-i-getting-visual-c-or-cython-not-installed-error" title="Link to this heading">ÔÉÅ</a></h4>
<p>Some Windows users that do not have Microsoft Visual C++ version 14.0 or greater installed may see an error message
when installing web3.py as shown below:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>error:<span class="w"> </span>Microsoft<span class="w"> </span>Visual<span class="w"> </span>C++<span class="w"> </span><span class="m">14</span>.0<span class="w"> </span>or<span class="w"> </span>greater<span class="w"> </span>is<span class="w"> </span>required.<span class="w"> </span>Get<span class="w"> </span>it<span class="w"> </span>with<span class="w"> </span><span class="s2">&quot;Microsoft C++ Build Tools&quot;</span>:<span class="w"> </span>https://visualstudio.microsoft.com/visual-cpp-build-tools/
</pre></div>
</div>
<p>To fix this error, download and install Microsoft Visual C++ from here :</p>
<p><a class="reference external" href="https://visualstudio.microsoft.com/downloads/#microsoft-visual-c-redistributable-for-visual-studio-2019">Microsoft Visual C++ Redistributable for Visual Studio</a></p>
<ul class="simple">
<li><p><a class="reference external" href="https://aka.ms/vs/16/release/VC_redist.x64.exe">x64 Visual C++</a></p></li>
<li><p><a class="reference external" href="https://aka.ms/vs/16/release/VC_redist.x86.exe">x86 Visual C++</a></p></li>
<li><p><a class="reference external" href="https://aka.ms/vs/16/release/VC_redist.arm64.exe">ARM64 Visual C++</a></p></li>
</ul>
</section>
<section id="how-do-i-convert-currency-denominations">
<h4>How do I convert currency denominations?<a class="headerlink" href="#how-do-i-convert-currency-denominations" title="Link to this heading">ÔÉÅ</a></h4>
<p>The following denominations are supported:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>denomination</p></td>
<td><p>amount in wei</p></td>
</tr>
<tr class="row-even"><td><p>wei</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>kwei</p></td>
<td><p>1000</p></td>
</tr>
<tr class="row-even"><td><p>babbage</p></td>
<td><p>1000</p></td>
</tr>
<tr class="row-odd"><td><p>femtoether</p></td>
<td><p>1000</p></td>
</tr>
<tr class="row-even"><td><p>mwei</p></td>
<td><p>1000000</p></td>
</tr>
<tr class="row-odd"><td><p>lovelace</p></td>
<td><p>1000000</p></td>
</tr>
<tr class="row-even"><td><p>picoether</p></td>
<td><p>1000000</p></td>
</tr>
<tr class="row-odd"><td><p>gwei</p></td>
<td><p>1000000000</p></td>
</tr>
<tr class="row-even"><td><p>shannon</p></td>
<td><p>1000000000</p></td>
</tr>
<tr class="row-odd"><td><p>nanoether</p></td>
<td><p>1000000000</p></td>
</tr>
<tr class="row-even"><td><p>nano</p></td>
<td><p>1000000000</p></td>
</tr>
<tr class="row-odd"><td><p>szabo</p></td>
<td><p>1000000000000</p></td>
</tr>
<tr class="row-even"><td><p>microether</p></td>
<td><p>1000000000000</p></td>
</tr>
<tr class="row-odd"><td><p>micro</p></td>
<td><p>1000000000000</p></td>
</tr>
<tr class="row-even"><td><p>finney</p></td>
<td><p>1000000000000000</p></td>
</tr>
<tr class="row-odd"><td><p>milliether</p></td>
<td><p>1000000000000000</p></td>
</tr>
<tr class="row-even"><td><p>milli</p></td>
<td><p>1000000000000000</p></td>
</tr>
<tr class="row-odd"><td><p>ether</p></td>
<td><p>1000000000000000000</p></td>
</tr>
<tr class="row-even"><td><p>kether</p></td>
<td><p>1000000000000000000000</p></td>
</tr>
<tr class="row-odd"><td><p>grand</p></td>
<td><p>1000000000000000000000</p></td>
</tr>
<tr class="row-even"><td><p>mether</p></td>
<td><p>1000000000000000000000000</p></td>
</tr>
<tr class="row-odd"><td><p>gether</p></td>
<td><p>1000000000000000000000000000</p></td>
</tr>
<tr class="row-even"><td><p>tether</p></td>
<td><p>1000000000000000000000000000000</p></td>
</tr>
</tbody>
</table>
<p>You can use the <code class="xref py py-meth docutils literal notranslate"><span class="pre">from_wei()</span></code> method
to convert a balance to ether (or another denomination).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">from_wei</span><span class="p">(</span><span class="mi">3841357360894980500000001</span><span class="p">,</span> <span class="s1">&#39;ether&#39;</span><span class="p">)</span>
<span class="go">Decimal(&#39;3841357.360894980500000001&#39;)</span>
</pre></div>
</div>
<p>To convert back to wei, you can use the inverse function, <code class="xref py py-meth docutils literal notranslate"><span class="pre">to_wei()</span></code>.
Note that Python‚Äôs default floating point precision is insufficient for this
use case, so it‚Äôs necessary to cast the value to a
<a class="reference external" href="https://docs.python.org/3/library/decimal.html">Decimal</a> if it isn‚Äôt already.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">decimal</span> <span class="kn">import</span> <span class="n">Decimal</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;3841357.360894980500000001&#39;</span><span class="p">),</span> <span class="s1">&#39;ether&#39;</span><span class="p">)</span>
<span class="go">3841357360894980500000001</span>
</pre></div>
</div>
<p>Best practice: If you need to work with multiple currency denominations, default
to wei. A typical workflow may require a conversion from some denomination to
wei, then from wei to whatever you need.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="n">Decimal</span><span class="p">(</span><span class="s1">&#39;0.000000005&#39;</span><span class="p">),</span> <span class="s1">&#39;ether&#39;</span><span class="p">)</span>
<span class="go">5000000000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">from_wei</span><span class="p">(</span><span class="mi">5000000000</span><span class="p">,</span> <span class="s1">&#39;gwei&#39;</span><span class="p">)</span>
<span class="go">Decimal(&#39;5&#39;)</span>
</pre></div>
</div>
</section>
<section id="how-do-i-adjust-the-log-levels">
<h4>How do I adjust the log levels?<a class="headerlink" href="#how-do-i-adjust-the-log-levels" title="Link to this heading">ÔÉÅ</a></h4>
<p>web3.py internally uses <a class="reference external" href="https://docs.python.org/3/library/logging.html">Python logging subsystem</a>.</p>
<p>If you want to run your application logging in debug mode, below is an example of how to make some JSON-RPC traffic quieter.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">import</span> <span class="nn">coloredlogs</span>

<span class="k">def</span> <span class="nf">setup_logging</span><span class="p">(</span><span class="n">log_level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Setup root logger and quiet some levels.&quot;&quot;&quot;</span>
    <span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>

    <span class="c1"># Set log format to display the logger name to hunt down verbose logging modules</span>
    <span class="n">fmt</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">%(name)-25s</span><span class="s2"> </span><span class="si">%(levelname)-8s</span><span class="s2"> </span><span class="si">%(message)s</span><span class="s2">&quot;</span>

    <span class="c1"># Use colored logging output for console with the coloredlogs package</span>
    <span class="c1"># https://pypi.org/project/coloredlogs/</span>
    <span class="n">coloredlogs</span><span class="o">.</span><span class="n">install</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">log_level</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="n">fmt</span><span class="p">,</span> <span class="n">logger</span><span class="o">=</span><span class="n">logger</span><span class="p">)</span>

    <span class="c1"># Disable logging of JSON-RPC requests and replies</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;web3.RequestManager&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;web3.providers.HTTPProvider&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
    <span class="c1"># logging.getLogger(&quot;web3.RequestManager&quot;).propagate = False</span>

    <span class="c1"># Disable all internal debug logging of requests and urllib3</span>
    <span class="c1"># E.g. HTTP traffic</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;requests&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s2">&quot;urllib3&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">logger</span>
</pre></div>
</div>
</section>
</section>
<span id="document-migration"></span><section id="migration-guide">
<h3>Migration Guide<a class="headerlink" href="#migration-guide" title="Link to this heading">ÔÉÅ</a></h3>
<section id="migrating-from-v6-to-v7">
<span id="migrating-v6-to-v7"></span><h4>Migrating from v6 to v7<a class="headerlink" href="#migrating-from-v6-to-v7" title="Link to this heading">ÔÉÅ</a></h4>
<p>web3.py follows <a class="reference external" href="http://semver.org">Semantic Versioning</a>, which means that
version 7 introduced backwards-incompatible changes. If you‚Äôre upgrading from
web3.py <code class="docutils literal notranslate"><span class="pre">v6</span></code> or earlier, you can expect to need to make some changes. Refer
to this guide for a summary of breaking changes when updating from <code class="docutils literal notranslate"><span class="pre">v6</span></code> to
<code class="docutils literal notranslate"><span class="pre">v7</span></code>. If you are more than one major version behind, you should also review
the migration guides for the versions in between.</p>
<section id="provider-updates">
<h5>Provider Updates<a class="headerlink" href="#provider-updates" title="Link to this heading">ÔÉÅ</a></h5>
<section id="websocketprovider">
<h6>WebSocketProvider<a class="headerlink" href="#websocketprovider" title="Link to this heading">ÔÉÅ</a></h6>
<p><code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code>, introduced in web3.py <code class="docutils literal notranslate"><span class="pre">v6</span></code>, has taken priority over the
legacy <code class="docutils literal notranslate"><span class="pre">WebsocketProvider</span></code>. The <code class="docutils literal notranslate"><span class="pre">LegacyWebSocketProvider</span></code> has been deprecated in
<code class="docutils literal notranslate"><span class="pre">v7</span></code> and is slated for removal in the next major version of the library. In summary:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">WebsocketProvider</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">LegacyWebSocketProvider</span></code> (and deprecated)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WebsocketProviderV2</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">WebSocketProvider</span></code></p></li>
</ul>
<p>If migrating from <code class="docutils literal notranslate"><span class="pre">WebSocketProviderV2</span></code> to <code class="docutils literal notranslate"><span class="pre">WebSocketProvider</span></code>, you can expect the
following changes:</p>
<ul>
<li><p>Instantiation no longer requires the <code class="docutils literal notranslate"><span class="pre">persistant_websocket</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># WebsocketsProviderV2:</span>
<span class="n">AsyncWeb3</span><span class="o">.</span><span class="n">persistent_websocket</span><span class="p">(</span><span class="n">WebsocketProviderV2</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">))</span>

<span class="c1"># WebSocketProvider:</span>
<span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">WebSocketProvider</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">))</span>
</pre></div>
</div>
</li>
<li><p>Handling incoming subscription messages now occurs under a more flexible namespace:
<code class="docutils literal notranslate"><span class="pre">socket</span></code>. The <code class="docutils literal notranslate"><span class="pre">AsyncIPCProvider</span></code> uses the same API to listen for messages via
an IPC socket.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># WebsocketsProviderV2:</span>
<span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">w3</span><span class="o">.</span><span class="n">ws</span><span class="o">.</span><span class="n">process_subscriptions</span><span class="p">():</span>
  <span class="o">...</span>

<span class="c1"># WebSocketProvider:</span>
<span class="k">async</span> <span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">w3</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">process_subscriptions</span><span class="p">():</span>
  <span class="o">...</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="asyncipcprovider-non-breaking-feature">
<h6>AsyncIPCProvider (non-breaking feature)<a class="headerlink" href="#asyncipcprovider-non-breaking-feature" title="Link to this heading">ÔÉÅ</a></h6>
<p>An asynchronous IPC provider, <code class="docutils literal notranslate"><span class="pre">AsyncIPCProvider</span></code>, is newly available in <code class="docutils literal notranslate"><span class="pre">v7</span></code>.
This provider makes use of some of the same internals that the new <code class="docutils literal notranslate"><span class="pre">WebSocketProvider</span></code>
introduced, allowing it to also support <code class="docutils literal notranslate"><span class="pre">eth_subscription</span></code>.</p>
</section>
<section id="ethereumtesterprovider">
<h6>EthereumTesterProvider<a class="headerlink" href="#ethereumtesterprovider" title="Link to this heading">ÔÉÅ</a></h6>
<p><code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code> now returns <code class="docutils literal notranslate"><span class="pre">input</span></code> instead of <code class="docutils literal notranslate"><span class="pre">data</span></code> for <code class="docutils literal notranslate"><span class="pre">eth_getTransaction*</span></code>
calls, as expected.</p>
</section>
</section>
<section id="middlewares-middleware">
<h5>Middlewares -&gt; Middleware<a class="headerlink" href="#middlewares-middleware" title="Link to this heading">ÔÉÅ</a></h5>
<p>All references to <code class="docutils literal notranslate"><span class="pre">middlewares</span></code> have been replaced with the more grammatically
correct <code class="docutils literal notranslate"><span class="pre">middleware</span></code>. Notably, this includes when a provider needs to be
instantiated with custom middleware.</p>
</section>
<section id="class-based-middleware-model">
<h5>Class-Based Middleware Model<a class="headerlink" href="#class-based-middleware-model" title="Link to this heading">ÔÉÅ</a></h5>
<p>The middleware model has been changed to a class-based model.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># v6 (no longer supported)</span>
<span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">pythonic_middleware</span>
<span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">pythonic_middleware</span><span class="p">)</span>

<span class="c1"># v7</span>
<span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">PythonicMiddleware</span>
<span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">PythonicMiddleware</span><span class="p">)</span>
</pre></div>
</div>
<p>Previously, middleware were defined as functions that tightly wrapped the provider‚Äôs
<code class="docutils literal notranslate"><span class="pre">make_request</span></code> function, where transformations could be conditionally applied before
and after the request was made.</p>
<p>Now, middleware logic can be separated into <code class="docutils literal notranslate"><span class="pre">request_processor</span></code> and <code class="docutils literal notranslate"><span class="pre">response_processor</span></code>
functions that enable pre-request and post-response logic, respectively. This change offers
a simpler, clearer interface for defining middleware, gives more flexibility for
asynchronous operations and also paved the way for supporting <a class="reference internal" href="index.html#batch-requests"><span class="std std-ref">Batch Requests</span></a>.</p>
<p>Major changes for migration are highlighted in this section. Consult the
<a class="reference internal" href="index.html#middleware-internals"><span class="std std-ref">Middleware</span></a> section of the documentation for specifics and examples on
the new class-based design.</p>
</section>
<section id="middleware-builder-classes">
<h5>Middleware Builder Classes<a class="headerlink" href="#middleware-builder-classes" title="Link to this heading">ÔÉÅ</a></h5>
<p>In <code class="docutils literal notranslate"><span class="pre">v6</span></code>, certain middleware needed to be constructed with parameters. This was done
by passing the parameters to a constructor method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># v6 (no longer supported)</span>
<span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">construct_sign_and_send_raw_middleware</span>
<span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">construct_sign_and_send_raw_middleware</span><span class="p">(</span><span class="n">private_key</span><span class="p">))</span>
</pre></div>
</div>
<p>In the class-based <code class="docutils literal notranslate"><span class="pre">v7</span></code> middleware model, a middleware builder class is instantiated
with the necessary parameters via the <code class="docutils literal notranslate"><span class="pre">build()</span></code> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># v7</span>
<span class="kn">from</span> <span class="nn">web3.middleware</span> <span class="kn">import</span> <span class="n">SignAndSendRawMiddlewareBuilder</span>
<span class="n">w3</span><span class="o">.</span><span class="n">middleware_onion</span><span class="o">.</span><span class="n">inject</span><span class="p">(</span><span class="n">SignAndSendRawMiddlewareBuilder</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">private_key</span><span class="p">),</span> <span class="n">layer</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="middleware-renaming-and-removals">
<h5>Middleware Renaming and Removals<a class="headerlink" href="#middleware-renaming-and-removals" title="Link to this heading">ÔÉÅ</a></h5>
<p>The following middleware have been renamed for generalization or clarity:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">name_to_address_middleware</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">ENSNameToAddressMiddleware</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">geth_poa_middleware</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">ExtraDataToPOAMiddleware</span></code></p></li>
</ul>
<p>The following middleware have been removed:</p>
<section id="abi-middleware">
<h6>ABI Middleware<a class="headerlink" href="#abi-middleware" title="Link to this heading">ÔÉÅ</a></h6>
<p><code class="docutils literal notranslate"><span class="pre">abi_middleware</span></code> is no longer necessary and has been removed. All of the functionality
of the <code class="docutils literal notranslate"><span class="pre">abi_middleware</span></code> was already handled by web3.py‚Äôs ABI formatters. For additional
context: a bug in the ENS name-to-address middleware would override the formatters. Fixing
this bug has removed the need for the <code class="docutils literal notranslate"><span class="pre">abi_middleware</span></code>.</p>
</section>
<section id="caching-middleware">
<h6>Caching Middleware<a class="headerlink" href="#caching-middleware" title="Link to this heading">ÔÉÅ</a></h6>
<p>The following middleware have been removed:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">simple_cache_middleware</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">latest_block_based_cache_middleware</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time_based_cache_middleware</span></code></p></li>
</ul>
<p>All caching middleware has been removed in favor of a decorator/wrapper around the
<code class="docutils literal notranslate"><span class="pre">make_request</span></code> methods of providers with configuration options on the provider class.
The configuration options are outlined in the documentation in the
<a class="reference internal" href="index.html#request-caching"><span class="std std-ref">Request Caching</span></a> section.</p>
<p>If desired, the previous caching middleware can be re-created using the new class-based
middleware model overriding the <code class="docutils literal notranslate"><span class="pre">wrap_make_request</span></code> (or <code class="docutils literal notranslate"><span class="pre">async_wrap_make_request</span></code>)
method in the middleware class.</p>
</section>
<section id="result-generating-middleware">
<h6>Result Generating Middleware<a class="headerlink" href="#result-generating-middleware" title="Link to this heading">ÔÉÅ</a></h6>
<p>The following middleware have been removed:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fixture_middleware</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">result_generator_middleware</span></code></p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">fixture_middleware</span></code> and <code class="docutils literal notranslate"><span class="pre">result_generator_middleware</span></code> which were used for
testing/mocking purposes have been removed. These have been replaced internally by the
<code class="docutils literal notranslate"><span class="pre">RequestMocker</span></code> class, utilized for testing via a <code class="docutils literal notranslate"><span class="pre">request_mocker</span></code> pytest fixture.</p>
</section>
<section id="http-retry-request-middleware">
<h6>HTTP Retry Request Middleware<a class="headerlink" href="#http-retry-request-middleware" title="Link to this heading">ÔÉÅ</a></h6>
<p>The <code class="docutils literal notranslate"><span class="pre">http_retry_request_middleware</span></code> has been removed in favor of a configuration
option on the <code class="docutils literal notranslate"><span class="pre">HTTPProvider</span></code> and <code class="docutils literal notranslate"><span class="pre">AsyncHTTPProvider</span></code> classes. The configuration
options are outlined in the documentation in the <a class="reference internal" href="index.html#http-retry-requests"><span class="std std-ref">Retry Requests for HTTP Providers</span></a> section.</p>
</section>
<section id="normalize-request-parameters-middleware">
<h6>Normalize Request Parameters Middleware<a class="headerlink" href="#normalize-request-parameters-middleware" title="Link to this heading">ÔÉÅ</a></h6>
<p>The <code class="docutils literal notranslate"><span class="pre">normalize_request_parameters</span></code> middleware was not used anywhere internally and
has been removed.</p>
</section>
</section>
<section id="remaining-camelcase-snake-case-updates">
<h5>Remaining camelCase -&gt; snake_case Updates<a class="headerlink" href="#remaining-camelcase-snake-case-updates" title="Link to this heading">ÔÉÅ</a></h5>
<p>The following arguments have been renamed across the library from camelCase to
snake_case in all methods where they are passed in as a kwarg.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fromBlock</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">from_block</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toBlock</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">to_block</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">blockHash</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">block_hash</span></code></p></li>
</ul>
<p>Note that if a dictionary is used instead, say to a call such as <cite>eth_getLogs</cite>, the
keys in the dictionary should be camelCase. This is because the dictionary is passed
directly to the JSON-RPC request, where the keys are expected to be in camelCase.</p>
</section>
<section id="changes-to-exception-handling">
<h5>Changes to Exception Handling<a class="headerlink" href="#changes-to-exception-handling" title="Link to this heading">ÔÉÅ</a></h5>
<p>All Python standard library exceptions that were raised from within web3.py have
been replaced with custom <code class="docutils literal notranslate"><span class="pre">Web3Exception</span></code> classes. This change allows for better
control over exception handling, being able to distinguish between exceptions raised
by web3.py and those raised from elsewhere in a codebase. The following exceptions
have been replaced:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">AssertionError</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Web3AssertionError</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ValueError</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Web3ValueError</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TypeError</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Web3TypeError</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">Web3AttributeError</span></code></p></li>
</ul>
<p>A new <code class="docutils literal notranslate"><span class="pre">MethodNotSupported</span></code> exception is now raised when a method is not supported by
web3.py. This allows a user to distinguish between when a method is not available on
the current provider, <code class="docutils literal notranslate"><span class="pre">MethodUnavailable</span></code>, and when a method is not supported by
web3.py under certain conditions, <code class="docutils literal notranslate"><span class="pre">MethodNotSupported</span></code>.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">MismatchedABI</span></code> exception is now raised instead of a <code class="docutils literal notranslate"><span class="pre">Web3ValidationError</span></code> in
cases where an ABI is not compatible with the data being passed to it. This change
allows for more specific error handling when using certain ABI types.</p>
<section id="json-rpc-error-handling">
<h6>JSON-RPC Error Handling<a class="headerlink" href="#json-rpc-error-handling" title="Link to this heading">ÔÉÅ</a></h6>
<p>Rather than a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> being replaced with a <code class="docutils literal notranslate"><span class="pre">Web3ValueError</span></code> when a JSON-RPC
response comes back with an <code class="docutils literal notranslate"><span class="pre">error</span></code> object, a new <code class="docutils literal notranslate"><span class="pre">Web3RPCError</span></code> exception is
now raised to provide more distinction for JSON-RPC error responses. Some previously
existing exceptions now extend from this class since they too are related to JSON-RPC
errors:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MethodUnavailable</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BlockNotFound</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TransactionNotFound</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TransactionIndexingInProgress</span></code></p></li>
</ul>
</section>
</section>
<section id="end-of-support-and-feature-removals">
<h5>End of Support and Feature Removals<a class="headerlink" href="#end-of-support-and-feature-removals" title="Link to this heading">ÔÉÅ</a></h5>
<section id="python-3-7-support-dropped">
<h6>Python 3.7 Support Dropped<a class="headerlink" href="#python-3-7-support-dropped" title="Link to this heading">ÔÉÅ</a></h6>
<p>Python 3.7 support has been dropped in favor of Python 3.8+. Python 3.7 is no longer
supported by the Python core team, and we want to focus our efforts on supporting
the latest versions of Python.</p>
</section>
<section id="ethpm-module-removed">
<h6>EthPM Module Removed<a class="headerlink" href="#ethpm-module-removed" title="Link to this heading">ÔÉÅ</a></h6>
<p>The EthPM module has been removed from the library. It was not widely used and has not
been functional since around October 2022. It was deprecated in <code class="docutils literal notranslate"><span class="pre">v6</span></code> and has been
completely removed in <code class="docutils literal notranslate"><span class="pre">v7</span></code>.</p>
<p>Types in the
<a class="reference external" href="https://github.com/ethereum/eth-typing/blob/ef9c2d566b7747bb6799214e2c89006b8cde4c36/eth_typing/ethpm.py">eth_typing.ethpm</a>
module have been deprecated and will be removed from <code class="docutils literal notranslate"><span class="pre">eth-typing</span></code> in the next major
release.</p>
</section>
<section id="geth-miner-namespace-removed">
<h6>Geth Miner Namespace Removed<a class="headerlink" href="#geth-miner-namespace-removed" title="Link to this heading">ÔÉÅ</a></h6>
<p>The <code class="docutils literal notranslate"><span class="pre">geth.miner</span></code> namespace, deprecated in <code class="docutils literal notranslate"><span class="pre">v6</span></code>, has been removed in <code class="docutils literal notranslate"><span class="pre">v7</span></code>.
The <code class="docutils literal notranslate"><span class="pre">miner</span></code> namespace was used for managing the concept of a miner in geth. This is
no longer a feature in geth and is planned for complete removal in the future, with
Ethereum having transitioned to proof-of-stake.</p>
</section>
<section id="geth-personal-namespace-removed">
<h6>Geth Personal Namespace Removed<a class="headerlink" href="#geth-personal-namespace-removed" title="Link to this heading">ÔÉÅ</a></h6>
<p>The <code class="docutils literal notranslate"><span class="pre">geth.personal</span></code> namespace, deprecated in <code class="docutils literal notranslate"><span class="pre">v6</span></code>, has been removed in <code class="docutils literal notranslate"><span class="pre">v7</span></code>.
The <code class="docutils literal notranslate"><span class="pre">personal</span></code> namespace was used for managing accounts and keys and was deprecated
in geth in <code class="docutils literal notranslate"><span class="pre">v1.11.0</span></code>. Geth has moved to using <code class="docutils literal notranslate"><span class="pre">clef</span></code> for account and key management.</p>
</section>
<section id="abi-types-removed">
<h6>ABI Types Removed<a class="headerlink" href="#abi-types-removed" title="Link to this heading">ÔÉÅ</a></h6>
<p>The type definitions for ABIs, deprecated in <code class="docutils literal notranslate"><span class="pre">v6</span></code>, have been removed in <code class="docutils literal notranslate"><span class="pre">v7</span></code>. New
types have been introduced in the <code class="docutils literal notranslate"><span class="pre">eth_typing</span></code> <code class="docutils literal notranslate"><span class="pre">v5</span></code> package for ABIs. Improvements have
been made to make required types more explicit and to offer better semantics.</p>
<p>The following types from <code class="docutils literal notranslate"><span class="pre">web3.types</span></code> have been removed:
- <code class="docutils literal notranslate"><span class="pre">ABIEventParams</span></code> is no longer avaiable. Use <code class="docutils literal notranslate"><span class="pre">ABIComponentIndexed</span></code> from
<code class="docutils literal notranslate"><span class="pre">eth_typing</span></code> to represent event input components.
- <code class="docutils literal notranslate"><span class="pre">ABIEvent</span></code> now resides in <code class="docutils literal notranslate"><span class="pre">eth_typing</span></code>. <code class="docutils literal notranslate"><span class="pre">ABIEvent.type</span></code> and <code class="docutils literal notranslate"><span class="pre">ABIEvent.name</span></code>
are now required fields.
- <code class="docutils literal notranslate"><span class="pre">ABIFunctionComponents</span></code> and <code class="docutils literal notranslate"><span class="pre">ABIFunctionParams</span></code> are no longer available. Use
<code class="docutils literal notranslate"><span class="pre">ABIComponent</span></code> from <code class="docutils literal notranslate"><span class="pre">eth_typing</span></code> to represent function input components.
- <code class="docutils literal notranslate"><span class="pre">ABIFunction</span></code> now resides in <code class="docutils literal notranslate"><span class="pre">eth_typing</span></code>. <code class="docutils literal notranslate"><span class="pre">ABIFunction.type</span></code> and
<code class="docutils literal notranslate"><span class="pre">ABIFunction.name</span></code> are now required fields.
- <code class="docutils literal notranslate"><span class="pre">ABIElement</span></code> now resides in <code class="docutils literal notranslate"><span class="pre">eth_typing</span></code> and represents a <code class="docutils literal notranslate"><span class="pre">Union</span></code> of all valid
ABI element types, <code class="docutils literal notranslate"><span class="pre">ABICallable</span></code>, <code class="docutils literal notranslate"><span class="pre">ABIEvent</span></code> and <code class="docutils literal notranslate"><span class="pre">ABIError</span></code>.</p>
</section>
</section>
<section id="miscellaneous-changes">
<h5>Miscellaneous Changes<a class="headerlink" href="#miscellaneous-changes" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LRU</span></code> has been removed from the library and dependency on <code class="docutils literal notranslate"><span class="pre">lru-dict</span></code> library was
dropped.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CallOverride</span></code> type was changed to <code class="docutils literal notranslate"><span class="pre">StateOverride</span></code> since more methods than
<code class="docutils literal notranslate"><span class="pre">eth_call</span></code> utilize the state override params.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">User-Agent</span></code> header was changed to a more readable format.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BaseContractFunctions</span></code> iterator now returns instances of <code class="docutils literal notranslate"><span class="pre">ContractFunction</span></code> rather
than the function names.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BaseContractFunction</span></code> class attribute <code class="docutils literal notranslate"><span class="pre">function_identifier</span></code> has been removed in
favor of the <code class="docutils literal notranslate"><span class="pre">abi_element_identifier</span></code> attribute.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.contract.utils.call_contract_function()</span></code> no longers uses <code class="docutils literal notranslate"><span class="pre">fn_abi</span></code> as a
parameter. Instead, the <code class="docutils literal notranslate"><span class="pre">abi_callable</span></code> parameter of type <code class="docutils literal notranslate"><span class="pre">ABICallable</span></code> is used.</p></li>
<li><p>Beacon API filename change: <code class="docutils literal notranslate"><span class="pre">beacon/main.py</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">beacon/beacon.py</span></code>.</p></li>
<li><p>The asynchronous version of <code class="docutils literal notranslate"><span class="pre">w3.eth.wait_for_transaction_receipt()</span></code> changes its
signature to use <code class="docutils literal notranslate"><span class="pre">Optional[float]</span></code> instead of <code class="docutils literal notranslate"><span class="pre">float</span></code> since it may be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">get_default_ipc_path()</span></code> and <code class="docutils literal notranslate"><span class="pre">get_dev_ipc_path()</span></code> now return the path value
without checking if the <code class="docutils literal notranslate"><span class="pre">geth.ipc</span></code> file exists.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Web3.is_address()</span></code> returns <code class="docutils literal notranslate"><span class="pre">True</span></code> for non-checksummed addresses.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Contract.encodeABI()</span></code> has been renamed to <code class="docutils literal notranslate"><span class="pre">Contract.encode_abi()</span></code>. The <code class="docutils literal notranslate"><span class="pre">fn_name</span></code>
argument has been changed to <code class="docutils literal notranslate"><span class="pre">abi_element_identifier</span></code>.</p></li>
<li><p>JSON-RPC responses are now more strictly validated against the JSON-RPC 2.0
specification while providing more informative error messages for invalid responses.</p></li>
</ul>
</section>
</section>
<section id="migrating-from-v5-to-v6">
<span id="migrating-v5-to-v6"></span><h4>Migrating from v5 to v6<a class="headerlink" href="#migrating-from-v5-to-v6" title="Link to this heading">ÔÉÅ</a></h4>
<p>web3.py follows <a class="reference external" href="http://semver.org">Semantic Versioning</a>, which means
that version 6 introduced backwards-incompatible changes. If your
project depends on web3.py v6, then you‚Äôll probably need to make some changes.</p>
<p>Breaking Changes:</p>
<section id="strict-bytes-checking-by-default">
<h5>Strict Bytes Checking by Default<a class="headerlink" href="#strict-bytes-checking-by-default" title="Link to this heading">ÔÉÅ</a></h5>
<p>web3.py v6 moved to requiring strict bytes checking by default. This means that if an
ABI specifies a <code class="docutils literal notranslate"><span class="pre">bytes4</span></code> argument, web3.py will invalidate any entry that is not
encodable as a bytes type with length of 4. This means only 0x-prefixed hex strings with
a length of 4 and bytes types with a length of 4 will be considered valid. This removes
doubt that comes from inferring values and assuming they should be padded.</p>
<p>This behavior was previously available in via the <code class="docutils literal notranslate"><span class="pre">w3.enable_strict_bytes_checking()</span></code>
method. This is now, however, a toggleable flag on the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance via the
<code class="docutils literal notranslate"><span class="pre">w3.strict_bytes_type_checking</span></code> property. As outlined above, this property is set to
<code class="docutils literal notranslate"><span class="pre">True</span></code> by default but can be toggled on and off via the property‚Äôs setter
(e.g. <code class="docutils literal notranslate"><span class="pre">w3.strict_bytes_type_checking</span> <span class="pre">=</span> <span class="pre">False</span></code>).</p>
</section>
<section id="snake-case">
<h5>Snake Case<a class="headerlink" href="#snake-case" title="Link to this heading">ÔÉÅ</a></h5>
<p>web3.py v6 moved to the more Pythonic convention of snake_casing wherever
possible. There are some exceptions to this pattern:</p>
<ul class="simple">
<li><p>Contract methods and events use whatever is listed in the ABI. If the smart contract
convention is to use camelCase for method and event names, web3.py won‚Äôt do
any magic to convert it to snake_casing.</p></li>
<li><p>Arguments to JSON-RPC methods. For example: transaction and filter
parameters still use camelCasing. The reason for
this is primarily due to error messaging. It would be confusing to pass in a
snake_cased parameter and get an error message with a camelCased parameter.</p></li>
<li><p>Data that is returned from JSON-RPC methods. For example:
The keys in a transaction receipt will still be returned as camelCase.</p></li>
</ul>
</section>
<section id="python-3-10-and-3-11-support">
<h5>Python 3.10 and 3.11 Support<a class="headerlink" href="#python-3-10-and-3-11-support" title="Link to this heading">ÔÉÅ</a></h5>
<p>Support for Python 3.10 and 3.11 is here. In order to support Python 3.10, we had to
update the <code class="docutils literal notranslate"><span class="pre">websockets</span></code> dependency to v10+.</p>
</section>
<section id="exceptions">
<h5>Exceptions<a class="headerlink" href="#exceptions" title="Link to this heading">ÔÉÅ</a></h5>
<section id="exceptions-inherit-from-a-base-class">
<h6>Exceptions inherit from a base class<a class="headerlink" href="#exceptions-inherit-from-a-base-class" title="Link to this heading">ÔÉÅ</a></h6>
<p>In v5, some web3.py exceptions inherited from <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code>, namely:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NoABIFunctionsFound</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NoABIFound</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NoABIEventsFound</span></code></p></li>
</ul>
<p>Others inherited from <code class="docutils literal notranslate"><span class="pre">ValueError</span></code>, namely:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">InvalidAddress</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NameNotFound</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LogTopicError</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">InvalidEventABI</span></code></p></li>
</ul>
<p>Now web3.py exceptions inherit from the same base <code class="docutils literal notranslate"><span class="pre">Web3Exception</span></code>.</p>
<p>As such, any code that was expecting a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> or an <code class="docutils literal notranslate"><span class="pre">AttributeError</span></code> from
web3.py must update to expecting one of the exceptions listed above, or
<code class="docutils literal notranslate"><span class="pre">Web3Exception</span></code>.</p>
<p>Similarly, exceptions raised in the EthPM and ENS modules inherit from the base
<code class="docutils literal notranslate"><span class="pre">EthPMException</span></code> and <code class="docutils literal notranslate"><span class="pre">ENSException</span></code>, respectively.</p>
</section>
<section id="validationerror">
<h6>ValidationError<a class="headerlink" href="#validationerror" title="Link to this heading">ÔÉÅ</a></h6>
<p>The Python dev tooling ecosystem is moving towards standardizing
<code class="docutils literal notranslate"><span class="pre">ValidationError</span></code>, so users know that they‚Äôre catching the correct
<code class="docutils literal notranslate"><span class="pre">ValidationError</span></code>. The base <code class="docutils literal notranslate"><span class="pre">ValidationError</span></code> is imported from
<code class="docutils literal notranslate"><span class="pre">eth_utils</span></code>. However, we also wanted to empower users to catch all errors emitted
by a particular module. So we now have a <code class="docutils literal notranslate"><span class="pre">Web3ValidationError</span></code>, <code class="docutils literal notranslate"><span class="pre">EthPMValidationError</span></code>,
and an <code class="docutils literal notranslate"><span class="pre">ENSValidationError</span></code> that all inherit from the generic
<code class="docutils literal notranslate"><span class="pre">eth_utils.exceptions.ValidationError</span></code>.</p>
</section>
</section>
<section id="web3-class-split-into-web3-and-asyncweb3">
<h5>Web3 class split into Web3 and AsyncWeb3<a class="headerlink" href="#web3-class-split-into-web3-and-asyncweb3" title="Link to this heading">ÔÉÅ</a></h5>
<p>The <cite>Web3</cite> class previously contained both sync and async methods. We‚Äôve separated
<cite>Web3</cite> and <cite>AsyncWeb3</cite> functionality to tighten up typing. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">AsyncWeb3</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="o">.</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="o">&lt;</span><span class="n">provider</span><span class="o">.</span><span class="n">url</span><span class="o">&gt;</span><span class="p">))</span>
<span class="n">async_w3</span> <span class="o">=</span> <span class="n">AsyncWeb3</span><span class="p">(</span><span class="n">AsyncWeb3</span><span class="o">.</span><span class="n">AsyncHTTPProvider</span><span class="p">(</span><span class="o">&lt;</span><span class="n">provider</span><span class="o">.</span><span class="n">url</span><span class="o">&gt;</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="dict-to-attributedict-conversion-moved-to-middleware">
<h5><cite>dict</cite> to <cite>AttributeDict</cite> conversion moved to middleware<a class="headerlink" href="#dict-to-attributedict-conversion-moved-to-middleware" title="Link to this heading">ÔÉÅ</a></h5>
<p><cite>Eth</cite> module data returned as key-value pairs was previously automatically converted to
an <cite>AttributeDict</cite> by result formatters, which could cause problems with typing. This
conversion has been moved to a default <cite>attrdict_middleware</cite> where it can be easily
removed if necessary. See the <a class="reference external" href="web3.eth.html#web3.eth.Eth">Eth module</a> docs for more detail.</p>
</section>
<section id="other-misc-changes">
<h5>Other Misc Changes<a class="headerlink" href="#other-misc-changes" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">InfuraKeyNotFound</span></code> exception has been changed to <code class="docutils literal notranslate"><span class="pre">InfuraProjectIdNotFound</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SolidityError</span></code> has been removed in favor of <code class="docutils literal notranslate"><span class="pre">ContractLogicError</span></code></p></li>
<li><p>When a method is unavailable from a node provider (i.e. a response error
code of -32601 is returned), a <code class="docutils literal notranslate"><span class="pre">MethodUnavailable</span></code> error is
now raised instead of <code class="docutils literal notranslate"><span class="pre">ValueError</span></code></p></li>
<li><p>Logs‚Äô <cite>data</cite> field was previously formatted with <cite>to_ascii_if_bytes</cite>, now formatted to <cite>HexBytes</cite></p></li>
<li><p>Receipts‚Äô <cite>type</cite> field was previously not formatted, now formatted with <cite>to_integer_if_hex</cite></p></li>
</ul>
</section>
<section id="removals">
<h5>Removals<a class="headerlink" href="#removals" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>Removed unused IBAN module</p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">WEB3_INFURA_API_KEY</span></code> environment variable in favor of <code class="docutils literal notranslate"><span class="pre">WEB3_INFURA_PROJECT_ID</span></code></p></li>
<li><p>Removed Kovan auto provider</p></li>
<li><p>Removed deprecated <code class="docutils literal notranslate"><span class="pre">sha3</span></code> and <code class="docutils literal notranslate"><span class="pre">soliditySha3</span></code> methods in favor of <code class="docutils literal notranslate"><span class="pre">keccak</span></code> and <code class="docutils literal notranslate"><span class="pre">solidityKeccak</span></code></p></li>
<li><p>Remove Parity Module and References</p></li>
</ul>
</section>
<section id="other-notable-changes">
<h5>Other notable changes<a class="headerlink" href="#other-notable-changes" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">ipfshttpclient</span></code> library is now opt-in via a web3 install extra.
This only affects the ethpm ipfs backends, which rely on the library.</p></li>
</ul>
</section>
</section>
<section id="migrating-from-v4-to-v5">
<span id="migrating-v4-to-v5"></span><h4>Migrating from v4 to v5<a class="headerlink" href="#migrating-from-v4-to-v5" title="Link to this heading">ÔÉÅ</a></h4>
<p>Web3.py follows <a class="reference external" href="http://semver.org">Semantic Versioning</a>, which means
that version 5 introduced backwards-incompatible changes. If your
project depends on Web3.py v4, then you‚Äôll probably need to make some changes.</p>
<p>Here are the most common required updates:</p>
<section id="python-3-5-no-longer-supported">
<h5>Python 3.5 no longer supported<a class="headerlink" href="#python-3-5-no-longer-supported" title="Link to this heading">ÔÉÅ</a></h5>
<p>You will need to upgrade to either Python 3.6 or 3.7</p>
</section>
<section id="eth-abi-v1-no-longer-supported">
<h5><code class="docutils literal notranslate"><span class="pre">eth-abi</span></code> v1 no longer supported<a class="headerlink" href="#eth-abi-v1-no-longer-supported" title="Link to this heading">ÔÉÅ</a></h5>
<p>You will need to upgrade the <code class="docutils literal notranslate"><span class="pre">eth-abi</span></code> dependency to v2</p>
</section>
<section id="changes-to-base-api">
<h5>Changes to base API<a class="headerlink" href="#changes-to-base-api" title="Link to this heading">ÔÉÅ</a></h5>
<section id="json-rpc-updates">
<h6>JSON-RPC Updates<a class="headerlink" href="#json-rpc-updates" title="Link to this heading">ÔÉÅ</a></h6>
<p>In v4, JSON-RPC calls that looked up transactions or blocks and
didn‚Äôt find them, returned <code class="docutils literal notranslate"><span class="pre">None</span></code>. Now if a transaction or
block is not found, a <code class="docutils literal notranslate"><span class="pre">BlockNotFound</span></code> or a <code class="docutils literal notranslate"><span class="pre">TransactionNotFound</span></code>
error will be thrown as appropriate. This applies to the
following web3 methods:</p>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransaction()</span></code> will throw a <code class="docutils literal notranslate"><span class="pre">TransactionNotFound</span></code> error</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionReceipt()</span></code> will throw a <code class="docutils literal notranslate"><span class="pre">TransactionNotFound</span></code> error</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionByBlock()</span></code> will throw a <code class="docutils literal notranslate"><span class="pre">TransactionNotFound</span></code> error</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionCount()</span></code> will throw a <code class="docutils literal notranslate"><span class="pre">BlockNotFound</span></code> error</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getBlock()</span></code> will throw a <code class="docutils literal notranslate"><span class="pre">BlockNotFound</span></code> error</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getUncleCount()</span></code> will throw a <code class="docutils literal notranslate"><span class="pre">BlockNotFound</span></code> error</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getUncleByBlock()</span></code> will throw a <code class="docutils literal notranslate"><span class="pre">BlockNotFound</span></code> error</p></li>
</ul>
</section>
<section id="removed-methods">
<h6>Removed Methods<a class="headerlink" href="#removed-methods" title="Link to this heading">ÔÉÅ</a></h6>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">contract.buildTransaction</span></code> was removed for <code class="docutils literal notranslate"><span class="pre">contract.functions.buildTransaction.&lt;method</span> <span class="pre">name&gt;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contract.deploy</span></code> was removed for <code class="docutils literal notranslate"><span class="pre">contract.constructor.transact</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contract.estimateGas</span></code> was removed for <code class="docutils literal notranslate"><span class="pre">contract.functions.&lt;method</span> <span class="pre">name&gt;.estimateGas</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contract.call</span></code> was removed for <code class="docutils literal notranslate"><span class="pre">contract.&lt;functions/events&gt;.&lt;method</span> <span class="pre">name&gt;.call</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contract.transact</span></code> was removed for <code class="docutils literal notranslate"><span class="pre">contract.&lt;functions/events&gt;.&lt;method</span> <span class="pre">name&gt;.transact</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">contract.eventFilter</span></code> was removed for <code class="docutils literal notranslate"><span class="pre">contract.events.&lt;event</span> <span class="pre">name&gt;.createFilter</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">middleware_stack</span></code> was renamed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">middleware_onion()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.miner.hashrate</span></code> was a duplicate of <code class="xref py py-meth docutils literal notranslate"><span class="pre">hashrate()</span></code> and was removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.version.network</span></code> was a duplicate of <code class="xref py py-meth docutils literal notranslate"><span class="pre">version()</span></code> and was removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.providers.tester.EthereumTesterProvider</span></code> and <code class="docutils literal notranslate"><span class="pre">web3.providers.tester.TestRPCProvider</span></code> have been removed for <a class="reference internal" href="index.html#web3.providers.eth_tester.EthereumTesterProvider" title="web3.providers.eth_tester.EthereumTesterProvider"><code class="xref py py-meth docutils literal notranslate"><span class="pre">EthereumTesterProvider()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.eth.enableUnauditedFeatures</span></code> was removed</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.txpool</span></code> was moved to <a class="reference internal" href="index.html#module-web3.geth.txpool" title="web3.geth.txpool"><code class="xref py py-meth docutils literal notranslate"><span class="pre">txpool()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.version.node</span></code> was removed for <code class="docutils literal notranslate"><span class="pre">web3.clientVersion</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.version.ethereum</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">protocolVersion()</span></code></p></li>
<li><p>Relocated personal RPC endpoints to reflect Parity and Geth implementations:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.personal.listAccounts</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">listAccounts()</span></code> or <code class="xref py py-meth docutils literal notranslate"><span class="pre">listAccounts()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.personal.importRawKey</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">importRawKey()</span></code> or <code class="xref py py-meth docutils literal notranslate"><span class="pre">importRawKey()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.personal.newAccount</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">newAccount()</span></code> or <code class="xref py py-meth docutils literal notranslate"><span class="pre">newAccount()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.personal.lockAccount</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">lockAccount()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.personal.unlockAccount</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">unlockAccount()</span></code> or <code class="xref py py-meth docutils literal notranslate"><span class="pre">unlockAccount()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.personal.sendTransaction</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">sendTransaction()</span></code> or <code class="xref py py-meth docutils literal notranslate"><span class="pre">sendTransaction()</span></code></p></li>
</ul>
</li>
<li><p>Relocated <code class="docutils literal notranslate"><span class="pre">web3.admin</span></code> module to <code class="docutils literal notranslate"><span class="pre">web3.geth</span></code> namespace</p></li>
<li><p>Relocated <code class="docutils literal notranslate"><span class="pre">web3.miner</span></code> module to <code class="docutils literal notranslate"><span class="pre">web3.geth</span></code> namespace</p></li>
</ul>
</section>
<section id="deprecated-methods">
<h6>Deprecated Methods<a class="headerlink" href="#deprecated-methods" title="Link to this heading">ÔÉÅ</a></h6>
<p>Expect the following methods to be removed in v6:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">web3.sha3</span></code> was deprecated for <code class="xref py py-meth docutils literal notranslate"><span class="pre">keccak()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.soliditySha3</span></code> was deprecated for <code class="xref py py-meth docutils literal notranslate"><span class="pre">solidityKeccak()</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">chainId()</span></code> was deprecated for <code class="xref py py-meth docutils literal notranslate"><span class="pre">chainId()</span></code>.
Follow issue <a class="reference external" href="https://github.com/ethereum/web3.py/issues/1293">#1293</a> for details</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.eth.getCompilers()</span></code> was deprecated and will not be replaced</p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionFromBlock()</span></code> was deprecated for <code class="xref py py-meth docutils literal notranslate"><span class="pre">getTransactionByBlock()</span></code></p></li>
</ul>
</section>
<section id="deprecated-concisecontract-and-implicitcontract">
<h6>Deprecated ConciseContract and ImplicitContract<a class="headerlink" href="#deprecated-concisecontract-and-implicitcontract" title="Link to this heading">ÔÉÅ</a></h6>
<p>The ConciseContract and ImplicitContract have been deprecated and will be removed in v6.</p>
<p>ImplicitContract instances will need to use the verbose syntax. For example:</p>
<p><code class="docutils literal notranslate"><span class="pre">contract.functions.&lt;function</span> <span class="pre">name&gt;.transact({})</span></code></p>
<p>ConciseContract has been replaced with the ContractCaller API. Instead of using the ConciseContract factory, you can now use:</p>
<p><code class="docutils literal notranslate"><span class="pre">contract.caller.&lt;function_name&gt;</span></code></p>
<p>or the classic contract syntax:</p>
<p><code class="docutils literal notranslate"><span class="pre">contract.functions.&lt;function</span> <span class="pre">name&gt;.call()</span></code>.</p>
<p>Some more concrete examples can be found in the <a class="reference external" href="https://web3py.readthedocs.io/en/latest/contracts.html?highlight=Caller#contractcaller">ContractCaller docs</a></p>
</section>
</section>
<section id="manager-provider">
<h5>Manager Provider<a class="headerlink" href="#manager-provider" title="Link to this heading">ÔÉÅ</a></h5>
<p>In v5, only a single provider will be allowed. While allowing
multiple providers is a feature we‚Äôd like to support in the future,
the way that multiple providers was handled in v4 wasn‚Äôt ideal.
The only thing they could do was fall back. There was no mechanism for any
round robin, nor was there any control around which provider
was chosen. Eventually, the idea is to expand the Manager API
to support injecting custom logic into the provider selection process.</p>
<p>For now, <code class="docutils literal notranslate"><span class="pre">manager.providers</span></code> has changed to <code class="docutils literal notranslate"><span class="pre">manager.provider</span></code>.
Similarly, instances of <code class="docutils literal notranslate"><span class="pre">web3.providers</span></code> have been changed to
<code class="docutils literal notranslate"><span class="pre">web3.provider</span></code>.</p>
</section>
<section id="testnet-changes">
<h5>Testnet Changes<a class="headerlink" href="#testnet-changes" title="Link to this heading">ÔÉÅ</a></h5>
<p>Web3.py will no longer automatically look up a testnet connection
in IPCProvider.</p>
</section>
<section id="ens">
<h5>ENS<a class="headerlink" href="#ens" title="Link to this heading">ÔÉÅ</a></h5>
<p>Web3.py has stopped inferring the <code class="docutils literal notranslate"><span class="pre">.eth</span></code> TLD on domain names.
If a domain name is used instead of an address, you‚Äôll need
to specify the TLD. An <code class="docutils literal notranslate"><span class="pre">InvalidTLD</span></code> error will be thrown if
the TLD is missing.</p>
</section>
<section id="required-infura-api-key">
<h5>Required Infura API Key<a class="headerlink" href="#required-infura-api-key" title="Link to this heading">ÔÉÅ</a></h5>
<p>In order to interact with Infura after March 27, 2019, you‚Äôll need to set an
environment variable called <code class="docutils literal notranslate"><span class="pre">WEB3_INFURA_PROJECT_ID</span></code>. You can get a
project id by visiting <a class="reference external" href="https://infura.io/register">https://infura.io/register</a>.</p>
</section>
</section>
<section id="migrating-from-v3-to-v4">
<h4>Migrating from v3 to v4<a class="headerlink" href="#migrating-from-v3-to-v4" title="Link to this heading">ÔÉÅ</a></h4>
<p>Web3.py follows <a class="reference external" href="http://semver.org">Semantic Versioning</a>, which means
that version 4 introduced backwards-incompatible changes. If your
project depends on Web3.py v3, then you‚Äôll probably need to make some changes.</p>
<p>Here are the most common required updates:</p>
<section id="python-2-to-python-3">
<h5>Python 2 to Python 3<a class="headerlink" href="#python-2-to-python-3" title="Link to this heading">ÔÉÅ</a></h5>
<p>Only Python 3 is supported in v4. If you are running in Python 2,
it‚Äôs time to upgrade. We recommend using <cite>2to3</cite> which can make
most of your code compatible with Python 3, automatically.</p>
<p>The most important update, relevant to Web3.py, is the new <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a>
type. It is used regularly, throughout the library, whenever dealing with data
that is not guaranteed to be text.</p>
<p>Many different methods in Web3.py accept text or binary data, like contract methods,
transaction details, and cryptographic functions. The following example
uses <code class="xref py py-meth docutils literal notranslate"><span class="pre">sha3()</span></code>, but the same pattern applies elsewhere.</p>
<p>In v3 &amp; Python 2, you might have calculated the hash of binary data this way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">sha3</span><span class="p">(</span><span class="s1">&#39;I</span><span class="se">\xe2\x99\xa5</span><span class="s1">SF&#39;</span><span class="p">)</span>
<span class="go">&#39;0x50a826df121f4d076a3686d74558f40082a8e70b3469d8e9a16ceb2a79102e5e&#39;</span>
</pre></div>
</div>
<p>Or, you might have calculated the hash of text data this way:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">sha3</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="sa">u</span><span class="s1">&#39;I‚ô•SF&#39;</span><span class="p">)</span>
<span class="go">&#39;0x50a826df121f4d076a3686d74558f40082a8e70b3469d8e9a16ceb2a79102e5e&#39;</span>
</pre></div>
</div>
<p>After switching to Python 3, these would instead be executed as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">sha3</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;I</span><span class="se">\xe2\x99\xa5</span><span class="s1">SF&#39;</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0x50a826df121f4d076a3686d74558f40082a8e70b3469d8e9a16ceb2a79102e5e&#39;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">sha3</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;I‚ô•SF&#39;</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0x50a826df121f4d076a3686d74558f40082a8e70b3469d8e9a16ceb2a79102e5e&#39;)</span>
</pre></div>
</div>
<p>Note that the return value is different too: you can treat <a class="reference external" href="https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes" title="(in HexBytes v1.2)"><code class="xref py py-class docutils literal notranslate"><span class="pre">hexbytes.main.HexBytes</span></code></a>
like any other bytes value, but the representation on the console shows you the hex encoding of
those bytes, for easier visual comparison.</p>
<p>It takes a little getting used to, but the new py3 types are much better. We promise.</p>
</section>
<section id="filters">
<h5>Filters<a class="headerlink" href="#filters" title="Link to this heading">ÔÉÅ</a></h5>
<p>Filters usually don‚Äôt work quite the way that people want them to.</p>
<p>The first step toward fixing them was to simplify them by removing the polling
logic. Now, you must request an update on your filters explicitly. That
means that any exceptions during the request will bubble up into your code.</p>
<p>In v3, those exceptions (like ‚Äúfilter is not found‚Äù) were swallowed silently
in the automated polling logic. Here was the invocation for
printing out new block hashes as they appear:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">new_block_callback</span><span class="p">(</span><span class="n">block_hash</span><span class="p">):</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New Block: </span><span class="si">{</span><span class="n">block_hash</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_block_filter</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">new_block_filter</span><span class="o">.</span><span class="n">watch</span><span class="p">(</span><span class="n">new_block_callback</span><span class="p">)</span>
</pre></div>
</div>
<p>In v4, that same logic:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">new_block_filter</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">block_hash</span> <span class="ow">in</span> <span class="n">new_block_filter</span><span class="o">.</span><span class="n">get_new_entries</span><span class="p">():</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;New Block: </span><span class="si">{</span><span class="n">block_hash</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The caller is responsible for polling the results from <code class="docutils literal notranslate"><span class="pre">get_new_entries()</span></code>.
See <a class="reference internal" href="index.html#asynchronous-filters"><span class="std std-ref">Asynchronous Filter Polling</span></a> for examples of filter-event handling with web3 v4.</p>
</section>
<section id="testrpcprovider-and-ethereumtesterprovider">
<h5>TestRPCProvider and EthereumTesterProvider<a class="headerlink" href="#testrpcprovider-and-ethereumtesterprovider" title="Link to this heading">ÔÉÅ</a></h5>
<p>These providers are fairly uncommon. If you don‚Äôt recognize the names,
you can probably skip the section.</p>
<p>However, if you were using web3.py for testing contracts,
you might have been using TestRPCProvider or EthereumTesterProvider.</p>
<p>In v4 there is a new <code class="xref py py-class docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code>, and the old v3 implementation has been
removed. Web3.py v4 uses <code class="xref py py-class docutils literal notranslate"><span class="pre">eth_tester.main.EthereumTester</span></code> under the hood, instead
of eth-testrpc. While <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> is still in beta, many parts are
already in better shape than testrpc, so we decided to replace it in v4.</p>
<p>If you were using TestRPC, or were explicitly importing EthereumTesterProvider, like:
<code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">web3.providers.tester</span> <span class="pre">import</span> <span class="pre">EthereumTesterProvider</span></code>, then you will need to update.</p>
<p>With v4 you should import with <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">web3</span> <span class="pre">import</span> <span class="pre">EthereumTesterProvider</span></code>. As before, you‚Äôll
need to install Web3.py with the <code class="docutils literal notranslate"><span class="pre">tester</span></code> extra to get these features, like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>web3<span class="o">[</span>tester<span class="o">]</span>
</pre></div>
</div>
</section>
<section id="changes-to-base-api-convenience-methods">
<h5>Changes to base API convenience methods<a class="headerlink" href="#changes-to-base-api-convenience-methods" title="Link to this heading">ÔÉÅ</a></h5>
<section id="web3-todecimal">
<h6>Web3.toDecimal()<a class="headerlink" href="#web3-todecimal" title="Link to this heading">ÔÉÅ</a></h6>
<p>In v4 <code class="docutils literal notranslate"><span class="pre">Web3.toDecimal()</span></code> is renamed: <code class="xref py py-meth docutils literal notranslate"><span class="pre">toInt()</span></code> for improved clarity. It does not return a <a class="reference external" href="https://docs.python.org/3/library/decimal.html#decimal.Decimal" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">decimal.Decimal</span></code></a>, it returns an <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a>.</p>
</section>
<section id="id5">
<h6>Removed Methods<a class="headerlink" href="#id5" title="Link to this heading">ÔÉÅ</a></h6>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Web3.toUtf8</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">toText()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Web3.fromUtf8</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">toHex()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Web3.toAscii</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">toBytes()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Web3.fromAscii</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">toHex()</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Web3.fromDecimal</span></code> was removed for <code class="xref py py-meth docutils literal notranslate"><span class="pre">toHex()</span></code>.</p></li>
</ul>
</section>
</section>
<section id="provider-access">
<h5>Provider Access<a class="headerlink" href="#provider-access" title="Link to this heading">ÔÉÅ</a></h5>
<p>In v4, <code class="docutils literal notranslate"><span class="pre">w3.currentProvider</span></code> was removed, in favor of <code class="docutils literal notranslate"><span class="pre">w3.providers</span></code>.</p>
</section>
<section id="disambiguating-string-inputs">
<h5>Disambiguating String Inputs<a class="headerlink" href="#disambiguating-string-inputs" title="Link to this heading">ÔÉÅ</a></h5>
<p>There are a number of places where an arbitrary string input might be either
a byte-string that has been hex-encoded, or unicode characters in text.
These are named <code class="docutils literal notranslate"><span class="pre">hexstr</span></code> and <code class="docutils literal notranslate"><span class="pre">text</span></code> in Web3.py.
You specify which kind of <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> you have by using the appropriate
keyword argument. See examples in <a class="reference internal" href="index.html#overview-type-conversions"><span class="std std-ref">Encoding and Decoding Helpers</span></a>.</p>
<p>In v3, some methods accepted a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> as the first positional argument.
In v4, you must pass strings as one of <code class="docutils literal notranslate"><span class="pre">hexstr</span></code> or <code class="docutils literal notranslate"><span class="pre">text</span></code> keyword arguments.</p>
<p>Notable methods that no longer accept ambiguous strings:</p>
<ul class="simple">
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">sha3()</span></code></p></li>
<li><p><code class="xref py py-meth docutils literal notranslate"><span class="pre">toBytes()</span></code></p></li>
</ul>
</section>
<section id="contracts">
<h5>Contracts<a class="headerlink" href="#contracts" title="Link to this heading">ÔÉÅ</a></h5>
<ul class="simple">
<li><p>When a contract returns the ABI type <code class="docutils literal notranslate"><span class="pre">string</span></code>, Web3.py v4 now returns a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>
value by decoding the underlying bytes using UTF-8.</p></li>
<li><p>When a contract returns the ABI type <code class="docutils literal notranslate"><span class="pre">bytes</span></code> (of any length),
Web3.py v4 now returns a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> value</p></li>
</ul>
</section>
<section id="personal-api">
<h5>Personal API<a class="headerlink" href="#personal-api" title="Link to this heading">ÔÉÅ</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">w3.personal.signAndSendTransaction</span></code> is no longer available. Use
<code class="xref py py-meth docutils literal notranslate"><span class="pre">w3.personal.sendTransaction()</span></code> instead.</p>
</section>
</section>
</section>
</div>
<div class="toctree-wrapper compound">
<span id="document-web3.main"></span><section id="web3-api">
<span id="web3-base"></span><h3>Web3 API<a class="headerlink" href="#web3-api" title="Link to this heading">ÔÉÅ</a></h3>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#providers" id="id2">Providers</a></p></li>
<li><p><a class="reference internal" href="#attributes" id="id3">Attributes</a></p></li>
<li><p><a class="reference internal" href="#batch-requests" id="id4">Batch Requests</a></p></li>
<li><p><a class="reference internal" href="#encoding-and-decoding-helpers" id="id5">Encoding and Decoding Helpers</a></p></li>
<li><p><a class="reference internal" href="#currency-conversions" id="id6">Currency Conversions</a></p></li>
<li><p><a class="reference internal" href="#addresses" id="id7">Addresses</a></p></li>
<li><p><a class="reference internal" href="#cryptographic-hashing" id="id8">Cryptographic Hashing</a></p></li>
<li><p><a class="reference internal" href="#check-encodability" id="id9">Check Encodability</a></p></li>
<li><p><a class="reference internal" href="#rpc-api-modules" id="id10">RPC API Modules</a></p></li>
<li><p><a class="reference internal" href="#custom-methods" id="id11">Custom Methods</a></p></li>
<li><p><a class="reference internal" href="#external-modules" id="id12">External Modules</a></p></li>
</ul>
</nav>
<dl class="py class" id="module-web3">
<dt class="sig sig-object py" id="web3.Web3">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.</span></span><span class="sig-name descname"><span class="pre">Web3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">provider</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p>Each <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance exposes the following APIs.</p>
<section id="providers">
<h4><a class="toc-backref" href="#id2" role="doc-backlink">Providers</a><a class="headerlink" href="#providers" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py attribute">
<dt class="sig sig-object py" id="web3.Web3.HTTPProvider">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">HTTPProvider</span></span><a class="headerlink" href="#web3.Web3.HTTPProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Convenience API to access <a class="reference internal" href="index.html#web3.providers.rpc.HTTPProvider" title="web3.providers.rpc.HTTPProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">web3.providers.rpc.HTTPProvider</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.Web3.IPCProvider">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">IPCProvider</span></span><a class="headerlink" href="#web3.Web3.IPCProvider" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Convenience API to access <a class="reference internal" href="index.html#web3.providers.ipc.IPCProvider" title="web3.providers.ipc.IPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">web3.providers.ipc.IPCProvider</span></code></a></p>
</dd></dl>

</section>
<section id="attributes">
<h4><a class="toc-backref" href="#id3" role="doc-backlink">Attributes</a><a class="headerlink" href="#attributes" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py attribute">
<dt class="sig sig-object py" id="web3.Web3.api">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">api</span></span><a class="headerlink" href="#web3.Web3.api" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns the current Web3 version.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">api</span>
<span class="go">&quot;4.7.0&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.Web3.client_version">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">client_version</span></span><a class="headerlink" href="#web3.Web3.client_version" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">web3_clientVersion</span></code> RPC Method</p></li>
</ul>
<p>Returns the current client version.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">client_version</span>
<span class="go">&#39;Geth/v1.4.11-stable-fed692f6/darwin/go1.7&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="batch-requests">
<span id="id1"></span><h4><a class="toc-backref" href="#id4" role="doc-backlink">Batch Requests</a><a class="headerlink" href="#batch-requests" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.batch_requests">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">batch_requests</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.batch_requests" title="Link to this definition">ÔÉÅ</a></dt>
<dd><blockquote>
<div><p>The JSON-RPC API allows for batch requests, meaning you can send a single request
that contains an array of request objects. Generally, this may be useful when you want
to limit the number of requests you send to a node.</p>
<p>You can choose to build a batch of requests within or outside of a context manager:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">w3</span><span class="o">.</span><span class="n">batch_requests</span><span class="p">()</span> <span class="k">as</span> <span class="n">batch</span><span class="p">:</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

    <span class="n">responses</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">responses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>
</pre></div>
</div>
<p>Using the batch object directly:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">batch_requests</span><span class="p">()</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">responses</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">responses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
<p>Contract interactions can be included in batch requests by omitting the <code class="docutils literal notranslate"><span class="pre">call()</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">math_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">multiply7</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
</pre></div>
</div>
<p>Additionally, if you need to make multiple calls of the same function, you can add
a mapping of the function to its arguments:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">batch_requests</span><span class="p">()</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add_mapping</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="n">math_contract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">multiply7</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
        <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
    <span class="p">}</span>
<span class="p">)</span>
<span class="n">responses</span> <span class="o">=</span> <span class="n">batch</span><span class="o">.</span><span class="n">execute</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">responses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">execute</span></code> method returns a list of responses in the order they were included in
the batch.</p>
<p>If you need to abandon or rebuild a batch request, utilize the <code class="docutils literal notranslate"><span class="pre">clear</span></code> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">batch</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">batch_requests</span><span class="p">()</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">batch</span><span class="o">.</span><span class="n">_requests_info</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>

<span class="n">batch</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="k">assert</span> <span class="n">batch</span><span class="o">.</span><span class="n">_requests_info</span> <span class="o">==</span> <span class="p">[]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only read-only operations that exist within modules on the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> class
(e.g. <code class="docutils literal notranslate"><span class="pre">w3.eth</span></code>, <code class="docutils literal notranslate"><span class="pre">w3.net</span></code>) are supported by <code class="docutils literal notranslate"><span class="pre">batch_requests</span></code>.
Unsupported methods include:</p>
<ul class="simple">
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.subscribe" title="web3.eth.Eth.subscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">subscribe</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.unsubscribe" title="web3.eth.Eth.unsubscribe"><code class="xref py py-meth docutils literal notranslate"><span class="pre">unsubscribe</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.send_raw_transaction" title="web3.eth.Eth.send_raw_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_raw_transaction</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.sign_transaction" title="web3.eth.Eth.sign_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sign_transaction</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.sign" title="web3.eth.Eth.sign"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sign</span></code></a></p></li>
<li><p><a class="reference internal" href="index.html#web3.eth.Eth.sign_typed_data" title="web3.eth.Eth.sign_typed_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">sign_typed_data</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">w3.provider.make_request()</span></code>.</p></li>
</ul>
</div>
</div></blockquote>
<section id="async-batch-requests">
<h5>Async Batch Requests<a class="headerlink" href="#async-batch-requests" title="Link to this heading">ÔÉÅ</a></h5>
<p>If using one of the asynchronous providers, you‚Äôll need to make use of
the <code class="docutils literal notranslate"><span class="pre">async_execute</span></code> method and the <code class="docutils literal notranslate"><span class="pre">async</span></code> and <code class="docutils literal notranslate"><span class="pre">await</span></code> keywords as appropriate.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If performance is a concern, consider using <code class="docutils literal notranslate"><span class="pre">asyncio.gather()</span></code> with single
concurrent requests instead of an asynchronous batch request. It will generally be
the faster option due to the overhead of batching.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># context manager:</span>
<span class="k">async</span> <span class="k">with</span> <span class="n">w3</span><span class="o">.</span><span class="n">batch_requests</span><span class="p">()</span> <span class="k">as</span> <span class="n">batch</span><span class="p">:</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">4</span><span class="p">))</span>
    <span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>

    <span class="n">responses</span> <span class="o">=</span> <span class="k">await</span> <span class="n">batch</span><span class="o">.</span><span class="n">async_execute</span><span class="p">()</span>
    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">responses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span>

<span class="c1"># object:</span>
<span class="n">batch</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">batch_requests</span><span class="p">()</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="n">batch</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="n">responses</span> <span class="o">=</span> <span class="k">await</span> <span class="n">batch</span><span class="o">.</span><span class="n">async_execute</span><span class="p">()</span>
<span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">responses</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
</section>
</dd></dl>

</section>
<section id="encoding-and-decoding-helpers">
<span id="overview-type-conversions"></span><h4><a class="toc-backref" href="#id5" role="doc-backlink">Encoding and Decoding Helpers</a><a class="headerlink" href="#encoding-and-decoding-helpers" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.to_hex">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">to_hex</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">primitive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hexstr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.to_hex" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Takes a variety of inputs and returns it in its hexadecimal representation.
It follows the rules for converting to hex in the
<a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC#hex-value-encoding">JSON-RPC spec</a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;0x0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">&#39;0x1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="mh">0x0</span><span class="p">)</span>
<span class="go">&#39;0x0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="mh">0x000F</span><span class="p">)</span>
<span class="go">&#39;0xf&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">&#39;0x&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00\x0F</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">&#39;0x000f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="go">&#39;0x0&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&#39;0x1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="s1">&#39;0x000F&#39;</span><span class="p">)</span>
<span class="go">&#39;0x000f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="s1">&#39;000F&#39;</span><span class="p">)</span>
<span class="go">&#39;0x000f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">&#39;0x&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_hex</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;cowm√∂&#39;</span><span class="p">)</span>
<span class="go">&#39;0x636f776dc3b6&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.to_text">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">to_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">primitive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hexstr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.to_text" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Takes a variety of inputs and returns its string equivalent.
Text gets decoded as UTF-8.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_text</span><span class="p">(</span><span class="mh">0x636f776dc3b6</span><span class="p">)</span>
<span class="go">&#39;cowm√∂&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_text</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;cowm</span><span class="se">\xc3\xb6</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">&#39;cowm√∂&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_text</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="s1">&#39;0x636f776dc3b6&#39;</span><span class="p">)</span>
<span class="go">&#39;cowm√∂&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_text</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="s1">&#39;636f776dc3b6&#39;</span><span class="p">)</span>
<span class="go">&#39;cowm√∂&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_text</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;cowm√∂&#39;</span><span class="p">)</span>
<span class="go">&#39;cowm√∂&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.to_bytes">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">to_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">primitive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hexstr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.to_bytes" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Takes a variety of inputs and returns its bytes equivalent.
Text gets encoded as UTF-8.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">b&#39;\x00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="mh">0x000F</span><span class="p">)</span>
<span class="go">b&#39;\x0f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">b&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00\x0F</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">b&#39;\x00\x0f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="go">b&#39;\x00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="go">b&#39;\x01&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="s1">&#39;0x000F&#39;</span><span class="p">)</span>
<span class="go">b&#39;\x00\x0f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="s1">&#39;000F&#39;</span><span class="p">)</span>
<span class="go">b&#39;\x00\x0f&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="go">b&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_bytes</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;cowm√∂&#39;</span><span class="p">)</span>
<span class="go">b&#39;cowm\xc3\xb6&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.to_int">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">to_int</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">primitive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hexstr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.to_int" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Takes a variety of inputs and returns its integer equivalent.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_int</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_int</span><span class="p">(</span><span class="mh">0x000F</span><span class="p">)</span>
<span class="go">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_int</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00\x0F</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="go">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_int</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_int</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_int</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="s1">&#39;0x000F&#39;</span><span class="p">)</span>
<span class="go">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_int</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="s1">&#39;000F&#39;</span><span class="p">)</span>
<span class="go">15</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.to_json">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">to_json</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obj</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.to_json" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Takes a variety of inputs and returns its JSON equivalent.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;3&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_json</span><span class="p">({</span><span class="s1">&#39;one&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">})</span>
<span class="go">&#39;{&quot;one&quot;: 1}&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="currency-conversions">
<span id="overview-currency-conversions"></span><h4><a class="toc-backref" href="#id6" role="doc-backlink">Currency Conversions</a><a class="headerlink" href="#currency-conversions" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.to_wei">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">to_wei</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">currency</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.to_wei" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns the value in the denomination specified by the <code class="docutils literal notranslate"><span class="pre">currency</span></code> argument
converted to wei.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ether&#39;</span><span class="p">)</span>
<span class="go">1000000000000000000</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.from_wei">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">from_wei</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">currency</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.from_wei" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns the value in wei converted to the given currency. The value is returned
as a <code class="docutils literal notranslate"><span class="pre">Decimal</span></code> to ensure precision down to the wei.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">from_wei</span><span class="p">(</span><span class="mi">1000000000000000000</span><span class="p">,</span> <span class="s1">&#39;ether&#39;</span><span class="p">)</span>
<span class="go">Decimal(&#39;1&#39;)</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="addresses">
<span id="overview-addresses"></span><h4><a class="toc-backref" href="#id7" role="doc-backlink">Addresses</a><a class="headerlink" href="#addresses" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.is_address">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">is_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.is_address" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the value is one of the recognized address formats.</p>
<ul class="simple">
<li><p>Allows for both <code class="docutils literal notranslate"><span class="pre">0x</span></code> prefixed and non-prefixed values.</p></li>
<li><p>If the address contains mixed upper and lower cased characters this function also
checks if the address checksum is valid according to <a class="reference external" href="https://github.com/ethereum/EIPs/issues/55">EIP55</a></p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">is_address</span><span class="p">(</span><span class="s1">&#39;0xd3CdA913deB6f67967B99D67aCDFa1712C293601&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.is_checksum_address">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">is_checksum_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.is_checksum_address" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if the value is a valid <a class="reference external" href="https://github.com/ethereum/EIPs/issues/55">EIP55</a> checksummed address</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">is_checksum_address</span><span class="p">(</span><span class="s1">&#39;0xd3CdA913deB6f67967B99D67aCDFa1712C293601&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">is_checksum_address</span><span class="p">(</span><span class="s1">&#39;0xd3cda913deb6f67967b99d67acdfa1712c293601&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.to_checksum_address">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">to_checksum_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.to_checksum_address" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns the given address with an <a class="reference external" href="https://github.com/ethereum/EIPs/issues/55">EIP55</a> checksum.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">to_checksum_address</span><span class="p">(</span><span class="s1">&#39;0xd3cda913deb6f67967b99d67acdfa1712c293601&#39;</span><span class="p">)</span>
<span class="go">&#39;0xd3CdA913deB6f67967B99D67aCDFa1712C293601&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="cryptographic-hashing">
<span id="overview-hashing"></span><h4><a class="toc-backref" href="#id8" role="doc-backlink">Cryptographic Hashing</a><a class="headerlink" href="#cryptographic-hashing" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.keccak">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">keccak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">primitive</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hexstr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.keccak" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns the Keccak-256 of the given value. Text is encoded to UTF-8 before
computing the hash, just like Solidity. Any of the following are
valid and equivalent:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">keccak</span><span class="p">(</span><span class="mh">0x747874</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">keccak</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x74\x78\x74</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">keccak</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="s1">&#39;0x747874&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">keccak</span><span class="p">(</span><span class="n">hexstr</span><span class="o">=</span><span class="s1">&#39;747874&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">keccak</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s1">&#39;txt&#39;</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0xd7278090a36507640ea6b7a0034b69b0d240766fa3f98e3722be93c613b29d2e&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.Web3.solidity_keccak">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">solidity_keccak</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abi_types</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.Web3.solidity_keccak" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns the Keccak-256 as it would be computed by the solidity <code class="docutils literal notranslate"><span class="pre">keccak</span></code>
function on a <em>packed</em> ABI encoding of the <code class="docutils literal notranslate"><span class="pre">value</span></code> list contents.  The <code class="docutils literal notranslate"><span class="pre">abi_types</span></code>
argument should be a list of solidity type strings which correspond to each
of the provided values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">solidity_keccak</span><span class="p">([</span><span class="s1">&#39;bool&#39;</span><span class="p">],</span> <span class="p">[</span><span class="kc">True</span><span class="p">])</span>
<span class="go">HexBytes(&quot;0x5fe7f977e71dba2ea1a68e21057beebb9be2ac30c6410aa38d4f3fbe41dcffd2&quot;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">solidity_keccak</span><span class="p">([</span><span class="s1">&#39;uint8&#39;</span><span class="p">,</span> <span class="s1">&#39;uint8&#39;</span><span class="p">,</span> <span class="s1">&#39;uint8&#39;</span><span class="p">],</span> <span class="p">[</span><span class="mi">97</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">99</span><span class="p">])</span>
<span class="go">HexBytes(&quot;0x4e03657aea45a94fc7d47ba826c8d667c0d1e6e33a64a036ec44f58fa12d6c45&quot;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">solidity_keccak</span><span class="p">([</span><span class="s1">&#39;uint8[]&#39;</span><span class="p">],</span> <span class="p">[[</span><span class="mi">97</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">99</span><span class="p">]])</span>
<span class="go">HexBytes(&quot;0x233002c671295529bcc50b76a2ef2b0de2dac2d93945fca745255de1a9e4017e&quot;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">solidity_keccak</span><span class="p">([</span><span class="s1">&#39;address&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;0x49EdDD3769c0712032808D86597B84ac5c2F5614&quot;</span><span class="p">])</span>
<span class="go">HexBytes(&quot;0x2ff37b5607484cd4eecf6d13292e22bd6e5401eaffcc07e279583bc742c68882&quot;)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Web3</span><span class="o">.</span><span class="n">solidity_keccak</span><span class="p">([</span><span class="s1">&#39;address&#39;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;ethereumfoundation.eth&quot;</span><span class="p">])</span>
<span class="go">HexBytes(&quot;0x913c99ea930c78868f1535d34cd705ab85929b2eaaf70fcd09677ecd6e5d75e9&quot;)</span>
</pre></div>
</div>
<p>Comparable solidity usage:</p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">bytes32</span><span class="w"> </span><span class="nv">data1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">keccak256</span><span class="p">(</span>abi<span class="p">.</span>encodePacked<span class="p">(</span><span class="kt">true</span><span class="p">));</span>
assert<span class="p">(</span>data1<span class="w"> </span><span class="o">==</span><span class="w"> </span>hex<span class="s2">&quot;5fe7f977e71dba2ea1a68e21057beebb9be2ac30c6410aa38d4f3fbe41dcffd2&quot;</span><span class="p">);</span>
<span class="kt">bytes32</span><span class="w"> </span><span class="nv">data2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">keccak256</span><span class="p">(</span>abi<span class="p">.</span>encodePacked<span class="p">(</span><span class="kt">uint8</span><span class="p">(</span><span class="m m-Decimal">97</span><span class="p">),</span><span class="w"> </span><span class="kt">uint8</span><span class="p">(</span><span class="m m-Decimal">98</span><span class="p">),</span><span class="w"> </span><span class="kt">uint8</span><span class="p">(</span><span class="m m-Decimal">99</span><span class="p">)));</span>
assert<span class="p">(</span>data2<span class="w"> </span><span class="o">==</span><span class="w"> </span>hex<span class="s2">&quot;4e03657aea45a94fc7d47ba826c8d667c0d1e6e33a64a036ec44f58fa12d6c45&quot;</span><span class="p">);</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="check-encodability">
<h4><a class="toc-backref" href="#id9" role="doc-backlink">Check Encodability</a><a class="headerlink" href="#check-encodability" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.w3.is_encodable">
<span class="sig-prename descclassname"><span class="pre">w3.</span></span><span class="sig-name descname"><span class="pre">is_encodable</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.w3.is_encodable" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if a value can be encoded as the given type. Otherwise returns <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.auto.gethdev</span> <span class="kn">import</span> <span class="n">w3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;12&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="s1">&#39;0x1234&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="s1">&#39;1234&#39;</span><span class="p">)</span>  <span class="c1"># not 0x-prefixed, no assumptions will be made</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>  <span class="c1"># does not match specified bytes size</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;123&#39;</span><span class="p">)</span>  <span class="c1"># does not match specified bytes size</span>
<span class="go">False</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.w3.strict_bytes_type_checking">
<span class="sig-prename descclassname"><span class="pre">w3.</span></span><span class="sig-name descname"><span class="pre">strict_bytes_type_checking</span></span><a class="headerlink" href="#web3.w3.strict_bytes_type_checking" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Disable the stricter bytes type checking that is loaded by default. For more
examples, see <a class="reference internal" href="index.html#disable-strict-byte-check"><span class="std std-ref">Disabling Strict Checks for Bytes Types</span></a></p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.auto.gethdev</span> <span class="kn">import</span> <span class="n">w3</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;12&#39;</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span> <span class="c1"># not of exact size bytes2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span> <span class="o">=</span> <span class="kc">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># zero-padded, so encoded to: b&#39;1\x00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="c1"># re-enable it</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">strict_bytes_type_checking</span> <span class="o">=</span> <span class="kc">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">is_encodable</span><span class="p">(</span><span class="s1">&#39;bytes2&#39;</span><span class="p">,</span> <span class="sa">b</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="rpc-api-modules">
<h4><a class="toc-backref" href="#id10" role="doc-backlink">RPC API Modules</a><a class="headerlink" href="#rpc-api-modules" title="Link to this heading">ÔÉÅ</a></h4>
<p>Each <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance also exposes these namespaced API modules.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="web3.Web3.eth">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">eth</span></span><a class="headerlink" href="#web3.Web3.eth" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>See <a class="reference internal" href="#document-web3.eth"><span class="doc">web3.eth API</span></a></p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.Web3.geth">
<span class="sig-prename descclassname"><span class="pre">Web3.</span></span><span class="sig-name descname"><span class="pre">geth</span></span><a class="headerlink" href="#web3.Web3.geth" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>See <a class="reference internal" href="#document-web3.geth"><span class="doc">Geth API</span></a></p>
</dd></dl>

<p>These internal modules inherit from the <code class="docutils literal notranslate"><span class="pre">web3.module.Module</span></code> class which give them some configurations internal to the
web3.py library.</p>
</section>
<section id="custom-methods">
<h4><a class="toc-backref" href="#id11" role="doc-backlink">Custom Methods</a><a class="headerlink" href="#custom-methods" title="Link to this heading">ÔÉÅ</a></h4>
<p>You may add or overwrite methods within any module using the <code class="docutils literal notranslate"><span class="pre">attach_methods</span></code> function.
To create a property instead, set <code class="docutils literal notranslate"><span class="pre">is_property</span></code> to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">attach_methods</span><span class="p">({</span>
<span class="gp">... </span>   <span class="s1">&#39;example_method&#39;</span><span class="p">:</span> <span class="n">Method</span><span class="p">(</span>
<span class="gp">... </span>     <span class="s1">&#39;eth_example&#39;</span><span class="p">,</span>
<span class="gp">... </span>      <span class="n">mungers</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span>
<span class="gp">... </span>      <span class="n">request_formatters</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span>
<span class="gp">... </span>      <span class="n">result_formatters</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">],</span>
<span class="gp">... </span>      <span class="n">is_property</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>   <span class="p">),</span>
<span class="gp">... </span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">example_method</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="external-modules">
<h4><a class="toc-backref" href="#id12" role="doc-backlink">External Modules</a><a class="headerlink" href="#external-modules" title="Link to this heading">ÔÉÅ</a></h4>
<p>External modules can be used to introduce custom or third-party APIs to your <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance. External modules are simply
classes whose methods and properties can be made available within the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance. Optionally, the external module may
make use of the parent <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance by accepting it as the first argument within the <code class="docutils literal notranslate"><span class="pre">__init__</span></code> function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">ExampleModule</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">w3</span><span class="p">):</span>
<span class="gp">... </span>        <span class="bp">self</span><span class="o">.</span><span class="n">w3</span> <span class="o">=</span> <span class="n">w3</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">print_balance_of_shaq</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_balance</span><span class="p">(</span><span class="s1">&#39;shaq.eth&#39;</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Given the flexibility of external modules, use caution and only import modules from trusted third parties
and open source code you‚Äôve vetted!</p>
</div>
<p>Configuring external modules can occur either at instantiation of the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance or by making use of the
<code class="docutils literal notranslate"><span class="pre">attach_modules()</span></code> method. To instantiate the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance with external modules use the <code class="docutils literal notranslate"><span class="pre">external_modules</span></code>
keyword argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">HTTPProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">external_module_library</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">ModuleClass1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ModuleClass2</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ModuleClass3</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ModuleClass4</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ModuleClass5</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">HTTPProvider</span><span class="p">(</span><span class="n">provider_uri</span><span class="p">),</span>
<span class="gp">... </span>    <span class="n">external_modules</span><span class="o">=</span><span class="p">{</span>
<span class="gp">... </span>        <span class="s1">&#39;module1&#39;</span><span class="p">:</span> <span class="n">ModuleClass1</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;module2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">ModuleClass2</span><span class="p">,</span> <span class="p">{</span>
<span class="gp">... </span>            <span class="s1">&#39;submodule1&#39;</span><span class="p">:</span> <span class="n">ModuleClass3</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s1">&#39;submodule2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">ModuleClass4</span><span class="p">,</span> <span class="p">{</span>
<span class="gp">... </span>                <span class="s1">&#39;submodule2a&#39;</span><span class="p">:</span> <span class="n">ModuleClass5</span><span class="p">,</span>  <span class="c1"># submodule children may be nested further if necessary</span>
<span class="gp">... </span>            <span class="p">})</span>
<span class="gp">... </span>        <span class="p">})</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">)</span>

<span class="go"># `return_zero`, in this case, is an example attribute of the `ModuleClass1` object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">module1</span><span class="o">.</span><span class="n">return_zero</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">module2</span><span class="o">.</span><span class="n">submodule1</span><span class="o">.</span><span class="n">return_one</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">module2</span><span class="o">.</span><span class="n">submodule2</span><span class="o">.</span><span class="n">submodule2a</span><span class="o">.</span><span class="n">return_two</span><span class="p">()</span>
<span class="go">2</span>
</pre></div>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="web3.w3.attach_modules">
<span class="sig-prename descclassname"><span class="pre">w3.</span></span><span class="sig-name descname"><span class="pre">attach_modules</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">modules</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.w3.attach_modules" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">attach_modules()</span></code> method can be used to attach external modules after the <code class="docutils literal notranslate"><span class="pre">Web3</span></code> instance has been
instantiated.</p>
<p>Modules are attached via a <cite>dict</cite> with module names as the keys. The values can either be the module classes
themselves, if there are no submodules, or two-item tuples with the module class as the 0th index and a similarly
built <cite>dict</cite> containing the submodule information as the 1st index. This pattern may be repeated as necessary.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span><span class="p">,</span> <span class="n">HTTPProvider</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">external_module_library</span> <span class="kn">import</span> <span class="p">(</span>
<span class="gp">... </span>    <span class="n">ModuleClass1</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ModuleClass2</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ModuleClass3</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ModuleClass4</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">ModuleClass5</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="n">HTTPProvider</span><span class="p">(</span><span class="n">provider_uri</span><span class="p">))</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">attach_modules</span><span class="p">({</span>
<span class="gp">... </span>    <span class="s1">&#39;module1&#39;</span><span class="p">:</span> <span class="n">ModuleClass1</span><span class="p">,</span>  <span class="c1"># the module class itself may be used for a single module with no submodules</span>
<span class="gp">... </span>    <span class="s1">&#39;module2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">ModuleClass2</span><span class="p">,</span> <span class="p">{</span>  <span class="c1"># a tuple with module class and corresponding submodule dict may be used for modules with submodules</span>
<span class="gp">... </span>        <span class="s1">&#39;submodule1&#39;</span><span class="p">:</span> <span class="n">ModuleClass3</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s1">&#39;submodule2&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">ModuleClass4</span><span class="p">,</span> <span class="p">{</span>  <span class="c1"># this pattern may be repeated as necessary</span>
<span class="gp">... </span>            <span class="s1">&#39;submodule2a&#39;</span><span class="p">:</span> <span class="n">ModuleClass5</span><span class="p">,</span>
<span class="gp">... </span>        <span class="p">})</span>
<span class="gp">... </span>    <span class="p">})</span>
<span class="gp">... </span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">module1</span><span class="o">.</span><span class="n">return_zero</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">module2</span><span class="o">.</span><span class="n">submodule1</span><span class="o">.</span><span class="n">return_one</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">module2</span><span class="o">.</span><span class="n">submodule2</span><span class="o">.</span><span class="n">submodule2a</span><span class="o">.</span><span class="n">return_two</span><span class="p">()</span>
<span class="go">2</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<span id="document-web3.eth"></span><section id="module-web3.eth">
<span id="web3-eth-api"></span><span id="web3-eth"></span><h3>web3.eth API<a class="headerlink" href="#module-web3.eth" title="Link to this heading">ÔÉÅ</a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="web3.eth.Eth">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">web3.eth.</span></span><span class="sig-name descname"><span class="pre">Eth</span></span><a class="headerlink" href="#web3.eth.Eth" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<p>The <code class="docutils literal notranslate"><span class="pre">web3.eth</span></code> object exposes the following properties and methods to
interact with the RPC APIs under the <code class="docutils literal notranslate"><span class="pre">eth_</span></code> namespace.</p>
<p>By default, when a property or method returns a mapping of keys to values, it
will return an <code class="docutils literal notranslate"><span class="pre">AttributeDict</span></code> which acts like a <code class="docutils literal notranslate"><span class="pre">dict</span></code> but you can
access the keys as attributes and cannot modify its fields. For example,
you can find the latest block number in these two ways:</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">block</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
<span class="go">AttributeDict({</span>
<span class="go">  &#39;hash&#39;: &#39;0xe8ad537a261e6fff80d551d8d087ee0f2202da9b09b64d172a5f45e818eb472a&#39;,</span>
<span class="go">  &#39;number&#39;: 4022281,</span>
<span class="go">  # ... etc ...</span>
<span class="go">})</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="p">[</span><span class="s1">&#39;number&#39;</span><span class="p">]</span>
<span class="go">4022281</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">.</span><span class="n">number</span>
<span class="go">4022281</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">block</span><span class="o">.</span><span class="n">number</span> <span class="o">=</span> <span class="mi">4022282</span>
<span class="go">Traceback # ... etc ...</span>
<span class="go">TypeError: This data is immutable -- create a copy instead of modifying</span>
</pre></div>
</div>
</div></blockquote>
<p>This feature is available via the <code class="docutils literal notranslate"><span class="pre">AttributeDictMiddleware</span></code> which is a default
middleware.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Accessing an <code class="docutils literal notranslate"><span class="pre">AttributeDict</span></code> property via attribute will break type hinting. If
typing is crucial for your application, accessing via key / value, as well as
removing the <code class="docutils literal notranslate"><span class="pre">AttributeDictMiddleware</span></code> altogether, may be desired.</p>
</div>
<section id="properties">
<h4>Properties<a class="headerlink" href="#properties" title="Link to this heading">ÔÉÅ</a></h4>
<p>The following properties are available on the <code class="docutils literal notranslate"><span class="pre">web3.eth</span></code> namespace.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="web3.eth.Eth.default_account">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">default_account</span></span><a class="headerlink" href="#web3.eth.Eth.default_account" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The ethereum address that will be used as the default <code class="docutils literal notranslate"><span class="pre">from</span></code> address for
all transactions. Defaults to empty.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.eth.Eth.default_block">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">default_block</span></span><a class="headerlink" href="#web3.eth.Eth.default_block" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The default block number that will be used for any RPC methods that accept
a block identifier. Defaults to <code class="docutils literal notranslate"><span class="pre">'latest'</span></code>.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.eth.Eth.syncing">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">syncing</span></span><a class="headerlink" href="#web3.eth.Eth.syncing" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_syncing</span></code> RPC Method</p></li>
</ul>
<p>Returns either <code class="docutils literal notranslate"><span class="pre">False</span></code> if the node is not syncing or a dictionary
showing sync status.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">syncing</span>
<span class="go">AttributeDict({</span>
<span class="go">    &#39;currentBlock&#39;: 2177557,</span>
<span class="go">    &#39;highestBlock&#39;: 2211611,</span>
<span class="go">    &#39;knownStates&#39;: 0,</span>
<span class="go">    &#39;pulledStates&#39;: 0,</span>
<span class="go">    &#39;startingBlock&#39;: 2177365,</span>
<span class="go">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.eth.Eth.max_priority_fee">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">max_priority_fee</span></span><a class="headerlink" href="#web3.eth.Eth.max_priority_fee" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_maxPriorityFeePerGas</span></code> RPC Method</p></li>
</ul>
<p>Returns a suggestion for a max priority fee for dynamic fee transactions in Wei.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">max_priority_fee</span>
<span class="go">2000000000</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.eth.Eth.gas_price">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">gas_price</span></span><a class="headerlink" href="#web3.eth.Eth.gas_price" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_gasPrice</span></code> RPC Method</p></li>
</ul>
<p>Returns the current gas price in Wei.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">gas_price</span>
<span class="go">20000000000</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.eth.Eth.accounts">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">accounts</span></span><a class="headerlink" href="#web3.eth.Eth.accounts" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_accounts</span></code> RPC Method</p></li>
</ul>
<p>Returns the list of known accounts.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span>
<span class="go">[&#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.eth.Eth.block_number">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">block_number</span></span><a class="headerlink" href="#web3.eth.Eth.block_number" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_blockNumber</span></code> RPC Method</p></li>
</ul>
<p>Returns the number of the most recent block</p>
<p>Alias for <a class="reference internal" href="#web3.eth.Eth.get_block_number" title="web3.eth.Eth.get_block_number"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_block_number()</span></code></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">block_number</span>
<span class="go">2206939</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="web3.eth.Eth.chain_id">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">chain_id</span></span><a class="headerlink" href="#web3.eth.Eth.chain_id" title="Link to this definition">ÔÉÅ</a></dt>
<dd><blockquote>
<div><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_chainId</span></code> RPC Method</p></li>
</ul>
<p>Returns an integer value for the currently configured ‚ÄúChain Id‚Äù value introduced in <a class="reference external" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md">EIP-155</a>. Returns <code class="docutils literal notranslate"><span class="pre">None</span></code> if no Chain Id is available.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">chain_id</span>
<span class="go">61</span>
</pre></div>
</div>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This property gets called frequently in validation middleware, but <cite>eth_chainId</cite>
is an allowed method for caching by default. Simply turn on request caching to
avoid repeated calls to this method.</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">cache_allowed_requests</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div></blockquote>
</div>
</dd></dl>

</section>
<section id="methods">
<span id="web3-eth-methods"></span><h4>Methods<a class="headerlink" href="#methods" title="Link to this heading">ÔÉÅ</a></h4>
<p>The following methods are available on the <code class="docutils literal notranslate"><span class="pre">web3.eth</span></code> namespace.</p>
<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_balance">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_balance</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">eth.default_block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_balance" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getBalance</span></code> RPC Method</p></li>
</ul>
<p>Returns the balance of the given <code class="docutils literal notranslate"><span class="pre">account</span></code> at the block specified by
<code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">account</span></code> may be a checksum address or an ENS name</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_balance</span><span class="p">(</span><span class="s1">&#39;0xd3CdA913deB6f67967B99D67aCDFa1712C293601&#39;</span><span class="p">)</span>
<span class="go">77320681768999138915</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_block_number">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_block_number</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_block_number" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_blockNumber</span></code> RPC Method</p></li>
</ul>
<p>Returns the number of the most recent block.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block_number</span><span class="p">()</span>
<span class="go">2206939</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_storage_at">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_storage_at</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">position</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">eth.default_block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_storage_at" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getStorageAt</span></code> RPC Method</p></li>
</ul>
<p>Returns the value from a storage position for the given <code class="docutils literal notranslate"><span class="pre">account</span></code> at the
block specified by <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">account</span></code> may be a checksum address or an ENS name</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_storage_at</span><span class="p">(</span><span class="s1">&#39;0x6C8f2A135f6ed072DE4503Bd7C4999a1a17F824B&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;0x00000000000000000000000000000000000000000000000000120a0b063499d4&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.blob_base_fee">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">blob_base_fee</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.blob_base_fee" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Fetches the expected base fee for blobs in the next block.</p>
<ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_blobBaseFee</span></code> RPC Method</p></li>
</ul>
<p>Returns the expected base fee in Wei.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">blob_base_fee</span><span class="p">()</span>
<span class="go">537070730</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_proof">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_proof</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">positions</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">eth.default_block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_proof" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getProof</span></code> RPC Method</p></li>
</ul>
<p>Returns the values from an array of storage positions for the given <code class="docutils literal notranslate"><span class="pre">account</span></code> at the
block specified by <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">account</span></code> may be a checksum address or an ENS name</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_proof</span><span class="p">(</span><span class="s1">&#39;0x6C8f2A135f6ed072DE4503Bd7C4999a1a17F824B&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">3391</span><span class="p">)</span>
<span class="go">AttributeDict({</span>
<span class="go">    &#39;address&#39;: &#39;0x4CB06C43fcdABeA22541fcF1F856A6a296448B6c&#39;,</span>
<span class="go">    &#39;accountProof&#39;: [&#39;0xf90211a03841a7ddd65c70c94b8efa79190d00f0ab134b26f18dcad508f60a7e74559d0ba0464b07429a05039e22931492d6c6251a860c018ea390045d596b1ac11b5c7aa7a011f4b89823a03c9c4b5a8ab079ee1bc0e2a83a508bb7a5dc7d7fb4f2e95d3186a0b5f7c51c3b2d51d97f171d2b38a4df1a7c0acc5eb0de46beeff4d07f5ed20e19a0b591a2ce02367eda31cf2d16eca7c27fd44dbf0864b64ea8259ad36696eb2a04a02b646a7552b8392ae94263757f699a27d6e9176b4c06b9fc0a722f893b964795a02df05d68bceb88eebf68aafde61d10ab942097afc1c58b8435ffd3895358a742a0c2f16143c4d1db03276c433696dddb3e9f3b113bcd854b127962262e98f43147a0828820316cc02bfefd899aba41340659fd06df1e0a0796287ec2a4110239f6d2a050496598670b04df7bbff3718887fa36437d6d8c7afb4eff86f76c5c7097dcc4a0c14e9060c6b3784e35b9e6ae2ad2984142a75910ccc89eb89dc1e2f44b6c58c2a009804db571d0ce07913e1cbacc4f1dc4fb8265c936f5c612e3a47e91c64d8e9fa063d96f38b3cb51b1665c6641e25ffe24803f2941e5df79942f6a53b7169647e4a0899f71abb18c6c956118bf567fac629b75f7e9526873e429d3d8abb6dbb58021a00fd717235298742623c0b3cafb3e4bd86c0b5ab1f71097b4dd19f3d6925d758da0096437146c16097f2ccc1d3e910d65a4132803baee2249e72c8bf0bcaaeb37e580&#39;,</span>
<span class="go">                     &#39;0xf90151a097b17a89fd2c03ee98cb6459c08f51b269da5cee46650e84470f62bf83b43efe80a03b269d284a4c3cf8f8deacafb637c6d77f607eec8d75e8548d778e629612310480a01403217a7f1416830c870087c524dabade3985271f6f369a12b010883c71927aa0f592ac54c879817389663be677166f5022943e2fe1b52617a1d15c2f353f27dda0ac8d015a9e668f5877fcc391fae33981c00577096f0455b42df4f8e8089ece24a003ba34a13e2f2fb4bf7096540b42d4955c5269875b9cf0f7b87632585d44c9a580a0b179e3230b07db294473ae57f0170262798f8c551c755b5665ace1215cee10ca80a0552d24252639a6ae775aa1df700ffb92c2411daea7286f158d44081c8172d072a0772a87d08cf38c4c68bfde770968571abd16fd3835cb902486bd2e515d53c12d80a0413774f3d900d2d2be7a3ad999ffa859a471dc03a74fb9a6d8275455f5496a548080&#39;,</span>
<span class="go">                     &#39;0xf869a020d13b52a61d3c1325ce3626a51418adebd6323d4840f1bdd93906359d11c933b846f8440180a01ab7c0b0a2a4bbb5a1495da8c142150891fc64e0c321e1feb70bd5f881951f7ea0551332d96d085185ab4019ad8bcf89c45321e136c261eb6271e574a2edf1461f&#39;</span>
<span class="go">                     ],</span>
<span class="go">    &#39;balance&#39;: 0,</span>
<span class="go">    &#39;codeHash&#39;: &#39;0x551332d96d085185ab4019ad8bcf89c45321e136c261eb6271e574a2edf1461f&#39;,</span>
<span class="go">    &#39;nonce&#39;: 1,</span>
<span class="go">    &#39;storageHash&#39;: &#39;0x1ab7c0b0a2a4bbb5a1495da8c142150891fc64e0c321e1feb70bd5f881951f7e&#39;,</span>
<span class="go">    &#39;storageProof&#39;: [</span>
<span class="go">        AttributeDict({</span>
<span class="go">            &#39;key&#39;: &#39;0x00&#39;,</span>
<span class="go">            &#39;value&#39;: &#39;0x48656c6c6f00000000000000000000000000000000000000000000000000000a&#39;,</span>
<span class="go">            &#39;proof&#39;: [&#39;0xf9019180a01ace80e7bed79fbadbe390876bd1a7d9770edf9462049ef8f4b555d05715d53ea049347a3c2eac6525a3fd7e3454dab19d73b4adeb9aa27d29493b9843f3f88814a085079b4abcd07fd4a5d6c52d35f4c4574aecc85830e90c478ca8c18fcbe590de80a02e3f8ad7ea29e784007f51852b9c3e470aef06b11bac32586a8b691134e4c27da064d2157a14bc31f195f73296ea4dcdbe7698edbf3ca81c44bf7730179d98d94ca09e7dc2597c9b7f72ddf84d7eebb0fe2a2fa2ab54fe668cd14fee44d9b40b1a53a0aa5d4acc7ac636d16bc9655556770bc325e1901fb62dc53770ef9110009e080380a0d5fde962bd2fb5326ddc7a9ca7fe0ee47c5bb3227f838b6d73d3299c22457596a08691410eff46b88f929ef649ea25025f62a5362ca8dc8876e5e1f4fc8e79256d80a0673e88d3a8a4616f676793096b5ae87cff931bd20fb8dd466f97809a1126aad8a08b774a45c2273553e2daf4bbc3a8d44fb542ea29b6f125098f79a4d211b3309ca02fed3139c1791269acb9365eddece93e743900eba6b42a6a8614747752ba268f80&#39;,</span>
<span class="go">                      &#39;0xf891808080a0c7d094301e0c54da37b696d85f72de5520b224ab2cf4f045d8db1a3374caf0488080a0fc5581783bfe27fab9423602e1914d719fd71433e9d7dd63c95fe7e58d10c9c38080a0c64f346fc7a21f6679cba8abdf37ca2de8c4fcd8f8bcaedb261b5f77627c93908080808080a0ddef2936a67a3ac7d3d4ff15a935a45f2cc4976c8f0310aed85daf763780e2b480&#39;,</span>
<span class="go">                      &#39;0xf843a0200decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563a1a048656c6c6f00000000000000000000000000000000000000000000000000000a&#39;</span>
<span class="go">                      ]</span>
<span class="go">        })</span>
<span class="go">    ]</span>
<span class="go">})</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Merkle proof verification using py-trie.</p></li>
</ul>
<p>The following example verifies that the values returned in the <code class="docutils literal notranslate"><span class="pre">AttributeDict</span></code>
are included in the state of given trie <code class="docutils literal notranslate"><span class="pre">root</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">eth_utils</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">keccak</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">import</span> <span class="nn">rlp</span>
<span class="kn">from</span> <span class="nn">rlp.sedes</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">Binary</span><span class="p">,</span>
    <span class="n">big_endian_int</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">trie</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">HexaryTrie</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">web3._utils.encoding</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">pad_bytes</span><span class="p">,</span>
<span class="p">)</span>

<span class="k">def</span> <span class="nf">format_proof_nodes</span><span class="p">(</span><span class="n">proof</span><span class="p">):</span>
    <span class="n">trie_proof</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">rlp_node</span> <span class="ow">in</span> <span class="n">proof</span><span class="p">:</span>
        <span class="n">trie_proof</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rlp</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="nb">bytes</span><span class="p">(</span><span class="n">rlp_node</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">trie_proof</span>

<span class="k">def</span> <span class="nf">verify_eth_get_proof</span><span class="p">(</span><span class="n">proof</span><span class="p">,</span> <span class="n">root</span><span class="p">):</span>
    <span class="n">trie_root</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">fixed_length</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="n">allow_empty</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">hash32</span> <span class="o">=</span> <span class="n">Binary</span><span class="o">.</span><span class="n">fixed_length</span><span class="p">(</span><span class="mi">32</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">_Account</span><span class="p">(</span><span class="n">rlp</span><span class="o">.</span><span class="n">Serializable</span><span class="p">):</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">(</span><span class="s1">&#39;nonce&#39;</span><span class="p">,</span> <span class="n">big_endian_int</span><span class="p">),</span>
                    <span class="p">(</span><span class="s1">&#39;balance&#39;</span><span class="p">,</span> <span class="n">big_endian_int</span><span class="p">),</span>
                    <span class="p">(</span><span class="s1">&#39;storage&#39;</span><span class="p">,</span> <span class="n">trie_root</span><span class="p">),</span>
                    <span class="p">(</span><span class="s1">&#39;code_hash&#39;</span><span class="p">,</span> <span class="n">hash32</span><span class="p">)</span>
                <span class="p">]</span>
    <span class="n">acc</span> <span class="o">=</span> <span class="n">_Account</span><span class="p">(</span>
        <span class="n">proof</span><span class="o">.</span><span class="n">nonce</span><span class="p">,</span> <span class="n">proof</span><span class="o">.</span><span class="n">balance</span><span class="p">,</span> <span class="n">proof</span><span class="o">.</span><span class="n">storageHash</span><span class="p">,</span> <span class="n">proof</span><span class="o">.</span><span class="n">codeHash</span>
    <span class="p">)</span>
    <span class="n">rlp_account</span> <span class="o">=</span> <span class="n">rlp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">acc</span><span class="p">)</span>
    <span class="n">trie_key</span> <span class="o">=</span> <span class="n">keccak</span><span class="p">(</span><span class="nb">bytes</span><span class="o">.</span><span class="n">fromhex</span><span class="p">(</span><span class="n">proof</span><span class="o">.</span><span class="n">address</span><span class="p">[</span><span class="mi">2</span><span class="p">:]))</span>

    <span class="k">assert</span> <span class="n">rlp_account</span> <span class="o">==</span> <span class="n">HexaryTrie</span><span class="o">.</span><span class="n">get_from_proof</span><span class="p">(</span>
        <span class="n">root</span><span class="p">,</span> <span class="n">trie_key</span><span class="p">,</span> <span class="n">format_proof_nodes</span><span class="p">(</span><span class="n">proof</span><span class="o">.</span><span class="n">accountProof</span><span class="p">)</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Failed to verify account proof </span><span class="si">{</span><span class="n">proof</span><span class="o">.</span><span class="n">address</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">for</span> <span class="n">storage_proof</span> <span class="ow">in</span> <span class="n">proof</span><span class="o">.</span><span class="n">storageProof</span><span class="p">:</span>
        <span class="n">trie_key</span> <span class="o">=</span> <span class="n">keccak</span><span class="p">(</span><span class="n">pad_bytes</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00</span><span class="s1">&#39;</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="n">storage_proof</span><span class="o">.</span><span class="n">key</span><span class="p">))</span>
        <span class="n">root</span> <span class="o">=</span> <span class="n">proof</span><span class="o">.</span><span class="n">storageHash</span>
        <span class="k">if</span> <span class="n">storage_proof</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x00</span><span class="s1">&#39;</span><span class="p">:</span>
            <span class="n">rlp_value</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">rlp_value</span> <span class="o">=</span> <span class="n">rlp</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="n">storage_proof</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">rlp_value</span> <span class="o">==</span> <span class="n">HexaryTrie</span><span class="o">.</span><span class="n">get_from_proof</span><span class="p">(</span>
            <span class="n">root</span><span class="p">,</span> <span class="n">trie_key</span><span class="p">,</span> <span class="n">format_proof_nodes</span><span class="p">(</span><span class="n">storage_proof</span><span class="o">.</span><span class="n">proof</span><span class="p">)</span>
        <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Failed to verify storage proof </span><span class="si">{</span><span class="n">storage_proof</span><span class="o">.</span><span class="n">key</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="k">return</span> <span class="kc">True</span>

<span class="n">block</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">3391</span><span class="p">)</span>
<span class="n">proof</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_proof</span><span class="p">(</span><span class="s1">&#39;0x6C8f2A135f6ed072DE4503Bd7C4999a1a17F824B&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="mi">3391</span><span class="p">)</span>
<span class="k">assert</span> <span class="n">verify_eth_get_proof</span><span class="p">(</span><span class="n">proof</span><span class="p">,</span> <span class="n">block</span><span class="o">.</span><span class="n">stateRoot</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_code">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_code</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">eth.default_block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_code" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getCode</span></code> RPC Method</p></li>
</ul>
<p>Returns the bytecode for the given <code class="docutils literal notranslate"><span class="pre">account</span></code> at the block specified by
<code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">account</span></code> may be a checksum address or an ENS name</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># For a contract address.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_code</span><span class="p">(</span><span class="s1">&#39;0x6C8f2A135f6ed072DE4503Bd7C4999a1a17F824B&#39;</span><span class="p">)</span>
<span class="s1">&#39;0x6060604052361561027c5760e060020a60003504630199.....&#39;</span>
<span class="c1"># For a private key address.</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_code</span><span class="p">(</span><span class="s1">&#39;0xd3CdA913deB6f67967B99D67aCDFa1712C293601&#39;</span><span class="p">)</span>
<span class="s1">&#39;0x&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_block">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">eth.default_block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_transactions</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_block" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getBlockByNumber</span></code> or <code class="docutils literal notranslate"><span class="pre">eth_getBlockByHash</span></code> RPC Methods</p></li>
</ul>
<p>Returns the block specified by <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.  Delegates to
<code class="docutils literal notranslate"><span class="pre">eth_getBlockByNumber</span></code> if <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> is an integer or one of
the predefined block parameters <code class="docutils literal notranslate"><span class="pre">'latest',</span> <span class="pre">'earliest',</span> <span class="pre">'pending',</span>
<span class="pre">'safe',</span> <span class="pre">'finalized'</span></code> - otherwise delegates to <code class="docutils literal notranslate"><span class="pre">eth_getBlockByHash</span></code>.
Throws <code class="docutils literal notranslate"><span class="pre">BlockNotFound</span></code> error if the block is not found.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">full_transactions</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code> then the <code class="docutils literal notranslate"><span class="pre">'transactions'</span></code> key will
contain full transactions objects.  Otherwise it will be an array of
transaction hashes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">2000000</span><span class="p">)</span>
<span class="go">AttributeDict({</span>
<span class="go">    &#39;difficulty&#39;: 49824742724615,</span>
<span class="go">    &#39;extraData&#39;: &#39;0xe4b883e5bda9e7a59ee4bb99e9b1bc&#39;,</span>
<span class="go">    &#39;gasLimit&#39;: 4712388,</span>
<span class="go">    &#39;gasUsed&#39;: 21000,</span>
<span class="go">    &#39;hash&#39;: &#39;0xc0f4906fea23cf6f3cce98cb44e8e1449e455b28d684dfa9ff65426495584de6&#39;,</span>
<span class="go">    &#39;logsBloom&#39;: &#39;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&#39;,</span>
<span class="go">    &#39;miner&#39;: &#39;0x61c808d82a3ac53231750dadc13c777b59310bd9&#39;,</span>
<span class="go">    &#39;nonce&#39;: &#39;0x3b05c6d5524209f1&#39;,</span>
<span class="go">    &#39;number&#39;: 2000000,</span>
<span class="go">    &#39;parentHash&#39;: &#39;0x57ebf07eb9ed1137d41447020a25e51d30a0c272b5896571499c82c33ecb7288&#39;,</span>
<span class="go">    &#39;receiptsRoot&#39;: &#39;0x84aea4a7aad5c5899bd5cfc7f309cc379009d30179316a2a7baa4a2ea4a438ac&#39;,</span>
<span class="go">    &#39;sha3Uncles&#39;: &#39;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&#39;,</span>
<span class="go">    &#39;size&#39;: 650,</span>
<span class="go">    &#39;stateRoot&#39;: &#39;0x96dbad955b166f5119793815c36f11ffa909859bbfeb64b735cca37cbf10bef1&#39;,</span>
<span class="go">    &#39;timestamp&#39;: 1470173578,</span>
<span class="go">    &#39;totalDifficulty&#39;: 44010101827705409388,</span>
<span class="go">    &#39;transactions&#39;: [&#39;0xc55e2b90168af6972193c1f86fa4d7d7b31a29c156665d15b9cd48618b5177ef&#39;],</span>
<span class="go">    &#39;transactionsRoot&#39;: &#39;0xb31f174d27b99cdae8e746bd138a01ce60d8dd7b224f7c60845914def05ecc58&#39;,</span>
<span class="go">    &#39;uncles&#39;: [],</span>
<span class="go">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_block_transaction_count">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_block_transaction_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_block_transaction_count" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getBlockTransactionCountByNumber</span></code> or
<code class="docutils literal notranslate"><span class="pre">eth_getBlockTransactionCountByHash</span></code> RPC Methods</p></li>
</ul>
<p>Returns the number of transactions in the block specified by
<code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.  Delegates to
<code class="docutils literal notranslate"><span class="pre">eth_getBlockTransactionCountByNumber</span></code> if <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> is an
integer or one of the predefined block parameters <code class="docutils literal notranslate"><span class="pre">'latest',</span> <span class="pre">'earliest',</span>
<span class="pre">'pending',</span> <span class="pre">'safe',</span> <span class="pre">'finalized'</span></code>,
otherwise delegates to <code class="docutils literal notranslate"><span class="pre">eth_getBlockTransactionCountByHash</span></code>.
Throws <code class="docutils literal notranslate"><span class="pre">BlockNotFoundError</span></code> if transactions are not found.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block_transaction_count</span><span class="p">(</span><span class="mi">46147</span><span class="p">)</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_block_transaction_count</span><span class="p">(</span><span class="s1">&#39;0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd&#39;</span><span class="p">)</span>  <span class="c1"># block 46147</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_uncle_by_block">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_uncle_by_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">uncle_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_uncle_by_block" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getUncleByBlockHashAndIndex</span></code> or
<code class="docutils literal notranslate"><span class="pre">eth_getUncleByBlockNumberAndIndex</span></code> RPC methods</p></li>
</ul>
<p>Returns the uncle at the index specified by <code class="docutils literal notranslate"><span class="pre">uncle_index</span></code>
from the block specified by <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.  Delegates to
<code class="docutils literal notranslate"><span class="pre">eth_getUncleByBlockNumberAndIndex</span></code> if <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> is an
integer or one of the predefined block parameters <code class="docutils literal notranslate"><span class="pre">'latest',</span> <span class="pre">'earliest',</span>
<span class="pre">'pending'</span></code>, otherwise delegates to
<code class="docutils literal notranslate"><span class="pre">eth_getUncleByBlockHashAndIndex</span></code>. Throws <code class="docutils literal notranslate"><span class="pre">BlockNotFound</span></code> if the block is not found.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_uncle_by_block</span><span class="p">(</span><span class="mi">56160</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">AttributeDict({</span>
<span class="go">  &#39;author&#39;: &#39;0xbe4532e1b1db5c913cf553be76180c1777055403&#39;,</span>
<span class="go">  &#39;difficulty&#39;: &#39;0x17dd9ca0afe&#39;,</span>
<span class="go">  &#39;extraData&#39;: &#39;0x476574682f686261722f76312e302e312f6c696e75782f676f312e342e32&#39;,</span>
<span class="go">  &#39;gasLimit&#39;: &#39;0x2fefd8&#39;,</span>
<span class="go">  &#39;gasUsed&#39;: &#39;0x0&#39;,</span>
<span class="go">  &#39;hash&#39;: &#39;0xc78c35720d930f9ef34b4e6fb9d02ffec936f9b02a8f0fa858456e4afd4d5614&#39;,</span>
<span class="go">  &#39;logsBloom&#39;:&#39;0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&#39;,</span>
<span class="go">  &#39;miner&#39;: &#39;0xbe4532e1b1db5c913cf553be76180c1777055403&#39;,</span>
<span class="go">  &#39;mixHash&#39;: &#39;0x041e14603f35a82f6023802fec96ef760433292434a39787514f140950597e5e&#39;,</span>
<span class="go">  &#39;nonce&#39;: &#39;0x5d2b7e3f1af09995&#39;,</span>
<span class="go">  &#39;number&#39;: &#39;0xdb5e&#39;,</span>
<span class="go">  &#39;parentHash&#39;: &#39;0xcc30e8a9b15c548d5bf113c834143a8f0e1909fbfea96b2a208dc154293a78cf&#39;,</span>
<span class="go">  &#39;receiptsRoot&#39;: &#39;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&#39;,</span>
<span class="go">  &#39;sealFields&#39;: [&#39;0xa0041e14603f35a82f6023802fec96ef760433292434a39787514f140950597e5e&#39;, &#39;0x885d2b7e3f1af09995&#39;],</span>
<span class="go">  &#39;sha3Uncles&#39;: &#39;0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347&#39;,</span>
<span class="go">  &#39;size&#39;: None, &#39;stateRoot&#39;: &#39;0x8ce2b1bf8e25a06a8ca34c647ff5fd0fa48ac725cc07f657ae1645ab8ef68c91&#39;,</span>
<span class="go">  &#39;timestamp&#39;: &#39;0x55c6a972&#39;,</span>
<span class="go">  &#39;totalDifficulty&#39;: &#39;0xce4c4f0a0b810b&#39;,</span>
<span class="go">  &#39;transactions&#39;: [],</span>
<span class="go">  &#39;transactionsRoot&#39;: &#39;0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421&#39;,</span>
<span class="go">  &#39;uncles&#39;: []</span>
<span class="go">})</span>

<span class="go"># You can also refer to the block by hash:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_uncle_by_block</span><span class="p">(</span><span class="s1">&#39;0x685b2226cbf6e1f890211010aa192bf16f0a0cba9534264a033b023d7367b845&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">AttributeDict({</span>
<span class="go">    ...</span>
<span class="go">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_uncle_count">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_uncle_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_uncle_count" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getUncleCountByBlockHash</span></code> or
<code class="docutils literal notranslate"><span class="pre">eth_getUncleCountByBlockNumber</span></code> RPC methods</p></li>
</ul>
<p>Returns the (integer) number of uncles associated with the block specified by <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.
Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getUncleCountByBlockNumber</span></code> if <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> is an
integer or one of the predefined block parameters <code class="docutils literal notranslate"><span class="pre">'latest',</span> <span class="pre">'earliest',</span>
<span class="pre">'pending'</span></code>, otherwise delegates to <code class="docutils literal notranslate"><span class="pre">eth_getUncleCountByBlockHash</span></code>.
Throws <code class="docutils literal notranslate"><span class="pre">BlockNotFound</span></code> if the block is not found.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_uncle_count</span><span class="p">(</span><span class="mi">56160</span><span class="p">)</span>
<span class="go">1</span>

<span class="go"># You can also refer to the block by hash:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_uncle_count</span><span class="p">(</span><span class="s1">&#39;0x685b2226cbf6e1f890211010aa192bf16f0a0cba9534264a033b023d7367b845&#39;</span><span class="p">)</span>
<span class="go">1</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_transaction">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction_hash</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getTransactionByHash</span></code> RPC Method</p></li>
</ul>
<p>Returns the transaction specified by <code class="docutils literal notranslate"><span class="pre">transaction_hash</span></code>. If the transaction cannot be found throws <code class="xref py py-class docutils literal notranslate"><span class="pre">web3.exceptions.TransactionNotFound</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction</span><span class="p">(</span><span class="s1">&#39;0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060&#39;</span><span class="p">)</span>
<span class="go">AttributeDict({&#39;blockHash&#39;: HexBytes(&#39;0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd&#39;),</span>
<span class="go">    &#39;blockNumber&#39;: 46147,</span>
<span class="go">    &#39;from&#39;: &#39;0xA1E4380A3B1f749673E270229993eE55F35663b4&#39;,</span>
<span class="go">    &#39;gas&#39;: 21000,</span>
<span class="go">    &#39;gasPrice&#39;: 50000000000000,</span>
<span class="go">    &#39;hash&#39;: HexBytes(&#39;0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060&#39;),</span>
<span class="go">    &#39;input&#39;: HexBytes(&#39;0x&#39;),</span>
<span class="go">    &#39;nonce&#39;: 0,</span>
<span class="go">     &#39;r&#39;: HexBytes(&#39;0x88ff6cf0fefd94db46111149ae4bfc179e9b94721fffd821d38d16464b3f71d0&#39;),</span>
<span class="go">     &#39;s&#39;: HexBytes(&#39;0x45e0aff800961cfce805daef7016b9b675c137a6a41a548f7b60a3484c06a33a&#39;),</span>
<span class="go">     &#39;to&#39;: &#39;0x5DF9B87991262F6BA471F09758CDE1c0FC1De734&#39;,</span>
<span class="go">     &#39;transactionIndex&#39;: 0,</span>
<span class="go">     &#39;type&#39;: 0,</span>
<span class="go">     &#39;v&#39;: 28,</span>
<span class="go">     &#39;value&#39;: 31337</span>
<span class="go">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_raw_transaction">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_raw_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction_hash</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_raw_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getRawTransactionByHash</span></code> RPC Method</p></li>
</ul>
<p>Returns the raw form of transaction specified by <code class="docutils literal notranslate"><span class="pre">transaction_hash</span></code>.</p>
<p>If no transaction is found, <code class="docutils literal notranslate"><span class="pre">TransactionNotFound</span></code> is raised.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_raw_transaction</span><span class="p">(</span><span class="s1">&#39;0x86fbfe56cce542ff0a2a2716c31675a0c9c43701725c4a751d20ee2ddf8a733d&#39;</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0xf86907843b9aca0082520894dc544d1aa88ff8bbd2f2aec754b1f1e99e1812fd018086eecac466e115a0f9db4e25484b28f486b247a372708d4cd0643fc63e604133afac577f4cc1eab8a044841d84e799d4dc18ba146816a937e8a0be8bc296bd8bb8aea126de5e627e06&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_transaction_by_block">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_transaction_by_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transaction_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_transaction_by_block" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getTransactionByBlockNumberAndIndex</span></code> or
<code class="docutils literal notranslate"><span class="pre">eth_getTransactionByBlockHashAndIndex</span></code> RPC Methods</p></li>
</ul>
<p>Returns the transaction at the index specified by <code class="docutils literal notranslate"><span class="pre">transaction_index</span></code>
from the block specified by <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.  Delegates to
<code class="docutils literal notranslate"><span class="pre">eth_getTransactionByBlockNumberAndIndex</span></code> if <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> is an
integer or one of the predefined block parameters <code class="docutils literal notranslate"><span class="pre">'latest',</span> <span class="pre">'earliest',</span>
<span class="pre">'pending',</span> <span class="pre">'safe',</span> <span class="pre">'finalized'</span></code>, otherwise delegates to
<code class="docutils literal notranslate"><span class="pre">eth_getTransactionByBlockHashAndIndex</span></code>.
If a transaction is not found at specified arguments, throws <code class="xref py py-class docutils literal notranslate"><span class="pre">web3.exceptions.TransactionNotFound</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_by_block</span><span class="p">(</span><span class="mi">46147</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">AttributeDict({</span>
<span class="go">    &#39;blockHash&#39;: &#39;0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd&#39;,</span>
<span class="go">    &#39;blockNumber&#39;: 46147,</span>
<span class="go">    &#39;from&#39;: &#39;0xA1E4380A3B1f749673E270229993eE55F35663b4&#39;,</span>
<span class="go">    &#39;gas&#39;: 21000,</span>
<span class="go">    &#39;gasPrice&#39;: None,</span>
<span class="go">    &#39;hash&#39;: &#39;0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060&#39;,</span>
<span class="go">    &#39;input&#39;: &#39;0x&#39;,</span>
<span class="go">    &#39;maxFeePerGas&#39;: 2000000000,</span>
<span class="go">    &#39;maxPriorityFeePerGas&#39;: 1000000000,</span>
<span class="go">    &#39;nonce&#39;: 0,</span>
<span class="go">    &#39;to&#39;: &#39;0x5DF9B87991262F6BA471F09758CDE1c0FC1De734&#39;,</span>
<span class="go">    &#39;transactionIndex&#39;: 0,</span>
<span class="go">    &#39;value&#39;: 31337,</span>
<span class="go">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_by_block</span><span class="p">(</span><span class="s1">&#39;0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">AttributeDict({</span>
<span class="go">    &#39;blockHash&#39;: &#39;0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd&#39;,</span>
<span class="go">    &#39;blockNumber&#39;: 46147,</span>
<span class="go">    &#39;from&#39;: &#39;0xA1E4380A3B1f749673E270229993eE55F35663b4&#39;,</span>
<span class="go">    &#39;gas&#39;: 21000,</span>
<span class="go">    &#39;gasPrice&#39;: None,</span>
<span class="go">    &#39;hash&#39;: &#39;0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060&#39;,</span>
<span class="go">    &#39;input&#39;: &#39;0x&#39;,</span>
<span class="go">    &#39;maxFeePerGas&#39;: 2000000000,</span>
<span class="go">    &#39;maxPriorityFeePerGas&#39;: 1000000000,</span>
<span class="go">    &#39;nonce&#39;: 0,</span>
<span class="go">    &#39;to&#39;: &#39;0x5DF9B87991262F6BA471F09758CDE1c0FC1De734&#39;,</span>
<span class="go">    &#39;transactionIndex&#39;: 0,</span>
<span class="go">    &#39;value&#39;: 31337,</span>
<span class="go">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_raw_transaction_by_block">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_raw_transaction_by_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transaction_index</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_raw_transaction_by_block" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getRawTransactionByBlockNumberAndIndex</span></code> or
<code class="docutils literal notranslate"><span class="pre">eth_getRawTransactionByBlockHashAndIndex</span></code> RPC Methods</p></li>
</ul>
<p>Returns the raw transaction at the index specified by <code class="docutils literal notranslate"><span class="pre">transaction_index</span></code>
from the block specified by <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.  Delegates to
<code class="docutils literal notranslate"><span class="pre">eth_getRawTransactionByBlockNumberAndIndex</span></code> if <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> is an
integer or one of the predefined block parameters <code class="docutils literal notranslate"><span class="pre">'latest',</span> <span class="pre">'earliest',</span>
<span class="pre">'pending',</span> <span class="pre">'safe',</span> <span class="pre">'finalized'</span></code>, otherwise delegates to
<code class="docutils literal notranslate"><span class="pre">eth_getRawTransactionByBlockHashAndIndex</span></code>.
If a transaction is not found at specified arguments, throws <code class="xref py py-class docutils literal notranslate"><span class="pre">web3.exceptions.TransactionNotFound</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_raw_transaction_by_block</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0x02f87582053901843b9aca00843b9aca008301d8a894e2dfcfa89a45abdc3de91f7a2844b276b8451d2e888ac7230489e8000080c001a028dcd2e11682288c00237f377280bc6a478a6b27e9c2d745262152add1b1dfcba04e7a33b7ce2a37fc3cd3af7bdc7d7beff721664d56508defa188df35afd77c2c&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_raw_transaction_by_block</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0x02f87582053901843b9aca00843b9aca008301d8a894e2dfcfa89a45abdc3de91f7a2844b276b8451d2e888ac7230489e8000080c001a028dcd2e11682288c00237f377280bc6a478a6b27e9c2d745262152add1b1dfcba04e7a33b7ce2a37fc3cd3af7bdc7d7beff721664d56508defa188df35afd77c2c&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_raw_transaction_by_block</span><span class="p">(</span><span class="s1">&#39;0xca609fb606a04ce6aaec76415cd0b9d8c2bc83ad2a4d17db7fd403ee7d97bf40&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0x02f87582053901843b9aca00843b9aca008301d8a894e2dfcfa89a45abdc3de91f7a2844b276b8451d2e888ac7230489e8000080c001a028dcd2e11682288c00237f377280bc6a478a6b27e9c2d745262152add1b1dfcba04e7a33b7ce2a37fc3cd3af7bdc7d7beff721664d56508defa188df35afd77c2c&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.wait_for_transaction_receipt">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">wait_for_transaction_receipt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction_hash</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">120</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">poll_latency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.wait_for_transaction_receipt" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Waits for the transaction specified by <code class="docutils literal notranslate"><span class="pre">transaction_hash</span></code> to be included in a block, then
returns its transaction receipt.</p>
<p>Optionally, specify a <code class="docutils literal notranslate"><span class="pre">timeout</span></code> in seconds. If timeout elapses before the transaction
is added to a block, then <a class="reference internal" href="#web3.eth.Eth.wait_for_transaction_receipt" title="web3.eth.Eth.wait_for_transaction_receipt"><code class="xref py py-meth docutils literal notranslate"><span class="pre">wait_for_transaction_receipt()</span></code></a> raises a
<code class="xref py py-class docutils literal notranslate"><span class="pre">web3.exceptions.TimeExhausted</span></code> exception.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">wait_for_transaction_receipt</span><span class="p">(</span><span class="s1">&#39;0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060&#39;</span><span class="p">)</span>
<span class="go"># If transaction is not yet in a block, time passes, while the thread sleeps...</span>
<span class="go"># ...</span>
<span class="go"># Then when the transaction is added to a block, its receipt is returned:</span>
<span class="go">AttributeDict({</span>
<span class="go">    &#39;blockHash&#39;: HexBytes(&#39;0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd&#39;),</span>
<span class="go">    &#39;blockNumber&#39;: 46147,</span>
<span class="go">    &#39;contractAddress&#39;: None,</span>
<span class="go">    &#39;cumulativeGasUsed&#39;: 21000,</span>
<span class="go">    &#39;from&#39;: &#39;0xA1E4380A3B1f749673E270229993eE55F35663b4&#39;,</span>
<span class="go">    &#39;gasUsed&#39;: 21000,</span>
<span class="go">    &#39;logs&#39;: [],</span>
<span class="go">    &#39;logsBloom&#39;: HexBytes(&#39;0x000000000000000000000000000000000000000000000000...0000&#39;),</span>
<span class="go">    &#39;status&#39;: 1,</span>
<span class="go">    &#39;to&#39;: &#39;0x5DF9B87991262F6BA471F09758CDE1c0FC1De734&#39;,</span>
<span class="go">    &#39;transactionHash&#39;: HexBytes(&#39;0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060&#39;),</span>
<span class="go">    &#39;transactionIndex&#39;: 0,</span>
<span class="go">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_transaction_receipt">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_transaction_receipt</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction_hash</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_transaction_receipt" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getTransactionReceipt</span></code> RPC Method</p></li>
</ul>
<p>Returns the transaction receipt specified by <code class="docutils literal notranslate"><span class="pre">transaction_hash</span></code>.  If the transaction cannot be found throws <code class="xref py py-class docutils literal notranslate"><span class="pre">web3.exceptions.TransactionNotFound</span></code>.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">status</span></code> in response equals 1 the transaction was successful. If it is equals 0 the transaction was reverted by EVM.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_receipt</span><span class="p">(</span><span class="s1">&#39;0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060&#39;</span><span class="p">)</span>  <span class="c1"># not yet mined</span>
<span class="go">Traceback # ... etc ...</span>
<span class="go">TransactionNotFound: Transaction with hash: 0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060 not found.</span>

<span class="go"># wait for it to be mined....</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_receipt</span><span class="p">(</span><span class="s1">&#39;0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060&#39;</span><span class="p">)</span>
<span class="go">AttributeDict({</span>
<span class="go">    &#39;blockHash&#39;: &#39;0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd&#39;,</span>
<span class="go">    &#39;blockNumber&#39;: 46147,</span>
<span class="go">    &#39;contractAddress&#39;: None,</span>
<span class="go">    &#39;cumulativeGasUsed&#39;: 21000,</span>
<span class="go">    &#39;from&#39;: &#39;0xA1E4380A3B1f749673E270229993eE55F35663b4&#39;,</span>
<span class="go">    &#39;gasUsed&#39;: 21000,</span>
<span class="go">    &#39;logs&#39;: [],</span>
<span class="go">    &#39;logsBloom&#39;: &#39;0x000000000000000000000000000000000000000000000000...0000&#39;,</span>
<span class="go">    &#39;status&#39;: 1, # 0 or 1</span>
<span class="go">    &#39;to&#39;: &#39;0x5DF9B87991262F6BA471F09758CDE1c0FC1De734&#39;,</span>
<span class="go">    &#39;transactionHash&#39;: &#39;0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060&#39;,</span>
<span class="go">    &#39;transactionIndex&#39;: 0,</span>
<span class="go">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_transaction_count">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_transaction_count</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">web3.eth.default_block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_transaction_count" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getTransactionCount</span></code> RPC Method</p></li>
</ul>
<p>Returns the number of transactions that have been sent from <code class="docutils literal notranslate"><span class="pre">account</span></code> as
of the block specified by <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">account</span></code> may be a checksum address or an ENS name</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_transaction_count</span><span class="p">(</span><span class="s1">&#39;0xd3CdA913deB6f67967B99D67aCDFa1712C293601&#39;</span><span class="p">)</span>
<span class="go">340</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.send_transaction">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">send_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.send_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_sendTransaction</span></code> RPC Method</p></li>
</ul>
<p>Signs and sends the given <code class="docutils literal notranslate"><span class="pre">transaction</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">transaction</span></code> parameter should be a dictionary with the following fields.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">from</span></code>: <code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">or</span> <span class="pre">text</span></code>, checksum address or ENS name - (optional, default:
<code class="docutils literal notranslate"><span class="pre">web3.eth.defaultAccount</span></code>) The address the transaction is sent from.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">to</span></code>: <code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">or</span> <span class="pre">text</span></code>, checksum address or ENS name - (optional when creating new
contract) The address the transaction is directed to.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gas</span></code>: <code class="docutils literal notranslate"><span class="pre">integer</span></code> - (optional) Integer of the gas
provided for the transaction execution. It will return unused gas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code>: <code class="docutils literal notranslate"><span class="pre">integer</span> <span class="pre">or</span> <span class="pre">hex</span></code> - (optional) maximum amount you‚Äôre willing
to pay, inclusive of <code class="docutils literal notranslate"><span class="pre">baseFeePerGas</span></code> and <code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code>. The difference
between <code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code> and <code class="docutils literal notranslate"><span class="pre">baseFeePerGas</span> <span class="pre">+</span> <span class="pre">maxPriorityFeePerGas</span></code> is refunded
to the user.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code>: <code class="docutils literal notranslate"><span class="pre">integer</span> <span class="pre">or</span> <span class="pre">hex</span></code> - (optional) the part of the fee
that goes to the miner</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gasPrice</span></code>: <code class="docutils literal notranslate"><span class="pre">integer</span></code> - Integer of the gasPrice used for each paid gas
<strong>LEGACY</strong> - unless you have a good reason to use <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code>, use <code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code>
and <code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">value</span></code>: <code class="docutils literal notranslate"><span class="pre">integer</span></code> - (optional) Integer of the value send with this
transaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data</span></code>: <code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">or</span> <span class="pre">text</span></code> - The compiled code of a contract OR the hash
of the invoked method signature and encoded parameters. For details see
<a class="reference external" href="https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI">Ethereum Contract ABI</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nonce</span></code>: <code class="docutils literal notranslate"><span class="pre">integer</span></code> - (optional) Integer of a nonce. This allows to
overwrite your own pending transactions that use the same nonce.</p></li>
</ul>
<p>If the <code class="docutils literal notranslate"><span class="pre">transaction</span></code> specifies a <code class="docutils literal notranslate"><span class="pre">data</span></code> value but does not specify
<code class="docutils literal notranslate"><span class="pre">gas</span></code> then the <code class="docutils literal notranslate"><span class="pre">gas</span></code> value will be populated using the
<a class="reference internal" href="#web3.eth.Eth.estimate_gas" title="web3.eth.Eth.estimate_gas"><code class="xref py py-meth docutils literal notranslate"><span class="pre">estimate_gas()</span></code></a> function with an additional buffer of <code class="docutils literal notranslate"><span class="pre">100000</span></code>
gas up to the <code class="docutils literal notranslate"><span class="pre">gasLimit</span></code> of the latest block.  In the event that the
value returned by <a class="reference internal" href="#web3.eth.Eth.estimate_gas" title="web3.eth.Eth.estimate_gas"><code class="xref py py-meth docutils literal notranslate"><span class="pre">estimate_gas()</span></code></a> method is greater than the
<code class="docutils literal notranslate"><span class="pre">gasLimit</span></code> a <code class="docutils literal notranslate"><span class="pre">ValueError</span></code> will be raised.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># simple example (web3.py and / or client determines gas and fees, typically defaults to a dynamic fee transaction post London fork)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">({</span>
  <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;</span><span class="p">,</span>
  <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
  <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">12345</span>
<span class="p">})</span>

<span class="c1"># Dynamic fee transaction, introduced by EIP-1559:</span>
<span class="n">HexBytes</span><span class="p">(</span><span class="s1">&#39;0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">({</span>
  <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;</span><span class="p">,</span>
  <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
  <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">,</span>
  <span class="s1">&#39;gas&#39;</span><span class="p">:</span> <span class="mi">21000</span><span class="p">,</span>
  <span class="s1">&#39;maxFeePerGas&#39;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="s1">&#39;gwei&#39;</span><span class="p">),</span>
  <span class="s1">&#39;maxPriorityFeePerGas&#39;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;gwei&#39;</span><span class="p">),</span>
<span class="p">})</span>
<span class="n">HexBytes</span><span class="p">(</span><span class="s1">&#39;0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331&#39;</span><span class="p">)</span>

<span class="c1"># Legacy transaction (less efficient)</span>
<span class="n">HexBytes</span><span class="p">(</span><span class="s1">&#39;0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">({</span>
  <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;</span><span class="p">,</span>
  <span class="s1">&#39;from&#39;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
  <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">,</span>
  <span class="s1">&#39;gas&#39;</span><span class="p">:</span> <span class="mi">21000</span><span class="p">,</span>
  <span class="s1">&#39;gasPrice&#39;</span><span class="p">:</span> <span class="n">web3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="s1">&#39;gwei&#39;</span><span class="p">),</span>
<span class="p">})</span>
<span class="n">HexBytes</span><span class="p">(</span><span class="s1">&#39;0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.sign_transaction">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">sign_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.sign_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_signTransaction</span></code> RPC Method.</p></li>
</ul>
<p>Returns a transaction that‚Äôs been signed by the node‚Äôs private key, but not yet submitted.
The signed tx can be submitted with <code class="docutils literal notranslate"><span class="pre">Eth.send_raw_transaction</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signed_txn</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span>
<span class="go">    nonce=w3.eth.get_transaction_count(w3.eth.accounts[0]),</span>
<span class="go">    maxFeePerGas=2000000000,</span>
<span class="go">    maxPriorityFeePerGas=1000000000,</span>
<span class="go">    gas=100000,</span>
<span class="go">    to=&#39;0xd3CdA913deB6f67967B99D67aCDFa1712C293601&#39;,</span>
<span class="go">    value=1,</span>
<span class="go">    data=b&#39;&#39;,</span>
<span class="go">    )</span>
<span class="go">)</span>
<span class="go">b&quot;\xf8d\x80\x85\x040\xe24\x00\x82R\x08\x94\xdcTM\x1a\xa8\x8f\xf8\xbb\xd2\xf2\xae\xc7T\xb1\xf1\xe9\x9e\x18\x12\xfd\x01\x80\x1b\xa0\x11\r\x8f\xee\x1d\xe5=\xf0\x87\x0en\xb5\x99\xed;\xf6\x8f\xb3\xf1\xe6,\x82\xdf\xe5\x97lF|\x97%;\x15\xa04P\xb7=*\xef \t\xf0&amp;\xbc\xbf\tz%z\xe7\xa3~\xb5\xd3\xb7=\xc0v\n\xef\xad+\x98\xe3&#39;&quot;  # noqa: E501</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.send_raw_transaction">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">send_raw_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.send_raw_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_sendRawTransaction</span></code> RPC Method</p></li>
</ul>
<p>Sends a signed and serialized transaction. Returns the transaction hash as a HexBytes object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">signed_txn</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">account</span><span class="o">.</span><span class="n">sign_transaction</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span>
<span class="go">    nonce=w3.eth.get_transaction_count(public_address_of_senders_account),</span>
<span class="go">    maxFeePerGas=3000000000,</span>
<span class="go">    maxPriorityFeePerGas=2000000000,</span>
<span class="go">    gas=100000,</span>
<span class="go">    to=&#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;,</span>
<span class="go">    value=12345,</span>
<span class="go">    data=b&#39;&#39;,</span>
<span class="go">    type=2,  # (optional) the type is now implicitly set based on appropriate transaction params</span>
<span class="go">    chainId=1,</span>
<span class="go">  ),</span>
<span class="go">  private_key_for_senders_account,</span>
<span class="go">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_raw_transaction</span><span class="p">(</span><span class="n">signed_txn</span><span class="o">.</span><span class="n">raw_transaction</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.replace_transaction">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">replace_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction_hash</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.replace_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_sendTransaction</span></code> RPC Method</p></li>
</ul>
<p>Sends a transaction that replaces the transaction with <code class="docutils literal notranslate"><span class="pre">transaction_hash</span></code>.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">transaction_hash</span></code> must be the hash of a pending transaction.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">new_transaction</span></code> parameter should be a dictionary with transaction fields
as required by <a class="reference internal" href="#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a>. It will be used to entirely
replace the transaction of <code class="docutils literal notranslate"><span class="pre">transaction_hash</span></code> without using any of the pending
transaction‚Äôs values.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">new_transaction</span></code> specifies a <code class="docutils literal notranslate"><span class="pre">nonce</span></code> value, it must match the pending
transaction‚Äôs nonce.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">new_transaction</span></code> specifies <code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code> and <code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code>
values, they must be greater than the pending transaction‚Äôs values for each field,
respectively.</p>
<ul class="simple">
<li><p>Legacy Transaction Support (Less Efficient - Not Recommended)</p></li>
</ul>
<p>If the pending transaction specified a <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> value (legacy transaction), the
<code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> value for the <code class="docutils literal notranslate"><span class="pre">new_transaction</span></code> must be greater than the pending
transaction‚Äôs <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code>.</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">new_transaction</span></code> does not specify any of <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code>, <code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code>, or
<code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code> values, one of the following will happen:</p>
<ul class="simple">
<li><p>If the pending transaction has a <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> value, this value will be used with a
multiplier of 1.125 - This is typically the minimum <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> increase a node requires
before it accepts a replacement transaction.</p></li>
<li><p>If a gas price strategy is set, the <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> value from the gas price
strategy(See <a class="reference internal" href="index.html#gas-price"><span class="std std-ref">Gas Price API</span></a>) will be used.</p></li>
<li><p>If none of the above, the client will ultimately decide appropriate values for <code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code>
and <code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code>. These will likely be default values and may result in an
unsuccessful replacement of the pending transaction.</p></li>
</ul>
<p>This method returns the transaction hash of the replacement transaction as a HexBytes object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tx</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">({</span>
<span class="go">        &#39;to&#39;: &#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;,</span>
<span class="go">        &#39;from&#39;: web3.eth.accounts[0],</span>
<span class="go">        &#39;value&#39;: 1000</span>
<span class="go">    })</span>
<span class="go">HexBytes(&#39;0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">replace_transaction</span><span class="p">(</span><span class="s1">&#39;0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331&#39;</span><span class="p">,</span> <span class="p">{</span>
<span class="go">        &#39;to&#39;: &#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;,</span>
<span class="go">        &#39;from&#39;: web3.eth.accounts[0],</span>
<span class="go">        &#39;value&#39;: 2000</span>
<span class="go">    })</span>
<span class="go">HexBytes(&#39;0x4177e670ec6431606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1528989&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.modify_transaction">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">modify_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction_hash</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">transaction_params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.modify_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_sendTransaction</span></code> RPC Method</p></li>
</ul>
<p>Sends a transaction that modifies the transaction with <code class="docutils literal notranslate"><span class="pre">transaction_hash</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">transaction_params</span></code> are keyword arguments that correspond to valid transaction
parameters as required by <a class="reference internal" href="#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a>. The parameter values
will override the pending transaction‚Äôs values to create the replacement transaction
to send.</p>
<p>The same validation and defaulting rules of <a class="reference internal" href="#web3.eth.Eth.replace_transaction" title="web3.eth.Eth.replace_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">replace_transaction()</span></code></a> apply.</p>
<p>This method returns the transaction hash of the newly modified transaction as a HexBytes object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tx</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">send_transaction</span><span class="p">({</span>
<span class="go">        &#39;to&#39;: &#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;,</span>
<span class="go">        &#39;from&#39;: web3.eth.accounts[0],</span>
<span class="go">        &#39;value&#39;: 1000</span>
<span class="go">    })</span>
<span class="go">HexBytes(&#39;0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">modify_transaction</span><span class="p">(</span><span class="s1">&#39;0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
<span class="go">HexBytes(&#39;0xec6434e6701771606e55d6b4ca35a1a6b75ee3d73315145a921026d15299d05&#39;)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.sign">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">sign</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hexstr</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">text</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.sign" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_sign</span></code> RPC Method</p></li>
</ul>
<p>Caller must specify exactly one of: <code class="docutils literal notranslate"><span class="pre">data</span></code>, <code class="docutils literal notranslate"><span class="pre">hexstr</span></code>, or <code class="docutils literal notranslate"><span class="pre">text</span></code>.</p>
<p>Signs the given data with the private key of the given <code class="docutils literal notranslate"><span class="pre">account</span></code>.
The account must be unlocked.</p>
<p><code class="docutils literal notranslate"><span class="pre">account</span></code> may be a checksum address or an ENS name</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span>
<span class="go">      &#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;,</span>
<span class="go">      text=&#39;some-text-t√∂-sign&#39;)</span>
<span class="go">&#39;0x1a8bbe6eab8c72a219385681efefe565afd3accee35f516f8edf5ae82208fbd45a58f9f9116d8d88ba40fcd29076d6eada7027a3b412a9db55a0164547810cc401&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span>
<span class="go">      &#39;0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD&#39;,</span>
<span class="go">      data=b&#39;some-text-t\xc3\xb6-sign&#39;)</span>
<span class="go">&#39;0x1a8bbe6eab8c72a219385681efefe565afd3accee35f516f8edf5ae82208fbd45a58f9f9116d8d88ba40fcd29076d6eada7027a3b412a9db55a0164547810cc401&#39;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span>
<span class="go">      &#39;0xd3CdA913deB6f67967B99D67aCDFa1712C293601&#39;,</span>
<span class="go">      hexstr=&#39;0x736f6d652d746578742d74c3b62d7369676e&#39;)</span>
<span class="go">&#39;0x1a8bbe6eab8c72a219385681efefe565afd3accee35f516f8edf5ae82208fbd45a58f9f9116d8d88ba40fcd29076d6eada7027a3b412a9db55a0164547810cc401&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.sign_typed_data">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">sign_typed_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">account</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">jsonMessage</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.sign_typed_data" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_signTypedData</span></code> RPC Method</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">eth_signTypedData</span></code> is not currently supported by any major client (Besu, Erigon, Geth, or Nethermind)</p>
</div>
<p>Please note that the <code class="docutils literal notranslate"><span class="pre">jsonMessage</span></code> argument is the loaded JSON Object
and <strong>NOT</strong> the JSON String itself.</p>
<p>Signs the <code class="docutils literal notranslate"><span class="pre">Structured</span> <span class="pre">Data</span></code> (or <code class="docutils literal notranslate"><span class="pre">Typed</span> <span class="pre">Data</span></code>) with the private key of the given <code class="docutils literal notranslate"><span class="pre">account</span></code>.
The account must be unlocked.</p>
<p><code class="docutils literal notranslate"><span class="pre">account</span></code> may be a checksum address or an ENS name</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.call">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">call</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">web3.eth.default_block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ccip_read_enabled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.call" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_call</span></code> RPC Method</p></li>
</ul>
<p>Executes the given transaction locally without creating a new transaction
on the blockchain.  Returns the return value of the executed contract.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">transaction</span></code> parameter is handled in the same manner as the
<a class="reference internal" href="#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">setVar</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">transact</span><span class="p">()</span>
<span class="go">HexBytes(&#39;0x79af0c7688afba7588c32a61565fd488c422da7b5773f95b242ea66d3d20afda&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">myContract</span><span class="o">.</span><span class="n">functions</span><span class="o">.</span><span class="n">getVar</span><span class="p">()</span><span class="o">.</span><span class="n">call</span><span class="p">()</span>
<span class="go">1</span>
<span class="go"># The above call equivalent to the raw call:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">call</span><span class="p">({</span><span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;gas&#39;</span><span class="p">:</span> <span class="mi">21736</span><span class="p">,</span> <span class="s1">&#39;maxFeePerGas&#39;</span><span class="p">:</span> <span class="mi">2000000000</span><span class="p">,</span> <span class="s1">&#39;maxPriorityFeePerGas&#39;</span><span class="p">:</span> <span class="mi">1000000000</span><span class="p">,</span> <span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;0xc305c901078781C232A2a521C2aF7980f8385ee9&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;0x477a5c98&#39;</span><span class="p">})</span>
<span class="go">HexBytes(&#39;0x0000000000000000000000000000000000000000000000000000000000000001&#39;)</span>
</pre></div>
</div>
<p>In most cases it is better to make contract function call through the <a class="reference internal" href="index.html#web3.contract.Contract" title="web3.contract.Contract"><code class="xref py py-class docutils literal notranslate"><span class="pre">web3.contract.Contract</span></code></a> interface.</p>
<p>Overriding state is a debugging feature available in Geth clients.
View their <a class="reference external" href="https://geth.ethereum.org/docs/rpc/ns-eth#3-object---state-override-set">usage documentation</a>
for a list of possible parameters.</p>
<p><a class="reference external" href="https://eips.ethereum.org/EIPS/eip-3668">EIP-3668</a> introduced support for the <code class="docutils literal notranslate"><span class="pre">OffchainLookup</span></code> revert / CCIP
Read support. In order to properly handle a call to a contract function that reverts with an <code class="docutils literal notranslate"><span class="pre">OffchainLookup</span></code>
error for offchain data retrieval, the <code class="docutils literal notranslate"><span class="pre">ccip_read_enabled</span></code> flag has been added to the <code class="docutils literal notranslate"><span class="pre">eth_call</span></code> method.
<code class="docutils literal notranslate"><span class="pre">ccip_read_enabled</span></code> is optional, yielding the default value for CCIP Read on calls to a global
<code class="docutils literal notranslate"><span class="pre">global_ccip_read_enabled</span></code> flag on the provider which is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> by default. This means CCIP Read is
enabled by default for calls, as is recommended in EIP-3668. Therefore, calls to contract functions that revert with
an <code class="docutils literal notranslate"><span class="pre">OffchainLookup</span></code> will be handled appropriately by default.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ccip_read_enabled</span></code> flag on the call will always override the value of the global flag on the provider for
explicit control over specific calls. If the flag on the call is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, the call will raise the
<code class="docutils literal notranslate"><span class="pre">OffchainLookup</span></code> instead of properly handling the exception according to EIP-3668. This may be useful for
‚Äúpreflighting‚Äù a transaction with a call (see <a class="reference internal" href="index.html#ccip-read-example"><span class="std std-ref">CCIP Read support for offchain lookup</span></a> within the examples section).</p>
<p>If the function called results in a <code class="docutils literal notranslate"><span class="pre">revert</span></code> error, a <code class="docutils literal notranslate"><span class="pre">ContractLogicError</span></code> will be raised.
If there is an error message with the error, web3.py attempts to parse the
message that comes back and return it to the user as the error string.
As of v6.3.0, the raw data is also returned and
can be accessed via the <code class="docutils literal notranslate"><span class="pre">data</span></code> attribute on <code class="docutils literal notranslate"><span class="pre">ContractLogicError</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.create_access_list">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">create_access_list</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">web3.eth.default_block</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.create_access_list" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_createAccessList</span></code> RPC Method</p></li>
</ul>
<p>This method creates an <a class="reference external" href="https://eips.ethereum.org/EIPS/eip-2930">EIP-2930</a> type <code class="docutils literal notranslate"><span class="pre">accessList</span></code> based on a given
<code class="docutils literal notranslate"><span class="pre">transaction</span></code>. The <code class="docutils literal notranslate"><span class="pre">accessList</span></code> contains all storage slots and addresses read and written by the transaction,
except for the sender account and the precompiles. This method uses the same <code class="docutils literal notranslate"><span class="pre">transaction</span></code> call object and
<code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> object as <a class="reference internal" href="#web3.eth.Eth.call" title="web3.eth.Eth.call"><code class="xref py py-meth docutils literal notranslate"><span class="pre">call()</span></code></a>. An <code class="docutils literal notranslate"><span class="pre">accessList</span></code> can be used to access contracts that
became inaccessible due to gas cost increases.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">transaction</span></code> parameter is handled in the same manner as the
<a class="reference internal" href="#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a> method.
The optional <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> parameter is a block_number or <code class="docutils literal notranslate"><span class="pre">latest</span></code> or <code class="docutils literal notranslate"><span class="pre">pending</span></code>. Default is <code class="docutils literal notranslate"><span class="pre">latest</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">create_access_list</span><span class="p">(</span>
<span class="gp">... </span>    <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;to&quot;</span><span class="p">:</span> <span class="n">to_checksum_address</span><span class="p">(</span><span class="s2">&quot;0xF0109fC8DF283027b6285cc889F5aA624EaC1F55&quot;</span><span class="p">),</span>
<span class="gp">... </span>        <span class="s2">&quot;gasPrice&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="o">**</span><span class="mi">11</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="s2">&quot;0x608060806080608155&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">},</span>
<span class="gp">... </span>    <span class="s2">&quot;pending&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">)</span>
<span class="go">AttributeDict({</span>
<span class="go">    &quot;accessList&quot;: [</span>
<span class="go">        AttributeDict({</span>
<span class="go">            &quot;address&quot;: &quot;0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe&quot;,</span>
<span class="go">            &quot;storageKeys&quot;: [</span>
<span class="go">                &quot;0x0000000000000000000000000000000000000000000000000000000000000003&quot;,</span>
<span class="go">                &quot;0x0000000000000000000000000000000000000000000000000000000000000007&quot;,</span>
<span class="go">            ]</span>
<span class="go">        }),</span>
<span class="go">        AttributeDict({</span>
<span class="go">            &quot;address&quot;: &quot;0xBB9bc244D798123fDe783fCc1C72d3Bb8C189413&quot;,</span>
<span class="go">            &quot;storageKeys&quot;: []</span>
<span class="go">        }),</span>
<span class="go">    ],</span>
<span class="go">    &quot;gasUsed&quot;: 21000</span>
<span class="go">})</span>
</pre></div>
</div>
<p>The method <code class="docutils literal notranslate"><span class="pre">eth_createAccessList</span></code> returns a list of addresses and storage keys used by the transaction, plus the gas
consumed when the <code class="docutils literal notranslate"><span class="pre">accessList</span></code> is included. Like <code class="docutils literal notranslate"><span class="pre">eth_estimateGas</span></code>, this is an estimation; the list could change when
the transaction is actually finalized. Adding an <code class="docutils literal notranslate"><span class="pre">accessList</span></code> to your transaction does not necessarily result in lower
gas usage compared to a transaction without an <code class="docutils literal notranslate"><span class="pre">accessList</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.fee_history">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">fee_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_count</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newest_block</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reward_percentiles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.fee_history" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_feeHistory</span></code> RPC Method</p></li>
</ul>
<p>Returns transaction fee data for up to 1,024 blocks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>block_count</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> or </em><em>hexstring</em>) ‚Äì The number of blocks in the requested range. Depending on the client, this
value should be either a <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> between 1 and 1024 or a hexstring.
Less than requested may be returned if not all blocks are available.</p></li>
<li><p><strong>newest_block</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a><em> or </em><em>BlockParams</em>) ‚Äì The newest, highest-numbered, block in the requested range. This value may be an
<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> or one of the predefined block parameters <code class="docutils literal notranslate"><span class="pre">'latest'</span></code>, <code class="docutils literal notranslate"><span class="pre">'earliest'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'pending'</span></code>.</p></li>
<li><p><strong>reward_percentiles</strong> (<em>List</em><em>[</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><em>float</em></a><em>] or </em><em>None</em>) ‚Äì <em>(optional)</em> A monotonically increasing list of percentile <a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">float</span></code></a> values to
sample from each block‚Äôs effective priority fees per gas in ascending order, weighted by gas used.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An <code class="docutils literal notranslate"><span class="pre">AttributeDict</span></code> containing the following keys:</p>
</dd>
</dl>
<ul class="simple">
<li><p><strong>oldestBlock</strong> <em>(int)</em> ‚Äì The oldest, lowest-numbered, block in the range requested as a <code class="docutils literal notranslate"><span class="pre">BlockNumber</span></code> type
with <a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">int</span></code></a> value.</p></li>
<li><p><strong>baseFeePerGas</strong> <em>(List[Wei])</em> ‚Äì An array of block base fees per gas. This includes the next block after the
newest of the returned range, because this value can be derived from the newest block. Zeroes are returned for
pre-EIP-1559 blocks.</p></li>
<li><p><strong>gasUsedRatio</strong> <em>(List[float])</em> ‚Äì An array of <code class="docutils literal notranslate"><span class="pre">gasUsed</span></code>/<code class="docutils literal notranslate"><span class="pre">gasLimit</span></code> float values for the requested blocks.</p></li>
<li><p><strong>reward</strong> <em>(List[List[Wei]])</em> ‚Äì <em>(optional)</em> A two-dimensional array of effective priority fees per gas at the
requested block percentiles.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">fee_history</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;latest&#39;</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">90</span><span class="p">])</span>
<span class="go">AttributeDict({</span>
<span class="go">    &#39;oldestBlock&#39;: 3,</span>
<span class="go">    &#39;reward&#39;: [[220, 7145389], [1000000, 6000213], [550, 550], [125, 12345678]],</span>
<span class="go">    &#39;baseFeePerGas&#39;: [202583058, 177634473, 155594425, 136217133, 119442408],</span>
<span class="go">    &#39;gasUsedRatio&#39;: [0.007390479689642084, 0.0036988514889990873, 0.0018512333048507866, 0.00741217041320997]</span>
<span class="go">})</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.estimate_gas">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">estimate_gas</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">block_identifier</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_override</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.estimate_gas" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_estimateGas</span></code> RPC Method</p></li>
</ul>
<p>Executes the given transaction locally without creating a new transaction
on the blockchain.  Returns amount of gas consumed by execution which can
be used as a gas estimate.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">transaction</span></code> and <code class="docutils literal notranslate"><span class="pre">block_identifier</span></code> parameters are handled in the
same manner as the <a class="reference internal" href="#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a> method.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">state_override</span></code> is useful when there is a chain of transaction calls.
It overrides state so that the gas estimate of a transaction is accurate in
cases where prior calls produce side effects.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">estimate_gas</span><span class="p">({</span><span class="s1">&#39;to&#39;</span><span class="p">:</span> <span class="s1">&#39;0xd3CdA913deB6f67967B99D67aCDFa1712C293601&#39;</span><span class="p">,</span> <span class="s1">&#39;from&#39;</span><span class="p">:</span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">accounts</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;value&#39;</span><span class="p">:</span> <span class="mi">12345</span><span class="p">})</span>
<span class="go">21000</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.generate_gas_price">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">generate_gas_price</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.generate_gas_price" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Uses the selected gas price strategy to calculate a gas price. This method
returns the gas price denominated in wei.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">transaction_params</span></code> argument is optional however some gas price strategies
may require it to be able to produce a gas price.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">generate_gas_price</span><span class="p">()</span>
<span class="go">20000000000</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For information about how gas price can be customized in web3 see
<a class="reference internal" href="index.html#gas-price"><span class="std std-ref">Gas Price API</span></a>.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.set_gas_price_strategy">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">set_gas_price_strategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gas_price_strategy</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.set_gas_price_strategy" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set the selected gas price strategy. It must be a method of the signature
<code class="docutils literal notranslate"><span class="pre">(web3,</span> <span class="pre">transaction_params)</span></code> and return a gas price denominated in wei.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.subscribe">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">subscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subscription_identifier</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subscription_params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.subscribe" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_subscribe</span></code> RPC Method</p></li>
</ul>
<p>Only available on persistent connection providers:
<a class="reference internal" href="index.html#web3.providers.persistent.WebSocketProvider" title="web3.providers.persistent.WebSocketProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketProvider</span></code></a> and
<a class="reference internal" href="index.html#web3.providers.persistent.AsyncIPCProvider" title="web3.providers.persistent.AsyncIPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncIPCProvider</span></code></a>.</p>
<p>Returns a subscription ID that can be used to track a particular subscription to, or unsubscribe from, an event.
For usage examples see the docs on <a class="reference internal" href="index.html#subscription-examples"><span class="std std-ref">Using Persistent Connection Providers</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">subscription_id</span> <span class="o">=</span> <span class="k">await</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s1">&#39;newHeaders&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subscription_id</span>
<span class="go">&#39;0xbd63bb89e7475591a0a6fc9014307bc4&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.unsubscribe">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">unsubscribe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subscription_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.unsubscribe" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_unsubscribe</span></code> RPC Method</p></li>
</ul>
<p>Only available on persistent connection providers:
<a class="reference internal" href="index.html#web3.providers.persistent.WebSocketProvider" title="web3.providers.persistent.WebSocketProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">WebSocketProvider</span></code></a> and
<a class="reference internal" href="index.html#web3.providers.persistent.AsyncIPCProvider" title="web3.providers.persistent.AsyncIPCProvider"><code class="xref py py-class docutils literal notranslate"><span class="pre">AsyncIPCProvider</span></code></a>.</p>
<p>Returns <code class="docutils literal notranslate"><span class="pre">True</span></code> if successfully unsubscribed. For usage examples see the docs on
<a class="reference internal" href="index.html#subscription-examples"><span class="std std-ref">Using Persistent Connection Providers</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">unsubscribe</span><span class="p">(</span><span class="n">subscription_id</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="filters">
<h4>Filters<a class="headerlink" href="#filters" title="Link to this heading">ÔÉÅ</a></h4>
<p>The following methods are available on the <code class="docutils literal notranslate"><span class="pre">web3.eth</span></code> object for interacting
with the filtering API.</p>
<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.filter">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.filter" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_newFilter</span></code>, <code class="docutils literal notranslate"><span class="pre">eth_newBlockFilter</span></code>, and
<code class="docutils literal notranslate"><span class="pre">eth_newPendingTransactionFilter</span></code> RPC Methods.</p></li>
</ul>
<p>This method delegates to one of three RPC methods depending on the value of
<code class="docutils literal notranslate"><span class="pre">filter_params</span></code>.</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">filter_params</span></code> is the string <code class="docutils literal notranslate"><span class="pre">'pending'</span></code> then a new filter is
registered using the <code class="docutils literal notranslate"><span class="pre">eth_newPendingTransactionFilter</span></code> RPC method.
This will create a new filter that will be called for each new unmined
transaction that the node receives.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">filter_params</span></code> is the string <code class="docutils literal notranslate"><span class="pre">'latest'</span></code> then a new filter is
registered using the <code class="docutils literal notranslate"><span class="pre">eth_newBlockFilter</span></code> RPC method.  This will create
a new filter that will be called each time the node receives a new block.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">filter_params</span></code> is a dictionary then a new filter is registered
using the <code class="docutils literal notranslate"><span class="pre">eth_newFilter</span></code> RPC method.  This will create a new filter
that will be called for all log entries that match the provided
<code class="docutils literal notranslate"><span class="pre">filter_params</span></code>.</p></li>
</ul>
<p>This method returns a <code class="docutils literal notranslate"><span class="pre">web3.utils.filters.Filter</span></code> object which can then
be used to either directly fetch the results of the filter or to register
callbacks which will be called with each result of the filter.</p>
<p>When creating a new log filter, the <code class="docutils literal notranslate"><span class="pre">filter_params</span></code> should be a
dictionary with the following keys. Note that the keys are camel-cased
strings, as is expected in a JSON-RPC request.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fromBlock</span></code>: <code class="docutils literal notranslate"><span class="pre">integer/tag</span></code> - (optional, default: ‚Äúlatest‚Äù) Integer
block number, or one of predefined block identifiers
‚Äúlatest‚Äù, ‚Äúpending‚Äù, ‚Äúearliest‚Äù, ‚Äúsafe‚Äù, or ‚Äúfinalized‚Äù.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">toBlock</span></code>: <code class="docutils literal notranslate"><span class="pre">integer/tag</span></code> - (optional, default: ‚Äúlatest‚Äù) Integer
block number, or one of predefined block identifiers
‚Äúlatest‚Äù, ‚Äúpending‚Äù, ‚Äúearliest‚Äù, ‚Äúsafe‚Äù, or ‚Äúfinalized‚Äù.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code>: <code class="docutils literal notranslate"><span class="pre">string</span></code> or list of <code class="docutils literal notranslate"><span class="pre">strings</span></code>, each 20 Bytes -
(optional) Contract address or a list of addresses from which logs should
originate.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">topics</span></code>: list of 32 byte <code class="docutils literal notranslate"><span class="pre">strings</span></code> or <code class="docutils literal notranslate"><span class="pre">null</span></code> - (optional) Array of
topics that should be used for filtering.  Topics are order-dependent.
This parameter can also be a list of topic lists in which case filtering
will match any of the provided topic arrays.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Though <code class="docutils literal notranslate"><span class="pre">&quot;latest&quot;</span></code> and <code class="docutils literal notranslate"><span class="pre">&quot;safe&quot;</span></code> block identifiers are not yet part of the
specifications for <code class="docutils literal notranslate"><span class="pre">eth_newFilter</span></code>, they are supported by web3.py and may or
may not yield expected results depending on the node being accessed.</p>
</div>
<p>See <a class="reference internal" href="#document-filters"><span class="doc">Events and Logs</span></a> for more information about filtering.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s1">&#39;latest&#39;</span><span class="p">)</span>
<span class="go">&lt;BlockFilter at 0x10b72dc28&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="s1">&#39;pending&#39;</span><span class="p">)</span>
<span class="go">&lt;TransactionFilter at 0x10b780340&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">({</span><span class="s1">&#39;fromBlock&#39;</span><span class="p">:</span> <span class="mi">1000000</span><span class="p">,</span> <span class="s1">&#39;toBlock&#39;</span><span class="p">:</span> <span class="mi">1000100</span><span class="p">,</span> <span class="s1">&#39;address&#39;</span><span class="p">:</span> <span class="s1">&#39;0x6C8f2A135f6ed072DE4503Bd7C4999a1a17F824B&#39;</span><span class="p">})</span>
<span class="go">&lt;LogFilter at 0x10b7803d8&gt;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_filter_changes">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_filter_changes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_filter_changes" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getFilterChanges</span></code> RPC Method.</p></li>
</ul>
<p>Returns all new entries which occurred since the last call to this method
for the given <code class="docutils literal notranslate"><span class="pre">filter_id</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">filter</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_filter_changes</span><span class="p">(</span><span class="nb">filter</span><span class="o">.</span><span class="n">filter_id</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">    {</span>
<span class="go">        &#39;address&#39;: &#39;0xDc3A9Db694BCdd55EBaE4A89B22aC6D12b3F0c24&#39;,</span>
<span class="go">        &#39;blockHash&#39;: &#39;0xb72256286ca528e09022ffd408856a73ef90e7216ac560187c6e43b4c4efd2f0&#39;,</span>
<span class="go">        &#39;blockNumber&#39;: 2217196,</span>
<span class="go">        &#39;data&#39;: &#39;0x0000000000000000000000000000000000000000000000000000000000000001&#39;,</span>
<span class="go">        &#39;logIndex&#39;: 0,</span>
<span class="go">        &#39;topics&#39;: [&#39;0xe65b00b698ba37c614af350761c735c5f4a82b4ab365a1f1022d49d9dfc8e930&#39;,</span>
<span class="go">        &#39;0x000000000000000000000000754c50465885f1ed1fa1a55b95ee8ecf3f1f4324&#39;,</span>
<span class="go">        &#39;0x296c7fb6ccafa3e689950b947c2895b07357c95b066d5cdccd58c301f41359a3&#39;],</span>
<span class="go">        &#39;transactionHash&#39;: &#39;0xfe1289fd3915794b99702202f65eea2e424b2f083a12749d29b4dd51f6dce40d&#39;,</span>
<span class="go">        &#39;transactionIndex&#39;: 1,</span>
<span class="go">    },</span>
<span class="go">    ...</span>
<span class="go">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_filter_logs">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_filter_logs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_filter_logs" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_getFilterLogs</span></code> RPC Method.</p></li>
</ul>
<p>Returns all entries for the given <code class="docutils literal notranslate"><span class="pre">filter_id</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">filter</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">get_filter_logs</span><span class="p">(</span><span class="nb">filter</span><span class="o">.</span><span class="n">filter_id</span><span class="p">)</span>
<span class="go">[</span>
<span class="go">    {</span>
<span class="go">        &#39;address&#39;: &#39;0xDc3A9Db694BCdd55EBaE4A89B22aC6D12b3F0c24&#39;,</span>
<span class="go">        &#39;blockHash&#39;: &#39;0xb72256286ca528e09022ffd408856a73ef90e7216ac560187c6e43b4c4efd2f0&#39;,</span>
<span class="go">        &#39;blockNumber&#39;: 2217196,</span>
<span class="go">        &#39;data&#39;: &#39;0x0000000000000000000000000000000000000000000000000000000000000001&#39;,</span>
<span class="go">        &#39;logIndex&#39;: 0,</span>
<span class="go">        &#39;topics&#39;: [&#39;0xe65b00b698ba37c614af350761c735c5f4a82b4ab365a1f1022d49d9dfc8e930&#39;,</span>
<span class="go">        &#39;0x000000000000000000000000754c50465885f1ed1fa1a55b95ee8ecf3f1f4324&#39;,</span>
<span class="go">        &#39;0x296c7fb6ccafa3e689950b947c2895b07357c95b066d5cdccd58c301f41359a3&#39;],</span>
<span class="go">        &#39;transactionHash&#39;: &#39;0xfe1289fd3915794b99702202f65eea2e424b2f083a12749d29b4dd51f6dce40d&#39;,</span>
<span class="go">        &#39;transactionIndex&#39;: 1,</span>
<span class="go">    },</span>
<span class="go">    ...</span>
<span class="go">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.uninstall_filter">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">uninstall_filter</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filter_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.uninstall_filter" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">eth_uninstallFilter</span></code> RPC Method.</p></li>
</ul>
<p>Uninstalls the filter specified by the given <code class="docutils literal notranslate"><span class="pre">filter_id</span></code>.  Returns
boolean as to whether the filter was successfully uninstalled.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">filter</span> <span class="o">=</span> <span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">filter</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">uninstall_filter</span><span class="p">(</span><span class="nb">filter</span><span class="o">.</span><span class="n">filter_id</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">uninstall_filter</span><span class="p">(</span><span class="nb">filter</span><span class="o">.</span><span class="n">filter_id</span><span class="p">)</span>
<span class="go">False  # already uninstalled.</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.get_logs">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">get_logs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filter_params</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.get_logs" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>This is the equivalent of: creating a new
filter, running <a class="reference internal" href="#web3.eth.Eth.get_filter_logs" title="web3.eth.Eth.get_filter_logs"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_filter_logs()</span></code></a>, and then uninstalling the filter. See
<a class="reference internal" href="#web3.eth.Eth.filter" title="web3.eth.Eth.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">filter()</span></code></a> for details on allowed filter parameters.</p>
</dd></dl>

</section>
<section id="contracts">
<h4>Contracts<a class="headerlink" href="#contracts" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.contract">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">contract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">contract_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ContractFactoryClass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">Contract</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">contract_factory_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.contract" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>If <code class="docutils literal notranslate"><span class="pre">address</span></code> is provided, then this method will return an instance of the
contract defined by <code class="docutils literal notranslate"><span class="pre">abi</span></code>. The address may be a checksum string,
or an ENS name like <code class="docutils literal notranslate"><span class="pre">'mycontract.eth'</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="n">contract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;0x000000000000000000000000000000000000dEaD&#39;</span><span class="p">,</span> <span class="n">abi</span><span class="o">=...</span><span class="p">)</span>

<span class="c1"># alternatively:</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;mycontract.eth&#39;</span><span class="p">,</span> <span class="n">abi</span><span class="o">=...</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you use an ENS name to initialize a contract, the contract will be looked up by
name on each use. If the name could ever change maliciously, first
<a class="reference internal" href="index.html#ens-get-address"><span class="std std-ref">Get the Address for an ENS Name</span></a>, and then create the contract with the checksum address.</p>
</div>
<p>If <code class="docutils literal notranslate"><span class="pre">address</span></code> is <em>not</em> provided, the newly created contract class will be returned. That
class will then be initialized by supplying the address.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="n">Contract</span> <span class="o">=</span> <span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">contract</span><span class="p">(</span><span class="n">abi</span><span class="o">=...</span><span class="p">)</span>

<span class="c1"># later, initialize contracts with the same metadata at different addresses:</span>
<span class="n">contract1</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;0x000000000000000000000000000000000000dEaD&#39;</span><span class="p">)</span>
<span class="n">contract2</span> <span class="o">=</span> <span class="n">Contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="s1">&#39;mycontract.eth&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">contract_name</span></code> will be used as the name of the contract class.  If it is
<code class="docutils literal notranslate"><span class="pre">None</span></code> then the name of the <code class="docutils literal notranslate"><span class="pre">ContractFactoryClass</span></code> will be used.</p>
<p><code class="docutils literal notranslate"><span class="pre">ContractFactoryClass</span></code> will be used as the base Contract class.</p>
<p>The following arguments are accepted for contract class creation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abi</strong> (<em>ABI</em>) ‚Äì Application Binary Interface. Usually provided since an <code class="docutils literal notranslate"><span class="pre">abi</span></code> is required to interact with any contract.</p></li>
<li><p><strong>asm</strong> ‚Äì Assembly code generated by the compiler</p></li>
<li><p><strong>ast</strong> ‚Äì Abstract Syntax Tree of the contract generated by the compiler</p></li>
<li><p><strong>bytecode</strong> ‚Äì Bytecode of the contract generated by the compiler</p></li>
<li><p><strong>bytecode_runtime</strong> ‚Äì Bytecode stored at the contract address, excludes the constructor and initialization code</p></li>
<li><p><strong>clone_bin</strong></p></li>
<li><p><strong>dev_doc</strong></p></li>
<li><p><strong>decode_tuples</strong> ‚Äì Optionally convert tuples/structs to named tuples</p></li>
<li><p><strong>interface</strong></p></li>
<li><p><strong>metadata</strong> ‚Äì Contract Metadata generated by the compiler</p></li>
<li><p><strong>opcodes</strong> ‚Äì Opcodes for the contract generated by the compiler</p></li>
<li><p><strong>src_map</strong></p></li>
<li><p><strong>src_map_runtime</strong></p></li>
<li><p><strong>user_doc</strong></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Instance of the contract</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="index.html#web3.contract.Contract" title="web3.contract.Contract">Contract</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.13)"><strong>TypeError</strong></a> ‚Äì If the address is not provided</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.13)"><strong>AttributeError</strong></a> ‚Äì If the contract class is not initialized</p></li>
</ul>
</dd>
</dl>
<p>See the <a class="reference internal" href="#document-web3.contract"><span class="doc">Contracts</span></a> documentation for more information about Contracts.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.eth.Eth.set_contract_factory">
<span class="sig-prename descclassname"><span class="pre">Eth.</span></span><span class="sig-name descname"><span class="pre">set_contract_factory</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">contractFactoryClass</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.eth.Eth.set_contract_factory" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Modify the default contract factory from <code class="docutils literal notranslate"><span class="pre">Contract</span></code> to <code class="docutils literal notranslate"><span class="pre">contractFactoryClass</span></code>.
Future calls to <code class="docutils literal notranslate"><span class="pre">Eth.contract()</span></code> will then default to <code class="docutils literal notranslate"><span class="pre">contractFactoryClass</span></code>.</p>
</dd></dl>

</section>
</section>
<span id="document-web3.beacon"></span><section id="beacon-api">
<h3>Beacon API<a class="headerlink" href="#beacon-api" title="Link to this heading">ÔÉÅ</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This API Is experimental. Client support is incomplete and the API itself is still evolving.</p>
</div>
<p>To use this API, you‚Äôll need a beacon node running locally or remotely. To set that up, refer to the documentation of your specific client.</p>
<p>Once you have a running beacon node, import and configure your beacon instance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.beacon</span> <span class="kn">import</span> <span class="n">Beacon</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span> <span class="o">=</span> <span class="n">Beacon</span><span class="p">(</span><span class="s2">&quot;http://localhost:5051&quot;</span><span class="p">)</span>
</pre></div>
</div>
<section id="methods">
<h4>Methods<a class="headerlink" href="#methods" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_genesis">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_genesis</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_genesis" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_genesis</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;genesis_time&#39;: &#39;1605700807&#39;,</span>
<span class="go">    &#39;genesis_validators_root&#39;: &#39;0x9436e8a630e3162b7ed4f449b12b8a5a368a4b95bc46b941ae65c11613bfa4c1&#39;,</span>
<span class="go">    &#39;genesis_fork_version&#39;: &#39;0x00002009&#39;</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_hash_root">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_hash_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'head'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_hash_root" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_hash_root</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &quot;data&quot;: {</span>
<span class="go">    &quot;root&quot;:&quot;0xbb399fda70617a6f198b3d9f1c1cdbd70077677231b84f34e58568c9dc903558&quot;</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_fork_data">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_fork_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'head'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_fork_data" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_fork_data</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;previous_version&#39;: &#39;0x00002009&#39;,</span>
<span class="go">    &#39;current_version&#39;: &#39;0x00002009&#39;,</span>
<span class="go">    &#39;epoch&#39;: &#39;0&#39;</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_finality_checkpoint">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_finality_checkpoint</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'head'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_finality_checkpoint" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_finality_checkpoint</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;previous_justified&#39;: {</span>
<span class="go">      &#39;epoch&#39;: &#39;5024&#39;,</span>
<span class="go">      &#39;root&#39;: &#39;0x499ba555e8e8be639dd84be1be6d54409738facefc662f37d97065aa91a1a8d4&#39;</span>
<span class="go">    },</span>
<span class="go">    &#39;current_justified&#39;: {</span>
<span class="go">      &#39;epoch&#39;: &#39;5025&#39;,</span>
<span class="go">      &#39;root&#39;: &#39;0x34e8a230f11536ab2ec56a0956e1f3b3fd703861f96d4695877eaa48fbacc241&#39;</span>
<span class="go">    },</span>
<span class="go">    &#39;finalized&#39;: {</span>
<span class="go">      &#39;epoch&#39;: &#39;5024&#39;,</span>
<span class="go">      &#39;root&#39;: &#39;0x499ba555e8e8be639dd84be1be6d54409738facefc662f37d97065aa91a1a8d4&#39;</span>
<span class="go">    }</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_validators">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_validators</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'head'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_validators" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_validators</span><span class="p">()</span>
<span class="go"> {</span>
<span class="go">   &#39;data&#39;: [</span>
<span class="go">     {</span>
<span class="go">       &#39;index&#39;: &#39;110280&#39;,</span>
<span class="go">       &#39;balance&#39;: &#39;32000000000&#39;,</span>
<span class="go">       &#39;status&#39;: &#39;pending_queued&#39;,</span>
<span class="go">       &#39;validator&#39;: {</span>
<span class="go">         &#39;pubkey&#39;: &#39;0x99d37d1f7dd15859995330f75c158346f86d298e2ffeedfbf1b38dcf3df89a7dbd1b34815f3bcd1b2a5588592a35b783&#39;,</span>
<span class="go">         &#39;withdrawal_credentials&#39;: &#39;0x00f338cfdb0c22bb85beed9042bd19fff58ad6421c8a833f8bc902b7cca06f5f&#39;,</span>
<span class="go">         &#39;effective_balance&#39;: &#39;32000000000&#39;,</span>
<span class="go">         &#39;slashed&#39;: False,</span>
<span class="go">         &#39;activation_eligibility_epoch&#39;: &#39;5029&#39;,</span>
<span class="go">         &#39;activation_epoch&#39;: &#39;18446744073709551615&#39;,</span>
<span class="go">         &#39;exit_epoch&#39;: &#39;18446744073709551615&#39;,</span>
<span class="go">         &#39;withdrawable_epoch&#39;: &#39;18446744073709551615&#39;</span>
<span class="go">       }</span>
<span class="go">     },</span>
<span class="go">     ...</span>
<span class="go">   ]</span>
<span class="go"> }</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_validator">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_validator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validator_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">state_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'head'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_validator" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_validator</span><span class="p">(</span><span class="mi">110280</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;index&#39;: &#39;110280&#39;,</span>
<span class="go">    &#39;balance&#39;: &#39;32000000000&#39;,</span>
<span class="go">    &#39;status&#39;: &#39;pending_queued&#39;,</span>
<span class="go">    &#39;validator&#39;: {</span>
<span class="go">      &#39;pubkey&#39;: &#39;0x99d37d1f7dd15859995330f75c158346f86d298e2ffeedfbf1b38dcf3df89a7dbd1b34815f3bcd1b2a5588592a35b783&#39;,</span>
<span class="go">      &#39;withdrawal_credentials&#39;: &#39;0x00f338cfdb0c22bb85beed9042bd19fff58ad6421c8a833f8bc902b7cca06f5f&#39;,</span>
<span class="go">      &#39;effective_balance&#39;: &#39;32000000000&#39;,</span>
<span class="go">      &#39;slashed&#39;: False,</span>
<span class="go">      &#39;activation_eligibility_epoch&#39;: &#39;5029&#39;,</span>
<span class="go">      &#39;activation_epoch&#39;: &#39;18446744073709551615&#39;,</span>
<span class="go">      &#39;exit_epoch&#39;: &#39;18446744073709551615&#39;,</span>
<span class="go">      &#39;withdrawable_epoch&#39;: &#39;18446744073709551615&#39;</span>
<span class="go">    }</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_validator_balances">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_validator_balances</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'head'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_validator_balances" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_validator_balances</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: [</span>
<span class="go">    {</span>
<span class="go">      &#39;index&#39;: &#39;110278&#39;,</span>
<span class="go">      &#39;balance&#39;: &#39;32000000000&#39;</span>
<span class="go">    },</span>
<span class="go">    ...</span>
<span class="go">  ]</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_epoch_committees">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_epoch_committees</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'head'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_epoch_committees" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_epoch_committees</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: [</span>
<span class="go">    {</span>
<span class="go">      &#39;slot&#39;: &#39;162367&#39;,</span>
<span class="go">      &#39;index&#39;: &#39;25&#39;,</span>
<span class="go">      &#39;validators&#39;: [&#39;50233&#39;, &#39;36829&#39;, &#39;84635&#39;, ...],</span>
<span class="go">    },</span>
<span class="go">    ...</span>
<span class="go">  ]</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_block_headers">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_block_headers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_block_headers" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_block_headers</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: [</span>
<span class="go">    {</span>
<span class="go">      &#39;root&#39;: &#39;0xa3873e7b1e0bcc7c59013340cfea59dff16e42e79825e7b8ab6c243dbafd4fe0&#39;,</span>
<span class="go">      &#39;canonical&#39;: True,</span>
<span class="go">      &#39;header&#39;: {</span>
<span class="go">        &#39;message&#39;: {</span>
<span class="go">          &#39;slot&#39;: &#39;163587&#39;,</span>
<span class="go">          &#39;proposer_index&#39;: &#39;69198&#39;,</span>
<span class="go">          &#39;parent_root&#39;: &#39;0xc32558881dbb791ef045c48e3709a0978dc445abee4ae34d30df600eb5fbbb3d&#39;,</span>
<span class="go">          &#39;state_root&#39;: &#39;0x4dc0a72959803a84ee0231160b05dda76a91b8f8b77220b4cfc7db160840b8a8&#39;,</span>
<span class="go">          &#39;body_root&#39;: &#39;0xa3873e7b1e0bcc7c59013340cfea59dff16e42e79825e7b8ab6c243dbafd4fe0&#39;</span>
<span class="go">        },</span>
<span class="go">        &#39;signature&#39;: &#39;0x87b549448d36e5e8b1783944b5511a05f34bb78ad3fcbf71a1adb346eed363d46e50d51ac53cd23bd03d0107d064e05913a6ef10f465f9171aba3b2b8a7a4d621c9e18d5f148813295a2d5aa5053029ccbd88cec72130833de2b4b7addf7faca&#39;</span>
<span class="go">      }</span>
<span class="go">    }</span>
<span class="go">  ]</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_block_header">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_block_header</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_block_header" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_block_header</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    root&#39;: &#39;0x30c04689dd4f6cd4d56eb78f72727d2d16d8b6346724e4a88f546875f11b750d&#39;,</span>
<span class="go">    &#39;canonical&#39;: True,</span>
<span class="go">    &#39;header&#39;: {</span>
<span class="go">      &#39;message&#39;: {</span>
<span class="go">        &#39;slot&#39;: &#39;1&#39;,</span>
<span class="go">        &#39;proposer_index&#39;: &#39;61090&#39;,</span>
<span class="go">        &#39;parent_root&#39;: &#39;0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87&#39;,</span>
<span class="go">        &#39;state_root&#39;: &#39;0x7773ed5a7e944c6238cd0a5c32170663ef2be9efc594fb43ad0f07ecf4c09d2b&#39;,</span>
<span class="go">        &#39;body_root&#39;: &#39;0x30c04689dd4f6cd4d56eb78f72727d2d16d8b6346724e4a88f546875f11b750d&#39;</span>
<span class="go">      },</span>
<span class="go">      &#39;signature&#39;: &#39;0xa30d70b3e62ff776fe97f7f8b3472194af66849238a958880510e698ec3b8a470916680b1a82f9d4753c023153fbe6db10c464ac532c1c9c8919adb242b05ef7152ba3e6cd08b730eac2154b9802203ead6079c8dfb87f1e900595e6c00b4a9a&#39;</span>
<span class="go">    }</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_block">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_block</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_block" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_block</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;message&#39;: {</span>
<span class="go">      &#39;slot&#39;: &#39;1&#39;,</span>
<span class="go">      &#39;proposer_index&#39;: &#39;61090&#39;,</span>
<span class="go">      &#39;parent_root&#39;: &#39;0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87&#39;,</span>
<span class="go">      &#39;state_root&#39;: &#39;0x7773ed5a7e944c6238cd0a5c32170663ef2be9efc594fb43ad0f07ecf4c09d2b&#39;,</span>
<span class="go">      &#39;body&#39;: {</span>
<span class="go">        &#39;randao_reveal&#39;: &#39;0x8e245a52a0a680fcfe789013e123880c321f237de10cad108dc55dd47290d7cfe50cdaa003c6f783405efdac48cef44e152493abba40d9f9815a060dd6151cb0635906c9e3c1ad4859cada73ccd2d6b8747e4aeeada7d75d454bcc8672afa813&#39;,</span>
<span class="go">        &#39;eth1_data&#39;: {</span>
<span class="go">          &#39;deposit_root&#39;: &#39;0x4e910ac762815c13e316e72506141f5b6b441d58af8e0a049cd3341c25728752&#39;,</span>
<span class="go">          &#39;deposit_count&#39;: &#39;100596&#39;,</span>
<span class="go">          &#39;block_hash&#39;: &#39;0x89cb78044843805fb4dab8abd743fc96c2b8e955c58f9b7224d468d85ef57130&#39;</span>
<span class="go">        },</span>
<span class="go">        &#39;graffiti&#39;: &#39;0x74656b752f76302e31322e31342b34342d673863656562663600000000000000&#39;,</span>
<span class="go">        &#39;proposer_slashings&#39;: [],</span>
<span class="go">        &#39;attester_slashings&#39;: [],</span>
<span class="go">        &#39;attestations&#39;: [</span>
<span class="go">          {</span>
<span class="go">            &#39;aggregation_bits&#39;: &#39;0x0080020004000000008208000102000905&#39;,</span>
<span class="go">            &#39;data&#39;: {</span>
<span class="go">              &#39;slot&#39;: &#39;0&#39;,</span>
<span class="go">              &#39;index&#39;: &#39;7&#39;,</span>
<span class="go">              &#39;beacon_block_root&#39;: &#39;0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87&#39;,</span>
<span class="go">              &#39;source&#39;: {</span>
<span class="go">                &#39;epoch&#39;: &#39;0&#39;,</span>
<span class="go">                &#39;root&#39;: &#39;0x0000000000000000000000000000000000000000000000000000000000000000&#39;</span>
<span class="go">              },</span>
<span class="go">              &#39;target&#39;: {</span>
<span class="go">                &#39;epoch&#39;: &#39;0&#39;,</span>
<span class="go">                &#39;root&#39;: &#39;0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87&#39;</span>
<span class="go">              }</span>
<span class="go">            },</span>
<span class="go">            &#39;signature&#39;: &#39;0x967dd2946358db7e426ed19d4576bc75123520ef6a489ca50002222070ee4611f9cef394e5e3071236a93b825f18a4ad07f1d5a1405e6c984f1d71e03f535d13a2156d6ba22cb0c2b148df23a7b8a7293315d6e74b9a26b64283e8393f2ad4c5&#39;</span>
<span class="go">          }</span>
<span class="go">        ],</span>
<span class="go">        &#39;deposits&#39;: [],</span>
<span class="go">        &#39;voluntary_exits&#39;: []</span>
<span class="go">      }</span>
<span class="go">    },</span>
<span class="go">    &#39;signature&#39;: &#39;0xa30d70b3e62ff776fe97f7f8b3472194af66849238a958880510e698ec3b8a470916680b1a82f9d4753c023153fbe6db10c464ac532c1c9c8919adb242b05ef7152ba3e6cd08b730eac2154b9802203ead6079c8dfb87f1e900595e6c00b4a9a&#39;</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_block_root">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_block_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_block_root" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_block_root</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;root&#39;: &#39;0x30c04689dd4f6cd4d56eb78f72727d2d16d8b6346724e4a88f546875f11b750d&#39;</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_block_attestations">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_block_attestations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_block_attestations" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_block_attestations</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: [</span>
<span class="go">    {</span>
<span class="go">      &#39;aggregation_bits&#39;: &#39;0x0080020004000000008208000102000905&#39;,</span>
<span class="go">      &#39;data&#39;: {</span>
<span class="go">        &#39;slot&#39;: &#39;0&#39;,</span>
<span class="go">        &#39;index&#39;: &#39;7&#39;,</span>
<span class="go">        &#39;beacon_block_root&#39;: &#39;0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87&#39;,</span>
<span class="go">        &#39;source&#39;: {</span>
<span class="go">          &#39;epoch&#39;: &#39;0&#39;,</span>
<span class="go">          &#39;root&#39;: &#39;0x0000000000000000000000000000000000000000000000000000000000000000&#39;</span>
<span class="go">        },</span>
<span class="go">        &#39;target&#39;: {</span>
<span class="go">          &#39;epoch&#39;: &#39;0&#39;,</span>
<span class="go">          &#39;root&#39;: &#39;0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87&#39;</span>
<span class="go">        }</span>
<span class="go">      },</span>
<span class="go">      &#39;signature&#39;: &#39;0x967dd2946358db7e426ed19d4576bc75123520ef6a489ca50002222070ee4611f9cef394e5e3071236a93b825f18a4ad07f1d5a1405e6c984f1d71e03f535d13a2156d6ba22cb0c2b148df23a7b8a7293315d6e74b9a26b64283e8393f2ad4c5&#39;</span>
<span class="go">    },</span>
<span class="go">    ...</span>
<span class="go">  ]</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_attestations">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_attestations</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_attestations" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_attestations</span><span class="p">()</span>
<span class="go">{&#39;data&#39;: []}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_attester_slashings">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_attester_slashings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_attester_slashings" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_attester_slashings</span><span class="p">()</span>
<span class="go">{&#39;data&#39;: []}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_proposer_slashings">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_proposer_slashings</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_proposer_slashings" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_proposer_slashings</span><span class="p">()</span>
<span class="go">{&#39;data&#39;: []}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_voluntary_exits">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_voluntary_exits</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_voluntary_exits" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_voluntary_exits</span><span class="p">()</span>
<span class="go">{&#39;data&#39;: []}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_fork_schedule">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_fork_schedule</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_fork_schedule" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_fork_schedule</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: [</span>
<span class="go">    {</span>
<span class="go">      &#39;previous_version&#39;: &#39;0x00002009&#39;,</span>
<span class="go">      &#39;current_version&#39;: &#39;0x00002009&#39;,</span>
<span class="go">      &#39;epoch&#39;: &#39;0&#39;</span>
<span class="go">    }</span>
<span class="go">  ]</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_spec">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_spec</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_spec" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_spec</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;DEPOSIT_CONTRACT_ADDRESS&#39;: &#39;0x8c5fecdC472E27Bc447696F431E425D02dd46a8c&#39;,</span>
<span class="go">    &#39;MIN_ATTESTATION_INCLUSION_DELAY&#39;: &#39;1&#39;,</span>
<span class="go">    &#39;SLOTS_PER_EPOCH&#39;: &#39;32&#39;,</span>
<span class="go">    &#39;SHUFFLE_ROUND_COUNT&#39;: &#39;90&#39;,</span>
<span class="go">    &#39;MAX_EFFECTIVE_BALANCE&#39;: &#39;32000000000&#39;,</span>
<span class="go">    &#39;DOMAIN_BEACON_PROPOSER&#39;: &#39;0x00000000&#39;,</span>
<span class="go">    &#39;MAX_ATTESTER_SLASHINGS&#39;: &#39;2&#39;,</span>
<span class="go">    &#39;DOMAIN_SELECTION_PROOF&#39;: &#39;0x05000000&#39;,</span>
<span class="go">    ...</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_deposit_contract">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_deposit_contract</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_deposit_contract" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_deposit_contract</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;chain_id&#39;: &#39;5&#39;,</span>
<span class="go">    &#39;address&#39;: &#39;0x8c5fecdC472E27Bc447696F431E425D02dd46a8c&#39;</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_beacon_state">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_beacon_state</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'head'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_beacon_state" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_beacon_state</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;genesis_time&#39;: &#39;1&#39;,</span>
<span class="go">    &#39;genesis_validators_root&#39;: &#39;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&#39;,</span>
<span class="go">    &#39;slot&#39;: &#39;1&#39;,</span>
<span class="go">    &#39;fork&#39;: {</span>
<span class="go">      &#39;previous_version&#39;: &#39;0x00000000&#39;,</span>
<span class="go">      &#39;current_version&#39;: &#39;0x00000000&#39;,</span>
<span class="go">      &#39;epoch&#39;: &#39;1&#39;</span>
<span class="go">    },</span>
<span class="go">    &#39;latest_block_header&#39;: {</span>
<span class="go">      &#39;slot&#39;: &#39;1&#39;,</span>
<span class="go">      &#39;proposer_index&#39;: &#39;1&#39;,</span>
<span class="go">      &#39;parent_root&#39;: &#39;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&#39;,</span>
<span class="go">      &#39;state_root&#39;: &#39;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&#39;,</span>
<span class="go">      &#39;body_root&#39;: &#39;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&#39;</span>
<span class="go">    },</span>
<span class="go">    &#39;block_roots&#39;: [&#39;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&#39;],</span>
<span class="go">    &#39;state_roots&#39;: [&#39;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&#39;],</span>
<span class="go">    &#39;historical_roots&#39;: [&#39;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&#39;],</span>
<span class="go">    &#39;eth1_data&#39;: {</span>
<span class="go">      &#39;deposit_root&#39;: &#39;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&#39;,</span>
<span class="go">      &#39;deposit_count&#39;: &#39;1&#39;,</span>
<span class="go">      &#39;block_hash&#39;: &#39;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&#39;</span>
<span class="go">    },</span>
<span class="go">    &#39;eth1_data_votes&#39;: [...],</span>
<span class="go">    &#39;eth1_deposit_index&#39;: &#39;1&#39;,</span>
<span class="go">    &#39;validators&#39;: [...],</span>
<span class="go">    &#39;balances&#39;: [...],</span>
<span class="go">    &#39;randao_mixes&#39;: [...],</span>
<span class="go">    &#39;slashings&#39;: [...],</span>
<span class="go">    &#39;previous_epoch_attestations&#39;: [...],</span>
<span class="go">    &#39;current_epoch_attestations&#39;: [...],</span>
<span class="go">    &#39;justification_bits&#39;: &#39;0x0f&#39;,</span>
<span class="go">    &#39;previous_justified_checkpoint&#39;: {</span>
<span class="go">      &#39;epoch&#39;: &#39;5736&#39;,</span>
<span class="go">      &#39;root&#39;: &#39;0xec7ef54f1fd81bada8170dd0cb6be8216f8ee2f445e6936f95f5c6894a4a3b38&#39;</span>
<span class="go">    },</span>
<span class="go">    &#39;current_justified_checkpoint&#39;: {</span>
<span class="go">      &#39;epoch&#39;: &#39;5737&#39;,</span>
<span class="go">      &#39;root&#39;: &#39;0x781f0166e34c361ce2c88070c1389145abba2836edcb446338a2ca2b0054826e&#39;</span>
<span class="go">    },</span>
<span class="go">    &#39;finalized_checkpoint&#39;: {</span>
<span class="go">      &#39;epoch&#39;: &#39;5736&#39;,</span>
<span class="go">      &#39;root&#39;: &#39;0xec7ef54f1fd81bada8170dd0cb6be8216f8ee2f445e6936f95f5c6894a4a3b38&#39;</span>
<span class="go">    }</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_beacon_heads">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_beacon_heads</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_beacon_heads" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_beacon_heads</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: [</span>
<span class="go">    {</span>
<span class="go">      &#39;slot&#39;: &#39;221600&#39;,</span>
<span class="go">      &#39;root&#39;: &#39;0x9987754077fe6100a60c75d81a51b1ef457d019404d1546a66f4f5d6c23fae45&#39;</span>
<span class="go">    }</span>
<span class="go">  ]</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_blob_sidecars">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_blob_sidecars</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">block_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">indices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_blob_sidecars" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_blob_sidecars</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">indices</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">{</span>
<span class="go">  &quot;data&quot;: [</span>
<span class="go">    {</span>
<span class="go">      &quot;index&quot;: &quot;1&quot;,</span>
<span class="go">      &quot;blob&quot;: ..., # ommitted</span>
<span class="go">      &quot;kzg_commitment&quot;: &quot;0x93247f2209abcacf57b75a51dafae777f9dd38bc7053d1af526f220a7489a6d3a2753e5f3e8b1cfe39b56f43611df74a&quot;,</span>
<span class="go">      &quot;kzg_proof&quot;: &quot;0x7FB0A12D11Ffe8A48c2fF80dCA17adbCC1da5F6aADaAEF2b338717dcDEECf6DaB9FD7C4e4265CfBc097cD31dCB19E836&quot;,</span>
<span class="go">      &quot;signed_block_header&quot;: {</span>
<span class="go">        &quot;message&quot;: {</span>
<span class="go">          &quot;slot&quot;: &quot;1&quot;,</span>
<span class="go">          &quot;proposer_index&quot;: &quot;1&quot;,</span>
<span class="go">          &quot;parent_root&quot;: &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">          &quot;state_root&quot;: &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">          &quot;body_root&quot;: &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;</span>
<span class="go">        },</span>
<span class="go">        &quot;signature&quot;: &quot;0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505&quot;</span>
<span class="go">      },</span>
<span class="go">      &quot;kzg_commitment_inclusion_proof&quot;: [</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;,</span>
<span class="go">        &quot;0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2&quot;</span>
<span class="go">      ]</span>
<span class="go">    }</span>
<span class="go">  ]</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_node_identity">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_node_identity</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_node_identity" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_node_identity</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;peer_id&#39;: &#39;16Uiu2HAmLZ1CYVFKpa3wwn4cnknZqosum8HX3GHDhUpEULQc9ixE&#39;,</span>
<span class="go">    &#39;enr&#39;: &#39;enr:-KG4QCIp6eCZ6hG_fd93qsw12qmbfsl2rUTfQvwVP4FOTlWeNXYo0Gg9y3WVYIdF6FQC6R0E8CbK0Ywq_6TKMx1BpGlAhGV0aDKQOwiHlQAAIAn__________4JpZIJ2NIJpcIR_AAABiXNlY3AyNTZrMaEDdVT4g1gw86BfbrtLCq2fRBlG0AnMxsXtAQgA327S5FeDdGNwgiMog3VkcIIjKA&#39;,</span>
<span class="go">    &#39;p2p_addresses&#39;: [&#39;/ip4/127.0.0.1/tcp/9000/p2p/16Uiu2HAmLZ1CYVFKpa3wwn4cnknZqosum8HX3GHDhUpEULQc9ixE&#39;],</span>
<span class="go">    &#39;discovery_addresses&#39;: [&#39;/ip4/127.0.0.1/udp/9000/p2p/16Uiu2HAmLZ1CYVFKpa3wwn4cnknZqosum8HX3GHDhUpEULQc9ixE&#39;],</span>
<span class="go">    &#39;metadata&#39;: {&#39;seq_number&#39;: &#39;0&#39;, &#39;attnets&#39;: &#39;0x0000000000000000&#39;}</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_peers">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_peers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_peers" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_peers</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: [</span>
<span class="go">    {</span>
<span class="go">      &#39;peer_id&#39;: &#39;16Uiu2HAkw1yVqF3RtMCBHMbkLZbNhfGcTUdD6Uo4X3wfzPhGVnqv&#39;,</span>
<span class="go">      &#39;address&#39;: &#39;/ip4/3.127.23.51/tcp/9000&#39;,</span>
<span class="go">      &#39;state&#39;: &#39;connected&#39;,</span>
<span class="go">      &#39;direction&#39;: &#39;outbound&#39;</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">      &#39;peer_id&#39;: &#39;16Uiu2HAmEJHiCzgS8GwiEYLyM3d148mzvZ9iZzsz8yqayWVPANMG&#39;,</span>
<span class="go">      &#39;address&#39;: &#39;/ip4/3.88.7.240/tcp/9000&#39;,</span>
<span class="go">      &#39;state&#39;: &#39;connected&#39;,</span>
<span class="go">      &#39;direction&#39;: &#39;outbound&#39;</span>
<span class="go">    }</span>
<span class="go">  ]</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_peer">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_peer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">peer_id</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_peer" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_peer</span><span class="p">(</span><span class="s1">&#39;16Uiu2HAkw1yVqF3RtMCBHMbkLZbNhfGcTUdD6Uo4X3wfzPhGVnqv&#39;</span><span class="p">)</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;peer_id&#39;: &#39;16Uiu2HAkw1yVqF3RtMCBHMbkLZbNhfGcTUdD6Uo4X3wfzPhGVnqv&#39;,</span>
<span class="go">    &#39;address&#39;: &#39;/ip4/3.127.23.51/tcp/9000&#39;,</span>
<span class="go">    &#39;state&#39;: &#39;connected&#39;,</span>
<span class="go">    &#39;direction&#39;: &#39;outbound&#39;</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_health">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_health</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_health" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_health</span><span class="p">()</span>
<span class="go">200</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_version">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_version" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_version</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;version&#39;: &#39;teku/v20.12.0+9-g9392008/osx-x86_64/adoptopenjdk-java-15&#39;</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="Beacon.get_syncing">
<span class="sig-prename descclassname"><span class="pre">Beacon.</span></span><span class="sig-name descname"><span class="pre">get_syncing</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Beacon.get_syncing" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beacon</span><span class="o">.</span><span class="n">get_syncing</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;data&#39;: {</span>
<span class="go">    &#39;head_slot&#39;: &#39;222270&#39;,</span>
<span class="go">    &#39;sync_distance&#39;: &#39;190861&#39;</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<span id="document-web3.net"></span><section id="module-web3.net">
<span id="net-api"></span><h3>Net API<a class="headerlink" href="#module-web3.net" title="Link to this heading">ÔÉÅ</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">web3.net</span></code> object exposes methods to interact with the RPC APIs under
the <code class="docutils literal notranslate"><span class="pre">net_</span></code> namespace.</p>
<section id="properties">
<h4>Properties<a class="headerlink" href="#properties" title="Link to this heading">ÔÉÅ</a></h4>
<p>The following properties are available on the <code class="docutils literal notranslate"><span class="pre">web3.net</span></code> namespace.</p>
<dl class="py method">
<dt class="sig sig-object py" id="web3.net.listening">
<span class="sig-prename descclassname"><span class="pre">web3.net.</span></span><span class="sig-name descname"><span class="pre">listening</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.net.listening" title="Link to this definition">ÔÉÅ</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">..py:property::</span></span></dt>
<dd><blockquote>
<div><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">net_listening</span></code> RPC method</p></li>
</ul>
<p>Returns true if client is actively listening for network connections.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">listening</span>
<span class="go">True</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.net.peer_count">
<span class="sig-prename descclassname"><span class="pre">web3.net.</span></span><span class="sig-name descname"><span class="pre">peer_count</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.net.peer_count" title="Link to this definition">ÔÉÅ</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">..py:property::</span></span></dt>
<dd><blockquote>
<div><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">net_peerCount</span></code> RPC method</p></li>
</ul>
<p>Returns number of peers currently connected to the client.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">peer_count</span>
<span class="go">1</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.net.version">
<span class="sig-prename descclassname"><span class="pre">web3.net.</span></span><span class="sig-name descname"><span class="pre">version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.net.version" title="Link to this definition">ÔÉÅ</a></dt>
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">..py:property::</span></span></dt>
<dd><blockquote>
<div><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">net_version</span></code> RPC Method</p></li>
</ul>
<p>Returns the current network id.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">net</span><span class="o">.</span><span class="n">version</span>
<span class="go">&#39;8996&#39;</span>
</pre></div>
</div>
</div></blockquote>
</dd></dl>

</section>
</section>
<span id="document-web3.geth"></span><section id="module-web3.geth">
<span id="geth-api"></span><h3>Geth API<a class="headerlink" href="#module-web3.geth" title="Link to this heading">ÔÉÅ</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">web3.geth</span></code> object exposes modules that enable you to interact with the JSON-RPC endpoints supported by <a class="reference external" href="https://github.com/ethereum/go-ethereum/wiki/Management-APIs">Geth</a> that are not defined in the standard set of Ethereum JSONRPC endpoints according to <a class="reference external" href="https://github.com/ethereum/EIPs/pull/1474">EIP 1474</a>.</p>
<section id="gethadmin-api">
<h4>GethAdmin API<a class="headerlink" href="#gethadmin-api" title="Link to this heading">ÔÉÅ</a></h4>
<p>The following methods are available on the <code class="docutils literal notranslate"><span class="pre">web3.geth.admin</span></code> namespace.</p>
<p id="module-web3.geth.admin">The <code class="docutils literal notranslate"><span class="pre">web3.geth.admin</span></code> object exposes methods to interact with the RPC APIs under the
<code class="docutils literal notranslate"><span class="pre">admin_</span></code> namespace that are supported by the Geth client.</p>
<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.admin.datadir">
<span class="sig-prename descclassname"><span class="pre">web3.geth.admin.</span></span><span class="sig-name descname"><span class="pre">datadir</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.admin.datadir" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">admin_datadir</span></code> RPC Method</p></li>
</ul>
<p>Returns the system path of the node‚Äôs data directory.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">admin</span><span class="o">.</span><span class="n">datadir</span><span class="p">()</span>
<span class="go">&#39;/Users/snakecharmers/Library/Ethereum&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.admin.node_info">
<span class="sig-prename descclassname"><span class="pre">web3.geth.admin.</span></span><span class="sig-name descname"><span class="pre">node_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.admin.node_info" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">admin_nodeInfo</span></code> RPC Method</p></li>
</ul>
<p>Returns information about the currently running node.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">admin</span><span class="o">.</span><span class="n">node_info</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">    &#39;enode&#39;: &#39;enode://e54eebad24dce1f6d246bea455ffa756d97801582420b9ed681a2ea84bf376d0bd87ae8dd6dc06cdb862a2ca89ecabe1be1050be35b4e70d62bc1a092cb7e2d3@[::]:30303&#39;,</span>
<span class="go">    &#39;id&#39;: &#39;e54eebad24dce1f6d246bea455ffa756d97801582420b9ed681a2ea84bf376d0bd87ae8dd6dc06cdb862a2ca89ecabe1be1050be35b4e70d62bc1a092cb7e2d3&#39;,</span>
<span class="go">    &#39;ip&#39;: &#39;::&#39;,</span>
<span class="go">    &#39;listenAddr&#39;: &#39;[::]:30303&#39;,</span>
<span class="go">    &#39;name&#39;: &#39;Geth/v1.4.11-stable-fed692f6/darwin/go1.7&#39;,</span>
<span class="go">    &#39;ports&#39;: {&#39;discovery&#39;: 30303, &#39;listener&#39;: 30303},</span>
<span class="go">    &#39;protocols&#39;: {</span>
<span class="go">        &#39;eth&#39;: {</span>
<span class="go">            &#39;difficulty&#39;: 57631175724744612603,</span>
<span class="go">            &#39;genesis&#39;: &#39;0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3&#39;,</span>
<span class="go">            &#39;head&#39;: &#39;0xaaef6b9dd0d34088915f4c62b6c166379da2ad250a88f76955508f7cc81fb796&#39;,</span>
<span class="go">            &#39;network&#39;: 1,</span>
<span class="go">        },</span>
<span class="go">    },</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.admin.peers">
<span class="sig-prename descclassname"><span class="pre">web3.geth.admin.</span></span><span class="sig-name descname"><span class="pre">peers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.admin.peers" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">admin_peers</span></code> RPC Method</p></li>
</ul>
<p>Returns the current peers the node is connected to.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">admin</span><span class="o">.</span><span class="n">peers</span><span class="p">()</span>
<span class="go">[</span>
<span class="go">    {</span>
<span class="go">        &#39;caps&#39;: [&#39;eth/63&#39;],</span>
<span class="go">        &#39;id&#39;: &#39;146e8e3e2460f1e18939a5da37c4a79f149c8b9837240d49c7d94c122f30064e07e4a42ae2c2992d0f8e7e6f68a30e7e9ad31d524349ec9d17effd2426a37b40&#39;,</span>
<span class="go">        &#39;name&#39;: &#39;Geth/v1.4.10-stable/windows/go1.6.2&#39;,</span>
<span class="go">        &#39;network&#39;: {</span>
<span class="go">            &#39;localAddress&#39;: &#39;10.0.3.115:64478&#39;,</span>
<span class="go">            &#39;remoteAddress&#39;: &#39;72.208.167.127:30303&#39;,</span>
<span class="go">        },</span>
<span class="go">        &#39;protocols&#39;: {</span>
<span class="go">            &#39;eth&#39;: {</span>
<span class="go">                &#39;difficulty&#39;: 17179869184,</span>
<span class="go">                &#39;head&#39;: &#39;0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3&#39;,</span>
<span class="go">                &#39;version&#39;: 63,</span>
<span class="go">            },</span>
<span class="go">        }</span>
<span class="go">    },</span>
<span class="go">    {</span>
<span class="go">        &#39;caps&#39;: [&#39;eth/62&#39;, &#39;eth/63&#39;],</span>
<span class="go">        &#39;id&#39;: &#39;76cb6cd3354be081923a90dfd4cda40aa78b307cc3cf4d5733dc32cc171d00f7c08356e9eb2ea47eab5aad7a15a3419b859139e3f762e1e1ebf5a04f530dcef7&#39;,</span>
<span class="go">        &#39;name&#39;: &#39;Geth/v1.4.10-stable-5f55d95a/linux/go1.5.1&#39;,</span>
<span class="go">        &#39;network&#39;: {</span>
<span class="go">            &#39;localAddress&#39;: &#39;10.0.3.115:64784&#39;,</span>
<span class="go">            &#39;remoteAddress&#39;: &#39;60.205.92.119:30303&#39;,</span>
<span class="go">        },</span>
<span class="go">        &#39;protocols&#39;: {</span>
<span class="go">            &#39;eth&#39;: {</span>
<span class="go">                &#39;difficulty&#39;: 57631175724744612603,</span>
<span class="go">                &#39;head&#39;: &#39;0xaaef6b9dd0d34088915f4c62b6c166379da2ad250a88f76955508f7cc81fb796&#39;,</span>
<span class="go">                &#39;version&#39;: 63,</span>
<span class="go">            },</span>
<span class="go">        },</span>
<span class="go">    },</span>
<span class="go">    ...</span>
<span class="go">]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.admin.add_peer">
<span class="sig-prename descclassname"><span class="pre">web3.geth.admin.</span></span><span class="sig-name descname"><span class="pre">add_peer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">node_url</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.admin.add_peer" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">admin_addPeer</span></code> RPC Method</p></li>
</ul>
<p>Requests adding a new remote node to the list of tracked static nodes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">admin</span><span class="o">.</span><span class="n">add_peer</span><span class="p">(</span><span class="s1">&#39;enode://e54eebad24dce1f6d246bea455ffa756d97801582420b9ed681a2ea84bf376d0bd87ae8dd6dc06cdb862a2ca89ecabe1be1050be35b4e70d62bc1a092cb7e2d3@52.71.255.237:30303&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.admin.start_http">
<span class="sig-prename descclassname"><span class="pre">web3.geth.admin.</span></span><span class="sig-name descname"><span class="pre">start_http</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'localhost'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8545</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'eth,net,web3'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.admin.start_http" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">admin_startHTTP</span></code> RPC Method</p></li>
</ul>
<p>Starts the HTTP based JSON RPC API webserver on the specified <code class="docutils literal notranslate"><span class="pre">host</span></code> and
<code class="docutils literal notranslate"><span class="pre">port</span></code>, with the <code class="docutils literal notranslate"><span class="pre">rpccorsdomain</span></code> set to the provided <code class="docutils literal notranslate"><span class="pre">cors</span></code> value and
with the APIs specified by <code class="docutils literal notranslate"><span class="pre">apis</span></code> enabled.  Returns boolean as to whether
the server was successfully started.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">admin</span><span class="o">.</span><span class="n">start_http</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.admin.start_ws">
<span class="sig-prename descclassname"><span class="pre">web3.geth.admin.</span></span><span class="sig-name descname"><span class="pre">start_ws</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">host</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'localhost'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">8546</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cors</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">apis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'eth,net,web3'</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.admin.start_ws" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">admin_startWS</span></code> RPC Method</p></li>
</ul>
<p>Starts the WebSocket based JSON RPC API webserver on the specified <code class="docutils literal notranslate"><span class="pre">host</span></code>
and <code class="docutils literal notranslate"><span class="pre">port</span></code>, with the <code class="docutils literal notranslate"><span class="pre">rpccorsdomain</span></code> set to the provided <code class="docutils literal notranslate"><span class="pre">cors</span></code> value
and with the APIs specified by <code class="docutils literal notranslate"><span class="pre">apis</span></code> enabled.  Returns boolean as to
whether the server was successfully started.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">admin</span><span class="o">.</span><span class="n">start_ws</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.admin.stop_http">
<span class="sig-prename descclassname"><span class="pre">web3.geth.admin.</span></span><span class="sig-name descname"><span class="pre">stop_http</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.admin.stop_http" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">admin_stopHTTP</span></code> RPC Method</p></li>
</ul>
<p>Stops the HTTP based JSON RPC server.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">admin</span><span class="o">.</span><span class="n">stop_http</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.admin.stop_ws">
<span class="sig-prename descclassname"><span class="pre">web3.geth.admin.</span></span><span class="sig-name descname"><span class="pre">stop_ws</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.admin.stop_ws" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">admin_stopWS</span></code> RPC Method</p></li>
</ul>
<p>Stops the WebSocket based JSON RPC server.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">admin</span><span class="o">.</span><span class="n">stop_ws</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="gethtxpool-api">
<span id="module-web3.geth.txpool"></span><h4>GethTxPool API<a class="headerlink" href="#gethtxpool-api" title="Link to this heading">ÔÉÅ</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">web3.geth.txpool</span></code> object exposes methods to interact with the RPC APIs under
the <code class="docutils literal notranslate"><span class="pre">txpool_</span></code> namespace. These methods are only exposed under the <code class="docutils literal notranslate"><span class="pre">geth</span></code> namespace
since they are not standard.</p>
<p>The following methods are available on the <code class="docutils literal notranslate"><span class="pre">web3.geth.txpool</span></code> namespace.</p>
<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.txpool.TxPool.inspect">
<span class="sig-prename descclassname"><span class="pre">TxPool.</span></span><span class="sig-name descname"><span class="pre">inspect</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.txpool.TxPool.inspect" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">txpool_inspect</span></code> RPC Method</p></li>
</ul>
<p>Returns a textual summary of all transactions currently pending for
inclusion in the next block(s) as well as ones that are scheduled for
future execution.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">txpool</span><span class="o">.</span><span class="n">inspect</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">    &#39;pending&#39;: {</span>
<span class="go">        &#39;0x26588a9301b0428d95e6Fc3A5024fcE8BEc12D51&#39;: {</span>
<span class="go">          31813: [&quot;0x3375Ee30428b2A71c428afa5E89e427905F95F7e: 0 wei + 500000 √ó 20000000000 gas&quot;]</span>
<span class="go">        },</span>
<span class="go">        &#39;0x2a65Aca4D5fC5B5C859090a6c34d164135398226&#39;: {</span>
<span class="go">          563662: [&quot;0x958c1Fa64B34db746925c6F8a3Dd81128e40355E: 1051546810000000000 wei + 90000 √ó 20000000000 gas&quot;],</span>
<span class="go">          563663: [&quot;0x77517B1491a0299A44d668473411676f94e97E34: 1051190740000000000 wei + 90000 √ó 20000000000 gas&quot;],</span>
<span class="go">          563664: [&quot;0x3E2A7Fe169c8F8eee251BB00d9fb6d304cE07d3A: 1050828950000000000 wei + 90000 √ó 20000000000 gas&quot;],</span>
<span class="go">          563665: [&quot;0xAF6c4695da477F8C663eA2D8B768Ad82Cb6A8522: 1050544770000000000 wei + 90000 √ó 20000000000 gas&quot;],</span>
<span class="go">          563666: [&quot;0x139B148094C50F4d20b01cAf21B85eDb711574dB: 1048598530000000000 wei + 90000 √ó 20000000000 gas&quot;],</span>
<span class="go">          563667: [&quot;0x48B3Bd66770b0D1EeceFCe090daFeE36257538aE: 1048367260000000000 wei + 90000 √ó 20000000000 gas&quot;],</span>
<span class="go">          563668: [&quot;0x468569500925D53e06Dd0993014aD166fD7Dd381: 1048126690000000000 wei + 90000 √ó 20000000000 gas&quot;],</span>
<span class="go">          563669: [&quot;0x3DcB4C90477a4b8Ff7190b79b524773CbE3bE661: 1047965690000000000 wei + 90000 √ó 20000000000 gas&quot;],</span>
<span class="go">          563670: [&quot;0x6DfeF5BC94b031407FFe71ae8076CA0FbF190963: 1047859050000000000 wei + 90000 √ó 20000000000 gas&quot;]</span>
<span class="go">        },</span>
<span class="go">        &#39;0x9174E688d7dE157C5C0583Df424EAAB2676aC162&#39;: {</span>
<span class="go">          3: [&quot;0xBB9bc244D798123fDe783fCc1C72d3Bb8C189413: 30000000000000000000 wei + 85000 √ó 21000000000 gas&quot;]</span>
<span class="go">        },</span>
<span class="go">        &#39;0xb18F9d01323e150096650ab989CfecD39D757Aec&#39;: {</span>
<span class="go">          777: [&quot;0xcD79c72690750F079ae6AB6ccd7e7aEDC03c7720: 0 wei + 1000000 √ó 20000000000 gas&quot;]</span>
<span class="go">        },</span>
<span class="go">        &#39;0xB2916C870Cf66967B6510B76c07E9d13a5D23514&#39;: {</span>
<span class="go">          2: [&quot;0x576f25199D60982A8f31A8DfF4da8aCB982e6ABa: 26000000000000000000 wei + 90000 √ó 20000000000 gas&quot;]</span>
<span class="go">        },</span>
<span class="go">        &#39;0xBc0CA4f217E052753614d6B019948824d0d8688B&#39;: {</span>
<span class="go">          0: [&quot;0x2910543Af39abA0Cd09dBb2D50200b3E800A63D2: 1000000000000000000 wei + 50000 √ó 1171602790622 gas&quot;]</span>
<span class="go">        },</span>
<span class="go">        &#39;0xea674fdde714fd979de3edf0f56aa9716b898ec8&#39;: {</span>
<span class="go">          70148: [&quot;0xe39c55ead9f997f7fa20ebe40fb4649943d7db66: 1000767667434026200 wei + 90000 √ó 20000000000 gas&quot;]</span>
<span class="go">        }</span>
<span class="go">      },</span>
<span class="go">      &#39;queued&#39;: {</span>
<span class="go">        &#39;0x0F6000De1578619320aBA5e392706b131FB1dE6f&#39;: {</span>
<span class="go">          6: [&quot;0x8383534d0bcd0186d326C993031311c0Ac0D9B2d: 9000000000000000000 wei + 21000 √ó 20000000000 gas&quot;]</span>
<span class="go">        },</span>
<span class="go">        &#39;0x5b30608c678e1ac464A8994C3B33E5CdF3497112&#39;: {</span>
<span class="go">          6: [&quot;0x9773547e27f8303C87089dc42D9288aa2B9d8F06: 50000000000000000000 wei + 90000 √ó 50000000000 gas&quot;]</span>
<span class="go">        },</span>
<span class="go">        &#39;0x976A3Fc5d6f7d259EBfb4cc2Ae75115475E9867C&#39;: {</span>
<span class="go">          3: [&quot;0x346FB27dE7E7370008f5da379f74dd49F5f2F80F: 140000000000000000 wei + 90000 √ó 20000000000 gas&quot;]</span>
<span class="go">        },</span>
<span class="go">        &#39;0x9B11bF0459b0c4b2f87f8CEBca4cfc26f294B63A&#39;: {</span>
<span class="go">          2: [&quot;0x24a461f25eE6a318BDef7F33De634A67bb67Ac9D: 17000000000000000000 wei + 90000 √ó 50000000000 gas&quot;],</span>
<span class="go">          6: [&quot;0x6368f3f8c2B42435D6C136757382E4A59436a681: 17990000000000000000 wei + 90000 √ó 20000000000 gas&quot;, &quot;0x8db7b4e0ecb095fbd01dffa62010801296a9ac78: 16998950000000000000 wei + 90000 √ó 20000000000 gas&quot;],</span>
<span class="go">          7: [&quot;0x6368f3f8c2B42435D6C136757382E4A59436a681: 17900000000000000000 wei + 90000 √ó 20000000000 gas&quot;]</span>
<span class="go">        }</span>
<span class="go">      }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.txpool.TxPool.status">
<span class="sig-prename descclassname"><span class="pre">TxPool.</span></span><span class="sig-name descname"><span class="pre">status</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.txpool.TxPool.status" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">txpool_status</span></code> RPC Method</p></li>
</ul>
<p>Returns a textual summary of all transactions currently pending for
inclusion in the next block(s) as well as ones that are scheduled for
future execution.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="n">pending</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="n">queued</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.txpool.TxPool.content">
<span class="sig-prename descclassname"><span class="pre">TxPool.</span></span><span class="sig-name descname"><span class="pre">content</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.txpool.TxPool.content" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">txpool_content</span></code> RPC Method</p></li>
</ul>
<p>Returns the exact details of all transactions that are pending or queued.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">txpool</span><span class="o">.</span><span class="n">content</span><span class="p">()</span>
<span class="go">{</span>
<span class="go">  &#39;pending&#39;: {</span>
<span class="go">    &#39;0x0216D5032f356960Cd3749C31Ab34eEFF21B3395&#39;: {</span>
<span class="go">      806: [{</span>
<span class="go">        &#39;blockHash&#39;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="go">        &#39;blockNumber&#39;: None,</span>
<span class="go">        &#39;from&#39;: &quot;0x0216D5032f356960Cd3749C31Ab34eEFF21B3395&quot;,</span>
<span class="go">        &#39;gas&#39;: &quot;0x5208&quot;,</span>
<span class="go">        &#39;gasPrice&#39;: None,</span>
<span class="go">        &#39;hash&#39;: &quot;0xaf953a2d01f55cfe080c0c94150a60105e8ac3d51153058a1f03dd239dd08586&quot;,</span>
<span class="go">        &#39;input&#39;: &quot;0x&quot;,</span>
<span class="go">        &#39;maxFeePerGas&#39;: &#39;0x77359400&#39;,</span>
<span class="go">        &#39;maxPriorityFeePerGas&#39;: &#39;0x3b9aca00&#39;,</span>
<span class="go">        &#39;nonce&#39;: &quot;0x326&quot;,</span>
<span class="go">        &#39;to&#39;: &quot;0x7f69a91A3CF4bE60020fB58B893b7cbb65376db8&quot;,</span>
<span class="go">        &#39;transactionIndex&#39;: None,</span>
<span class="go">        &#39;value&#39;: &quot;0x19a99f0cf456000&quot;</span>
<span class="go">      }]</span>
<span class="go">    },</span>
<span class="go">    &#39;0x24d407e5A0B506E1Cb2fae163100B5DE01F5193C&#39;: {</span>
<span class="go">      34: [{</span>
<span class="go">        &#39;blockHash&#39;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="go">        &#39;blockNumber&#39;: None,</span>
<span class="go">        &#39;from&#39;: &quot;0x24d407e5A0B506E1Cb2fae163100B5DE01F5193C&quot;,</span>
<span class="go">        &#39;gas&#39;: &quot;0x44c72&quot;,</span>
<span class="go">        &#39;gasPrice&#39;: None,</span>
<span class="go">        &#39;hash&#39;: &quot;0xb5b8b853af32226755a65ba0602f7ed0e8be2211516153b75e9ed640a7d359fe&quot;,</span>
<span class="go">        &#39;input&#39;: &quot;0xb61d27f600000000000000000000000024d407e5a0b506e1cb2fae163100b5de01f5193c00000000000000000000000000000000000000000000000053444835ec580000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="go">        &#39;maxFeePerGas&#39;: &#39;0x77359400&#39;,</span>
<span class="go">        &#39;maxPriorityFeePerGas&#39;: &#39;0x3b9aca00&#39;,</span>
<span class="go">        &#39;nonce&#39;: &quot;0x22&quot;,</span>
<span class="go">        &#39;to&#39;: &quot;0x7320785200f74861B69C49e4ab32399a71b34f1a&quot;,</span>
<span class="go">        &#39;transactionIndex&#39;: None,</span>
<span class="go">        &#39;value&#39;: &quot;0x0&quot;</span>
<span class="go">      }]</span>
<span class="go">    }</span>
<span class="go">  },</span>
<span class="go">  &#39;queued&#39;: {</span>
<span class="go">    &#39;0x976A3Fc5d6f7d259EBfb4cc2Ae75115475E9867C&#39;: {</span>
<span class="go">      3: [{</span>
<span class="go">        &#39;blockHash&#39;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="go">        &#39;blockNumber&#39;: None,</span>
<span class="go">        &#39;from&#39;: &quot;0x976A3Fc5d6f7d259EBfb4cc2Ae75115475E9867C&quot;,</span>
<span class="go">        &#39;gas&#39;: &quot;0x15f90&quot;,</span>
<span class="go">        &#39;gasPrice&#39;: None,</span>
<span class="go">        &#39;hash&#39;: &quot;0x57b30c59fc39a50e1cba90e3099286dfa5aaf60294a629240b5bbec6e2e66576&quot;,</span>
<span class="go">        &#39;input&#39;: &quot;0x&quot;,</span>
<span class="go">        &#39;maxFeePerGas&#39;: &#39;0x77359400&#39;,</span>
<span class="go">        &#39;maxPriorityFeePerGas&#39;: &#39;0x3b9aca00&#39;,</span>
<span class="go">        &#39;nonce&#39;: &quot;0x3&quot;,</span>
<span class="go">        &#39;to&#39;: &quot;0x346FB27dE7E7370008f5da379f74dd49F5f2F80F&quot;,</span>
<span class="go">        &#39;transactionIndex&#39;: None,</span>
<span class="go">        &#39;value&#39;: &quot;0x1f161421c8e0000&quot;</span>
<span class="go">      }]</span>
<span class="go">    },</span>
<span class="go">    &#39;0x9B11bF0459b0c4b2f87f8CEBca4cfc26f294B63A&#39;: {</span>
<span class="go">      2: [{</span>
<span class="go">        &#39;blockHash&#39;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="go">        &#39;blockNumber&#39;: None,</span>
<span class="go">        &#39;from&#39;: &quot;0x9B11bF0459b0c4b2f87f8CEBca4cfc26f294B63A&quot;,</span>
<span class="go">        &#39;gas&#39;: &quot;0x15f90&quot;,</span>
<span class="go">        &#39;gasPrice&#39;: None,</span>
<span class="go">        &#39;hash&#39;: &quot;0x3a3c0698552eec2455ed3190eac3996feccc806970a4a056106deaf6ceb1e5e3&quot;,</span>
<span class="go">        &#39;input&#39;: &quot;0x&quot;,</span>
<span class="go">        &#39;maxFeePerGas&#39;: &#39;0x77359400&#39;,</span>
<span class="go">        &#39;maxPriorityFeePerGas&#39;: &#39;0x3b9aca00&#39;,</span>
<span class="go">        &#39;nonce&#39;: &quot;0x2&quot;,</span>
<span class="go">        &#39;to&#39;: &quot;0x24a461f25eE6a318BDef7F33De634A67bb67Ac9D&quot;,</span>
<span class="go">        &#39;transactionIndex&#39;: None,</span>
<span class="go">        &#39;value&#39;: &quot;0xebec21ee1da40000&quot;</span>
<span class="go">      }],</span>
<span class="go">      6: [{</span>
<span class="go">        &#39;blockHash&#39;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="go">        &#39;blockNumber&#39;: None,</span>
<span class="go">        &#39;from&#39;: &quot;0x9B11bF0459b0c4b2f87f8CEBca4cfc26f294B63A&quot;,</span>
<span class="go">        &#39;gas&#39;: &quot;0x15f90&quot;,</span>
<span class="go">        &#39;gasPrice&#39;: None,</span>
<span class="go">        &#39;hash&#39;: &quot;0xbbcd1e45eae3b859203a04be7d6e1d7b03b222ec1d66dfcc8011dd39794b147e&quot;,</span>
<span class="go">        &#39;input&#39;: &quot;0x&quot;,</span>
<span class="go">        &#39;maxFeePerGas&#39;: &#39;0x77359400&#39;,</span>
<span class="go">        &#39;maxPriorityFeePerGas&#39;: &#39;0x3b9aca00&#39;,</span>
<span class="go">        &#39;nonce&#39;: &quot;0x6&quot;,</span>
<span class="go">        &#39;to&#39;: &quot;0x6368f3f8c2B42435D6C136757382E4A59436a681&quot;,</span>
<span class="go">        &#39;transactionIndex&#39;: None,</span>
<span class="go">        &#39;value&#39;: &quot;0xf9a951af55470000&quot;</span>
<span class="go">      }, {</span>
<span class="go">        &#39;blockHash&#39;: &quot;0x0000000000000000000000000000000000000000000000000000000000000000&quot;,</span>
<span class="go">        &#39;blockNumber&#39;: None,</span>
<span class="go">        &#39;from&#39;: &quot;0x9B11bF0459b0c4b2f87f8CEBca4cfc26f294B63A&quot;,</span>
<span class="go">        &#39;gas&#39;: &quot;0x15f90&quot;,</span>
<span class="go">        &#39;gasPrice&#39;: None,</span>
<span class="go">        &#39;hash&#39;: &quot;0x60803251d43f072904dc3a2d6a084701cd35b4985790baaf8a8f76696041b272&quot;,</span>
<span class="go">        &#39;input&#39;: &quot;0x&quot;,</span>
<span class="go">        &#39;maxFeePerGas&#39;: &#39;0x77359400&#39;,</span>
<span class="go">        &#39;maxPriorityFeePerGas&#39;: &#39;0x3b9aca00&#39;,</span>
<span class="go">        &#39;nonce&#39;: &quot;0x6&quot;,</span>
<span class="go">        &#39;to&#39;: &quot;0x8DB7b4e0ECB095FBD01Dffa62010801296a9ac78&quot;,</span>
<span class="go">        &#39;transactionIndex&#39;: None,</span>
<span class="go">        &#39;value&#39;: &quot;0xebe866f5f0a06000&quot;</span>
<span class="go">      }],</span>
<span class="go">    }</span>
<span class="go">  }</span>
<span class="go">}</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="gethdebug-api">
<span id="module-web3.geth.debug"></span><h4>GethDebug API<a class="headerlink" href="#gethdebug-api" title="Link to this heading">ÔÉÅ</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">web3.geth.debug</span></code> object exposes methods to interact with the RPC APIs under the
<code class="docutils literal notranslate"><span class="pre">debug_</span></code> namespace. These methods are only exposed under the <code class="docutils literal notranslate"><span class="pre">geth</span></code> namespace.
Full documentation around options can be found in the
<a class="reference external" href="https://geth.ethereum.org/docs/developers/evm-tracing/built-in-tracers">Geth docs</a>.</p>
<dl class="py method">
<dt class="sig sig-object py" id="web3.geth.debug.Debug.trace_transaction">
<span class="sig-prename descclassname"><span class="pre">Debug.</span></span><span class="sig-name descname"><span class="pre">trace_transaction</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transaction_hash</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.geth.debug.Debug.trace_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><ul class="simple">
<li><p>Delegates to <code class="docutils literal notranslate"><span class="pre">debug_traceTransaction</span></code> RPC Method</p></li>
</ul>
<p>Returns the trace of the transaction with the given <code class="docutils literal notranslate"><span class="pre">transaction_hash</span></code> and <code class="docutils literal notranslate"><span class="pre">trace_config</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">debug</span><span class="o">.</span><span class="n">trace_transaction</span><span class="p">(</span><span class="s1">&#39;0x96014f00980a25dc7275a5eb5ed25ce0dd79c9233628c421ae373601236949b3&#39;</span><span class="p">)</span>
<span class="go">    AttributeDict({</span>
<span class="go">      &#39;gas&#39;: 21000,</span>
<span class="go">      &#39;failed&#39;: False,</span>
<span class="go">      &#39;returnValue&#39;: &#39;&#39;,</span>
<span class="go">      &#39;structLogs&#39;: []</span>
<span class="go">    })</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">debug</span><span class="o">.</span><span class="n">trace_transaction</span><span class="p">(</span><span class="s1">&#39;0x96014f00980a25dc7275a5eb5ed25ce0dd79c9233628c421ae373601236949b3&#39;</span><span class="p">,</span> <span class="p">{</span>
<span class="go">        &quot;tracer&quot;: &quot;prestateTracer&quot;,</span>
<span class="go">    })</span>
<span class="go">    AttributeDict({</span>
<span class="go">      &#39;0x0000000000000000000000000000000000000000&#39;: AttributeDict({&#39;balance&#39;: 0}),</span>
<span class="go">      &#39;0x7fE3e4C21bDE162214B715AabcE05391301e9F5B&#39;: AttributeDict({&#39;balance&#39;: 115792089237316195423570985008687907853269984665640564039457584007913129639927}),</span>
<span class="go">      &#39;0x91fe3039271d43d3f8479f60Cc5293Bc8A461b75&#39;: AttributeDict({&#39;balance&#39;: 0})</span>
<span class="go">    })</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">debug</span><span class="o">.</span><span class="n">trace_transaction</span><span class="p">(</span><span class="s1">&#39;0x96014f00980a25dc7275a5eb5ed25ce0dd79c9233628c421ae373601236949b3&#39;</span><span class="p">,</span> <span class="p">{</span>
<span class="go">        &quot;tracer&quot;: &quot;prestateTracer&quot;,</span>
<span class="go">        &quot;traceConfig&quot;: {&quot;diffMode&quot;: True}</span>
<span class="go">    })</span>
<span class="go">    AttributeDict({</span>
<span class="go">      &#39;post&#39;: AttributeDict({</span>
<span class="go">        &#39;0x0000000000000000000000000000000000000000&#39;: AttributeDict({&#39;balance&#39;: 63000}),</span>
<span class="go">        &#39;0xcF888Cc4FAe8a3D774e574Ef8C6a261958287d04&#39;: AttributeDict({</span>
<span class="go">          &#39;balance&#39;: 115792089237316195423570985008687907853269984665640564039457583959368602105927,</span>
<span class="go">          &#39;nonce&#39;: 3</span>
<span class="go">        }),</span>
<span class="go">        &#39;0xD2593D3445a9F0f4c776715f5206FBf4CA6A0475&#39;: AttributeDict({&#39;balance&#39;: 100000})}),</span>
<span class="go">      &#39;pre&#39;: AttributeDict({</span>
<span class="go">        &#39;0x0000000000000000000000000000000000000000&#39;: AttributeDict({&#39;balance&#39;: 42000}),</span>
<span class="go">        &#39;0xcF888Cc4FAe8a3D774e574Ef8C6a261958287d04&#39;: AttributeDict({</span>
<span class="go">          &#39;balance&#39;: 115792089237316195423570985008687907853269984665640564039457583973451623990927,</span>
<span class="go">          &#39;nonce&#39;: 2</span>
<span class="go">        }),</span>
<span class="go">        &#39;0xD2593D3445a9F0f4c776715f5206FBf4CA6A0475&#39;: AttributeDict({&#39;balance&#39;: 0})</span>
<span class="go">      })</span>
<span class="go">    })</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">geth</span><span class="o">.</span><span class="n">debug</span><span class="o">.</span><span class="n">trace_transaction</span><span class="p">(</span><span class="s1">&#39;0x96014f00980a25dc7275a5eb5ed25ce0dd79c9233628c421ae373601236949b3&#39;</span><span class="p">,</span> <span class="p">{</span>
<span class="go">        &quot;tracer&quot;: &quot;callTracer&quot;,</span>
<span class="go">        &quot;tracerConfig&quot;: {&quot;withLog&quot;: False},</span>
<span class="go">    })</span>
<span class="go">    AttributeDict({&#39;calls&#39;: [AttributeDict({&#39;from&#39;: &#39;0xa0457775a08b175Cbb444eD923556Dc67Ec5Dc11&#39;,</span>
<span class="go">      &#39;gas&#39;: 154003,</span>
<span class="go">      &#39;gasUsed&#39;: 275,</span>
<span class="go">      &#39;input&#39;: HexBytes(&#39;0xad5c4648&#39;),</span>
<span class="go">      &#39;output&#39;: HexBytes(&#39;0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2&#39;),</span>
<span class="go">      &#39;to&#39;: &#39;0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D&#39;,</span>
<span class="go">      &#39;type&#39;: &#39;STATICCALL&#39;}),</span>
<span class="go">      AttributeDict({&#39;from&#39;: &#39;0xa0457775a08b175Cbb444eD923556Dc67Ec5Dc11&#39;,</span>
<span class="go">      &#39;gas&#39;: 150633,</span>
<span class="go">      &#39;gasUsed&#39;: 24678,</span>
<span class="go">      &#39;input&#39;: HexBytes(&#39;0x095ea7b30000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d000000000000000000000000000000000000007e37be2022c0914b2680000000&#39;),</span>
<span class="go">      &#39;output&#39;: HexBytes(&#39;0x0000000000000000000000000000000000000000000000000000000000000001&#39;),</span>
<span class="go">      &#39;to&#39;: &#39;0xec4cF8dCB526080792bC98E1Ef41fB4775777b6B&#39;,</span>
<span class="go">      &#39;type&#39;: &#39;CALL&#39;,</span>
<span class="go">      &#39;value&#39;: 0}),</span>
<span class="go">      AttributeDict({&#39;calls&#39;: [AttributeDict({&#39;from&#39;: &#39;0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D&#39;,</span>
<span class="go">        &#39;gas&#39;: 121167,</span>
<span class="go">        &#39;gasUsed&#39;: 27504,</span>
<span class="go">        &#39;input&#39;: HexBytes(&#39;0x23b872dd000000000000000000000000a0457775a08b175cbb444ed923556dc67ec5dc1100000000000000000000000036f0548a77bfb1d5935483d25cc40633b46e2f4d000000000000000000000000000000000000007e37be2022c0914b2680000000&#39;),</span>
<span class="go">        &#39;output&#39;: HexBytes(&#39;0x0000000000000000000000000000000000000000000000000000000000000001&#39;),</span>
<span class="go">        &#39;to&#39;: &#39;0xec4cF8dCB526080792bC98E1Ef41fB4775777b6B&#39;,</span>
<span class="go">        &#39;type&#39;: &#39;CALL&#39;,</span>
<span class="go">        &#39;value&#39;: 0}),</span>
<span class="go">        AttributeDict({&#39;from&#39;: &#39;0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D&#39;,</span>
<span class="go">        &#39;gas&#39;: 89911,</span>
<span class="go">        &#39;gasUsed&#39;: 2504,</span>
<span class="go">        &#39;input&#39;: HexBytes(&#39;0x0902f1ac&#39;),</span>
<span class="go">        &#39;output&#39;: HexBytes(&#39;0x00000000000000000000000000000000000000000000000053f54ccde429ceb70000000000000000000000000000000000000000001635eb93ecdb339a7dc022000000000000000000000000000000000000000000000000000000006641f6cf&#39;),</span>
<span class="go">        &#39;to&#39;: &#39;0x36f0548a77BFb1d5935483D25cc40633b46e2f4d&#39;,</span>
<span class="go">        &#39;type&#39;: &#39;STATICCALL&#39;}),</span>
<span class="go">        AttributeDict({&#39;from&#39;: &#39;0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D&#39;,</span>
<span class="go">        &#39;gas&#39;: 86926,</span>
<span class="go">        &#39;gasUsed&#39;: 621,</span>
<span class="go">        &#39;input&#39;: HexBytes(&#39;0x70a0823100000000000000000000000036f0548a77bfb1d5935483d25cc40633b46e2f4d&#39;),</span>
<span class="go">        &#39;output&#39;: HexBytes(&#39;0x000000000000000000000000000000000000007e37d4560e547e265a1a7dc022&#39;),</span>
<span class="go">        &#39;to&#39;: &#39;0xec4cF8dCB526080792bC98E1Ef41fB4775777b6B&#39;,</span>
<span class="go">        &#39;type&#39;: &#39;STATICCALL&#39;}),</span>
<span class="go">        AttributeDict({&#39;calls&#39;: [AttributeDict({&#39;from&#39;: &#39;0x36f0548a77BFb1d5935483D25cc40633b46e2f4d&#39;,</span>
<span class="go">          &#39;gas&#39;: 70279,</span>
<span class="go">          &#39;gasUsed&#39;: 29962,</span>
<span class="go">          &#39;input&#39;: HexBytes(&#39;0xa9059cbb0000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d00000000000000000000000000000000000000000000000053f53dfc545d56a6&#39;),</span>
<span class="go">          &#39;output&#39;: HexBytes(&#39;0x0000000000000000000000000000000000000000000000000000000000000001&#39;),</span>
<span class="go">          &#39;to&#39;: &#39;0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2&#39;,</span>
<span class="go">          &#39;type&#39;: &#39;CALL&#39;,</span>
<span class="go">          &#39;value&#39;: 0}),</span>
<span class="go">          AttributeDict({&#39;from&#39;: &#39;0x36f0548a77BFb1d5935483D25cc40633b46e2f4d&#39;,</span>
<span class="go">          &#39;gas&#39;: 40164,</span>
<span class="go">          &#39;gasUsed&#39;: 534,</span>
<span class="go">          &#39;input&#39;: HexBytes(&#39;0x70a0823100000000000000000000000036f0548a77bfb1d5935483d25cc40633b46e2f4d&#39;),</span>
<span class="go">          &#39;output&#39;: HexBytes(&#39;0x00000000000000000000000000000000000000000000000000000ed18fcc7811&#39;),</span>
<span class="go">          &#39;to&#39;: &#39;0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2&#39;,</span>
<span class="go">          &#39;type&#39;: &#39;STATICCALL&#39;}),</span>
<span class="go">          AttributeDict({&#39;from&#39;: &#39;0x36f0548a77BFb1d5935483D25cc40633b46e2f4d&#39;,</span>
<span class="go">          &#39;gas&#39;: 39233,</span>
<span class="go">          &#39;gasUsed&#39;: 621,</span>
<span class="go">          &#39;input&#39;: HexBytes(&#39;0x70a0823100000000000000000000000036f0548a77bfb1d5935483d25cc40633b46e2f4d&#39;),</span>
<span class="go">          &#39;output&#39;: HexBytes(&#39;0x000000000000000000000000000000000000007e37d4560e547e265a1a7dc022&#39;),</span>
<span class="go">          &#39;to&#39;: &#39;0xec4cF8dCB526080792bC98E1Ef41fB4775777b6B&#39;,</span>
<span class="go">          &#39;type&#39;: &#39;STATICCALL&#39;})],</span>
<span class="go">        &#39;from&#39;: &#39;0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D&#39;,</span>
<span class="go">        &#39;gas&#39;: 84769,</span>
<span class="go">        &#39;gasUsed&#39;: 64940,</span>
<span class="go">        &#39;input&#39;: HexBytes(&#39;0x022c0d9f00000000000000000000000000000000000000000000000053f53dfc545d56a600000000000000000000000000000000000000000000000000000000000000000000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000&#39;),</span>
<span class="go">        &#39;to&#39;: &#39;0x36f0548a77BFb1d5935483D25cc40633b46e2f4d&#39;,</span>
<span class="go">        &#39;type&#39;: &#39;CALL&#39;,</span>
<span class="go">        &#39;value&#39;: 0}),</span>
<span class="go">        AttributeDict({&#39;from&#39;: &#39;0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D&#39;,</span>
<span class="go">        &#39;gas&#39;: 20382,</span>
<span class="go">        &#39;gasUsed&#39;: 534,</span>
<span class="go">        &#39;input&#39;: HexBytes(&#39;0x70a082310000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d&#39;),</span>
<span class="go">        &#39;output&#39;: HexBytes(&#39;0x00000000000000000000000000000000000000000000000053f53dfc545d56a6&#39;),</span>
<span class="go">        &#39;to&#39;: &#39;0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2&#39;,</span>
<span class="go">        &#39;type&#39;: &#39;STATICCALL&#39;}),</span>
<span class="go">        AttributeDict({&#39;calls&#39;: [AttributeDict({&#39;from&#39;: &#39;0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2&#39;,</span>
<span class="go">          &#39;gas&#39;: 2300,</span>
<span class="go">          &#39;gasUsed&#39;: 83,</span>
<span class="go">          &#39;input&#39;: HexBytes(&#39;0x&#39;),</span>
<span class="go">          &#39;to&#39;: &#39;0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D&#39;,</span>
<span class="go">          &#39;type&#39;: &#39;CALL&#39;,</span>
<span class="go">          &#39;value&#39;: 6049809828398585510})],</span>
<span class="go">        &#39;from&#39;: &#39;0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D&#39;,</span>
<span class="go">        &#39;gas&#39;: 19432,</span>
<span class="go">        &#39;gasUsed&#39;: 9223,</span>
<span class="go">        &#39;input&#39;: HexBytes(&#39;0x2e1a7d4d00000000000000000000000000000000000000000000000053f53dfc545d56a6&#39;),</span>
<span class="go">        &#39;to&#39;: &#39;0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2&#39;,</span>
<span class="go">        &#39;type&#39;: &#39;CALL&#39;,</span>
<span class="go">        &#39;value&#39;: 0}),</span>
<span class="go">        AttributeDict({&#39;from&#39;: &#39;0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D&#39;,</span>
<span class="go">        &#39;gas&#39;: 3353,</span>
<span class="go">        &#39;gasUsed&#39;: 0,</span>
<span class="go">        &#39;input&#39;: HexBytes(&#39;0x&#39;),</span>
<span class="go">        &#39;to&#39;: &#39;0xE11418f9961248da36b1008b1090235f680AE8f5&#39;,</span>
<span class="go">        &#39;type&#39;: &#39;CALL&#39;,</span>
<span class="go">        &#39;value&#39;: 6049809828398585510})],</span>
<span class="go">      &#39;from&#39;: &#39;0xa0457775a08b175Cbb444eD923556Dc67Ec5Dc11&#39;,</span>
<span class="go">      &#39;gas&#39;: 125270,</span>
<span class="go">      &#39;gasUsed&#39;: 122013,</span>
<span class="go">      &#39;input&#39;: HexBytes(&#39;0x791ac947000000000000000000000000000000000000007e37be2022c0914b2680000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000e11418f9961248da36b1008b1090235f680ae8f5000000000000000000000000000000000000000000000000000000006641fe7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000ec4cf8dcb526080792bc98e1ef41fb4775777b6b000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2&#39;),</span>
<span class="go">      &#39;to&#39;: &#39;0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D&#39;,</span>
<span class="go">      &#39;type&#39;: &#39;CALL&#39;,</span>
<span class="go">      &#39;value&#39;: 0})],</span>
<span class="go">    &#39;from&#39;: &#39;0xE11418f9961248da36b1008b1090235f680AE8f5&#39;,</span>
<span class="go">    &#39;gas&#39;: 185574,</span>
<span class="go">    &#39;gasUsed&#39;: 144300,</span>
<span class="go">    &#39;input&#39;: HexBytes(&#39;0x56feb11b000000000000000000000000ec4cf8dcb526080792bc98e1ef41fb4775777b6b000000000000000000000000000000000000007e37be2022c0914b2680000000&#39;),</span>
<span class="go">    &#39;to&#39;: &#39;0xa0457775a08b175Cbb444eD923556Dc67Ec5Dc11&#39;,</span>
<span class="go">    &#39;type&#39;: &#39;CALL&#39;,</span>
<span class="go">    &#39;value&#39;: 0})</span>

<span class="go">    &gt;&gt;&gt; w3.geth.debug.trace_transaction(tx_hash, {&#39;tracer&#39;: &#39;4byteTracer&#39;})</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<span id="document-web3.tracing"></span><section id="module-web3.tracing">
<span id="tracing-api"></span><h3>Tracing API<a class="headerlink" href="#module-web3.tracing" title="Link to this heading">ÔÉÅ</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">web3.tracing</span></code> object exposes modules that enable you to interact with the JSON-RPC <code class="docutils literal notranslate"><span class="pre">trace_</span></code> endpoints supported by Erigon and Nethermind.</p>
<p>The following methods are available on the <code class="docutils literal notranslate"><span class="pre">web3.tracing</span></code> namespace:</p>
<dl class="py method">
<dt class="sig sig-object py" id="web3.tracing.trace_replay_transaction">
<span class="sig-prename descclassname"><span class="pre">web3.tracing.</span></span><span class="sig-name descname"><span class="pre">trace_replay_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.tracing.trace_replay_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.tracing.trace_replay_block_transactions">
<span class="sig-prename descclassname"><span class="pre">web3.tracing.</span></span><span class="sig-name descname"><span class="pre">trace_replay_block_transactions</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.tracing.trace_replay_block_transactions" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.tracing.trace_filter">
<span class="sig-prename descclassname"><span class="pre">web3.tracing.</span></span><span class="sig-name descname"><span class="pre">trace_filter</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.tracing.trace_filter" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.tracing.trace_block">
<span class="sig-prename descclassname"><span class="pre">web3.tracing.</span></span><span class="sig-name descname"><span class="pre">trace_block</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.tracing.trace_block" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.tracing.trace_transaction">
<span class="sig-prename descclassname"><span class="pre">web3.tracing.</span></span><span class="sig-name descname"><span class="pre">trace_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.tracing.trace_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.tracing.trace_call">
<span class="sig-prename descclassname"><span class="pre">web3.tracing.</span></span><span class="sig-name descname"><span class="pre">trace_call</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.tracing.trace_call" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.tracing.trace_raw_transaction">
<span class="sig-prename descclassname"><span class="pre">web3.tracing.</span></span><span class="sig-name descname"><span class="pre">trace_raw_transaction</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#web3.tracing.trace_raw_transaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd></dd></dl>

</section>
<span id="document-web3.utils"></span><section id="module-web3.utils">
<span id="utils"></span><h3>Utils<a class="headerlink" href="#module-web3.utils" title="Link to this heading">ÔÉÅ</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">utils</span></code> module houses public utility functions and classes.</p>
<section id="module-web3.utils.abi">
<span id="abi"></span><h4>ABI<a class="headerlink" href="#module-web3.utils.abi" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py function">
<dt class="sig sig-object py" id="web3.utils.abi.get_abi_element_info">
<span class="sig-prename descclassname"><span class="pre">web3.utils.abi.</span></span><span class="sig-name descname"><span class="pre">get_abi_element_info</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abi</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ABIFunction</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIConstructor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIFallback</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIReceive</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIEvent</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIError</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abi_element_identifier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.13)"><span class="pre">Type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">FallbackFn</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.13)"><span class="pre">Type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ReceiveFn</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">abi_codec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ABIElementInfo</span></span></span><a class="headerlink" href="#web3.utils.abi.get_abi_element_info" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Information about the function ABI, selector and input arguments.</p>
<p>Returns the ABI which matches the provided identifier, named arguments (<code class="docutils literal notranslate"><span class="pre">args</span></code>)
and keyword args (<code class="docutils literal notranslate"><span class="pre">kwargs</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abi</strong> (<cite>ABI</cite>) ‚Äì Contract ABI.</p></li>
<li><p><strong>abi_element_identifier</strong> (<cite>ABIElementIdentifier</cite>) ‚Äì Find an element ABI with matching identifier.</p></li>
<li><p><strong>args</strong> (<cite>Optional[Sequence[Any]]</cite>) ‚Äì Find a function ABI with matching args.</p></li>
<li><p><strong>abi_codec</strong> (<cite>Optional[Any]</cite>) ‚Äì Codec used for encoding and decoding. Default with     <cite>strict_bytes_type_checking</cite> enabled.</p></li>
<li><p><strong>kwargs</strong> (<cite>Optional[Dict[str, Any]]</cite>) ‚Äì Find an element ABI with matching kwargs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Element information including the ABI, selector and args.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>ABIElementInfo</cite></p>
</dd>
</dl>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.utils.abi</span> <span class="kn">import</span> <span class="n">get_abi_element_info</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abi</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;constant&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uint256&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uint256&quot;</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">],</span>
<span class="gp">... </span>        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;multiply&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uint256&quot;</span><span class="p">}],</span>
<span class="gp">... </span>        <span class="s2">&quot;payable&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;stateMutability&quot;</span><span class="p">:</span> <span class="s2">&quot;nonpayable&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn_info</span> <span class="o">=</span> <span class="n">get_abi_element_info</span><span class="p">(</span><span class="n">abi</span><span class="p">,</span> <span class="s2">&quot;multiply&quot;</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn_info</span><span class="p">[</span><span class="s2">&quot;abi&quot;</span><span class="p">]</span>
<span class="go">{&#39;constant&#39;: False, &#39;inputs&#39;: [{&#39;name&#39;: &#39;a&#39;, &#39;type&#39;: &#39;uint256&#39;}, {&#39;name&#39;: &#39;b&#39;, &#39;type&#39;: &#39;uint256&#39;}], &#39;name&#39;: &#39;multiply&#39;, &#39;outputs&#39;: [{&#39;name&#39;: &#39;result&#39;, &#39;type&#39;: &#39;uint256&#39;}], &#39;payable&#39;: False, &#39;stateMutability&#39;: &#39;nonpayable&#39;, &#39;type&#39;: &#39;function&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn_info</span><span class="p">[</span><span class="s2">&quot;selector&quot;</span><span class="p">]</span>
<span class="go">&#39;0x165c4a16&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fn_info</span><span class="p">[</span><span class="s2">&quot;arguments&quot;</span><span class="p">]</span>
<span class="go">(7, 3)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web3.utils.abi.get_abi_element">
<span class="sig-prename descclassname"><span class="pre">web3.utils.abi.</span></span><span class="sig-name descname"><span class="pre">get_abi_element</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abi</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ABIFunction</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIConstructor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIFallback</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIReceive</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIEvent</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIError</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abi_element_identifier</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.13)"><span class="pre">Type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">FallbackFn</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Type" title="(in Python v3.13)"><span class="pre">Type</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ReceiveFn</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">abi_codec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ABIFunction</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIConstructor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIFallback</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIReceive</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIEvent</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIError</span></span></span><a class="headerlink" href="#web3.utils.abi.get_abi_element" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Return the interface for an <code class="docutils literal notranslate"><span class="pre">ABIElement</span></code> from the <code class="docutils literal notranslate"><span class="pre">abi</span></code> that matches the
provided identifier and arguments.</p>
<p><code class="docutils literal notranslate"><span class="pre">abi</span></code> may be a list of all ABI elements in a contract or a subset of elements.
Passing only functions or events can be useful when names are not deterministic.
For example, if names overlap between functions and events.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ABIElementIdentifier</span></code> value may be a function name, signature, or a
<code class="docutils literal notranslate"><span class="pre">FallbackFn</span></code> or <code class="docutils literal notranslate"><span class="pre">ReceiveFn</span></code>. When named arguments (<code class="docutils literal notranslate"><span class="pre">args</span></code>) and/or keyword args
(<code class="docutils literal notranslate"><span class="pre">kwargs</span></code>) are provided, they are included in the search filters.</p>
<p>The <cite>abi_codec</cite> may be overridden if custom encoding and decoding is required. The
default is used if no codec is provided. More details about customizations are in
the <a class="reference external" href="https://eth-abi.readthedocs.io/en/latest/codecs.html">eth-abi Codecs Doc</a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abi</strong> (<cite>ABI</cite>) ‚Äì Contract ABI.</p></li>
<li><p><strong>abi_element_identifier</strong> (<cite>ABIElementIdentifier</cite>) ‚Äì Find an element ABI with matching identifier. The     identifier may be a function name, signature, or <code class="docutils literal notranslate"><span class="pre">FallbackFn</span></code> or <code class="docutils literal notranslate"><span class="pre">ReceiveFn</span></code>.     A function signature is in the form <code class="docutils literal notranslate"><span class="pre">name(arg1Type,arg2Type,...)</span></code>.</p></li>
<li><p><strong>args</strong> (<cite>Optional[Sequence[Any]]</cite>) ‚Äì Find an element ABI with matching args.</p></li>
<li><p><strong>abi_codec</strong> (<cite>Optional[Any]</cite>) ‚Äì Codec used for encoding and decoding. Default with     <cite>strict_bytes_type_checking</cite> enabled.</p></li>
<li><p><strong>kwargs</strong> (<cite>Optional[Dict[str, Any]]</cite>) ‚Äì Find an element ABI with matching kwargs.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ABI element for the specific ABI element.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>ABIElement</cite></p>
</dd>
</dl>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.utils.abi</span> <span class="kn">import</span> <span class="n">get_abi_element</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abi</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;constant&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uint256&quot;</span><span class="p">},</span>
<span class="gp">... </span>            <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uint256&quot;</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">],</span>
<span class="gp">... </span>        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;multiply&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uint256&quot;</span><span class="p">}],</span>
<span class="gp">... </span>        <span class="s2">&quot;payable&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;stateMutability&quot;</span><span class="p">:</span> <span class="s2">&quot;nonpayable&quot;</span><span class="p">,</span>
<span class="gp">... </span>        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_abi_element</span><span class="p">(</span><span class="n">abi</span><span class="p">,</span> <span class="s2">&quot;multiply&quot;</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="go">{&#39;constant&#39;: False, &#39;inputs&#39;: [{&#39;name&#39;: &#39;a&#39;, &#39;type&#39;: &#39;uint256&#39;}, {&#39;name&#39;: &#39;b&#39;, &#39;type&#39;: &#39;uint256&#39;}], &#39;name&#39;: &#39;multiply&#39;, &#39;outputs&#39;: [{&#39;name&#39;: &#39;result&#39;, &#39;type&#39;: &#39;uint256&#39;}], &#39;payable&#39;: False, &#39;stateMutability&#39;: &#39;nonpayable&#39;, &#39;type&#39;: &#39;function&#39;}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web3.utils.abi.check_if_arguments_can_be_encoded">
<span class="sig-prename descclassname"><span class="pre">web3.utils.abi.</span></span><span class="sig-name descname"><span class="pre">check_if_arguments_can_be_encoded</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abi_element</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ABIFunction</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIConstructor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIFallback</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIReceive</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIEvent</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIError</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">abi_codec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.13)"><span class="pre">Dict</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.13)"><span class="pre">Any</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a></span></span><a class="headerlink" href="#web3.utils.abi.check_if_arguments_can_be_encoded" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Check if the provided arguments can be encoded with the element ABI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abi_element</strong> (<cite>ABIElement</cite>) ‚Äì The ABI element.</p></li>
<li><p><strong>args</strong> (<cite>Optional[Sequence[Any]]</cite>) ‚Äì Positional arguments.</p></li>
<li><p><strong>abi_codec</strong> (<cite>Optional[Any]</cite>) ‚Äì Codec used for encoding and decoding. Default with     <cite>strict_bytes_type_checking</cite> enabled.</p></li>
<li><p><strong>kwargs</strong> (<cite>Optional[Dict[str, Any]]</cite>) ‚Äì Keyword arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if the arguments can be encoded, False otherwise.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>bool</cite></p>
</dd>
</dl>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.utils.abi</span> <span class="kn">import</span> <span class="n">check_if_arguments_can_be_encoded</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abi</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;constant&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uint256&quot;</span><span class="p">},</span>
<span class="gp">... </span>        <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uint256&quot;</span><span class="p">},</span>
<span class="gp">... </span>    <span class="p">],</span>
<span class="gp">... </span>    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;multiply&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;result&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;uint256&quot;</span><span class="p">}],</span>
<span class="gp">... </span>    <span class="s2">&quot;payable&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;stateMutability&quot;</span><span class="p">:</span> <span class="s2">&quot;nonpayable&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">check_if_arguments_can_be_encoded</span><span class="p">(</span><span class="n">abi</span><span class="p">,</span> <span class="o">*</span><span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="o">**</span><span class="p">{})</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web3.utils.abi.get_event_abi">
<span class="sig-prename descclassname"><span class="pre">web3.utils.abi.</span></span><span class="sig-name descname"><span class="pre">get_event_abi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">abi</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><span class="pre">ABIFunction</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIConstructor</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIFallback</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIReceive</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIEvent</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">ABIError</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">argument_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ABIEvent</span></span></span><a class="headerlink" href="#web3.utils.abi.get_event_abi" title="Link to this definition">ÔÉÅ</a></dt>
<dd><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This function is deprecated. It is unable to distinguish between
overloaded events. Use <code class="docutils literal notranslate"><span class="pre">get_abi_element</span></code> instead.</p>
</div>
<p>Find the event interface with the given name and/or arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>abi</strong> (<cite>ABI</cite>) ‚Äì Contract ABI.</p></li>
<li><p><strong>event_name</strong> (<cite>str</cite>) ‚Äì Find an event abi with matching event name.</p></li>
<li><p><strong>argument_names</strong> (<cite>Optional[Sequence[str]]</cite>) ‚Äì Find an event abi with matching arguments.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ABI for the event interface.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>ABIEvent</cite></p>
</dd>
</dl>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.utils</span> <span class="kn">import</span> <span class="n">get_event_abi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abi</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">... </span>  <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;myFunction&quot;</span><span class="p">,</span> <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">[]},</span>
<span class="gp">... </span>  <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;function&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;myFunction2&quot;</span><span class="p">,</span> <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[],</span> <span class="s2">&quot;outputs&quot;</span><span class="p">:</span> <span class="p">[]},</span>
<span class="gp">... </span>  <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;event&quot;</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;MyEvent&quot;</span><span class="p">,</span> <span class="s2">&quot;inputs&quot;</span><span class="p">:</span> <span class="p">[]}</span>
<span class="gp">... </span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_event_abi</span><span class="p">(</span><span class="n">abi</span><span class="p">,</span> <span class="s1">&#39;MyEvent&#39;</span><span class="p">)</span>
<span class="go">{&#39;type&#39;: &#39;event&#39;, &#39;name&#39;: &#39;MyEvent&#39;, &#39;inputs&#39;: []}</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web3.utils.abi.get_event_log_topics">
<span class="sig-prename descclassname"><span class="pre">web3.utils.abi.</span></span><span class="sig-name descname"><span class="pre">get_event_log_topics</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">event_abi</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ABIEvent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topics</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes" title="(in HexBytes v1.2)"><span class="pre">HexBytes</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes" title="(in HexBytes v1.2)"><span class="pre">HexBytes</span></a><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#web3.utils.abi.get_event_log_topics" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Return topics for an event ABI.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>event_abi</strong> (<cite>ABIEvent</cite>) ‚Äì Event ABI.</p></li>
<li><p><strong>topics</strong> (<cite>Sequence[HexBytes]</cite>) ‚Äì Transaction topics from a <cite>LogReceipt</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Event topics for the event ABI.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>Sequence[HexBytes]</cite></p>
</dd>
</dl>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.utils</span> <span class="kn">import</span> <span class="n">get_event_log_topics</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">abi</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>  <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;event&#39;</span><span class="p">,</span>
<span class="gp">... </span>  <span class="s1">&#39;anonymous&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
<span class="gp">... </span>  <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;MyEvent&#39;</span><span class="p">,</span>
<span class="gp">... </span>  <span class="s1">&#39;inputs&#39;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>    <span class="p">{</span>
<span class="gp">... </span>      <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;s&#39;</span><span class="p">,</span>
<span class="gp">... </span>      <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;uint256&#39;</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span>  <span class="p">]</span>
<span class="gp">... </span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">keccak_signature</span> <span class="o">=</span> <span class="sa">b</span><span class="s1">&#39;l+Ff</span><span class="se">\xba\x8d\xa5\xa9</span><span class="s1">W</span><span class="se">\x17</span><span class="s1">b</span><span class="se">\x1d\x87\x9a</span><span class="s1">w</span><span class="se">\xde</span><span class="s1">r_=</span><span class="se">\x81</span><span class="s1">g</span><span class="se">\t\xb9\xcb\xe9\xf0</span><span class="s1">Y</span><span class="se">\xb8\xf8</span><span class="s1">u</span><span class="se">\xe2\x84</span><span class="s1">&#39;</span>  <span class="c1"># noqa: E501</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">get_event_log_topics</span><span class="p">(</span><span class="n">abi</span><span class="p">,</span> <span class="p">[</span><span class="n">keccak_signature</span><span class="p">,</span> <span class="s1">&#39;0x1&#39;</span><span class="p">,</span> <span class="s1">&#39;0x2&#39;</span><span class="p">])</span>
<span class="go">[&#39;0x1&#39;, &#39;0x2&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="web3.utils.abi.log_topic_to_bytes">
<span class="sig-prename descclassname"><span class="pre">web3.utils.abi.</span></span><span class="sig-name descname"><span class="pre">log_topic_to_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">log_topic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.13)"><span class="pre">bool</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">HexStr</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#bytes" title="(in Python v3.13)"><span class="pre">bytes</span></a></span></span><a class="headerlink" href="#web3.utils.abi.log_topic_to_bytes" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Return topic signature as bytes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>log_topic</strong> (<cite>Union[Primitives, HexStr, str]</cite>) ‚Äì Event topic from a <cite>LogReceipt</cite>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Topic signature as bytes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><cite>bytes</cite></p>
</dd>
</dl>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">web3.utils</span> <span class="kn">import</span> <span class="n">log_topic_to_bytes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">log_topic_to_bytes</span><span class="p">(</span><span class="s1">&#39;0xa12fd1&#39;</span><span class="p">)</span>
<span class="go">b&#39;\xa1/\xd1&#39;</span>
</pre></div>
</div>
</dd></dl>

</section>
<section id="address">
<h4>Address<a class="headerlink" href="#address" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.utils.abi.utils.get_create_address">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">get_create_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sender</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nonce</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.abi.utils.get_create_address" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Return the checksummed contract address generated by using the <code class="docutils literal notranslate"><span class="pre">CREATE</span></code> opcode by
a sender address with a given nonce.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.utils.abi.utils.get_create2_address">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">get_create2_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sender</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">salt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_code</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.abi.utils.get_create2_address" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Return the checksummed contract address generated by using the <code class="docutils literal notranslate"><span class="pre">CREATE2</span></code> opcode by
a sender address with a given salt and contract bytecode. See
<a class="reference external" href="https://eips.ethereum.org/EIPS/eip-1014">EIP-1014</a>.</p>
</dd></dl>

</section>
<section id="caching">
<h4>Caching<a class="headerlink" href="#caching" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="web3.utils.abi.utils.SimpleCache">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">SimpleCache</span></span><a class="headerlink" href="#web3.utils.abi.utils.SimpleCache" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The main cache class being used internally by web3.py. In some cases, it may prove
useful to set your own cache size and pass in your own instance of this class where
supported.</p>
</dd></dl>

</section>
<section id="exception-handling">
<h4>Exception Handling<a class="headerlink" href="#exception-handling" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.utils.abi.utils.handle_offchain_lookup">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">handle_offchain_lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offchain_lookup_payload</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.abi.utils.handle_offchain_lookup" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Handle <code class="docutils literal notranslate"><span class="pre">OffchainLookup</span></code> reverts on contract function calls manually. For an example, see <a class="reference internal" href="index.html#ccip-read-example"><span class="std std-ref">CCIP Read support for offchain lookup</span></a>
within the examples section.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="web3.utils.abi.utils.async_handle_offchain_lookup">
<span class="sig-prename descclassname"><span class="pre">utils.</span></span><span class="sig-name descname"><span class="pre">async_handle_offchain_lookup</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">offchain_lookup_payload</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transaction</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.utils.abi.utils.async_handle_offchain_lookup" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>The async version of the <code class="docutils literal notranslate"><span class="pre">handle_offchain_lookup()</span></code> utility method described above.</p>
</dd></dl>

</section>
</section>
<span id="document-gas_price"></span><section id="gas-price-api">
<span id="gas-price"></span><h3>Gas Price API<a class="headerlink" href="#gas-price-api" title="Link to this heading">ÔÉÅ</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Gas price strategy is only supported for legacy transactions. The London fork
introduced <code class="docutils literal notranslate"><span class="pre">maxFeePerGas</span></code> and <code class="docutils literal notranslate"><span class="pre">maxPriorityFeePerGas</span></code> transaction parameters
which should be used over <code class="docutils literal notranslate"><span class="pre">gasPrice</span></code> whenever possible.</p>
</div>
<p>For Ethereum (legacy) transactions, gas price is a delicate property. For this reason,
Web3 includes an API for configuring it.</p>
<p>The Gas Price API allows you to define Web3‚Äôs behaviour for populating the gas price.
This is done using a ‚ÄúGas Price Strategy‚Äù - a method which takes the Web3 object and a
transaction dictionary and returns a gas price (denominated in wei).</p>
<section id="retrieving-gas-price">
<h4>Retrieving gas price<a class="headerlink" href="#retrieving-gas-price" title="Link to this heading">ÔÉÅ</a></h4>
<p>To retrieve the gas price using the selected strategy simply call
<a class="reference internal" href="index.html#web3.eth.Eth.generate_gas_price" title="web3.eth.Eth.generate_gas_price"><code class="xref py py-meth docutils literal notranslate"><span class="pre">generate_gas_price()</span></code></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">web3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">generate_gas_price</span><span class="p">()</span>
<span class="go">20000000000</span>
</pre></div>
</div>
</section>
<section id="creating-a-gas-price-strategy">
<h4>Creating a gas price strategy<a class="headerlink" href="#creating-a-gas-price-strategy" title="Link to this heading">ÔÉÅ</a></h4>
<p>A gas price strategy is implemented as a python method with the following
signature:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">gas_price_strategy</span><span class="p">(</span><span class="n">web3</span><span class="p">,</span> <span class="n">transaction_params</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The method must return a positive integer representing the gas price in wei.</p>
<p>To demonstrate, here is a rudimentary example of a gas price strategy that
returns a higher gas price when the value of the transaction is higher than
1 Ether.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>

<span class="k">def</span> <span class="nf">value_based_gas_price_strategy</span><span class="p">(</span><span class="n">web3</span><span class="p">,</span> <span class="n">transaction_params</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">transaction_params</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">Web3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;ether&#39;</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">Web3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;gwei&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">Web3</span><span class="o">.</span><span class="n">to_wei</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;gwei&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="selecting-the-gas-price-strategy">
<h4>Selecting the gas price strategy<a class="headerlink" href="#selecting-the-gas-price-strategy" title="Link to this heading">ÔÉÅ</a></h4>
<p>The gas price strategy can be set by calling <a class="reference internal" href="index.html#web3.eth.Eth.set_gas_price_strategy" title="web3.eth.Eth.set_gas_price_strategy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_gas_price_strategy()</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>

<span class="k">def</span> <span class="nf">value_based_gas_price_strategy</span><span class="p">(</span><span class="n">web3</span><span class="p">,</span> <span class="n">transaction_params</span><span class="p">):</span>
    <span class="o">...</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">set_gas_price_strategy</span><span class="p">(</span><span class="n">value_based_gas_price_strategy</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="module-web3.gas_strategies.rpc">
<span id="available-gas-price-strategies"></span><h4>Available gas price strategies<a class="headerlink" href="#module-web3.gas_strategies.rpc" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py method">
<dt class="sig sig-object py" id="web3.gas_strategies.rpc.rpc_gas_price_strategy">
<span class="sig-prename descclassname"><span class="pre">web3.gas_strategies.rpc.</span></span><span class="sig-name descname"><span class="pre">rpc_gas_price_strategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">web3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transaction_params</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.gas_strategies.rpc.rpc_gas_price_strategy" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Makes a call to the <a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_gasprice">JSON-RPC eth_gasPrice
method</a> which returns
the gas price configured by the connected Ethereum node.</p>
</dd></dl>

<dl class="py method" id="module-web3.gas_strategies.time_based">
<dt class="sig sig-object py" id="web3.gas_strategies.time_based.construct_time_based_gas_price_strategy">
<span class="sig-prename descclassname"><span class="pre">web3.gas_strategies.time_based.</span></span><span class="sig-name descname"><span class="pre">construct_time_based_gas_price_strategy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">max_wait_seconds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_size</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">120</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">probability</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">98</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weighted</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#web3.gas_strategies.time_based.construct_time_based_gas_price_strategy" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Constructs a strategy which will compute a gas price such that the
transaction will be mined within a number of seconds defined by
<code class="docutils literal notranslate"><span class="pre">max_wait_seconds</span></code> with a probability defined by <code class="docutils literal notranslate"><span class="pre">probability</span></code>.  The
gas price is computed by sampling <code class="docutils literal notranslate"><span class="pre">sample_size</span></code> of the most recently
mined blocks. If <code class="docutils literal notranslate"><span class="pre">weighted=True</span></code>, the block time will be weighted towards
more recently mined blocks.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">max_wait_seconds</span></code> The desired maximum number of seconds the
transaction should take to mine.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sample_size</span></code> The number of recent blocks to sample</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">probability</span></code> An integer representation of the desired probability that
the transaction will be mined within <code class="docutils literal notranslate"><span class="pre">max_wait_seconds</span></code>.  0 means 0%
and 100 means 100%.</p></li>
</ul>
<p>The following ready to use versions of this strategy are available.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">web3.gas_strategies.time_based.fast_gas_price_strategy</span></code>: Transaction mined within 60 seconds.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.gas_strategies.time_based.medium_gas_price_strategy</span></code>: Transaction mined within 5 minutes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.gas_strategies.time_based.slow_gas_price_strategy</span></code>: Transaction mined within 1 hour.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">web3.gas_strategies.time_based.glacial_gas_price_strategy</span></code>: Transaction mined within 24 hours.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Due to the overhead of sampling the recent blocks it is
recommended that a caching solution be used to reduce the amount of chain
data that needs to be re-fetched for each request.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">web3</span> <span class="kn">import</span> <span class="n">Web3</span>
<span class="kn">from</span> <span class="nn">web3.gas_strategies.time_based</span> <span class="kn">import</span> <span class="n">medium_gas_price_strategy</span>

<span class="n">w3</span> <span class="o">=</span> <span class="n">Web3</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">w3</span><span class="o">.</span><span class="n">eth</span><span class="o">.</span><span class="n">set_gas_price_strategy</span><span class="p">(</span><span class="n">medium_gas_price_strategy</span><span class="p">)</span>

<span class="n">w3</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">cache_allowed_requests</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>
<span id="document-ens"></span><section id="ens-api">
<span id="module-ens"></span><h3>ENS API<a class="headerlink" href="#ens-api" title="Link to this heading">ÔÉÅ</a></h3>
<p><a class="reference internal" href="#document-ens_overview"><span class="doc">Ethereum Name Service (ENS)</span></a> has a friendly overview.</p>
<p>Continue below for the detailed specs on each method and class in the ens module.</p>
<section id="module-ens.ens">
<span id="ens-ens-module"></span><h4>ens.ens module<a class="headerlink" href="#module-ens.ens" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="ens.ens.ENS">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.ens.</span></span><span class="sig-name descname"><span class="pre">ENS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">provider</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">BaseProvider</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ChecksumAddress</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">middleware</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.13)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Middleware</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ens.ens.ENS" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Quick access to common Ethereum Name Service functions,
like getting the address for a name.</p>
<p>Unless otherwise specified, all addresses are assumed to be a <cite>str</cite> in
<a class="reference external" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md">checksum format</a>,  # blocklint: pragma # noqa: E501
like: <code class="docutils literal notranslate"><span class="pre">&quot;0x314159265dD8dbb310642f98f50C066173C1259b&quot;</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="ens.ens.ENS.from_web3">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_web3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w3</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="index.html#web3.Web3" title="web3.Web3"><span class="pre">Web3</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ChecksumAddress</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="index.html#ens.ens.ENS" title="ens.ens.ENS"><span class="pre">ENS</span></a></span></span><a class="headerlink" href="#ens.ens.ENS.from_web3" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Generate an ENS instance from a Web3 instance</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>w3</strong> (<a class="reference internal" href="index.html#web3.Web3" title="web3.Web3"><em>web3.Web3</em></a>) ‚Äì to infer connection, middleware, and codec information</p></li>
<li><p><strong>addr</strong> (<em>hex-string</em>) ‚Äì the address of the ENS registry on-chain. If not
provided, defaults to the mainnet ENS registry address.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.ens.ENS.address">
<span class="sig-name descname"><span class="pre">address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">coin_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ChecksumAddress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#ens.ens.ENS.address" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Look up the Ethereum address that <cite>name</cite> currently points to.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì an ENS name to look up</p></li>
<li><p><strong>coin_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) ‚Äì if provided, look up the address for this coin type</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.InvalidName" title="ens.exceptions.InvalidName"><strong>InvalidName</strong></a> ‚Äì if <cite>name</cite> has invalid syntax</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.ResolverNotFound" title="ens.exceptions.ResolverNotFound"><strong>ResolverNotFound</strong></a> ‚Äì if no resolver found for <cite>name</cite></p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnsupportedFunction" title="ens.exceptions.UnsupportedFunction"><strong>UnsupportedFunction</strong></a> ‚Äì if the resolver does not support the <code class="docutils literal notranslate"><span class="pre">addr()</span></code>
function</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.ens.ENS.setup_address">
<span class="sig-name descname"><span class="pre">setup_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address:</span> <span class="pre">Address</span> <span class="pre">|</span> <span class="pre">ChecksumAddress</span> <span class="pre">|</span> <span class="pre">HexAddress</span> <span class="pre">=</span> <span class="pre">&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coin_type:</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transact:</span> <span class="pre">TxParams</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes" title="(in HexBytes v1.2)"><span class="pre">HexBytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#ens.ens.ENS.setup_address" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set up the name to point to the supplied address.
The sender of the transaction must own the name, or
its parent name.</p>
<p>Example: If the caller owns <code class="docutils literal notranslate"><span class="pre">parentname.eth</span></code> with no subdomains
and calls this method with <code class="docutils literal notranslate"><span class="pre">sub.parentname.eth</span></code>,
then <code class="docutils literal notranslate"><span class="pre">sub</span></code> will be created as part of this call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name to set up</p></li>
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì name will point to this address, in checksum format.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, erase the record. If not specified, name will point
to the owner‚Äôs address.</p></li>
<li><p><strong>coin_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) ‚Äì if provided, set up the address for this coin type</p></li>
<li><p><strong>transact</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) ‚Äì the transaction configuration, like in
<a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.InvalidName" title="ens.exceptions.InvalidName"><strong>InvalidName</strong></a> ‚Äì if <code class="docutils literal notranslate"><span class="pre">name</span></code> has invalid syntax</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnauthorizedError" title="ens.exceptions.UnauthorizedError"><strong>UnauthorizedError</strong></a> ‚Äì if <code class="docutils literal notranslate"><span class="pre">'from'</span></code> in <cite>transact</cite> does not own <cite>name</cite></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.ens.ENS.name">
<span class="sig-name descname"><span class="pre">name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ChecksumAddress</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#ens.ens.ENS.name" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Look up the name that the address points to, using a
reverse lookup. Reverse lookup is opt-in for name owners.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>address</strong> (<em>hex-string</em>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.ens.ENS.setup_name">
<span class="sig-name descname"><span class="pre">setup_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ChecksumAddress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transact</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TxParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes" title="(in HexBytes v1.2)"><span class="pre">HexBytes</span></a></span></span><a class="headerlink" href="#ens.ens.ENS.setup_name" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set up the address for reverse lookup, aka ‚Äúcaller ID‚Äù.
After successful setup, the method <code class="xref py py-meth docutils literal notranslate"><span class="pre">name()</span></code> will return
<cite>name</cite> when supplied with <cite>address</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name that address will point to</p></li>
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì address to set up, in checksum format</p></li>
<li><p><strong>transact</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) ‚Äì the transaction configuration, like in
<code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.AddressMismatch" title="ens.exceptions.AddressMismatch"><strong>AddressMismatch</strong></a> ‚Äì if the name does not already point to the address</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.InvalidName" title="ens.exceptions.InvalidName"><strong>InvalidName</strong></a> ‚Äì if <cite>name</cite> has invalid syntax</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnauthorizedError" title="ens.exceptions.UnauthorizedError"><strong>UnauthorizedError</strong></a> ‚Äì if <code class="docutils literal notranslate"><span class="pre">'from'</span></code> in <cite>transact</cite> does not own <cite>name</cite></p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnownedName" title="ens.exceptions.UnownedName"><strong>UnownedName</strong></a> ‚Äì if no one owns <cite>name</cite></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.ens.ENS.owner">
<span class="sig-name descname"><span class="pre">owner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ChecksumAddress</span></span></span><a class="headerlink" href="#ens.ens.ENS.owner" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Get the owner of a name. Note that this may be different from the
deed holder in the ‚Äò.eth‚Äô registrar. Learn more about the difference
between deed and name ownership in the ENS <a class="reference external" href="http://docs.ens.domains/en/latest/userguide.html#managing-ownership">Managing Ownership docs</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name to look up</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>owner address</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.ens.ENS.setup_owner">
<span class="sig-name descname"><span class="pre">setup_owner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_owner</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ChecksumAddress</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transact</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TxParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ChecksumAddress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#ens.ens.ENS.setup_owner" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set the owner of the supplied name to <cite>new_owner</cite>.</p>
<p>For typical scenarios, you‚Äôll never need to call this method directly,
simply call <a class="reference internal" href="#ens.ens.ENS.setup_name" title="ens.ens.ENS.setup_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setup_name()</span></code></a> or <a class="reference internal" href="#ens.ens.ENS.setup_address" title="ens.ens.ENS.setup_address"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setup_address()</span></code></a>. This method does <em>not</em>
set up the name to point to an address.</p>
<p>If <cite>new_owner</cite> is not supplied, then this will assume you
want the same owner as the parent domain.</p>
<p>If the caller owns <code class="docutils literal notranslate"><span class="pre">parentname.eth</span></code> with no subdomains
and calls this method with <code class="docutils literal notranslate"><span class="pre">sub.parentname.eth</span></code>,
then <code class="docutils literal notranslate"><span class="pre">sub</span></code> will be created as part of this call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name to set up</p></li>
<li><p><strong>new_owner</strong> ‚Äì account that will own <cite>name</cite>. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, set owner to
empty addr. If not specified, name will point to the parent domain
owner‚Äôs address.</p></li>
<li><p><strong>transact</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) ‚Äì the transaction configuration, like in
<a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.InvalidName" title="ens.exceptions.InvalidName"><strong>InvalidName</strong></a> ‚Äì if <cite>name</cite> has invalid syntax</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnauthorizedError" title="ens.exceptions.UnauthorizedError"><strong>UnauthorizedError</strong></a> ‚Äì if <code class="docutils literal notranslate"><span class="pre">'from'</span></code> in <cite>transact</cite> does not own <cite>name</cite></p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the new owner‚Äôs address</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.ens.ENS.resolver">
<span class="sig-name descname"><span class="pre">resolver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="index.html#web3.contract.Contract" title="web3.contract.Contract"><span class="pre">Contract</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#ens.ens.ENS.resolver" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Get the resolver for an ENS name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì The ENS name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.ens.ENS.get_text">
<span class="sig-name descname"><span class="pre">get_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#ens.ens.ENS.get_text" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Get the value of a text record by key from an ENS name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name to look up</p></li>
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name‚Äôs text record key</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ENS name‚Äôs text record value</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnsupportedFunction" title="ens.exceptions.UnsupportedFunction"><strong>UnsupportedFunction</strong></a> ‚Äì If the resolver does not support
the ‚Äú0x59d1d43c‚Äù interface id</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.ResolverNotFound" title="ens.exceptions.ResolverNotFound"><strong>ResolverNotFound</strong></a> ‚Äì If no resolver is found for the provided name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.ens.ENS.set_text">
<span class="sig-name descname"><span class="pre">set_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">transact</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TxParams</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes" title="(in HexBytes v1.2)"><span class="pre">HexBytes</span></a></span></span><a class="headerlink" href="#ens.ens.ENS.set_text" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set the value of a text record of an ENS name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name</p></li>
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì Name of the attribute to set</p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì Value to set the attribute to</p></li>
<li><p><strong>transact</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) ‚Äì The transaction configuration, like in
<a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Transaction hash</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>HexBytes</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnsupportedFunction" title="ens.exceptions.UnsupportedFunction"><strong>UnsupportedFunction</strong></a> ‚Äì If the resolver does not support
the ‚Äú0x59d1d43c‚Äù interface id</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.ResolverNotFound" title="ens.exceptions.ResolverNotFound"><strong>ResolverNotFound</strong></a> ‚Äì If no resolver is found for the provided name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-ens.async_ens">
<span id="ens-async-ens-module"></span><h4>ens.async_ens module<a class="headerlink" href="#module-ens.async_ens" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py class">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.async_ens.</span></span><span class="sig-name descname"><span class="pre">AsyncENS</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">provider</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AsyncBaseProvider</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ChecksumAddress</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">middleware</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Sequence" title="(in Python v3.13)"><span class="pre">Sequence</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.13)"><span class="pre">Tuple</span></a><span class="p"><span class="pre">[</span></span><span class="pre">Middleware</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#ens.async_ens.AsyncENS" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Quick access to common Ethereum Name Service functions,
like getting the address for a name.</p>
<p>Unless otherwise specified, all addresses are assumed to be a <cite>str</cite> in
<a class="reference external" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md">checksum format</a>,  # blocklint: pragma # noqa: E501
like: <code class="docutils literal notranslate"><span class="pre">&quot;0x314159265dD8dbb310642f98f50C066173C1259b&quot;</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS.from_web3">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_web3</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">w3</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">AsyncWeb3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">addr</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ChecksumAddress</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="index.html#ens.async_ens.AsyncENS" title="ens.async_ens.AsyncENS"><span class="pre">AsyncENS</span></a></span></span><a class="headerlink" href="#ens.async_ens.AsyncENS.from_web3" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Generate an AsyncENS instance with web3</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>w3</strong> (<a class="reference internal" href="index.html#web3.Web3" title="web3.Web3"><em>web3.Web3</em></a>) ‚Äì to infer connection information</p></li>
<li><p><strong>addr</strong> (<em>hex-string</em>) ‚Äì the address of the ENS registry on-chain. If not
provided, defaults to the mainnet ENS registry address.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS.address">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">coin_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><span class="pre">int</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ChecksumAddress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#ens.async_ens.AsyncENS.address" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Look up the Ethereum address that <cite>name</cite> currently points to.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì an ENS name to look up</p></li>
<li><p><strong>coin_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) ‚Äì if provided, look up the address for this coin type</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="index.html#ens.exceptions.InvalidName" title="ens.exceptions.InvalidName"><strong>InvalidName</strong></a> ‚Äì if <cite>name</cite> has invalid syntax</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS.setup_address">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup_address</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name:</span> <span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">address:</span> <span class="pre">Address</span> <span class="pre">|</span> <span class="pre">ChecksumAddress</span> <span class="pre">|</span> <span class="pre">HexAddress</span> <span class="pre">=</span> <span class="pre">&lt;object</span> <span class="pre">object&gt;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coin_type:</span> <span class="pre">int</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transact:</span> <span class="pre">TxParams</span> <span class="pre">|</span> <span class="pre">None</span> <span class="pre">=</span> <span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes" title="(in HexBytes v1.2)"><span class="pre">HexBytes</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#ens.async_ens.AsyncENS.setup_address" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set up the name to point to the supplied address.
The sender of the transaction must own the name, or
its parent name.</p>
<p>Example: If the caller owns <code class="docutils literal notranslate"><span class="pre">parentname.eth</span></code> with no subdomains
and calls this method with <code class="docutils literal notranslate"><span class="pre">sub.parentname.eth</span></code>,
then <code class="docutils literal notranslate"><span class="pre">sub</span></code> will be created as part of this call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name to set up</p></li>
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì name will point to this address, in checksum format.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, erase the record. If not specified, name will point
to the owner‚Äôs address.</p></li>
<li><p><strong>coin_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.13)"><em>int</em></a>) ‚Äì if provided, set up the address for this coin type</p></li>
<li><p><strong>transact</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) ‚Äì the transaction configuration, like in
<a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.InvalidName" title="ens.exceptions.InvalidName"><strong>InvalidName</strong></a> ‚Äì if <code class="docutils literal notranslate"><span class="pre">name</span></code> has invalid syntax</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnauthorizedError" title="ens.exceptions.UnauthorizedError"><strong>UnauthorizedError</strong></a> ‚Äì if <code class="docutils literal notranslate"><span class="pre">'from'</span></code> in <cite>transact</cite> does not own <cite>name</cite></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS.name">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ChecksumAddress</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#ens.async_ens.AsyncENS.name" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Look up the name that the address points to, using a
reverse lookup. Reverse lookup is opt-in for name owners.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>address</strong> (<em>hex-string</em>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS.setup_name">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">address</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ChecksumAddress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transact</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TxParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes" title="(in HexBytes v1.2)"><span class="pre">HexBytes</span></a></span></span><a class="headerlink" href="#ens.async_ens.AsyncENS.setup_name" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set up the address for reverse lookup, aka ‚Äúcaller ID‚Äù.
After successful setup, the method <code class="xref py py-meth docutils literal notranslate"><span class="pre">name()</span></code> will return
<cite>name</cite> when supplied with <cite>address</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name that address will point to</p></li>
<li><p><strong>address</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì address to set up, in checksum format</p></li>
<li><p><strong>transact</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) ‚Äì the transaction configuration, like in
<code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.AddressMismatch" title="ens.exceptions.AddressMismatch"><strong>AddressMismatch</strong></a> ‚Äì if the name does not already point to the address</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.InvalidName" title="ens.exceptions.InvalidName"><strong>InvalidName</strong></a> ‚Äì if <cite>name</cite> has invalid syntax</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnauthorizedError" title="ens.exceptions.UnauthorizedError"><strong>UnauthorizedError</strong></a> ‚Äì if <code class="docutils literal notranslate"><span class="pre">'from'</span></code> in <cite>transact</cite> does not own <cite>name</cite></p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnownedName" title="ens.exceptions.UnownedName"><strong>UnownedName</strong></a> ‚Äì if no one owns <cite>name</cite></p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS.owner">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">owner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ChecksumAddress</span></span></span><a class="headerlink" href="#ens.async_ens.AsyncENS.owner" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Get the owner of a name. Note that this may be different from the
deed holder in the ‚Äò.eth‚Äô registrar. Learn more about the difference
between deed and name ownership in the ENS <a class="reference external" href="http://docs.ens.domains/en/latest/userguide.html#managing-ownership">Managing Ownership docs</a></p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name to look up</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>owner address</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS.setup_owner">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">setup_owner</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_owner</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ChecksumAddress</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transact</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TxParams</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ChecksumAddress</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#ens.async_ens.AsyncENS.setup_owner" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set the owner of the supplied name to <cite>new_owner</cite>.</p>
<p>For typical scenarios, you‚Äôll never need to call this method directly,
simply call <a class="reference internal" href="#ens.async_ens.AsyncENS.setup_name" title="ens.async_ens.AsyncENS.setup_name"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setup_name()</span></code></a> or <a class="reference internal" href="#ens.async_ens.AsyncENS.setup_address" title="ens.async_ens.AsyncENS.setup_address"><code class="xref py py-meth docutils literal notranslate"><span class="pre">setup_address()</span></code></a>. This method does <em>not</em>
set up the name to point to an address.</p>
<p>If <cite>new_owner</cite> is not supplied, then this will assume you
want the same owner as the parent domain.</p>
<p>If the caller owns <code class="docutils literal notranslate"><span class="pre">parentname.eth</span></code> with no subdomains
and calls this method with <code class="docutils literal notranslate"><span class="pre">sub.parentname.eth</span></code>,
then <code class="docutils literal notranslate"><span class="pre">sub</span></code> will be created as part of this call.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name to set up</p></li>
<li><p><strong>new_owner</strong> ‚Äì account that will own <cite>name</cite>. If <code class="docutils literal notranslate"><span class="pre">None</span></code>,
set owner to empty addr.  If not specified, name will point
to the parent domain owner‚Äôs address.</p></li>
<li><p><strong>transact</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) ‚Äì the transaction configuration, like in
<a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.InvalidName" title="ens.exceptions.InvalidName"><strong>InvalidName</strong></a> ‚Äì if <cite>name</cite> has invalid syntax</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnauthorizedError" title="ens.exceptions.UnauthorizedError"><strong>UnauthorizedError</strong></a> ‚Äì if <code class="docutils literal notranslate"><span class="pre">'from'</span></code> in <cite>transact</cite> does not own <cite>name</cite></p></li>
</ul>
</dd>
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>the new owner‚Äôs address</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS.resolver">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">resolver</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">AsyncContract</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.13)"><span class="pre">None</span></a></span></span><a class="headerlink" href="#ens.async_ens.AsyncENS.resolver" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Get the resolver for an ENS name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì The ENS name</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS.get_text">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">get_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></span><a class="headerlink" href="#ens.async_ens.AsyncENS.get_text" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Get the value of a text record by key from an ENS name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name to look up</p></li>
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name‚Äôs text record key</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>ENS name‚Äôs text record value</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)">str</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnsupportedFunction" title="ens.exceptions.UnsupportedFunction"><strong>UnsupportedFunction</strong></a> ‚Äì If the resolver does not support
the ‚Äú0x59d1d43c‚Äù interface id</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.ResolverNotFound" title="ens.exceptions.ResolverNotFound"><strong>ResolverNotFound</strong></a> ‚Äì If no resolver is found for the provided name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ens.async_ens.AsyncENS.set_text">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">set_text</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><span class="pre">str</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">transact</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TxParams</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes" title="(in HexBytes v1.2)"><span class="pre">HexBytes</span></a></span></span><a class="headerlink" href="#ens.async_ens.AsyncENS.set_text" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Set the value of a text record of an ENS name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì ENS name</p></li>
<li><p><strong>key</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì The name of the attribute to set</p></li>
<li><p><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.13)"><em>str</em></a>) ‚Äì Value to set the attribute to</p></li>
<li><p><strong>transact</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.13)"><em>dict</em></a>) ‚Äì The transaction configuration, like in
<a class="reference internal" href="index.html#web3.eth.Eth.send_transaction" title="web3.eth.Eth.send_transaction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">send_transaction()</span></code></a></p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Transaction hash</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>HexBytes</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference internal" href="index.html#ens.exceptions.UnsupportedFunction" title="ens.exceptions.UnsupportedFunction"><strong>UnsupportedFunction</strong></a> ‚Äì If the resolver does not support
the ‚Äú0x59d1d43c‚Äù interface id</p></li>
<li><p><a class="reference internal" href="index.html#ens.exceptions.ResolverNotFound" title="ens.exceptions.ResolverNotFound"><strong>ResolverNotFound</strong></a> ‚Äì If no resolver is found for the provided name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-ens.exceptions">
<span id="ens-exceptions-module"></span><h4>ens.exceptions module<a class="headerlink" href="#module-ens.exceptions" title="Link to this heading">ÔÉÅ</a></h4>
<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.ENSException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">ENSException</span></span><a class="headerlink" href="#ens.exceptions.ENSException" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
<p>Base class for all ENS Errors</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.ENSValueError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">ENSValueError</span></span><a class="headerlink" href="#ens.exceptions.ENSValueError" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">ValueError</span></code></a></p>
<p>An ENS exception wrapper for <cite>ValueError</cite>, for better control over
exception handling.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.ENSTypeError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">ENSTypeError</span></span><a class="headerlink" href="#ens.exceptions.ENSTypeError" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a>, <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#TypeError" title="(in Python v3.13)"><code class="xref py py-class docutils literal notranslate"><span class="pre">TypeError</span></code></a></p>
<p>An ENS exception wrapper for <cite>TypeError</cite>, for better control over
exception handling.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.AddressMismatch">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">AddressMismatch</span></span><a class="headerlink" href="#ens.exceptions.AddressMismatch" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>In order to set up reverse resolution correctly, the ENS name should first
point to the address. This exception is raised if the name does
not currently point to the address.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.InvalidName">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">InvalidName</span></span><a class="headerlink" href="#ens.exceptions.InvalidName" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">IDNAError</span></code>, <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if the provided name does not meet the normalization
standards specified in <a class="reference external" href="https://docs.ens.domains/ens-improvement-proposals/ensip-15-normalization-standard">ENSIP-15</a>.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.UnauthorizedError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">UnauthorizedError</span></span><a class="headerlink" href="#ens.exceptions.UnauthorizedError" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if the sending account is not the owner of the name
you are trying to modify. Make sure to set <code class="docutils literal notranslate"><span class="pre">from</span></code> in the
<code class="docutils literal notranslate"><span class="pre">transact</span></code> keyword argument to the owner of the name.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.UnownedName">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">UnownedName</span></span><a class="headerlink" href="#ens.exceptions.UnownedName" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if you are trying to modify a name that no one owns.</p>
<p>If working on a subdomain, make sure the subdomain gets created
first with <code class="xref py py-meth docutils literal notranslate"><span class="pre">setup_address()</span></code>.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.ResolverNotFound">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">ResolverNotFound</span></span><a class="headerlink" href="#ens.exceptions.ResolverNotFound" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if no resolver was found for the name you are trying to resolve.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.UnsupportedFunction">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">UnsupportedFunction</span></span><a class="headerlink" href="#ens.exceptions.UnsupportedFunction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if a resolver does not support a particular method.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.BidTooLow">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">BidTooLow</span></span><a class="headerlink" href="#ens.exceptions.BidTooLow" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if you bid less than the minimum amount</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.InvalidBidHash">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">InvalidBidHash</span></span><a class="headerlink" href="#ens.exceptions.InvalidBidHash" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if you supply incorrect data to generate the bid hash.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.InvalidLabel">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">InvalidLabel</span></span><a class="headerlink" href="#ens.exceptions.InvalidLabel" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if you supply an invalid label</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.OversizeTransaction">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">OversizeTransaction</span></span><a class="headerlink" href="#ens.exceptions.OversizeTransaction" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if a transaction you are trying to create would cost so
much gas that it could not fit in a block.</p>
<p>For example: when you try to start too many auctions at once.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.UnderfundedBid">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">UnderfundedBid</span></span><a class="headerlink" href="#ens.exceptions.UnderfundedBid" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if you send less wei with your bid than you declared
as your intent to bid.</p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ens.exceptions.ENSValidationError">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ens.exceptions.</span></span><span class="sig-name descname"><span class="pre">ENSValidationError</span></span><a class="headerlink" href="#ens.exceptions.ENSValidationError" title="Link to this definition">ÔÉÅ</a></dt>
<dd><p>Bases: <a class="reference internal" href="#ens.exceptions.ENSException" title="ens.exceptions.ENSException"><code class="xref py py-class docutils literal notranslate"><span class="pre">ENSException</span></code></a></p>
<p>Raised if there is a validation error</p>
</dd></dl>

</section>
</section>
<span id="document-constants"></span><section id="constants">
<span id="id1"></span><h3>Constants<a class="headerlink" href="#constants" title="Link to this heading">ÔÉÅ</a></h3>
<p>The web3.constants module contains commonly used values.</p>
<section id="strings">
<h4>Strings<a class="headerlink" href="#strings" title="Link to this heading">ÔÉÅ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#The Address Zero, which is 20 bytes (40 nibbles) of zero.</span>
<span class="n">web3</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">ADDRESS_ZERO</span>

<span class="c1">#The hexadecimal version of Max uint256.</span>
<span class="n">web3</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">MAX_INT</span>

<span class="c1">#The Hash Zero, which is 32 bytes (64 nibbles) of zero.</span>
<span class="n">web3</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">HASH_ZERO</span>
</pre></div>
</div>
</section>
<section id="int">
<h4>Int<a class="headerlink" href="#int" title="Link to this heading">ÔÉÅ</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#The amount of Wei in one Ether</span>
<span class="n">web3</span><span class="o">.</span><span class="n">constants</span><span class="o">.</span><span class="n">WEI_PER_ETHER</span>
</pre></div>
</div>
</section>
</section>
</div>
<div class="toctree-wrapper compound">
<span id="document-resources"></span><section id="resources-and-learning-material">
<span id="resources"></span><h3>Resources and Learning Material<a class="headerlink" href="#resources-and-learning-material" title="Link to this heading">ÔÉÅ</a></h3>
<p>web3.py and the Ethereum Python ecosystem have an active community of developers and educators.
Here you‚Äôll find libraries, tutorials, examples, courses and other learning material.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Links on this page are community submissions and are not vetted by the team that maintains
web3.py. As always, DYOR (Do Your Own Research).</p>
</div>
<section id="first-steps">
<h4>First Steps<a class="headerlink" href="#first-steps" title="Link to this heading">ÔÉÅ</a></h4>
<p>Resources for those brand new to Ethereum:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://snakecharmers.ethereum.org/a-developers-guide-to-ethereum-pt-1/">A Developer‚Äôs Guide to Ethereum, Pt. 1</a></p></li>
<li><p><a class="reference external" href="https://snakecharmers.ethereum.org/python-ecosystem/">Ethereum Python Ecosystem Tour</a></p></li>
</ul>
</section>
<section id="courses">
<h4>Courses<a class="headerlink" href="#courses" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=umg2fWQX6jM">freeCodeCamp Solidity and Python Course (2022)</a></p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=pZSegEXtgAE">Blockchain Python Programming Tutorial (2019)</a></p></li>
</ul>
</section>
<section id="tutorials">
<h4>Tutorials<a class="headerlink" href="#tutorials" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p>Intro to <a class="reference external" href="https://snakecharmers.ethereum.org/intro-to-ape/">Ape development framework</a></p></li>
<li><p>Intro to <a class="reference external" href="https://snakecharmers.ethereum.org/websocketprovider/">websockets</a> and web3.py</p></li>
<li><p>Intro to <a class="reference external" href="https://snakecharmers.ethereum.org/web3-py-patterns-intro-async/">asynchronous web3.py</a></p></li>
<li><p>Intro to <a class="reference external" href="https://snakecharmers.ethereum.org/web3-py-patterns-multithreading/">threaded web3.py</a></p></li>
<li><p>Sign <a class="reference external" href="https://snakecharmers.ethereum.org/typed-data-message-signing/">typed data messages</a> (EIP 712)</p></li>
<li><p>Look up offchain data via <a class="reference external" href="https://snakecharmers.ethereum.org/web3-py-patterns-off-chain-lookups/">CCIP Read</a></p></li>
<li><p>Configure and <a class="reference external" href="https://snakecharmers.ethereum.org/web3-py-patterns-customizations/">customize web3.py</a></p></li>
<li><p><a class="reference external" href="https://snakecharmers.ethereum.org/web3-py-patterns-decoding-signed-transactions/">Decode a signed transaction</a></p></li>
<li><p>Find a historical contract <a class="reference external" href="https://snakecharmers.ethereum.org/web3py-revert-reason-parsing/">revert reason</a></p></li>
<li><p>Generate a <a class="reference external" href="https://snakecharmers.ethereum.org/web3-py-patterns-mining-addresses/">vanity address</a></p></li>
<li><p>Similate transactions with <a class="reference external" href="https://snakecharmers.ethereum.org/web3-py-patterns-eth_call-overrides/">call state overrides</a></p></li>
<li><p>Configure web3 for <a class="reference external" href="https://web3-ethereum-defi.readthedocs.io/tutorials/multi-rpc-configuration.html">JSON-RPC fallback and MEV blocker providers</a></p></li>
</ul>
</section>
<section id="conference-presentations-and-videos">
<h4>Conference Presentations and Videos<a class="headerlink" href="#conference-presentations-and-videos" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=hj6ubyyE_TY">Web3.Py - Now And Near Future by Marc Garreau (2022, 15 mins)</a></p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=4HOU3z0LoDg">Python and DeFi by Curve Finance (2022, 15 mins)</a></p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=cFB1BGeCpn0">Working with MetaMask in Python by Rishab Kattimani (2022, 15 mins)</a></p></li>
</ul>
</section>
<section id="smart-contract-programming-languages">
<h4>Smart Contract Programming Languages<a class="headerlink" href="#smart-contract-programming-languages" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.vyperlang.org/en/stable/">Vyper</a> - Contract-oriented, pythonic programming language that targets EVM</p></li>
</ul>
</section>
<section id="frameworks-and-tooling">
<h4>Frameworks and Tooling<a class="headerlink" href="#frameworks-and-tooling" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://www.apeworx.io/">Ape</a> - The Ethereum development framework for Python Developers, Data Scientists, and Security Professionals</p></li>
<li><p><a class="reference external" href="https://github.com/vyperlang/titanoboa">Titanoboa</a> - A Vyper interpreter and testing framework</p></li>
<li><p><a class="reference external" href="https://github.com/Ackee-Blockchain/wake">Wake</a> - A Python-based development and testing framework for Solidity</p></li>
<li><p><a class="reference external" href="https://github.com/eth-brownie/brownie">Brownie</a> - [No longer actively maintained] A Python-based development and testing framework for smart contracts targeting EVM</p></li>
</ul>
</section>
<section id="libraries">
<h4>Libraries<a class="headerlink" href="#libraries" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/tradingstrategy-ai/web3-ethereum-defi">Web3 Ethereum DeFi</a> - Library for DeFi trading and protocols (Uniswap, PancakeSwap, Sushi, Aave, Chainlink)</p></li>
<li><p><a class="reference external" href="https://github.com/elliottech/lighter-v1-python">lighter-v1-python</a> - Lighter.xyz DEX client for Python</p></li>
<li><p><a class="reference external" href="https://uniswap-python.com/">uniswap-python</a> - Library lets you easily retrieve prices and make trades on all Uniswap versions.</p></li>
<li><p><a class="reference external" href="https://github.com/bitlogik/pyWalletConnect">pyWalletConnect</a> - WalletConnect implementation for wallets in Python</p></li>
<li><p><a class="reference external" href="https://github.com/dydxprotocol/dydx-v3-python">dydx-v3-python</a> - Python client for dYdX v3</p></li>
<li><p><a class="reference external" href="https://github.com/lidofinance/lido-python-sdk">Lido Python SDK</a> - Library with which you can get all Lido validator‚Äôs signatures and check their validity</p></li>
</ul>
</section>
<section id="applications">
<h4>Applications<a class="headerlink" href="#applications" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/curvefi?q=&amp;type=all&amp;language=python&amp;sort=">Curve Finance</a></p></li>
<li><p><a class="reference external" href="https://github.com/yearn?q=&amp;type=all&amp;language=python&amp;sort=">Yearn Finance</a></p></li>
<li><p><a class="reference external" href="https://github.com/stakewise/oracle/">StakeWise Oracle</a></p></li>
</ul>
</section>
<section id="hackathon-helpers">
<h4>Hackathon Helpers<a class="headerlink" href="#hackathon-helpers" title="Link to this heading">ÔÉÅ</a></h4>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/wolovim/ape-hackathon-kit">ape-hackathon-kit</a> - Ape project template with a web front-end (Next.js, Tailwind, RainbowKit, wagmi)</p></li>
<li><p><a class="reference external" href="https://github.com/wolovim/eth-flogger">eth-flogger</a> - Sample web app utilizing async web3.py, Flask, SQLite, Sourcify</p></li>
<li><p><a class="reference external" href="https://github.com/wolovim/temo">Temo</a> - Sample terminal app utilizing async web3py, Textual, Anvil</p></li>
<li><p><a class="reference external" href="https://github.com/wolovim/web3py-discord-bot">web3py-discord-bot</a> - Sample Discord bot utilizing websockets, <code class="docutils literal notranslate"><span class="pre">eth_subscribe</span></code>, and discord.py</p></li>
<li><p><a class="reference external" href="https://github.com/wolovim/py-signer">py-signer</a> - Demo of typed data message signing (EIP-712) with eth-account and Ape</p></li>
</ul>
</section>
</section>
<span id="document-contributing"></span><section id="contributing">
<span id="id1"></span><h3>Contributing<a class="headerlink" href="#contributing" title="Link to this heading">ÔÉÅ</a></h3>
<p>Thanks for your interest in contributing to web3.py! Read on to learn what
would be helpful and how to go about it. If you get stuck along the way, reach
for help in the <a class="reference external" href="https://discord.gg/GHryRvPB84">Python Discord server</a>.</p>
<section id="how-to-help">
<h4>How to Help<a class="headerlink" href="#how-to-help" title="Link to this heading">ÔÉÅ</a></h4>
<p>Without code:</p>
<ul class="simple">
<li><p>Answer user questions within GitHub issues, Stack Overflow, or the <a class="reference external" href="https://discord.gg/GHryRvPB84">Python Discord server</a>.</p></li>
<li><p>Write or record tutorial content.</p></li>
<li><p>Improve our documentation (including typo fixes).</p></li>
<li><p><a class="reference external" href="https://github.com/ethereum/web3.py/issues/new">Open an issue</a> on GitHub to document a bug. Include as much detail as possible, e.g., how to reproduce the issue and any exception messages.</p></li>
</ul>
<p>With code:</p>
<ul class="simple">
<li><p>Fix a bug that has been reported in an issue.</p></li>
<li><p>Add a feature that has been documented in an issue.</p></li>
<li><p>Add a missing test case.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>Before you start:</strong> always ask if a change would be desirable or let us know that
you plan to work on something! We don‚Äôt want to waste your time on changes we can‚Äôt
accept or duplicated effort.</p>
</div>
</section>
<section id="your-development-environment">
<h4>Your Development Environment<a class="headerlink" href="#your-development-environment" title="Link to this heading">ÔÉÅ</a></h4>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use of a virtual environment is strongly advised for minimizing dependency issues. See
<a class="reference external" href="https://realpython.com/effective-python-environment/#virtual-environments">this article</a>
for usage patterns.</p>
</div>
<p>All pull requests are made from a fork of the repository; use the GitHub UI to create a fork.
web3.py depends on <a class="reference external" href="https://gist.github.com/gitaarik/8735255">submodules</a>, so when you clone
your fork to your local machine, include the <code class="docutils literal notranslate"><span class="pre">--recursive</span></code> flag:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>clone<span class="w"> </span>--recursive<span class="w"> </span>https://github.com/&lt;your-github-username&gt;/web3.py.git
$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>web3.py
</pre></div>
</div>
<p>Finally, install all development dependencies:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[dev]&quot;</span>
</pre></div>
</div>
<section id="using-docker">
<h5>Using Docker<a class="headerlink" href="#using-docker" title="Link to this heading">ÔÉÅ</a></h5>
<p>Developing within Docker is not required, but if you prefer that workflow, use
the <em>sandbox</em> container provided in the <strong>docker-compose.yml</strong> file.</p>
<p>To start up the test environment, run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docker<span class="w"> </span>compose<span class="w"> </span>up<span class="w"> </span>-d
</pre></div>
</div>
<p>This will build a Docker container set up with an environment to run the
Python test code.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This container does not have <cite>go-ethereum</cite> installed, so you cannot run
the go-ethereum test suite.</p>
</div>
<p>To run the Python tests from your local machine:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docker<span class="w"> </span>compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>sandbox<span class="w"> </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;pytest -n 4 -f -k &quot;not goethereum&quot;&#39;</span>
</pre></div>
</div>
<p>You can run arbitrary commands inside the Docker container by using the
<cite>bash -c</cite> prefix.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docker<span class="w"> </span>compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>sandbox<span class="w"> </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;&#39;</span>
</pre></div>
</div>
<p>Or, if you would like to open a session to the container, run:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>docker<span class="w"> </span>compose<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>sandbox<span class="w"> </span>bash
</pre></div>
</div>
</section>
</section>
<section id="code-style">
<h4>Code Style<a class="headerlink" href="#code-style" title="Link to this heading">ÔÉÅ</a></h4>
<p>We value code consistency. To ensure your contribution conforms to the style
being used in this project, we encourage you to read our <a class="reference external" href="https://github.com/ethereum/snake-charmers-tactical-manual/blob/main/style-guide.md">style guide</a>.</p>
<p>We use Black for linting. To ignore the commits that introduced Black in
git history, you can configure your git environment like so:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>config<span class="w"> </span>blame.ignoreRevsFile<span class="w"> </span>.git-blame-ignore-revs
</pre></div>
</div>
</section>
<section id="type-hints">
<h4>Type Hints<a class="headerlink" href="#type-hints" title="Link to this heading">ÔÉÅ</a></h4>
<p>This code base makes use of <a class="reference external" href="https://www.python.org/dev/peps/pep-0484/">type hints</a>. Type hints make it easy to prevent
certain types of bugs, enable richer tooling, and enhance the documentation,
making the code easier to follow.</p>
<p>All new code is required to include type hints, with the exception of tests.</p>
<p>All parameters, as well as the return type of functions, are expected to be typed,
with the exception of <code class="docutils literal notranslate"><span class="pre">self</span></code> and <code class="docutils literal notranslate"><span class="pre">cls</span></code> as seen in the following example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wrapped_db</span><span class="p">:</span> <span class="n">DatabaseAPI</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">wrapped_db</span> <span class="o">=</span> <span class="n">wrapped_db</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="running-the-tests">
<h4>Running The Tests<a class="headerlink" href="#running-the-tests" title="Link to this heading">ÔÉÅ</a></h4>
<p>A great way to explore the code base is to run the tests.</p>
<p>First, install the test dependencies:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[test]&quot;</span>
</pre></div>
</div>
<p>You can run all tests with:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pytest
</pre></div>
</div>
<p>However, running the entire test suite takes a very long time and is generally impractical.
Typically, you‚Äôll just want to run a subset instead, like:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pytest<span class="w"> </span>tests/core/eth-module/test_accounts.py
</pre></div>
</div>
<p>You can use <code class="docutils literal notranslate"><span class="pre">tox</span></code> to run all the tests for a given version of Python:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>tox<span class="w"> </span>-e<span class="w"> </span>py38-core
</pre></div>
</div>
<p>Linting is also performed by the CI. You can save yourself some time by checking for
linting errors locally:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>make<span class="w"> </span>lint
</pre></div>
</div>
<p>It is important to understand that each pull request must pass the full test
suite as part of the CI check. This test suite will run in the CI anytime a
pull request is opened or updated.</p>
</section>
<section id="writing-tests">
<h4>Writing Tests<a class="headerlink" href="#writing-tests" title="Link to this heading">ÔÉÅ</a></h4>
<p>We strongly encourage contributors to write good tests for their code as
part of the code review process. This helps ensure that your code is doing
what it should be doing.</p>
<p>We strongly encourage you to use our existing tests for both guidance and
homogeneity / consistency across our tests. We use <code class="docutils literal notranslate"><span class="pre">pytest</span></code> for our tests.
For more specific pytest guidance, please refer to the <a class="reference external" href="https://docs.pytest.org/en/latest">pytest documentation</a>.</p>
<p>Within the <code class="docutils literal notranslate"><span class="pre">pytest</span></code> scope, <code class="file docutils literal notranslate"><span class="pre">conftest.py</span></code> files are used for common code
shared between modules that exist within the same directory as that particular
<code class="file docutils literal notranslate"><span class="pre">conftest.py</span></code> file.</p>
<section id="unit-testing-and-eth-tester-tests">
<h5>Unit Testing and eth-tester Tests<a class="headerlink" href="#unit-testing-and-eth-tester-tests" title="Link to this heading">ÔÉÅ</a></h5>
<p>Our unit tests are grouped together with tests against the <code class="docutils literal notranslate"><span class="pre">eth-tester</span></code> library,
using the <code class="docutils literal notranslate"><span class="pre">py-evm</span></code> library as a backend, via the <code class="docutils literal notranslate"><span class="pre">EthereumTesterProvider</span></code>.</p>
<p>These tests live under appropriately named child directories within the
<code class="docutils literal notranslate"><span class="pre">/tests</span></code> directory. The core of these tests live under <code class="docutils literal notranslate"><span class="pre">/tests/core</span></code>.
Do your best to follow the existing structure when adding a test and make sure
that its location makes sense.</p>
</section>
<section id="integration-testing">
<h5>Integration Testing<a class="headerlink" href="#integration-testing" title="Link to this heading">ÔÉÅ</a></h5>
<p>Our integration test suite setup lives under the <code class="docutils literal notranslate"><span class="pre">/tests/integration</span></code> directory.
The integration test suite is dependent on what we call ‚Äúfixtures‚Äù (not to be
confused with pytest fixtures). These zip file fixtures, which also live in the
<code class="docutils literal notranslate"><span class="pre">/tests/integration</span></code> directory, are configured to run the specific client we are
testing against along with a genesis configuration that gives our tests some
pre-determined useful objects (like unlocked, pre-loaded accounts) to be able to
interact with the client when we run our tests.</p>
<p>The parent <code class="docutils literal notranslate"><span class="pre">/integration</span></code> directory houses some common configuration shared across
all client tests, whereas the <code class="docutils literal notranslate"><span class="pre">/go_ethereum</span></code> directory houses common code to be
shared across geth-specific provider tests. Though the setup and run configurations
exist across the different files within <code class="docutils literal notranslate"><span class="pre">/tests/integration</span></code>, our integration module
tests are written across different files within <code class="docutils literal notranslate"><span class="pre">/web3/_utils/module_testing</span></code>.</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">common.py</span></code> files within the client directories contain code that is shared across
all provider tests (http, ipc, and ws). This is mostly used to override tests that span
across all providers.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">conftest.py</span></code> files within each of these directories contain mostly code that
can be <em>used</em> by all test files that exist within the same directory or subdirectories
of the <code class="file docutils literal notranslate"><span class="pre">conftest.py</span></code> file. This is mostly used to house pytest fixtures to be
shared among our tests. Refer to the <a class="reference external" href="https://docs.pytest.org/en/latest/how-to/fixtures.html">pytest documentation on fixtures</a> for more
information.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_{client}_{provider}.py</span></code> files (e.g. <code class="file docutils literal notranslate"><span class="pre">test_goethereum_http.py</span></code>) are where
client-and-provider-specific test configurations exist. This is mostly used to
override tests specific to the provider type for the respective client.</p></li>
</ul>
</section>
<section id="working-with-test-contracts">
<h5>Working With Test Contracts<a class="headerlink" href="#working-with-test-contracts" title="Link to this heading">ÔÉÅ</a></h5>
<p>Contracts used for testing exist under <code class="docutils literal notranslate"><span class="pre">web3/_utils/contract_sources</span></code>. These contracts
get compiled via the <code class="docutils literal notranslate"><span class="pre">compile_contracts.py</span></code> script in the same directory. To use
this script, simply pass the Solidity version to be used to compile the contracts as an
argument at the command line.</p>
<dl class="simple">
<dt>Arguments for the script are:</dt><dd><dl class="simple">
<dt>-v or ‚Äìversion         Solidity version to be used to compile the contracts. If</dt><dd><p>blank, the script uses the latest available version from
solcx.</p>
</dd>
<dt>-f or ‚Äìfilename        If left blank, all .sol files will be compiled and the</dt><dd><p>respective contract data will be generated. Pass in a
specific <code class="docutils literal notranslate"><span class="pre">.sol</span></code> filename here to compile just one file.</p>
</dd>
</dl>
</dd>
</dl>
<p>To run the script, you will need the <code class="docutils literal notranslate"><span class="pre">py-solc-x</span></code> library for compiling the files
as well as <code class="docutils literal notranslate"><span class="pre">black</span></code> for code formatting. You can install those independently or
install the full <code class="docutils literal notranslate"><span class="pre">[dev]</span></code> package extra as shown below.</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span><span class="s2">&quot;web3[dev]&quot;</span>
</pre></div>
</div>
<p>The following example compiles all the contracts and generates their respective
contract data that is used across our test files for the test suites. This data gets
generated within the <code class="docutils literal notranslate"><span class="pre">contract_data</span></code> subdirectory within the <code class="docutils literal notranslate"><span class="pre">contract_sources</span></code>
folder.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../web3.py/web3/_utils/contract_sources
$<span class="w"> </span>python<span class="w"> </span>compile_contracts.py<span class="w"> </span>-v<span class="w"> </span><span class="m">0</span>.8.17
Compiling<span class="w"> </span>OffchainLookup
...
...
reformatted<span class="w"> </span>...
</pre></div>
</div>
<p>To compile and generate contract data for only one <code class="docutils literal notranslate"><span class="pre">.sol</span></code> file, specify using the
filename with the <code class="docutils literal notranslate"><span class="pre">-f</span></code> (or <code class="docutils literal notranslate"><span class="pre">--filename</span></code>) argument flag.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">cd</span><span class="w"> </span>../web3.py/web3/_utils/contract_sources
$<span class="w"> </span>python<span class="w"> </span>compile_contracts.py<span class="w"> </span>-v<span class="w"> </span><span class="m">0</span>.8.17<span class="w"> </span>-f<span class="w"> </span>OffchainLookup.sol
Compiling<span class="w"> </span>OffchainLookup.sol
reformatted<span class="w"> </span>...
</pre></div>
</div>
<p>If there is any contract data that is not generated via the script but is important
to pass on to the integration tests, the <code class="docutils literal notranslate"><span class="pre">_custom_contract_data.py</span></code> file within the
<code class="docutils literal notranslate"><span class="pre">contract_data</span></code> subdirectory can be used to store that information when appropriate.</p>
<p>Be sure to re-generate the integration test fixture after running the script to update
the contract bytecodes for the integration test suite - see the
<a class="reference internal" href="#generating-fixtures"><span class="std std-ref">Generating New Fixtures</span></a> section below.</p>
</section>
</section>
<section id="manual-testing">
<h4>Manual Testing<a class="headerlink" href="#manual-testing" title="Link to this heading">ÔÉÅ</a></h4>
<p>To import and test an unreleased version of web3.py in another context,
you can install it from your development directory:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>../path/to/web3py
</pre></div>
</div>
</section>
<section id="documentation">
<h4>Documentation<a class="headerlink" href="#documentation" title="Link to this heading">ÔÉÅ</a></h4>
<p>Good documentation will lead to quicker adoption and happier users. Please
check out our guide on <a class="reference external" href="https://github.com/ethereum/snake-charmers-tactical-manual/blob/main/documentation.md">how to create documentation</a> for the Python Ethereum
ecosystem.</p>
<p>Pull requests generate their own preview of the latest documentation at
<code class="docutils literal notranslate"><span class="pre">https://web3py--&lt;pr-number&gt;.org.readthedocs.build/en/&lt;pr-number&gt;/</span></code>.</p>
</section>
<section id="pull-requests">
<h4>Pull Requests<a class="headerlink" href="#pull-requests" title="Link to this heading">ÔÉÅ</a></h4>
<p>It‚Äôs a good idea to make pull requests early on. A pull request represents the
start of a discussion, and doesn‚Äôt necessarily need to be the final, finished
submission.</p>
<p>See GitHub‚Äôs documentation for <a class="reference external" href="https://help.github.com/articles/about-pull-requests/">working on pull requests</a>.</p>
<p>Once you‚Äôve made a pull request take a look at the Circle CI build status in
the GitHub interface and make sure all tests are passing. In general, pull
requests that do not pass the CI build yet won‚Äôt get reviewed unless explicitly
requested.</p>
<p>If the pull request introduces changes that should be reflected in the release
notes, please add a <strong>newsfragment</strong> file as explained
<a class="reference external" href="https://github.com/ethereum/web3.py/blob/main/newsfragments/README.md">here</a>.</p>
<p>If possible, the change to the release notes file should be included in the
commit that introduces the feature or bugfix.</p>
</section>
<section id="generating-new-fixtures">
<span id="generating-fixtures"></span><h4>Generating New Fixtures<a class="headerlink" href="#generating-new-fixtures" title="Link to this heading">ÔÉÅ</a></h4>
<p>Our integration tests make use of Geth private networks.
When new versions of the client software are introduced, new fixtures should be
generated.</p>
<p>Before generating new fixtures, make sure you have the test dependencies installed:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s2">&quot;.[test]&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A ‚Äúfixture‚Äù is a pre-synced network. It‚Äôs the result of configuring and running
a client, deploying the test contracts, and saving the resulting state for
testing web3.py functionality against.</p>
</div>
<section id="geth-fixtures">
<h5>Geth Fixtures<a class="headerlink" href="#geth-fixtures" title="Link to this heading">ÔÉÅ</a></h5>
<ol class="arabic">
<li><p>Install the desired Geth version on your machine locally. We recommend <a class="reference external" href="https://github.com/ethereum/py-geth">py-geth</a> for
this purpose, because it enables you to easily manage multiple versions of Geth.</p>
<p>Note that <code class="docutils literal notranslate"><span class="pre">py-geth</span></code> will need updating to support each new Geth version as well.
Adding newer Geth versions to py-geth is straightforward; see past commits for a template.</p>
<p>If py-geth has the Geth version you need, install that version locally. For example:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>python<span class="w"> </span>-m<span class="w"> </span>geth.install<span class="w"> </span>v1.14.5
</pre></div>
</div>
</li>
<li><p>Specify the Geth binary and run the fixture creation script (from within the web3.py directory):</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">GETH_BINARY</span><span class="o">=</span>~/.py-geth/geth-v1.14.5/bin/geth<span class="w"> </span>python<span class="w"> </span>./tests/integration/generate_fixtures/go_ethereum.py
</pre></div>
</div>
</li>
<li><p>The output of this script is your fixture, a zip file, which is now stored in <code class="docutils literal notranslate"><span class="pre">/tests/integration/</span></code>.
Update the <code class="docutils literal notranslate"><span class="pre">/tests/integration/go_ethereum/conftest.py</span></code> and
<code class="docutils literal notranslate"><span class="pre">/web3/tools/benchmark/node.py</span></code> files to point to this new fixture. Delete the old
fixture.</p></li>
<li><p>Run the tests. To ensure that the tests run with the correct Geth version locally,
you may again include the <code class="docutils literal notranslate"><span class="pre">GETH_BINARY</span></code> environment variable.</p></li>
<li><p>Update the <code class="docutils literal notranslate"><span class="pre">geth_version</span></code> and <code class="docutils literal notranslate"><span class="pre">pygeth_version</span></code> parameter defaults in
<code class="docutils literal notranslate"><span class="pre">/.circleci/config.yml</span></code> to match the <code class="docutils literal notranslate"><span class="pre">go-ethereum</span></code> version used to generate the
test fixture and the <code class="docutils literal notranslate"><span class="pre">py-geth</span></code> version that supports installing it.</p></li>
</ol>
</section>
<section id="ci-testing-with-a-nightly-geth-build">
<h5>CI Testing With a Nightly Geth Build<a class="headerlink" href="#ci-testing-with-a-nightly-geth-build" title="Link to this heading">ÔÉÅ</a></h5>
<p>Occasionally you‚Äôll want to have CI run the test suite against an unreleased version of
Geth - e.g. to test upcoming hard fork changes. The workflow described below is for
testing only, as updates will only be merged into main once the Geth release is
published and the test runs are updated to use the new stable version.</p>
<ol class="arabic simple">
<li><p>Configure <code class="docutils literal notranslate"><span class="pre">tests/integration/generate_fixtures/go_ethereum/common.py</span></code> as needed.</p></li>
<li><p>Geth automagically compiles new builds for every commit that gets merged into the codebase.
Download the desired build from the <a class="reference external" href="https://geth.ethereum.org/downloads/">develop builds</a>.</p></li>
<li><p>Build your test fixture, passing in the binary you just downloaded via <code class="docutils literal notranslate"><span class="pre">GETH_BINARY</span></code>. Don‚Äôt forget
to update the <code class="docutils literal notranslate"><span class="pre">/tests/integration/go_ethereum/conftest.py</span></code> file to point to your new fixture.</p></li>
<li><p>Our CI runs on Ubuntu, so download the corresponding 64-bit Linux
<a class="reference external" href="https://geth.ethereum.org/downloads/">develop build</a>, then
add it to the root of your web3.py directory. Rename the binary <code class="docutils literal notranslate"><span class="pre">custom_geth</span></code>.</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">.circleci/config.yml</span></code>, update the <code class="docutils literal notranslate"><span class="pre">geth_version</span></code> pipeline parameter to
‚Äúcustom‚Äù. This will trigger the custom Geth build to be used in the CI test suite.</p></li>
<li><p>Create a PR and let CI do its thing.</p></li>
</ol>
</section>
</section>
<section id="releasing">
<h4>Releasing<a class="headerlink" href="#releasing" title="Link to this heading">ÔÉÅ</a></h4>
<section id="final-test-before-each-release">
<h5>Final Test Before Each Release<a class="headerlink" href="#final-test-before-each-release" title="Link to this heading">ÔÉÅ</a></h5>
<p>Before releasing a new version, build and test the package that will be released.
There‚Äôs a script to build and install the wheel locally, then generate a temporary
virtualenv for smoke testing:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>git<span class="w"> </span>checkout<span class="w"> </span>main<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>git<span class="w"> </span>pull

$<span class="w"> </span>make<span class="w"> </span>package

<span class="c1"># in another shell, navigate to the virtualenv mentioned in output of ^</span>

<span class="c1"># load the virtualenv with the packaged web3.py release</span>
$<span class="w"> </span><span class="nb">source</span><span class="w"> </span>package-smoke-test/bin/activate

<span class="c1"># smoke test the release</span>
$<span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>ipython
$<span class="w"> </span>ipython
&gt;&gt;&gt;<span class="w"> </span>from<span class="w"> </span>web3<span class="w"> </span>import<span class="w"> </span>Web3,<span class="w"> </span>IPCProvider
&gt;&gt;&gt;<span class="w"> </span><span class="nv">w3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Web3<span class="o">(</span>IPCProvider<span class="o">(</span>provider_url<span class="o">))</span>
&gt;&gt;&gt;<span class="w"> </span>w3.is_connected<span class="o">()</span>
&gt;&gt;&gt;<span class="w"> </span>...
</pre></div>
</div>
</section>
<section id="verify-the-latest-documentation">
<h5>Verify The Latest Documentation<a class="headerlink" href="#verify-the-latest-documentation" title="Link to this heading">ÔÉÅ</a></h5>
<p>To preview the documentation that will get published:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>make<span class="w"> </span>docs
</pre></div>
</div>
</section>
<section id="preview-the-release-notes">
<h5>Preview The Release Notes<a class="headerlink" href="#preview-the-release-notes" title="Link to this heading">ÔÉÅ</a></h5>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>towncrier<span class="w"> </span>build<span class="w"> </span>--draft
</pre></div>
</div>
</section>
<section id="compile-the-release-notes">
<h5>Compile The Release Notes<a class="headerlink" href="#compile-the-release-notes" title="Link to this heading">ÔÉÅ</a></h5>
<p>After confirming that the release package looks okay, compile the release notes:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>make<span class="w"> </span>notes<span class="w"> </span><span class="nv">bump</span><span class="o">=</span><span class="nv">$$</span>VERSION_PART_TO_BUMP<span class="nv">$$</span>
</pre></div>
</div>
<p>You may need to fix up any broken release note fragments before committing. Keep
running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">build-docs</span></code> until it passes, then commit and carry on.</p>
</section>
<section id="push-the-release-to-github-pypi">
<h5>Push The Release to GitHub &amp; PyPI<a class="headerlink" href="#push-the-release-to-github-pypi" title="Link to this heading">ÔÉÅ</a></h5>
<p>After committing the compiled release notes and pushing them to the main
branch, release a new version:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>make<span class="w"> </span>release<span class="w"> </span><span class="nv">bump</span><span class="o">=</span><span class="nv">$$</span>VERSION_PART_TO_BUMP<span class="nv">$$</span>
</pre></div>
</div>
</section>
<section id="which-version-part-to-bump">
<h5>Which Version Part to Bump<a class="headerlink" href="#which-version-part-to-bump" title="Link to this heading">ÔÉÅ</a></h5>
<p>The version format for this repo is <code class="docutils literal notranslate"><span class="pre">{major}.{minor}.{patch}</span></code> for
stable, and <code class="docutils literal notranslate"><span class="pre">{major}.{minor}.{patch}-{stage}.{devnum}</span></code> for unstable
(<code class="docutils literal notranslate"><span class="pre">stage</span></code> can be alpha or beta).</p>
<p>During a release, specify which part to bump, like
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">release</span> <span class="pre">bump=minor</span></code> or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">release</span> <span class="pre">bump=devnum</span></code>.</p>
<p>If you are in an alpha version, <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">release</span> <span class="pre">bump=stage</span></code> will bump to beta.
If you are in a beta version, <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">release</span> <span class="pre">bump=stage</span></code> will bump to a stable
version.</p>
<p>To issue an unstable version when the current version is stable, specify the new
version explicitly, like <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">release</span> <span class="pre">bump=&quot;--new-version</span> <span class="pre">4.0.0-alpha.1</span> <span class="pre">devnum&quot;</span></code>.</p>
</section>
</section>
</section>
<span id="document-code_of_conduct"></span><section id="code-of-conduct">
<h3>Code of Conduct<a class="headerlink" href="#code-of-conduct" title="Link to this heading">ÔÉÅ</a></h3>
<section id="our-pledge">
<h4>Our Pledge<a class="headerlink" href="#our-pledge" title="Link to this heading">ÔÉÅ</a></h4>
<p>In the interest of fostering an open and welcoming environment, we as
contributors and maintainers pledge to making participation in our project and
our community a harassment-free experience for everyone, regardless of age, body
size, disability, ethnicity, gender identity and expression, level of experience,
education, socio-economic status, nationality, personal appearance, race,
religion, or sexual identity and orientation.</p>
</section>
<section id="our-standards">
<h4>Our Standards<a class="headerlink" href="#our-standards" title="Link to this heading">ÔÉÅ</a></h4>
<p>Examples of behavior that contributes to creating a positive environment
include:</p>
<ul class="simple">
<li><p>Using welcoming and inclusive language</p></li>
<li><p>Being respectful of differing viewpoints and experiences</p></li>
<li><p>Gracefully accepting constructive criticism</p></li>
<li><p>Focusing on what is best for the community</p></li>
<li><p>Showing empathy towards other community members</p></li>
</ul>
<p>Examples of unacceptable behavior by participants include:</p>
<ul class="simple">
<li><p>The use of sexualized language or imagery and unwelcome sexual attention or
advances</p></li>
<li><p>Trolling, insulting/derogatory comments, and personal or political attacks</p></li>
<li><p>Public or private harassment</p></li>
<li><p>Publishing others‚Äô private information, such as a physical or electronic
address, without explicit permission</p></li>
<li><p>Other conduct which could reasonably be considered inappropriate in a
professional setting</p></li>
</ul>
</section>
<section id="our-responsibilities">
<h4>Our Responsibilities<a class="headerlink" href="#our-responsibilities" title="Link to this heading">ÔÉÅ</a></h4>
<p>Project maintainers are responsible for clarifying the standards of acceptable
behavior and are expected to take appropriate and fair corrective action in
response to any instances of unacceptable behavior.</p>
<p>Project maintainers have the right and responsibility to remove, edit, or
reject comments, commits, code, wiki edits, issues, and other contributions
that are not aligned to this Code of Conduct, or to ban temporarily or
permanently any contributor for other behaviors that they deem inappropriate,
threatening, offensive, or harmful.</p>
</section>
<section id="scope">
<h4>Scope<a class="headerlink" href="#scope" title="Link to this heading">ÔÉÅ</a></h4>
<p>This Code of Conduct applies both within project spaces and in public spaces
when an individual is representing the project or its community. Examples of
representing a project or community include using an official project e-mail
address, posting via an official social media account, or acting as an appointed
representative at an online or offline event. Representation of a project may be
further defined and clarified by project maintainers.</p>
</section>
<section id="enforcement">
<h4>Enforcement<a class="headerlink" href="#enforcement" title="Link to this heading">ÔÉÅ</a></h4>
<p>Instances of abusive, harassing, or otherwise unacceptable behavior may be
reported by contacting the project team at <a class="reference external" href="mailto:snakecharmers&#37;&#52;&#48;ethereum&#46;org">snakecharmers<span>&#64;</span>ethereum<span>&#46;</span>org</a>. All
complaints will be reviewed and investigated and will result in a response that
is deemed necessary and appropriate to the circumstances. The project team is
obligated to maintain confidentiality with regard to the reporter of an incident.
Further details of specific enforcement policies may be posted separately.</p>
<p>Project maintainers who do not follow or enforce the Code of Conduct in good
faith may face temporary or permanent repercussions as determined by other
members of the project‚Äôs leadership.</p>
</section>
<section id="attribution">
<h4>Attribution<a class="headerlink" href="#attribution" title="Link to this heading">ÔÉÅ</a></h4>
<p>This Code of Conduct is adapted from the <a class="reference external" href="https://www.contributor-covenant.org">Contributor Covenant</a>, version 1.4,
available at <a class="reference external" href="https://www.contributor-covenant.org/version/1/4/code-of-conduct.html">https://www.contributor-covenant.org/version/1/4/code-of-conduct.html</a></p>
</section>
</section>
</div>
</section>
<section id="indices-and-tables">
<h2>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Link to this heading">ÔÉÅ</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2016-2024, The Ethereum Foundation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book fa-element"> RTD </span>

    <span class="fa fa-element">
    <input class="container_toggle" type="checkbox" id="switch" name="mode">
    <label for="switch"></label>
    </span>

    <span class="fa fa-v fa-element"> v:  <span class="fa fa-caret-down"></span></span>

    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Versions</dt> 
        </dl>
        <dl>
            <dt>Downloads</dt> 
        </dl>
        <dl>
            
            <dt>On Read the Docs</dt>
            <dd>
                <a href="///projects//?fromdocs=">Project Home</a>
            </dd>
            <dd>
                <a href="///builds//?fromdocs=">Builds</a>
            </dd>
        </dl>
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>